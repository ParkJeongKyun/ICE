(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6885],{3685:(e,t,n)=>{"use strict";n.d(t,{Ar:()=>c,Bc:()=>ew,Gw:()=>el,OO:()=>eM,_5:()=>s,et:()=>a,wm:()=>ep,yU:()=>eS});var r=n(45395),i=n(88082),o=n(14563);class s{constructor(e,t,n,r){this.state=e,this.pos=t,this.explicit=n,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=(0,o.mv)(this.state).resolveInner(this.pos,-1);for(;t&&0>e.indexOf(t.name);)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(d(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,n){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function l(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function a(e){let t=e.map(e=>"string"==typeof e?{label:e}:e),[n,r]=t.every(e=>/^\w+$/.test(e.label))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let r=l(t)+l(n)+"*$";return[RegExp("^"+r),new RegExp(r)]}(t);return e=>{let i=e.matchBefore(r);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:n}:null}}function c(e,t){return n=>{for(let t=(0,o.mv)(n.state).resolveInner(n.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(n)}}class h{constructor(e,t,n,r){this.completion=e,this.source=t,this.match=n,this.score=r}}function u(e){return e.selection.main.from}function d(e,t){var n;let{source:r}=e,i=t&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!=(n=e.flags)?n:e.ignoreCase?"i":""):e}let p=r.YH.define(),f=new WeakMap;function m(e){if(!Array.isArray(e))return e;let t=f.get(e);return t||f.set(e,t=a(e)),t}let g=r.Pe.define(),y=r.Pe.define();class v{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=(0,r.vS)(e,t),i=(0,r.Fh)(n);this.chars.push(n);let o=e.slice(t,t+i),s=o.toUpperCase();this.folded.push((0,r.vS)(s==o?o.toLowerCase():s,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:i,precise:o,byWord:s}=this;if(1==t.length){let i=(0,r.vS)(e,0),o=(0,r.Fh)(i),s=o==e.length?0:-100;if(i==t[0]);else{if(i!=n[0])return null;s+=-200}return this.ret(s,[0,o])}let l=e.indexOf(this.pattern);if(0==l)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,c=0;if(l<0){for(let o=0,s=Math.min(e.length,200);o<s&&c<a;){let s=(0,r.vS)(e,o);(s==t[c]||s==n[c])&&(i[c++]=o),o+=(0,r.Fh)(s)}if(c<a)return null}let h=0,u=0,d=!1,p=0,f=-1,m=-1,g=/[a-z]/.test(e),y=!0;for(let i=0,c=Math.min(e.length,200),v=0;i<c&&u<a;){let c=(0,r.vS)(e,i);l<0&&(h<a&&c==t[h]&&(o[h++]=i),p<a&&(c==t[p]||c==n[p]?(0==p&&(f=i),m=i+1,p++):p=0));let w,b=c<255?c>=48&&c<=57||c>=97&&c<=122?2:+(c>=65&&c<=90):(w=(0,r.MK)(c))!=w.toLowerCase()?1:2*(w!=w.toUpperCase());(!i||1==b&&g||0==v&&0!=b)&&(t[u]==c||n[u]==c&&(d=!0)?s[u++]=i:s.length&&(y=!1)),v=b,i+=(0,r.Fh)(c)}return u==a&&0==s[0]&&y?this.result(-100+(d?-200:0),s,e):p==a&&0==f?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[f,m]):u==a?this.result(-100+(d?-200:0)+-700+(y?0:-1100),s,e):2==t.length?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,n){let i=[],o=0;for(let e of t){let t=e+(this.astral?(0,r.Fh)((0,r.vS)(n,e)):1);o&&i[o-1]==e?i[o-1]=t:(i[o++]=e,i[o++]=t)}return this.ret(e-n.length,i)}}class w{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}let b=r.sj.define({combine:e=>(0,r.QR)(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:x,filterStrict:!1,compareCompletions:(e,t)=>(e.sortText||e.label).localeCompare(t.sortText||t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>k(e(n),t(n)),optionClass:(e,t)=>n=>k(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function k(e,t){return e?t?e+" "+t:e:t}function x(e,t,n,r,o,s){let l=e.textDirection==i.OP.RTL,a=l,c=!1,h="top",u,d,p=t.left-o.left,f=o.right-t.right,m=r.right-r.left,g=r.bottom-r.top;if(a&&p<Math.min(m,f)?a=!1:!a&&f<Math.min(m,p)&&(a=!0),m<=(a?p:f))u=Math.max(o.top,Math.min(n.top,o.bottom-g))-t.top,d=Math.min(400,a?p:f);else{c=!0,d=Math.min(400,(l?t.right:o.right-t.left)-30);let e=o.bottom-t.bottom;e>=g||e>t.top?u=n.bottom-t.top:(h="bottom",u=t.bottom-n.top)}let y=(t.bottom-t.top)/s.offsetHeight,v=(t.right-t.left)/s.offsetWidth;return{style:`${h}: ${u/y}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(c?l?"left-narrow":"right-narrow":a?"left":"right")}}function C(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class S{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:i,selected:o}=r.open,s=e.state.facet(b);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map(e=>"cm-completionIcon-"+e)),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n,r){let i=document.createElement("span");i.className="cm-completionLabel";let o=e.displayLabel||e.label,s=0;for(let e=0;e<r.length;){let t=r[e++],n=r[e++];t>s&&i.appendChild(document.createTextNode(o.slice(s,t)));let l=i.appendChild(document.createElement("span"));l.appendChild(document.createTextNode(o.slice(t,n))),l.className="cm-completionMatchedText",s=n}return s<o.length&&i.appendChild(document.createTextNode(o.slice(s))),i},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((e,t)=>e.position-t.position).map(e=>e.render)}(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=C(i.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",n=>{let{options:r}=e.state.field(t).open;for(let t=n.target,i;t&&t!=this.dom;t=t.parentNode)if("LI"==t.nodeName&&(i=/-(\d+)$/.exec(t.id))&&+i[1]<r.length){this.applyCompletion(e,r[+i[1]]),n.preventDefault();return}}),this.dom.addEventListener("focusout",t=>{let n=e.state.field(this.stateField,!1);n&&n.tooltip&&e.state.facet(b).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:y.of(null)})}),this.showOptions(i,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=r){let{options:i,selected:o,disabled:s}=n.open;r.open&&r.open.options==i||(this.range=C(i.length,o,e.state.facet(b).maxRenderedOptions),this.showOptions(i,n.id)),this.updateSel(),s!=(null==(t=r.open)?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=C(t.options.length,t.selected,this.view.state.facet(b).maxRenderedOptions),this.showOptions(t.options,e.id));let n=this.updateSelectedOption(t.selected);if(n){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:o}=r;if(!o)return;let s="string"==typeof o?document.createTextNode(o):o(r);if(!s)return;"then"in s?s.then(t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,r)}).catch(e=>(0,i.c_)(this.view.state,e,"completion info")):(this.addInfoPane(s,r),n.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",n.id="cm-completionInfo-"+Math.floor(65535*Math.random()).toString(16),null!=e.nodeType)n.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:r}=e;n.appendChild(t),this.infoDestroy=r||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){var t,n;let r,i,o,s=null;for(let t=this.list.firstChild,n=this.range.from;t;t=t.nextSibling,n++)"LI"==t.nodeName&&t.id?n==e?t.hasAttribute("aria-selected")||(t.setAttribute("aria-selected","true"),s=t):t.hasAttribute("aria-selected")&&(t.removeAttribute("aria-selected"),t.removeAttribute("aria-describedby")):n--;return s&&(t=this.list,n=s,r=t.getBoundingClientRect(),i=n.getBoundingClientRect(),o=r.height/t.offsetHeight,i.top<r.top?t.scrollTop-=(r.top-i.top)/o:i.bottom>r.bottom&&(t.scrollTop+=(i.bottom-r.bottom)/o)),s}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),i=this.space;if(!i){let e=this.dom.ownerDocument.documentElement;i={left:0,top:0,right:e.clientWidth,bottom:e.clientHeight}}return r.top>Math.min(i.bottom,t.bottom)-10||r.bottom<Math.max(i.top,t.top)+10?null:this.view.state.facet(b).positionInfo(this.view,t,r,n,i,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){let r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",e=>{e.target==r&&e.preventDefault()});let i=null;for(let o=n.from;o<n.to;o++){let{completion:s,match:l}=e[o],{section:a}=s;if(a){let e="string"==typeof a?a:a.name;e!=i&&(o>n.from||0==n.from)&&(i=e,"string"!=typeof a&&a.header?r.appendChild(a.header(a)):r.appendChild(document.createElement("completion-section")).textContent=e)}let c=r.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let h=this.optionClass(s);for(let e of(h&&(c.className=h),this.optionContent)){let t=e(s,this.view.state,this.view,l);t&&c.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function M(e){return 100*(e.boost||0)+10*!!e.apply+5*!!e.info+ +!!e.type}class A{constructor(e,t,n,r,i,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=i,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new A(this.options,I(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,r,i,o){if(r&&!o&&e.some(e=>e.isPending))return r.setDisabled();let s=function(e,t){let n=[],r=null,i=null,o=e=>{n.push(e);let{section:t}=e.completion;if(t){r||(r=[]);let e="string"==typeof t?t:t.name;r.some(t=>t.name==e)||r.push("string"==typeof t?{name:e}:t)}},s=t.facet(b);for(let r of e)if(r.hasResult()){let e=r.result.getMatch;if(!1===r.result.filter)for(let t of r.result.options)o(new h(t,r.source,e?e(t):[],1e9-n.length));else{let n=t.sliceDoc(r.from,r.to),l,a=s.filterStrict?new w(n):new v(n);for(let t of r.result.options)if(l=a.match(t.label)){let n=t.displayLabel?e?e(t,l.matched):[]:l.matched,s=l.score+(t.boost||0);if(o(new h(t,r.source,n,s)),"object"==typeof t.section&&"dynamic"===t.section.rank){let{name:e}=t.section;i||(i=Object.create(null)),i[e]=Math.max(s,i[e]||-1e9)}}}}if(r){let e=Object.create(null),t=0;for(let n of r.sort((e,t)=>("dynamic"===e.rank&&"dynamic"===t.rank?i[t.name]-i[e.name]:0)||("number"==typeof e.rank?e.rank:1e9)-("number"==typeof t.rank?t.rank:1e9)||(e.name<t.name?-1:1)))t-=1e5,e[n.name]=t;for(let t of n){let{section:n}=t.completion;n&&(t.score+=e["string"==typeof n?n:n.name])}}let l=[],a=null,c=s.compareCompletions;for(let e of n.sort((e,t)=>t.score-e.score||c(e.completion,t.completion))){let t=e.completion;a&&a.label==t.label&&a.detail==t.detail&&(null==a.type||null==t.type||a.type==t.type)&&a.apply==t.apply&&a.boost==t.boost?M(e.completion)>M(a)&&(l[l.length-1]=e):l.push(e),a=e.completion}return l}(e,t);if(!s.length)return r&&e.some(e=>e.isPending)?r.setDisabled():null;let l=t.facet(b).selectOnOpen?0:-1;if(r&&r.selected!=l&&-1!=r.selected){let e=r.options[r.selected].completion;for(let t=0;t<s.length;t++)if(s[t].completion==e){l=t;break}}return new A(s,I(n,l),{pos:e.reduce((e,t)=>t.hasResult()?Math.min(e,t.from):e,1e8),create:$,above:i.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new A(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new A(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class T{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new T(E,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(b),r=(n.override||t.languageDataAt("autocomplete",u(t)).map(m)).map(t=>(this.active.find(e=>e.source==t)||new L(t,+!!this.active.some(e=>0!=e.state))).update(e,n));r.length==this.active.length&&r.every((e,t)=>e==this.active[t])&&(r=this.active);let i=this.open,o=e.effects.some(e=>e.is(P));for(let s of(i&&e.docChanged&&(i=i.map(e.changes)),e.selection||r.some(t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to))||!function(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult();)n++;for(;r<t.length&&!t[r].hasResult();)r++;let i=n==e.length,o=r==t.length;if(i||o)return i==o;if(e[n++].result!=t[r++].result)return!1}}(r,this.active)||o?i=A.build(r,t,this.id,i,n,o):i&&i.disabled&&!r.some(e=>e.isPending)&&(i=null),!i&&r.every(e=>!e.isPending)&&r.some(e=>e.hasResult())&&(r=r.map(e=>e.hasResult()?new L(e.source,0):e)),e.effects))s.is(D)&&(i=i&&i.setSelected(s.value,this.id));return r==this.active&&i==this.open?this:new T(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?O:N}}let O={"aria-autocomplete":"list"},N={};function I(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}let E=[];function _(e,t){if(e.isUserEvent("input.complete")){let n=e.annotation(p);if(n&&t.activateOnCompletion(n))return 12}let n=e.isUserEvent("input.type");return n&&t.activateOnTyping?5:n?1:e.isUserEvent("delete.backward")?2:e.selection?8:16*!!e.docChanged}class L{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return 1==this.state}update(e,t){let n=_(e,t),r=this;for(let t of((8&n||16&n&&this.touches(e))&&(r=new L(r.source,0)),4&n&&0==r.state&&(r=new L(this.source,1)),r=r.updateFor(e,n),e.effects))if(t.is(g))r=new L(r.source,1,t.value);else if(t.is(y))r=new L(r.source,0);else if(t.is(P))for(let e of t.value)e.source==r.source&&(r=e);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(u(e.state))}}class R extends L{constructor(e,t,n,r,i,o){super(e,3,t),this.limit=n,this.result=r,this.from=i,this.to=o}hasResult(){return!0}updateFor(e,t){var n;if(!(3&t))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=u(e.state);if(l>o||!r||2&t&&(u(e.startState)==this.from||l<this.limit))return new L(this.source,4&t?1:0);let a=e.changes.mapPos(this.limit);return!function(e,t,n,r){if(!e)return!1;let i=t.sliceDoc(n,r);return"function"==typeof e?e(i,n,r,t):d(e,!0).test(i)}(r.validFor,e.state,i,o)?r.update&&(r=r.update(r,i,o,new s(e.state,l,!1)))?new R(this.source,this.explicit,a,r,r.from,null!=(n=r.to)?n:u(e.state)):new L(this.source,1,this.explicit):new R(this.source,this.explicit,a,r,i,o)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new R(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new L(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}let P=r.Pe.define({map:(e,t)=>e.map(e=>e.map(t))}),D=r.Pe.define(),F=r.sU.define({create:()=>T.start(),update:(e,t)=>e.update(t),provide:e=>[i.DK.from(e,e=>e.tooltip),i.Lz.contentAttributes.from(e,e=>e.attrs)]});function B(e,t){let n=t.completion.apply||t.completion.label,i=e.state.field(F).active.find(e=>e.source==t.source);return i instanceof R&&("string"==typeof n?e.dispatch({...function(e,t,n,i){let{main:o}=e.selection,s=n-o.from,l=i-o.from;return{...e.changeByRange(a=>{if(a!=o&&n!=i&&e.sliceDoc(a.from+s,a.from+l)!=e.sliceDoc(n,i))return{range:a};let c=e.toText(t);return{changes:{from:a.from+s,to:i==o.from?a.to:a.from+l,insert:c},range:r.OF.cursor(a.from+s+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}(e.state,n,i.from,i.to),annotations:p.of(t.completion)}):n(e,t.completion,i.from,i.to),!0)}let $=e=>new S(e,F,B);function j(e,t="option"){return n=>{let r=n.state.field(F,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(b).interactionDelay)return!1;let o=1,s;"page"==t&&(s=(0,i.Eg)(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:l}=r.open.options,a=r.open.selected>-1?r.open.selected+o*(e?1:-1):e?0:l-1;return a<0?a="page"==t?0:l-1:a>=l&&(a="page"==t?l-1:0),n.dispatch({effects:D.of(a)}),!0}}let z=e=>!!e.state.field(F,!1)&&(e.dispatch({effects:g.of(!0)}),!0);class H{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}let q=i.Z9.fromClass(class{constructor(e){for(let t of(this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0,e.state.field(F).active))t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(F),n=e.state.facet(b);if(!e.selectionSet&&!e.docChanged&&e.startState.field(F)==t)return;let r=e.transactions.some(e=>{let t=_(e,n);return 8&t||(e.selection||e.docChanged)&&!(3&t)});for(let t=0;t<this.running.length;t++){let n=this.running[t];if(r||n.context.abortOnDocChange&&e.docChanged||n.updates.length+e.transactions.length>50&&Date.now()-n.time>1e3){for(let e of n.context.abortListeners)try{e()}catch(e){(0,i.c_)(this.view.state,e)}n.context.abortListeners=null,this.running.splice(t--,1)}else n.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(e=>e.effects.some(e=>e.is(g)))&&(this.pendingStart=!0);let o=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(e=>e.isPending&&!this.running.some(t=>t.active.source==e.source))?setTimeout(()=>this.startUpdate(),o):-1,0!=this.composing)for(let t of e.transactions)t.isUserEvent("input.type")?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(F);for(let e of t.active)e.isPending&&!this.running.some(t=>t.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(b).updateSyncTime))}startQuery(e){let{state:t}=this.view,n=u(t),r=new s(t,n,e.explicit,this.view),o=new H(e,r);this.running.push(o),Promise.resolve(e.source(r)).then(e=>{o.context.aborted||(o.done=e||null,this.scheduleAccept())},e=>{this.view.dispatch({effects:y.of(null)}),(0,i.c_)(this.view.state,e)})}scheduleAccept(){this.running.every(e=>void 0!==e.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(b).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(b),r=this.view.state.field(F);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(void 0===o.done)continue;if(this.running.splice(i--,1),o.done){let r=u(o.updates.length?o.updates[0].startState:this.view.state),i=Math.min(r,o.done.from+ +!o.active.explicit),s=new R(o.active.source,o.active.explicit,i,o.done,o.done.from,null!=(e=o.done.to)?e:r);for(let e of o.updates)s=s.update(e,n);if(s.hasResult()){t.push(s);continue}}let s=r.active.find(e=>e.source==o.active.source);if(s&&s.isPending)if(null==o.done){let e=new L(o.active.source,0);for(let t of o.updates)e=e.update(t,n);e.isPending||t.push(e)}else this.startQuery(s)}(t.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:P.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(F,!1);if(t&&t.tooltip&&this.view.state.facet(b).closeOnBlur){let n=t.open&&(0,i.Eg)(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||setTimeout(()=>this.view.dispatch({effects:y.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:g.of(!1)}),20),this.composing=0}}}),W="object"==typeof navigator&&/Win/.test(navigator.platform),U=r.Nb.highest(i.Lz.domEventHandlers({keydown(e,t){let n=t.state.field(F,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||e.key.length>1||e.ctrlKey&&!(W&&e.altKey)||e.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(e=>e.source==r.source),o=r.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(e.key)>-1&&B(t,r),!1}})),V=i.Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'\uD835\uDC65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\uD835\uDC36'"}},".cm-completionIcon-type":{"&:after":{content:"'\uD835\uDC61'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\uD83D\uDD11︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class K{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class J{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,r.iR.TrackDel),n=e.mapPos(this.to,1,r.iR.TrackDel);return null==t||null==n?null:new J(this.field,t,n)}}class Z{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],i=e.doc.lineAt(t),s=/^\s*/.exec(i.text)[0];for(let i of this.lines){if(n.length){let n=s,l=/^\t*/.exec(i)[0].length;for(let t=0;t<l;t++)n+=e.facet(o.Xt);r.push(t+n.length-l),i=n+i.slice(l)}n.push(i),t+=i.length+1}return{text:n,ranges:this.fieldPositions.map(e=>new J(e.field,r[e.line]+e.from,r[e.line]+e.to))}}static parse(e){let t=[],n=[],r=[],i;for(let o of e.split(/\r\n?|\n/)){for(;i=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let e=i[1]?+i[1]:null,s=i[2]||i[3]||"",l=-1,a=s.replace(/\\[{}]/g,e=>e[1]);for(let n=0;n<t.length;n++)(null!=e?t[n].seq==e:a&&t[n].name==a)&&(l=n);if(l<0){let n=0;for(;n<t.length&&(null==e||null!=t[n].seq&&t[n].seq<e);)n++;for(let i of(t.splice(n,0,{seq:e,name:a}),l=n,r))i.field>=l&&i.field++}for(let e of r)if(e.line==n.length&&e.from>i.index){let t=i[2]?3+(i[1]||"").length:2;e.from-=t,e.to-=t}r.push(new K(l,n.length,i.index,i.index+a.length)),o=o.slice(0,i.index)+s+o.slice(i.index+i[0].length)}o=o.replace(/\\([{}])/g,(e,t,i)=>{for(let e of r)e.line==n.length&&e.from>i&&(e.from--,e.to--);return t}),n.push(o)}return new Z(n,r)}}let G=i.NZ.widget({widget:new class extends i.xO{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),Y=i.NZ.mark({class:"cm-snippetField"});class X{constructor(e,t){this.ranges=e,this.active=t,this.deco=i.NZ.set(e.map(e=>(e.from==e.to?G:Y).range(e.from,e.to)),!0)}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new X(t,this.active)}selectionInsideField(e){return e.ranges.every(e=>this.ranges.some(t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))}}let Q=r.Pe.define({map:(e,t)=>e&&e.map(t)}),ee=r.Pe.define(),et=r.sU.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(Q))return n.value;if(n.is(ee)&&e)return new X(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>i.Lz.decorations.from(e,e=>e?e.deco:i.NZ.none)});function en(e,t){return r.OF.create(e.filter(e=>e.field==t).map(e=>r.OF.range(e.from,e.to)))}function er(e){return({state:t,dispatch:n})=>{let r=t.field(et,!1);if(!r||e<0&&0==r.active)return!1;let i=r.active+e,o=e>0&&!r.ranges.some(t=>t.field==i+e);return n(t.update({selection:en(r.ranges,i),effects:Q.of(o?null:new X(r.ranges,i)),scrollIntoView:!0})),!0}}let ei=[{key:"Tab",run:er(1),shift:er(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(et,!1)&&(t(e.update({effects:Q.of(null)})),!0)}],eo=r.sj.define({combine:e=>e.length?e[0]:ei}),es=r.Nb.highest(i.w4.compute([eo],e=>e.facet(eo)));function el(e,t){let n;return{...t,apply:(n=Z.parse(e),(e,t,i,o)=>{let{text:s,ranges:l}=n.instantiate(e.state,i),{main:a}=e.state.selection,c={changes:{from:i,to:o==a.from?a.to:o,insert:r.EY.of(s)},scrollIntoView:!0,annotations:t?[p.of(t),r.ZX.userEvent.of("input.complete")]:void 0};if(l.length&&(c.selection=en(l,0)),l.some(e=>e.field>0)){let t=new X(l,0),n=c.effects=[Q.of(t)];void 0===e.state.field(et,!1)&&n.push(r.Pe.appendConfig.of([et,es,ea,V]))}e.dispatch(e.state.update(c))})}}let ea=i.Lz.domEventHandlers({mousedown(e,t){let n=t.state.field(et,!1),r;if(!n||null==(r=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let i=n.ranges.find(e=>e.from<=r&&e.to>=r);return!!i&&i.field!=n.active&&(t.dispatch({selection:en(n.ranges,i.field),effects:Q.of(n.ranges.some(e=>e.field>i.field)?new X(n.ranges,i.field):null),scrollIntoView:!0}),!0)}}),ec={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},eh=r.Pe.define({map(e,t){let n=t.mapPos(e,-1,r.iR.TrackAfter);return null==n?void 0:n}}),eu=new class extends r.FB{};eu.startSide=1,eu.endSide=-1;let ed=r.sU.define({create:()=>r.om.empty,update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=n.from&&e<=n.to})}for(let n of t.effects)n.is(eh)&&(e=e.update({add:[eu.range(n.value,n.value+1)]}));return e}});function ep(){return[ev,ed]}let ef="()[]{}<>\xab\xbb\xbb\xab［］｛｝";function em(e){for(let t=0;t<ef.length;t+=2)if(ef.charCodeAt(t)==e)return ef.charAt(t+1);return(0,r.MK)(e<128?e:e+1)}function eg(e,t){return e.languageDataAt("closeBrackets",t)[0]||ec}let ey="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),ev=i.Lz.inputHandler.of((e,t,n,i)=>{if((ey?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let s=e.state.selection.main;if(i.length>2||2==i.length&&1==(0,r.Fh)((0,r.vS)(i,0))||t!=s.from||n!=s.to)return!1;let l=function(e,t){let n=eg(e,e.selection.main.head),i=n.brackets||ec.brackets;for(let s of i){let l=em((0,r.vS)(s,0));if(t==s)return l==s?function(e,t,n,i){let s=i.stringPrefixes||ec.stringPrefixes,l=null,a=e.changeByRange(i=>{if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:eh.of(i.to+t.length),range:r.OF.range(i.anchor+t.length,i.head+t.length)};let a=i.head,c=ek(e.doc,a),h;if(c==t){if(ex(e,a))return{changes:{insert:t+t,from:a},effects:eh.of(a+t.length),range:r.OF.cursor(a+t.length)};else if(eb(e,a)){let i=n&&e.sliceDoc(a,a+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:a,to:a+i.length,insert:i},range:r.OF.cursor(a+i.length)}}}else if(n&&e.sliceDoc(a-2*t.length,a)==t+t&&(h=eC(e,a-2*t.length,s))>-1&&ex(e,h))return{changes:{insert:t+t+t+t,from:a},effects:eh.of(a+t.length),range:r.OF.cursor(a+t.length)};else if(e.charCategorizer(a)(c)!=r.Je.Word&&eC(e,a,s)>-1&&!function(e,t,n,r){let i=(0,o.mv)(e).resolveInner(t,-1),s=r.reduce((e,t)=>Math.max(e,t.length),0);for(let o=0;o<5;o++){let o=e.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),l=o.indexOf(n);if(!l||l>-1&&r.indexOf(o.slice(0,l))>-1){let t=i.firstChild;for(;t&&t.from==i.from&&t.to-t.from>n.length+l;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let a=i.to==t&&i.parent;if(!a)break;i=a}return!1}(e,a,t,s))return{changes:{insert:t+t,from:a},effects:eh.of(a+t.length),range:r.OF.cursor(a+t.length)};return{range:l=i}});return l?null:e.update(a,{scrollIntoView:!0,userEvent:"input.type"})}(e,s,i.indexOf(s+s+s)>-1,n):function(e,t,n,i){let o=null,s=e.changeByRange(s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:n,from:s.to}],effects:eh.of(s.to+t.length),range:r.OF.range(s.anchor+t.length,s.head+t.length)};let l=ek(e.doc,s.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:t+n,from:s.head},effects:eh.of(s.head+t.length),range:r.OF.cursor(s.head+t.length)}:{range:o=s}});return o?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}(e,s,l,n.before||ec.before);if(t==l&&eb(e,e.selection.main.from))return function(e,t,n){let i=null,o=e.changeByRange(t=>t.empty&&ek(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:r.OF.cursor(t.head+n.length)}:i={range:t});return i?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}(e,0,l)}return null}(e.state,i);return!!l&&(e.dispatch(l),!0)}),ew=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=eg(e,e.selection.main.head).brackets||ec.brackets,i=null,o=e.changeByRange(t=>{if(t.empty){let i=function(e,t){let n=e.sliceString(t-2,t);return(0,r.Fh)((0,r.vS)(n,0))==n.length?n:n.slice(1)}(e.doc,t.head);for(let o of n)if(o==i&&ek(e.doc,t.head)==em((0,r.vS)(o,0)))return{changes:{from:t.head-o.length,to:t.head+o.length},range:r.OF.cursor(t.head-o.length)}}return{range:i=t}});return i||t(e.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i}}];function eb(e,t){let n=!1;return e.field(ed).between(0,e.doc.length,e=>{e==t&&(n=!0)}),n}function ek(e,t){let n=e.sliceString(t,t+2);return n.slice(0,(0,r.Fh)((0,r.vS)(n,0)))}function ex(e,t){let n=(0,o.mv)(e).resolveInner(t+1);return n.parent&&n.from==t}function eC(e,t,n){let i=e.charCategorizer(t);if(i(e.sliceDoc(t-1,t))!=r.Je.Word)return t;for(let o of n){let n=t-o.length;if(e.sliceDoc(n,t)==o&&i(e.sliceDoc(n-1,n))!=r.Je.Word)return n}return -1}function eS(e={}){return[U,F,b.of(e),q,eA,V]}let eM=[{key:"Ctrl-Space",run:z},{mac:"Alt-`",run:z},{mac:"Alt-i",run:z},{key:"Escape",run:e=>{let t=e.state.field(F,!1);return!!t&&!!t.active.some(e=>0!=e.state)&&(e.dispatch({effects:y.of(null)}),!0)}},{key:"ArrowDown",run:j(!0)},{key:"ArrowUp",run:j(!1)},{key:"PageDown",run:j(!0,"page")},{key:"PageUp",run:j(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(F,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(b).interactionDelay)&&B(e,t.open.options[t.open.selected])}}],eA=r.Nb.highest(i.w4.computeN([b],e=>e.facet(b).defaultKeymap?[eM]:[]))},14563:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>F,EI:()=>I,KB:()=>_,Lv:()=>eh,Oh:()=>L,Q0:()=>u,Q_:()=>eO,SG:()=>eT,TM:()=>d,Tg:()=>eD,WD:()=>z,Xt:()=>O,Yy:()=>M,Zt:()=>ew,_Y:()=>$,_v:()=>E,b_:()=>q,bj:()=>f,cr:()=>ed,f7:()=>et,iB:()=>c,jU:()=>eE,mv:()=>m,mz:()=>j,nq:()=>v,p9:()=>h,t:()=>H,t$:()=>A,tp:()=>N,y9:()=>eg,yd:()=>W});var r,i=n(38348),o=n(45395),s=n(88082),l=n(21769),a=n(78928);let c=new i.uY;function h(e){return o.sj.define({combine:e?t=>t.concat(e):void 0})}let u=new i.uY;class d{constructor(e,t,n=[],r=""){this.data=e,this.name=r,o.$t.prototype.hasOwnProperty("tree")||Object.defineProperty(o.$t.prototype,"tree",{get(){return m(this)}}),this.parser=t,this.extension=[S.of(this),o.$t.languageData.of((e,t,n)=>{let r=p(e,t,n),i=r.type.prop(c);if(!i)return[];let o=e.facet(i),s=r.type.prop(u);if(s){let i=r.resolve(t-r.from,n);for(let t of s)if(t.test(i,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(o)}}return o})].concat(n)}isActiveAt(e,t,n=-1){return p(e,t,n).type.prop(c)==this.data}findRegions(e){let t=e.facet(S);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(c)==this.data)return void n.push({from:t,to:t+e.length});let o=e.prop(i.uY.mounted);if(o){if(o.tree.prop(c)==this.data){if(o.overlay)for(let e of o.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}else if(o.overlay){let e=n.length;if(r(o.tree,o.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let o=e.children[n];o instanceof i.PH&&r(o,e.positions[n]+t)}};return r(m(e),0),n}get allowsNesting(){return!0}}function p(e,t,n){let r=e.facet(S),o=m(e).topNode;if(!r||r.allowsNesting)for(let e=o;e;e=e.enter(t,n,i.Qj.ExcludeBuffers))e.type.isTop&&(o=e);return o}d.setState=o.Pe.define();class f extends d{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=h(e.languageData);return new f(t,e.parser.configure({props:[c.add(e=>e.isTop?t:void 0)]}),e.name)}configure(e,t){return new f(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function m(e){let t=e.field(d.state,!1);return t?t.tree:i.PH.empty}class g{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let y=null;class v{constructor(e,t,n=[],r,i,o,s,l){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new v(e,t,[],i.PH.empty,0,n,[],null)}startParse(){return this.parser.startParse(new g(this.state.doc),this.fragments)}work(e,t){return(null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=i.PH.empty&&this.isDone(null!=t?t:this.state.doc.length))?(this.takeTree(),!0):this.withContext(()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(i.rr.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!=(n=this.parse.stoppedAt)?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(i.rr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=y;y=this;try{return e()}finally{y=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=w(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:o,viewport:s,skipped:l}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges((e,n,r,i)=>t.push({fromA:e,toA:n,fromB:r,toB:i})),n=i.rr.applyChanges(n,t),r=i.PH.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length)for(let t of(l=[],this.skipped)){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&l.push({from:n,to:r})}}return new v(this.parser,t,n,r,o,s,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=w(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends i.iX{createParse(t,n,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let t=y;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new i.PH(i.Z6.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return y}}function w(e,t,n){return i.rr.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class b{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new b(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=v.create(e.facet(S).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new b(n)}}d.state=o.sU.define({create:b.init,update(e,t){for(let e of t.effects)if(e.is(d.setState))return e.value;return t.startState.facet(S)!=t.state.facet(S)?b.init(t.state):e.apply(t)}});let k=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(k=e=>{let t=-1,n=setTimeout(()=>{t=requestIdleCallback(e,{timeout:400})},100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});let x="undefined"!=typeof navigator&&(null==(r=navigator.scheduling)?void 0:r.isInputPending)?()=>navigator.scheduling.isInputPending():null,C=s.Z9.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(d.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(d.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=k(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(d.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!x?Math.max(25,e.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,l=i.context.work(()=>x&&x()||Date.now()>o,r+1e5*!s);this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:d.setState.of(new b(i.context))})),this.chunkBudget>0&&!(l&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(e=>(0,s.c_)(this.view.state,e)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),S=o.sj.define({combine:e=>e.length?e[0]:null,enables:e=>[d.state,C,s.Lz.contentAttributes.compute([e],t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}})]});class M{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class A{constructor(e,t,n,r,i,o){this.name=e,this.alias=t,this.extensions=n,this.filename=r,this.loadFunc=i,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:n}=e;if(!t){if(!n)throw RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(n)}return new A(e.name,(e.alias||[]).concat(e.name).map(e=>e.toLowerCase()),e.extensions||[],e.filename,t,n)}static matchFilename(e,t){for(let n of e)if(n.filename&&n.filename.test(t))return n;let n=/\.([^.]+)$/.exec(t);if(n){for(let t of e)if(t.extensions.indexOf(n[1])>-1)return t}return null}static matchLanguageName(e,t,n=!0){for(let n of(t=t.toLowerCase(),e))if(n.alias.some(e=>e==t))return n;if(n)for(let n of e)for(let e of n.alias){let r=t.indexOf(e);if(r>-1&&(e.length>2||!/\w/.test(t[r-1])&&!/\w/.test(t[r+e.length])))return n}return null}}let T=o.sj.define(),O=o.sj.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function N(e){let t=e.facet(O);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function I(e,t){let n="",r=e.tabSize,i=e.facet(O)[0];if("	"==i){for(;t>=r;)n+="	",t-=r;i=" "}for(let e=0;e<t;e++)n+=i;return n}function E(e,t){for(let n of(e instanceof o.$t&&(e=new _(e)),e.state.facet(T))){let r=n(e,t);if(void 0!==r)return r}let n=m(e.state);return n.length>=t?function(e,t,n){let r=t.resolveStack(n),i=t.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let e=[];for(let t=i;t&&!(t.from<r.node.from||t.to>r.node.to||t.from==r.node.from&&t.type==r.node.type);t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)r={node:e[t],next:r}}return R(r,e,n)}(e,n,t):null}class _{constructor(e,t={}){this.state=e,this.options=t,this.unit=N(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;if(null!=r&&r>=n.from&&r<=n.to)if(i&&r==e)return{text:"",from:e};else if(t<0?r<e:r<=e)return{text:n.text.slice(r-n.from),from:r};else return{text:n.text.slice(0,r-n.from),from:n.from};return n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,t=e.length){return(0,o.y$)(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}let L=new i.uY;function R(e,t,n){for(let r=e;r;r=r.next){let e=function(e){let t=e.type.prop(L);if(t)return t;let n=e.firstChild,r;if(n&&(r=n.type.prop(i.uY.closedBy))){let t=e.lastChild,n=t&&r.indexOf(t.name)>-1;return e=>B(e,!0,1,void 0,n&&!(e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak)?t.from:void 0)}return null==e.parent?P:null}(r.node);if(e)return e(D.create(t,n,r))}return 0}function P(){return 0}class D extends _{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new D(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(function(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return R(this.context.next,this.base,this.pos)}}function F({closing:e,align:t=!0,units:n=1}){return r=>B(r,t,n,e)}function B(e,t,n,r,i){let o=e.textAfter,s=o.match(/^\s*/)[0].length,l=r&&o.slice(s,s+r.length)==r||i==e.pos+s,a=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let e=n.to;;){let i=t.childAfter(e);if(!i||i==r)return null;if(!i.type.isSkipped){if(i.from>=s)return null;let e=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+e}}e=i.to}}(e):null;return a?l?e.column(a.from):e.column(a.to):e.baseIndent+(l?0:e.unit*n)}let $=e=>e.baseIndent;function j({except:e,units:t=1}={}){return n=>{let r=e&&e.test(n.textAfter);return n.baseIndent+(r?0:t*n.unit)}}function z(){return o.$t.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,i=n.lineAt(r);if(r>i.from+200)return e;let o=n.sliceString(i.from,r);if(!t.some(e=>e.test(o)))return e;let{state:s}=e,l=-1,a=[];for(let{head:e}of s.selection.ranges){let t=s.doc.lineAt(e);if(t.from==l)continue;l=t.from;let n=E(s,t.from);if(null==n)continue;let r=/^\s*/.exec(t.text)[0],i=I(s,n);r!=i&&a.push({from:t.from,to:t.from+r.length,insert:i})}return a.length?[e,{changes:a,sequential:!0}]:e})}let H=o.sj.define(),q=new i.uY;function W(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null}function U(e,t,n){for(let r of e.facet(H)){let i=r(e,t,n);if(i)return i}return function(e,t,n){let r=m(e);if(r.length<n)return null;let i=r.resolveStack(n,1),o=null;for(let s=i;s;s=s.next){let i=s.node;if(i.to<=n||i.from>n)continue;if(o&&i.from<t)break;let l=i.type.prop(q);if(l&&(i.to<r.length-50||r.length==e.doc.length||!function(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}(i))){let r=l(i,e);r&&r.from<=n&&r.from>=t&&r.to>n&&(o=r)}}return o}(e,t,n)}function V(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}let K=o.Pe.define({map:V}),J=o.Pe.define({map:V});function Z(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some(e=>e.from<=n&&e.to>=n)||t.push(e.lineBlockAt(n));return t}let G=o.sU.define({create:()=>s.NZ.none,update(e,t){for(let n of(t.isUserEvent("delete")&&t.changes.iterChangedRanges((t,n)=>e=Y(e,t,n)),e=e.map(t.changes),t.effects))if(n.is(K)&&!function(e,t,n){let r=!1;return e.between(t,t,(e,i)=>{e==t&&i==n&&(r=!0)}),r}(e,n.value.from,n.value.to)){let{preparePlaceholder:r}=t.state.facet(er),i=r?s.NZ.replace({widget:new el(r(t.state,n.value))}):es;e=e.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(J)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));return t.selection&&(e=Y(e,t.selection.main.head)),e},provide:e=>s.Lz.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,(e,t)=>{n.push(e,t)}),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let r=e[n++],i=e[n++];if("number"!=typeof r||"number"!=typeof i)throw RangeError("Invalid JSON for fold state");t.push(es.range(r,i))}return s.NZ.set(t,!0)}});function Y(e,t,n=t){let r=!1;return e.between(t,n,(e,i)=>{e<n&&i>t&&(r=!0)}),r?e.update({filterFrom:t,filterTo:n,filter:(e,r)=>e>=n||r<=t}):e}function X(e,t,n){var r;let i=null;return null==(r=e.field(G,!1))||r.between(t,n,(e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})}),i}function Q(e,t){return e.field(G,!1)?t:t.concat(o.Pe.appendConfig.of(ei()))}function ee(e,t,n=!0){let r=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return s.Lz.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${i}.`)}let et=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of Z(e)){let n=U(e.state,t.from,t.to);if(n)return e.dispatch({effects:Q(e.state,[K.of(n),ee(e,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(G,!1))return!1;let t=[];for(let n of Z(e)){let r=X(e.state,n.from,n.to);r&&t.push(J.of(r),ee(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let i=e.lineBlockAt(r),o=U(t,i.from,i.to);o&&n.push(K.of(o)),r=(o?e.lineBlockAt(o.to):i).to+1}return n.length&&e.dispatch({effects:Q(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(G,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,(e,t)=>{n.push(J.of({from:e,to:t}))}),e.dispatch({effects:n}),!0}}],en={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},er=o.sj.define({combine:e=>(0,o.QR)(e,en)});function ei(e){let t=[G,eu];return e&&t.push(er.of(e)),t}function eo(e,t){let{state:n}=e,r=n.facet(er),i=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=X(e.state,n.from,n.to);r&&e.dispatch({effects:J.of(r)}),t.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(e,i,t);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=i,o}let es=s.NZ.replace({widget:new class extends s.xO{toDOM(e){return eo(e,null)}}});class el extends s.xO{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return eo(e,this.value)}}let ea={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ec extends s.wJ{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function eh(e={}){let t={...ea,...e},n=new ec(t,!0),r=new ec(t,!1),i=s.Z9.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(S)!=e.state.facet(S)||e.startState.field(G,!1)!=e.state.field(G,!1)||m(e.startState)!=m(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new o.vB;for(let i of e.viewportLineBlocks){let o=X(e.state,i.from,i.to)?r:U(e.state,i.from,i.to)?n:null;o&&t.add(i.from,i.from,o)}return t.finish()}}),{domEventHandlers:l}=t;return[i,(0,s.cU)({class:"cm-foldGutter",markers(e){var t;return(null==(t=e.plugin(i))?void 0:t.markers)||o.om.empty},initialSpacer:()=>new ec(t,!1),domEventHandlers:{...l,click:(e,t,n)=>{if(l.click&&l.click(e,t,n))return!0;let r=X(e.state,t.from,t.to);if(r)return e.dispatch({effects:J.of(r)}),!0;let i=U(e.state,t.from,t.to);return!!i&&(e.dispatch({effects:K.of(i)}),!0)}}}),ei()]}let eu=s.Lz.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ed{constructor(e,t){let n;function r(e){let t=a.G.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;let i="string"==typeof t.all?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof d?e=>e.prop(c)==o.data:o?e=>e==o:void 0,this.style=(0,l.az)(e.map(e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))})),{all:i}).style,this.module=n?new a.G(n):null,this.themeType=t.themeType}static define(e,t){return new ed(e,t||{})}}let ep=o.sj.define(),ef=o.sj.define({combine:e=>e.length?[e[0]]:null});function em(e){let t=e.facet(ep);return t.length?t:e.facet(ef)}function eg(e,t){let n=[ev],r;return e instanceof ed&&(e.module&&n.push(s.Lz.styleModule.of(e.module)),r=e.themeType),(null==t?void 0:t.fallback)?n.push(ef.of(e)):r?n.push(ep.computeN([s.Lz.darkTheme],t=>t.facet(s.Lz.darkTheme)==("dark"==r)?[e]:[])):n.push(ep.of(e)),n}class ey{constructor(e){this.markCache=Object.create(null),this.tree=m(e.state),this.decorations=this.buildDeco(e,em(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=m(e.state),n=em(e.state),r=n!=em(e.startState),{viewport:i}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<i.to&&!r&&t.type==this.tree.type&&o>=i.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=i.to)}buildDeco(e,t){if(!t||!this.tree.length)return s.NZ.none;let n=new o.vB;for(let{from:r,to:i}of e.visibleRanges)(0,l.DM)(this.tree,t,(e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=s.NZ.mark({class:r})))},r,i);return n.finish()}}let ev=o.Nb.high(s.Z9.fromClass(ey,{decorations:e=>e.decorations})),ew=ed.define([{tag:l._A.meta,color:"#404740"},{tag:l._A.link,textDecoration:"underline"},{tag:l._A.heading,textDecoration:"underline",fontWeight:"bold"},{tag:l._A.emphasis,fontStyle:"italic"},{tag:l._A.strong,fontWeight:"bold"},{tag:l._A.strikethrough,textDecoration:"line-through"},{tag:l._A.keyword,color:"#708"},{tag:[l._A.atom,l._A.bool,l._A.url,l._A.contentSeparator,l._A.labelName],color:"#219"},{tag:[l._A.literal,l._A.inserted],color:"#164"},{tag:[l._A.string,l._A.deleted],color:"#a11"},{tag:[l._A.regexp,l._A.escape,l._A.special(l._A.string)],color:"#e40"},{tag:l._A.definition(l._A.variableName),color:"#00f"},{tag:l._A.local(l._A.variableName),color:"#30a"},{tag:[l._A.typeName,l._A.namespace],color:"#085"},{tag:l._A.className,color:"#167"},{tag:[l._A.special(l._A.variableName),l._A.macroName],color:"#256"},{tag:l._A.definition(l._A.propertyName),color:"#00c"},{tag:l._A.comment,color:"#940"},{tag:l._A.invalid,color:"#f00"}]),eb=s.Lz.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),ek="()[]{}",ex=o.sj.define({combine:e=>(0,o.QR)(e,{afterCursor:!0,brackets:ek,maxScanDistance:1e4,renderMatch:eM})}),eC=s.NZ.mark({class:"cm-matchingBracket"}),eS=s.NZ.mark({class:"cm-nonmatchingBracket"});function eM(e){let t=[],n=e.matched?eC:eS;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}let eA=[o.sU.define({create:()=>s.NZ.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(ex);for(let e of t.state.selection.ranges){if(!e.empty)continue;let i=eE(t.state,e.head,-1,r)||e.head>0&&eE(t.state,e.head-1,1,r)||r.afterCursor&&(eE(t.state,e.head,1,r)||e.head<t.state.doc.length&&eE(t.state,e.head+1,-1,r));i&&(n=n.concat(r.renderMatch(i,t.state)))}return s.NZ.set(n,!0)},provide:e=>s.Lz.decorations.from(e)}),eb];function eT(e={}){return[ex.of(e),eA]}let eO=new i.uY;function eN(e,t,n){let r=e.prop(t<0?i.uY.openedBy:i.uY.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==+(t<0))return[n[r+t]]}return null}function eI(e){let t=e.type.prop(eO);return t?t(e.node):e}function eE(e,t,n,r={}){let i=r.maxScanDistance||1e4,o=r.brackets||ek,s=m(e),l=s.resolveInner(t,n);for(let e=l;e;e=e.parent){let r=eN(e.type,n,o);if(r&&e.from<e.to){let i=eI(e);if(i&&(n>0?t>=i.from&&t<i.to:t>i.from&&t<=i.to))return function(e,t,n,r,i,o,s){let l=r.parent,a={from:i.from,to:i.to},c=0,h=null==l?void 0:l.cursor();if(h&&(n<0?h.childBefore(r.from):h.childAfter(r.to)))do if(n<0?h.to<=r.from:h.from>=r.to){if(0==c&&o.indexOf(h.type.name)>-1&&h.from<h.to){let e=eI(h);return{start:a,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}else if(eN(h.type,n,s))c++;else if(eN(h.type,-n,s)){if(0==c){let e=eI(h);return{start:a,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}while(n<0?h.prevSibling():h.nextSibling());return{start:a,matched:!1}}(0,0,n,e,i,r,o)}}return function(e,t,n,r,i,o,s){let l=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),a=s.indexOf(l);if(a<0||a%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},h=e.doc.iterRange(t,n>0?e.doc.length:0),u=0;for(let e=0;!h.next().done&&e<=o;){let o=h.value;n<0&&(e+=o.length);let l=t+e*n;for(let e=n>0?0:o.length-1,t=n>0?o.length:-1;e!=t;e+=n){let t=s.indexOf(o[e]);if(!(t<0)&&r.resolveInner(l+e,1).type==i)if(t%2==0==n>0)u++;else{if(1==u)return{start:c,end:{from:l+e,to:l+e+1},matched:t>>1==a>>1};u--}}n>0&&(e+=o.length)}return h.done?{start:c,matched:!1}:null}(e,t,n,s,l.type,i,o)}function e_(e,t,n,r=0,i=0){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);let o=i;for(let i=r;i<t;i++)9==e.charCodeAt(i)?o+=n-o%n:o++;return o}class eL{constructor(e,t,n,r){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return 0==this.pos}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e instanceof RegExp?e.test(t):e(t)))return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=e_(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return null!=(e=this.overrideIndent)?e:e_(this.string,null,this.tabSize)}match(e,t,n){if("string"==typeof e){let r=e=>n?e.toLowerCase():e;return r(this.string.substr(this.pos,e.length))==r(e)?(!1!==t&&(this.pos+=e.length),!0):null}{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function eR(e){if("object"!=typeof e)return e;let t={};for(let n in e){let r=e[n];t[n]=r instanceof Array?r.slice():r}return t}let eP=new WeakMap;class eD extends d{constructor(e){let t=h(e.languageData),n=function(e){return{name:e.name||"",token:e.token,blankLine:e.blankLine||(()=>{}),startState:e.startState||(()=>!0),copyState:e.copyState||eR,indent:e.indent||(()=>null),languageData:e.languageData||{},tokenTable:e.tokenTable||ej,mergeTokens:!1!==e.mergeTokens}}(e),r;super(t,new class extends i.iX{createParse(e,t,n){return new eB(r,e,t,n)}},[],e.name),this.topNode=function(e,t){let n=i.Z6.define({id:ez.length,name:"Document",props:[c.add(()=>e),L.add(()=>e=>t.getIndent(e))],top:!0});return ez.push(n),n}(t,this),r=this,this.streamParser=n,this.stateAfter=new i.uY({perNode:!0}),this.tokenTable=e.tokenTable?new eV(n.tokenTable):eK}static define(e){return new eD(e)}getIndent(e){let t,{overrideIndentation:n}=e.options;n&&null!=(t=eP.get(e.state))&&t<e.pos-1e4&&(t=void 0);let r=eF(this,e.node.tree,e.node.from,e.node.from,null!=t?t:e.pos),i,o;if(r?(o=r.state,i=r.pos+1):(o=this.streamParser.startState(e.unit),i=e.node.from),e.pos-i>1e4)return null;for(;i<e.pos;){let t=e.state.doc.lineAt(i),r=Math.min(e.pos,t.to);if(t.length){let i=n?n(t.from):-1,s=new eL(t.text,e.state.tabSize,e.unit,i<0?void 0:i);for(;s.pos<r-t.from;)e$(this.streamParser.token,s,o)}else this.streamParser.blankLine(o,e.unit);if(r==e.pos)break;i=t.to+1}let s=e.lineAt(e.pos);return n&&null==t&&eP.set(e.state,s.from),this.streamParser.indent(o,/^\s*(.*)/.exec(s.text)[1],e)}get allowsNesting(){return!1}}function eF(e,t,n,r,o){let s=n>=r&&n+t.length<=o&&t.prop(e.stateAfter);if(s)return{state:e.streamParser.copyState(s),pos:n+t.length};for(let s=t.children.length-1;s>=0;s--){let l=t.children[s],a=n+t.positions[s],c=l instanceof i.PH&&a<o&&eF(e,l,a,r,o);if(c)return c}return null}class eB{constructor(e,t,n,r){this.lang=e,this.input=t,this.fragments=n,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let o=v.get(),s=r[0].from,{state:l,tree:a}=function(e,t,n,r,o){for(let o of t){let t=o.from+25*!!o.openStart,s=o.to-25*!!o.openEnd,l=t<=n&&s>n&&eF(e,o.tree,0-o.offset,n,s),a;if(l&&l.pos<=r&&(a=function e(t,n,r,o,s){if(s&&r<=0&&o>=n.length)return n;s||0!=r||n.type!=t.topNode||(s=!0);for(let l=n.children.length-1;l>=0;l--){let a=n.positions[l],c=n.children[l],h;if(a<o&&c instanceof i.PH){if(!(h=e(t,c,r-a,o-a,s)))break;return s?new i.PH(n.type,n.children.slice(0,l).concat(h),n.positions.slice(0,l+1),a+h.length):h}}return null}(e,o.tree,n+o.offset,l.pos+o.offset,!1)))return{state:l.state,tree:a}}return{state:e.streamParser.startState(o?N(o):4),tree:i.PH.empty}}(e,n,s,this.to,null==o?void 0:o.state);this.state=l,this.parsedPos=this.chunkStart=s+a.length;for(let e=0;e<a.children.length;e++)this.chunks.push(a.children[e]),this.chunkPos.push(a.positions[e]);o&&this.parsedPos<o.viewport.from-1e5&&r.some(e=>e.from<=o.viewport.from&&e.to>=o.viewport.from)&&(this.state=this.lang.streamParser.startState(N(o.state)),o.skipUntilInView(this.parsedPos,o.viewport.from),this.parsedPos=o.viewport.from),this.moveRangeIndex()}advance(){let e=v.get(),t=null==this.stoppedAt?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+512);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return(this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t)?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)"\n"==t&&(t="");else{let e=t.indexOf("\n");e>-1&&(t=t.slice(0,e))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),n=e+t.length;for(let e=this.rangeIndex;;){let r=this.ranges[e].to;if(r>=n||(t=t.slice(0,r-(n-t.length)),++e==this.ranges.length))break;let i=this.ranges[e].from,o=this.lineAfter(i);t+=o,n=i+o.length}return{line:t,end:n}}skipGapsTo(e,t,n){for(;;){let r=this.ranges[this.rangeIndex].to,i=e+t;if(n>0?r>i:r>=i)break;let o=this.ranges[++this.rangeIndex].from;t+=o-r}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,n,r){let i=4;if(this.ranges.length>1){r=this.skipGapsTo(t,r,1),t+=r;let e=this.chunk.length;r=this.skipGapsTo(n,r,-1),n+=r,i+=this.chunk.length-e}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&4==i&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==t?this.chunk[o+2]=n:this.chunk.push(e,t,n,i),r}parseLine(e){let{line:t,end:n}=this.nextLine(),r=0,{streamParser:i}=this.lang,o=new eL(t,e?e.state.tabSize:4,e?N(e.state):2);if(o.eol())i.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let e=e$(i.token,o,this.state);if(e&&(r=this.emitToken(this.lang.tokenTable.resolve(e),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=i.PH.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:eH,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new i.PH(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new i.PH(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function e$(e,t,n){t.start=t.pos;for(let r=0;r<10;r++){let r=e(t,n);if(t.pos>t.start)return r}throw Error("Stream parser failed to advance stream.")}let ej=Object.create(null),ez=[i.Z6.none],eH=new i.fI(ez),eq=[],eW=Object.create(null),eU=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])eU[e]=eZ(ej,t);class eV{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),eU)}resolve(e){return e?this.table[e]||(this.table[e]=eZ(this.extra,e)):0}}let eK=new eV(ej);function eJ(e,t){eq.indexOf(e)>-1||(eq.push(e),console.warn(t))}function eZ(e,t){let n=[];for(let r of t.split(" ")){let t=[];for(let n of r.split(".")){let r=e[n]||l._A[n];r?"function"==typeof r?t.length?t=t.map(r):eJ(n,`Modifier ${n} used at start of tag`):t.length?eJ(n,`Tag ${n} used as modifier`):t=Array.isArray(r)?r:[r]:eJ(n,`Unknown highlighting tag ${n}`)}for(let e of t)n.push(e)}if(!n.length)return 0;let r=t.replace(/ /g,"_"),o=r+" "+n.map(e=>e.id),s=eW[o];if(s)return s.id;let a=eW[o]=i.Z6.define({id:ez.length,name:r,props:[(0,l.pn)({[r]:n})]});return ez.push(a),a.id}s.OP.RTL,s.OP.LTR},18468:()=>{},21769:(e,t,n)=>{"use strict";n.d(t,{DM:()=>d,_A:()=>N,az:()=>u,pn:()=>a,vw:()=>o});var r=n(38348);let i=0;class o{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=i++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){if(e instanceof o&&(t=e),null==t?void 0:t.base)throw Error("Can not derive from a modified tag");let n=new o("string"==typeof e?e:"?",[],null,[]);if(n.set.push(n),t)for(let e of t.set)n.set.push(e);return n}static defineModifier(e){let t=new l(e);return e=>e.modified.indexOf(t)>-1?e:l.get(e.base||e,e.modified.concat(t).sort((e,t)=>e.id-t.id))}}let s=0;class l{constructor(e){this.name=e,this.instances=[],this.id=s++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(n=>{var r,i;return n.base==e&&(r=t,i=n.modified,r.length==i.length&&r.every((e,t)=>e==i[t]))});if(n)return n;let r=[],i=new o(e.name,r,e,t);for(let e of t)e.instances.push(i);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let r=0,i=t.length;r<i;r++)t.push(t[r].concat(e[n]));return t.sort((e,t)=>t.length-e.length)}(t);for(let t of e.set)if(!t.modified.length)for(let e of s)r.push(l.get(t,e));return i}}function a(e){let t=Object.create(null);for(let n in e){let r=e[n];for(let e of(Array.isArray(r)||(r=[r]),n.split(" ")))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),(t+=r[0].length)==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw RangeError("Invalid path: "+e);o=e.slice(t)}let s=n.length-1,l=n[s];if(!l)throw RangeError("Invalid path: "+e);let a=new h(r,i,s>0?n.slice(0,s):null);t[l]=a.sort(t[l])}}return c.add(t)}let c=new r.uY({combine(e,t){let n,r,i;for(;e||t;){if(!e||t&&e.depth>=t.depth?(i=t,t=t.next):(i=e,e=e.next),n&&n.mode==i.mode&&!i.context&&!n.context)continue;let o=new h(i.tags,i.mode,i.context);n?n.next=o:r=o,n=o}return r}});class h{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function u(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:r,all:i=null}=t||{};return{style:e=>{let t=i;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function d(e,t,n,r=0,i=e.length){let o=new p(r,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),r,i,"",o.highlighters),o.flush(i)}h.empty=new h([],2,null);class p{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,i,o){let{type:s,from:l,to:a}=e;if(l>=n||a<=t)return;s.isTop&&(o=this.highlighters.filter(e=>!e.scope||e.scope(s)));let u=i,d=function(e){let t=e.type.prop(c);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||h.empty,p=function(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}(o,d.tags);if(p&&(u&&(u+=" "),u+=p,1==d.mode&&(i+=(i?" ":"")+p)),this.startSpan(Math.max(t,l),u),d.opaque)return;let f=e.tree&&e.tree.prop(r.uY.mounted);if(f&&f.overlay){let r=e.node.enter(f.overlay[0].from+l,1),s=this.highlighters.filter(e=>!e.scope||e.scope(f.tree.type)),c=e.firstChild();for(let h=0,d=l;;h++){let p=h<f.overlay.length?f.overlay[h]:null,m=p?p.from+l:a,g=Math.max(t,d),y=Math.min(n,m);if(g<y&&c)for(;e.from<y&&(this.highlightRange(e,g,y,i,o),this.startSpan(Math.min(y,e.to),u),!(e.to>=m)&&e.nextSibling()););if(!p||m>n)break;(d=p.to+l)>t&&(this.highlightRange(r.cursor(),Math.max(t,p.from+l),Math.min(n,d),"",s),this.startSpan(Math.min(n,d),u))}c&&e.parent()}else if(e.firstChild()){f&&(i="");do{if(e.to<=t)continue;if(e.from>=n)break;this.highlightRange(e,t,n,i,o),this.startSpan(Math.min(n,e.to),u)}while(e.nextSibling());e.parent()}}}let f=o.define,m=f(),g=f(),y=f(g),v=f(g),w=f(),b=f(w),k=f(w),x=f(),C=f(x),S=f(),M=f(),A=f(),T=f(A),O=f(),N={comment:m,lineComment:f(m),blockComment:f(m),docComment:f(m),name:g,variableName:f(g),typeName:y,tagName:f(y),propertyName:v,attributeName:f(v),className:f(g),labelName:f(g),namespace:f(g),macroName:f(g),literal:w,string:b,docString:f(b),character:f(b),attributeValue:f(b),number:k,integer:f(k),float:f(k),bool:f(w),regexp:f(w),escape:f(w),color:f(w),url:f(w),keyword:S,self:f(S),null:f(S),atom:f(S),unit:f(S),modifier:f(S),operatorKeyword:f(S),controlKeyword:f(S),definitionKeyword:f(S),moduleKeyword:f(S),operator:M,derefOperator:f(M),arithmeticOperator:f(M),logicOperator:f(M),bitwiseOperator:f(M),compareOperator:f(M),updateOperator:f(M),definitionOperator:f(M),typeOperator:f(M),controlOperator:f(M),punctuation:A,separator:f(A),bracket:T,angleBracket:f(T),squareBracket:f(T),paren:f(T),brace:f(T),content:x,heading:C,heading1:f(C),heading2:f(C),heading3:f(C),heading4:f(C),heading5:f(C),heading6:f(C),contentSeparator:f(x),list:f(x),quote:f(x),emphasis:f(x),strong:f(x),link:f(x),monospace:f(x),strikethrough:f(x),inserted:f(),deleted:f(),changed:f(),invalid:f(),meta:O,documentMeta:f(O),annotation:f(O),processingInstruction:f(O),definition:o.defineModifier("definition"),constant:o.defineModifier("constant"),function:o.defineModifier("function"),standard:o.defineModifier("standard"),local:o.defineModifier("local"),special:o.defineModifier("special")};for(let e in N){let t=N[e];t instanceof o&&(t.name=e)}u([{tag:N.link,class:"tok-link"},{tag:N.heading,class:"tok-heading"},{tag:N.emphasis,class:"tok-emphasis"},{tag:N.strong,class:"tok-strong"},{tag:N.keyword,class:"tok-keyword"},{tag:N.atom,class:"tok-atom"},{tag:N.bool,class:"tok-bool"},{tag:N.url,class:"tok-url"},{tag:N.labelName,class:"tok-labelName"},{tag:N.inserted,class:"tok-inserted"},{tag:N.deleted,class:"tok-deleted"},{tag:N.literal,class:"tok-literal"},{tag:N.string,class:"tok-string"},{tag:N.number,class:"tok-number"},{tag:[N.regexp,N.escape,N.special(N.string)],class:"tok-string2"},{tag:N.variableName,class:"tok-variableName"},{tag:N.local(N.variableName),class:"tok-variableName tok-local"},{tag:N.definition(N.variableName),class:"tok-variableName tok-definition"},{tag:N.special(N.variableName),class:"tok-variableName2"},{tag:N.definition(N.propertyName),class:"tok-propertyName tok-definition"},{tag:N.typeName,class:"tok-typeName"},{tag:N.namespace,class:"tok-namespace"},{tag:N.className,class:"tok-className"},{tag:N.macroName,class:"tok-macroName"},{tag:N.propertyName,class:"tok-propertyName"},{tag:N.operator,class:"tok-operator"},{tag:N.comment,class:"tok-comment"},{tag:N.meta,class:"tok-meta"},{tag:N.invalid,class:"tok-invalid"},{tag:N.punctuation,class:"tok-punctuation"}])},22738:(e,t,n)=>{"use strict";n.d(t,{hG:()=>l,pb:()=>s,y5:()=>o});var r=n(12115);let i=(0,r.createContext)({}),o=()=>{let e=function(){let{dom:e,editor:t,setLoading:n,editorFactory:o}=(0,r.useContext)(i),s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let r=s.current;if(!o||!r)return;e.current=r;let i=o(r);if(i)return n(!0),i.create().then(e=>{t.current=e}).finally(()=>{n(!1)}).catch(console.error),()=>{i.destroy().catch(console.error)}},[e,t,o,n]),s}();return r.createElement("div",{"data-milkdown-root":!0,ref:e})},s=({children:e})=>{let t=(0,r.useRef)(void 0),[n,o]=(0,r.useState)(void 0),s=(0,r.useRef)(void 0),[l,a]=(0,r.useState)(!0),c=(0,r.useMemo)(()=>({loading:l,dom:t,editor:s,setLoading:a,editorFactory:n,setEditorFactory:o}),[l,n]);return r.createElement(i.Provider,{value:c},e)};function l(e,t=[]){let n=(0,r.useContext)(i),o=(0,r.useCallback)(e,t);return(0,r.useLayoutEffect)(()=>{n.setEditorFactory(()=>o)},[n,o]),{loading:n.loading,get:()=>n.editor.current}}},37914:(e,t,n)=>{"use strict";let r,i,o,s;n.d(t,{mA:()=>w3});let l=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},a=function(e){return e};var c,h,u,d,p,f,m,g,y,v,w,b,k,x,C,S,M,A,T,O,N,I,E,_,L,R,P,D,F,B,$,j,z,H,q,W,U,V,K,J,Z,G,Y,X,Q,ee,et,en,er,ei,eo,es,el,ea,ec,eh,eu,ed,ep,ef,em,eg,ey,ev,ew,eb,ek,ex,eC,eS,eM,eA,eT,eO,eN=Math.max,eI="object"==typeof global&&global&&global.Object===Object&&global,eE="object"==typeof self&&self&&self.Object===Object&&self,e_=eI||eE||Function("return this")(),eL=e_.Symbol,eR=Object.prototype,eP=eR.hasOwnProperty,eD=eR.toString,eF=eL?eL.toStringTag:void 0;let eB=function(e){var t=eP.call(e,eF),n=e[eF];try{e[eF]=void 0;var r=!0}catch(e){}var i=eD.call(e);return r&&(t?e[eF]=n:delete e[eF]),i};var e$=Object.prototype.toString,ej=eL?eL.toStringTag:void 0;let ez=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ej&&ej in Object(e)?eB(e):e$.call(e)},eH=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},eq=function(e){if(!eH(e))return!1;var t=ez(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var eW=e_["__core-js_shared__"],eU=function(){var e=/[^.]+$/.exec(eW&&eW.keys&&eW.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),eV=Function.prototype.toString;let eK=function(e){if(null!=e){try{return eV.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var eJ=/^\[object .+?Constructor\]$/,eZ=Object.prototype,eG=Function.prototype.toString,eY=eZ.hasOwnProperty,eX=RegExp("^"+eG.call(eY).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let eQ=function(e){return!!eH(e)&&(!eU||!(eU in e))&&(eq(e)?eX:eJ).test(eK(e))},e0=function(e,t){var n=null==e?void 0:e[t];return eQ(n)?n:void 0};var e1=function(){try{var e=e0(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),e2=Date.now,e5=function(e){var t=0,n=0;return function(){var r=e2(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(e1?function(e,t){return e1(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:a);let e3=function(e,t){var n;return e5((n=eN(void 0===(n=t)?e.length-1:n,0),function(){for(var t=arguments,r=-1,i=eN(t.length-n,0),o=Array(i);++r<i;)o[r]=t[n+r];r=-1;for(var s=Array(n+1);++r<n;)s[r]=t[r];return s[n]=a(o),l(e,this,s)}),e+"")},e4=function(e,t){return e===t||e!=e&&t!=t},e9=function(e,t){for(var n=e.length;n--;)if(e4(e[n][0],t))return n;return -1};var e7=Array.prototype.splice;function e8(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}e8.prototype.clear=function(){this.__data__=[],this.size=0},e8.prototype.delete=function(e){var t=this.__data__,n=e9(t,e);return!(n<0)&&(n==t.length-1?t.pop():e7.call(t,n,1),--this.size,!0)},e8.prototype.get=function(e){var t=this.__data__,n=e9(t,e);return n<0?void 0:t[n][1]},e8.prototype.has=function(e){return e9(this.__data__,e)>-1},e8.prototype.set=function(e,t){var n=this.__data__,r=e9(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var e6=e0(e_,"Map"),te=e0(Object,"create"),tt=Object.prototype.hasOwnProperty,tn=Object.prototype.hasOwnProperty;function tr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}tr.prototype.clear=function(){this.__data__=te?te(null):{},this.size=0},tr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t},tr.prototype.get=function(e){var t=this.__data__;if(te){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return tt.call(t,e)?t[e]:void 0},tr.prototype.has=function(e){var t=this.__data__;return te?void 0!==t[e]:tn.call(t,e)},tr.prototype.set=function(e,t){var n=this.__data__;return this.size+=+!this.has(e),n[e]=te&&void 0===t?"__lodash_hash_undefined__":t,this};let ti=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},to=function(e,t){var n=e.__data__;return ti(t)?n["string"==typeof t?"string":"hash"]:n.map};function ts(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function tl(e){var t=this.__data__=new e8(e);this.size=t.size}ts.prototype.clear=function(){this.size=0,this.__data__={hash:new tr,map:new(e6||e8),string:new tr}},ts.prototype.delete=function(e){var t=to(this,e).delete(e);return this.size-=!!t,t},ts.prototype.get=function(e){return to(this,e).get(e)},ts.prototype.has=function(e){return to(this,e).has(e)},ts.prototype.set=function(e,t){var n=to(this,e),r=n.size;return n.set(e,t),this.size+=+(n.size!=r),this},tl.prototype.clear=function(){this.__data__=new e8,this.size=0},tl.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},tl.prototype.get=function(e){return this.__data__.get(e)},tl.prototype.has=function(e){return this.__data__.has(e)},tl.prototype.set=function(e,t){var n=this.__data__;if(n instanceof e8){var r=n.__data__;if(!e6||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ts(r)}return n.set(e,t),this.size=n.size,this};let ta=function(e,t,n){"__proto__"==t&&e1?e1(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},tc=function(e,t,n){(void 0===n||e4(e[t],n))&&(void 0!==n||t in e)||ta(e,t,n)},th=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),s=o.length;s--;){var l=o[++r];if(!1===t(i[l],l,i))break}return e};var tu="object"==typeof exports&&exports&&!exports.nodeType&&exports,td=tu&&"object"==typeof module&&module&&!module.nodeType&&module,tp=td&&td.exports===tu?e_.Buffer:void 0,tf=tp?tp.allocUnsafe:void 0;let tm=function(e,t){if(t)return e.slice();var n=e.length,r=tf?tf(n):new e.constructor(n);return e.copy(r),r};var tg=e_.Uint8Array;let ty=function(e){var t=new e.constructor(e.byteLength);return new tg(t).set(new tg(e)),t},tv=function(e,t){var n=t?ty(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},tw=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var tb=Object.create,tk=function(){function e(){}return function(t){if(!eH(t))return{};if(tb)return tb(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),tx=(h=Object.getPrototypeOf,u=Object,function(e){return h(u(e))}),tC=Object.prototype;let tS=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||tC)},tM=function(e){return null!=e&&"object"==typeof e},tA=function(e){return tM(e)&&"[object Arguments]"==ez(e)};var tT=Object.prototype,tO=tT.hasOwnProperty,tN=tT.propertyIsEnumerable,tI=tA(function(){return arguments}())?tA:function(e){return tM(e)&&tO.call(e,"callee")&&!tN.call(e,"callee")},tE=Array.isArray;let t_=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff},tL=function(e){return null!=e&&t_(e.length)&&!eq(e)};var tR="object"==typeof exports&&exports&&!exports.nodeType&&exports,tP=tR&&"object"==typeof module&&module&&!module.nodeType&&module,tD=tP&&tP.exports===tR?e_.Buffer:void 0;let tF=(tD?tD.isBuffer:void 0)||function(){return!1};var tB=Object.prototype,t$=Function.prototype.toString,tj=tB.hasOwnProperty,tz=t$.call(Object);let tH=function(e){if(!tM(e)||"[object Object]"!=ez(e))return!1;var t=tx(e);if(null===t)return!0;var n=tj.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&t$.call(n)==tz};var tq={};tq["[object Float32Array]"]=tq["[object Float64Array]"]=tq["[object Int8Array]"]=tq["[object Int16Array]"]=tq["[object Int32Array]"]=tq["[object Uint8Array]"]=tq["[object Uint8ClampedArray]"]=tq["[object Uint16Array]"]=tq["[object Uint32Array]"]=!0,tq["[object Arguments]"]=tq["[object Array]"]=tq["[object ArrayBuffer]"]=tq["[object Boolean]"]=tq["[object DataView]"]=tq["[object Date]"]=tq["[object Error]"]=tq["[object Function]"]=tq["[object Map]"]=tq["[object Number]"]=tq["[object Object]"]=tq["[object RegExp]"]=tq["[object Set]"]=tq["[object String]"]=tq["[object WeakMap]"]=!1;var tW="object"==typeof exports&&exports&&!exports.nodeType&&exports,tU=tW&&"object"==typeof module&&module&&!module.nodeType&&module,tV=tU&&tU.exports===tW&&eI.process,tK=function(){try{var e=tU&&tU.require&&tU.require("util").types;if(e)return e;return tV&&tV.binding&&tV.binding("util")}catch(e){}}(),tJ=tK&&tK.isTypedArray,tZ=tJ?function(e){return tJ(e)}:function(e){return tM(e)&&t_(e.length)&&!!tq[ez(e)]};let tG=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var tY=Object.prototype.hasOwnProperty;let tX=function(e,t,n){var r=e[t];tY.call(e,t)&&e4(r,n)&&(void 0!==n||t in e)||ta(e,t,n)},tQ=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var l=t[o],a=r?r(n[l],e[l],l,n,e):void 0;void 0===a&&(a=e[l]),i?ta(n,l,a):tX(n,l,a)}return n},t0=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var t1=/^(?:0|[1-9]\d*)$/;let t2=function(e,t){var n=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"==n||"symbol"!=n&&t1.test(e))&&e>-1&&e%1==0&&e<t};var t5=Object.prototype.hasOwnProperty;let t3=function(e,t){var n=tE(e),r=!n&&tI(e),i=!n&&!r&&tF(e),o=!n&&!r&&!i&&tZ(e),s=n||r||i||o,l=s?t0(e.length,String):[],a=l.length;for(var c in e)(t||t5.call(e,c))&&!(s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||t2(c,a)))&&l.push(c);return l},t4=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var t9=Object.prototype.hasOwnProperty;let t7=function(e){if(!eH(e))return t4(e);var t=tS(e),n=[];for(var r in e)"constructor"==r&&(t||!t9.call(e,r))||n.push(r);return n},t8=function(e){return tL(e)?t3(e,!0):t7(e)},t6=function(e,t,n,r,i,o,s){var l=tG(e,n),a=tG(t,n),c=s.get(a);if(c)return void tc(e,n,c);var h=o?o(l,a,n+"",e,t,s):void 0,u=void 0===h;if(u){var d=tE(a),p=!d&&tF(a),f=!d&&!p&&tZ(a);(h=a,d||p||f)?tE(l)?h=l:tM(l)&&tL(l)?h=tw(l):p?(u=!1,h=tm(a,!0)):f?(u=!1,h=tv(a,!0)):h=[]:tH(a)||tI(a)?(h=l,tI(l))?h=tQ(l,t8(l)):(!eH(l)||eq(l))&&(h="function"!=typeof a.constructor||tS(a)?{}:tk(tx(a))):u=!1}u&&(s.set(a,h),i(h,a,r,o,s),s.delete(a)),tc(e,n,h)},ne=function e(t,n,r,i,o){t!==n&&th(n,function(s,l){if(o||(o=new tl),eH(s))t6(t,n,l,r,e,i,o);else{var a=i?i(tG(t,l),s,l+"",t,n,o):void 0;void 0===a&&(a=s),tc(t,l,a)}},t8)},nt=function e(t,n,r,i,o,s){return eH(t)&&eH(n)&&(s.set(n,t),ne(t,n,void 0,e,s),s.delete(n)),t},nn=function(e,t,n){if(!eH(n))return!1;var r=typeof t;return("number"==r?!!(tL(n)&&t2(t,n.length)):"string"==r&&t in n)&&e4(n[t],e)};var nr=function(e){return e3(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&nn(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var l=n[r];l&&e(t,l,r,o)}return t})}(function(e,t,n,r){ne(e,t,n,r)}),ni=e3(function(e){return e.push(void 0,nt),l(nr,void 0,e)}),no=n(14563);function ns(e){return new no.Yy(no.Tg.define(e))}function nl(e){return Promise.all([n.e(6485),n.e(8730)]).then(n.bind(n,78730)).then(t=>t.sql({dialect:t[e]}))}let na=[no.t$.of({name:"C",extensions:["c","h","ino"],load:()=>Promise.all([n.e(6485),n.e(5347)]).then(n.bind(n,75347)).then(e=>e.cpp())}),no.t$.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load:()=>Promise.all([n.e(6485),n.e(5347)]).then(n.bind(n,75347)).then(e=>e.cpp())}),no.t$.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load:()=>nl("Cassandra")}),no.t$.of({name:"CSS",extensions:["css"],load:()=>Promise.all([n.e(6485),n.e(3366)]).then(n.bind(n,43366)).then(e=>e.css())}),no.t$.of({name:"Go",extensions:["go"],load:()=>Promise.all([n.e(6485),n.e(5938)]).then(n.bind(n,35938)).then(e=>e.go())}),no.t$.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load:()=>Promise.all([n.e(6485),n.e(3366),n.e(1224),n.e(2158)]).then(n.bind(n,32158)).then(e=>e.html())}),no.t$.of({name:"Java",extensions:["java"],load:()=>Promise.all([n.e(6485),n.e(1669)]).then(n.bind(n,11669)).then(e=>e.java())}),no.t$.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load:()=>Promise.all([n.e(6485),n.e(1224)]).then(n.bind(n,31224)).then(e=>e.javascript())}),no.t$.of({name:"Jinja",extensions:["j2","jinja","jinja2"],load:()=>Promise.all([n.e(6485),n.e(3366),n.e(1224),n.e(2158),n.e(1302)]).then(n.bind(n,81302)).then(e=>e.jinja())}),no.t$.of({name:"JSON",alias:["json5"],extensions:["json","map"],load:()=>Promise.all([n.e(6485),n.e(3196)]).then(n.bind(n,93196)).then(e=>e.json())}),no.t$.of({name:"JSX",extensions:["jsx"],load:()=>Promise.all([n.e(6485),n.e(1224)]).then(n.bind(n,31224)).then(e=>e.javascript({jsx:!0}))}),no.t$.of({name:"LESS",extensions:["less"],load:()=>Promise.all([n.e(6485),n.e(3366),n.e(4217)]).then(n.bind(n,4217)).then(e=>e.less())}),no.t$.of({name:"Liquid",extensions:["liquid"],load:()=>Promise.all([n.e(6485),n.e(3366),n.e(1224),n.e(2158),n.e(5206)]).then(n.bind(n,15206)).then(e=>e.liquid())}),no.t$.of({name:"MariaDB SQL",load:()=>nl("MariaSQL")}),no.t$.of({name:"Markdown",extensions:["md","markdown","mkd"],load:()=>Promise.all([n.e(6485),n.e(3366),n.e(1224),n.e(2158),n.e(805)]).then(n.bind(n,80805)).then(e=>e.markdown())}),no.t$.of({name:"MS SQL",load:()=>nl("MSSQL")}),no.t$.of({name:"MySQL",load:()=>nl("MySQL")}),no.t$.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load:()=>Promise.all([n.e(6485),n.e(3366),n.e(1224),n.e(2158),n.e(4711)]).then(n.bind(n,34711)).then(e=>e.php())}),no.t$.of({name:"PLSQL",extensions:["pls"],load:()=>nl("PLSQL")}),no.t$.of({name:"PostgreSQL",load:()=>nl("PostgreSQL")}),no.t$.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load:()=>Promise.all([n.e(6485),n.e(1167)]).then(n.bind(n,51167)).then(e=>e.python())}),no.t$.of({name:"Rust",extensions:["rs"],load:()=>Promise.all([n.e(6485),n.e(7754)]).then(n.bind(n,67754)).then(e=>e.rust())}),no.t$.of({name:"Sass",extensions:["sass"],load:()=>Promise.all([n.e(6485),n.e(3366),n.e(6272)]).then(n.bind(n,66272)).then(e=>e.sass({indented:!0}))}),no.t$.of({name:"SCSS",extensions:["scss"],load:()=>Promise.all([n.e(6485),n.e(3366),n.e(6272)]).then(n.bind(n,66272)).then(e=>e.sass())}),no.t$.of({name:"SQL",extensions:["sql"],load:()=>nl("StandardSQL")}),no.t$.of({name:"SQLite",load:()=>nl("SQLite")}),no.t$.of({name:"TSX",extensions:["tsx"],load:()=>Promise.all([n.e(6485),n.e(1224)]).then(n.bind(n,31224)).then(e=>e.javascript({jsx:!0,typescript:!0}))}),no.t$.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load:()=>Promise.all([n.e(6485),n.e(1224)]).then(n.bind(n,31224)).then(e=>e.javascript({typescript:!0}))}),no.t$.of({name:"WebAssembly",extensions:["wat","wast"],load:()=>Promise.all([n.e(6485),n.e(6899)]).then(n.bind(n,6899)).then(e=>e.wast())}),no.t$.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load:()=>Promise.all([n.e(6485),n.e(1135)]).then(n.bind(n,11135)).then(e=>e.xml())}),no.t$.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load:()=>Promise.all([n.e(6485),n.e(1936)]).then(n.bind(n,21936)).then(e=>e.yaml())}),no.t$.of({name:"APL",extensions:["dyalog","apl"],load:()=>n.e(4847).then(n.bind(n,44847)).then(e=>ns(e.apl))}),no.t$.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load:()=>n.e(6758).then(n.bind(n,6758)).then(e=>ns(e.asciiArmor))}),no.t$.of({name:"ASN.1",extensions:["asn","asn1"],load:()=>n.e(1441).then(n.bind(n,1441)).then(e=>ns(e.asn1({})))}),no.t$.of({name:"Asterisk",filename:/^extensions\.conf$/i,load:()=>n.e(251).then(n.bind(n,72632)).then(e=>ns(e.asterisk))}),no.t$.of({name:"Brainfuck",extensions:["b","bf"],load:()=>n.e(8623).then(n.bind(n,18623)).then(e=>ns(e.brainfuck))}),no.t$.of({name:"Cobol",extensions:["cob","cpy"],load:()=>n.e(3379).then(n.bind(n,73379)).then(e=>ns(e.cobol))}),no.t$.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load:()=>n.e(7350).then(n.bind(n,7350)).then(e=>ns(e.csharp))}),no.t$.of({name:"Clojure",extensions:["clj","cljc","cljx"],load:()=>n.e(4828).then(n.bind(n,84828)).then(e=>ns(e.clojure))}),no.t$.of({name:"ClojureScript",extensions:["cljs"],load:()=>n.e(4828).then(n.bind(n,84828)).then(e=>ns(e.clojure))}),no.t$.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load:()=>n.e(9899).then(n.bind(n,59899)).then(e=>ns(e.gss))}),no.t$.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load:()=>n.e(8979).then(n.bind(n,68979)).then(e=>ns(e.cmake))}),no.t$.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load:()=>n.e(5591).then(n.bind(n,85591)).then(e=>ns(e.coffeeScript))}),no.t$.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load:()=>n.e(3365).then(n.bind(n,83365)).then(e=>ns(e.commonLisp))}),no.t$.of({name:"Cypher",extensions:["cyp","cypher"],load:()=>n.e(3267).then(n.bind(n,53267)).then(e=>ns(e.cypher))}),no.t$.of({name:"Cython",extensions:["pyx","pxd","pxi"],load:()=>n.e(210).then(n.bind(n,70210)).then(e=>ns(e.cython))}),no.t$.of({name:"Crystal",extensions:["cr"],load:()=>n.e(6826).then(n.bind(n,56826)).then(e=>ns(e.crystal))}),no.t$.of({name:"D",extensions:["d"],load:()=>n.e(9036).then(n.bind(n,89036)).then(e=>ns(e.d))}),no.t$.of({name:"Dart",extensions:["dart"],load:()=>n.e(7350).then(n.bind(n,7350)).then(e=>ns(e.dart))}),no.t$.of({name:"diff",extensions:["diff","patch"],load:()=>n.e(7979).then(n.bind(n,47979)).then(e=>ns(e.diff))}),no.t$.of({name:"Dockerfile",filename:/^Dockerfile$/,load:()=>n.e(9750).then(n.bind(n,39750)).then(e=>ns(e.dockerFile))}),no.t$.of({name:"DTD",extensions:["dtd"],load:()=>n.e(5516).then(n.bind(n,35516)).then(e=>ns(e.dtd))}),no.t$.of({name:"Dylan",extensions:["dylan","dyl","intr"],load:()=>n.e(9778).then(n.bind(n,89778)).then(e=>ns(e.dylan))}),no.t$.of({name:"EBNF",load:()=>n.e(7455).then(n.bind(n,57455)).then(e=>ns(e.ebnf))}),no.t$.of({name:"ECL",extensions:["ecl"],load:()=>n.e(2100).then(n.bind(n,72100)).then(e=>ns(e.ecl))}),no.t$.of({name:"edn",extensions:["edn"],load:()=>n.e(4828).then(n.bind(n,84828)).then(e=>ns(e.clojure))}),no.t$.of({name:"Eiffel",extensions:["e"],load:()=>n.e(1307).then(n.bind(n,31307)).then(e=>ns(e.eiffel))}),no.t$.of({name:"Elm",extensions:["elm"],load:()=>n.e(7308).then(n.bind(n,87308)).then(e=>ns(e.elm))}),no.t$.of({name:"Erlang",extensions:["erl"],load:()=>n.e(2191).then(n.bind(n,62191)).then(e=>ns(e.erlang))}),no.t$.of({name:"Esper",load:()=>n.e(752).then(n.bind(n,90752)).then(e=>ns(e.esper))}),no.t$.of({name:"Factor",extensions:["factor"],load:()=>n.e(2575).then(n.bind(n,72575)).then(e=>ns(e.factor))}),no.t$.of({name:"FCL",load:()=>n.e(6433).then(n.bind(n,46433)).then(e=>ns(e.fcl))}),no.t$.of({name:"Forth",extensions:["forth","fth","4th"],load:()=>n.e(6415).then(n.bind(n,6415)).then(e=>ns(e.forth))}),no.t$.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load:()=>n.e(7218).then(n.bind(n,47218)).then(e=>ns(e.fortran))}),no.t$.of({name:"F#",alias:["fsharp"],extensions:["fs"],load:()=>n.e(8022).then(n.bind(n,68022)).then(e=>ns(e.fSharp))}),no.t$.of({name:"Gas",extensions:["s"],load:()=>n.e(745).then(n.bind(n,70745)).then(e=>ns(e.gas))}),no.t$.of({name:"Gherkin",extensions:["feature"],load:()=>n.e(90).then(n.bind(n,70090)).then(e=>ns(e.gherkin))}),no.t$.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load:()=>n.e(3718).then(n.bind(n,53718)).then(e=>ns(e.groovy))}),no.t$.of({name:"Haskell",extensions:["hs"],load:()=>n.e(5628).then(n.bind(n,85628)).then(e=>ns(e.haskell))}),no.t$.of({name:"Haxe",extensions:["hx"],load:()=>n.e(2368).then(n.bind(n,32368)).then(e=>ns(e.haxe))}),no.t$.of({name:"HXML",extensions:["hxml"],load:()=>n.e(2368).then(n.bind(n,32368)).then(e=>ns(e.hxml))}),no.t$.of({name:"HTTP",load:()=>n.e(7268).then(n.bind(n,67268)).then(e=>ns(e.http))}),no.t$.of({name:"IDL",extensions:["pro"],load:()=>n.e(699).then(n.bind(n,30699)).then(e=>ns(e.idl))}),no.t$.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load:()=>n.e(360).then(n.bind(n,87979)).then(e=>ns(e.jsonld))}),no.t$.of({name:"Julia",extensions:["jl"],load:()=>n.e(2377).then(n.bind(n,12377)).then(e=>ns(e.julia))}),no.t$.of({name:"Kotlin",extensions:["kt","kts"],load:()=>n.e(7350).then(n.bind(n,7350)).then(e=>ns(e.kotlin))}),no.t$.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load:()=>n.e(4457).then(n.bind(n,84457)).then(e=>ns(e.liveScript))}),no.t$.of({name:"Lua",extensions:["lua"],load:()=>n.e(2258).then(n.bind(n,52258)).then(e=>ns(e.lua))}),no.t$.of({name:"mIRC",extensions:["mrc"],load:()=>n.e(1337).then(n.bind(n,11337)).then(e=>ns(e.mirc))}),no.t$.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load:()=>n.e(6980).then(n.bind(n,46980)).then(e=>ns(e.mathematica))}),no.t$.of({name:"Modelica",extensions:["mo"],load:()=>n.e(2632).then(n.bind(n,22632)).then(e=>ns(e.modelica))}),no.t$.of({name:"MUMPS",extensions:["mps"],load:()=>n.e(1092).then(n.bind(n,91092)).then(e=>ns(e.mumps))}),no.t$.of({name:"Mbox",extensions:["mbox"],load:()=>n.e(6996).then(n.bind(n,26996)).then(e=>ns(e.mbox))}),no.t$.of({name:"Nginx",filename:/nginx.*\.conf$/i,load:()=>n.e(3608).then(n.bind(n,73608)).then(e=>ns(e.nginx))}),no.t$.of({name:"NSIS",extensions:["nsh","nsi"],load:()=>n.e(5295).then(n.bind(n,5295)).then(e=>ns(e.nsis))}),no.t$.of({name:"NTriples",extensions:["nt","nq"],load:()=>n.e(4647).then(n.bind(n,24647)).then(e=>ns(e.ntriples))}),no.t$.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load:()=>n.e(7350).then(n.bind(n,7350)).then(e=>ns(e.objectiveC))}),no.t$.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load:()=>n.e(7350).then(n.bind(n,7350)).then(e=>ns(e.objectiveCpp))}),no.t$.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load:()=>n.e(8022).then(n.bind(n,68022)).then(e=>ns(e.oCaml))}),no.t$.of({name:"Octave",extensions:["m"],load:()=>n.e(5512).then(n.bind(n,75512)).then(e=>ns(e.octave))}),no.t$.of({name:"Oz",extensions:["oz"],load:()=>n.e(6269).then(n.bind(n,46269)).then(e=>ns(e.oz))}),no.t$.of({name:"Pascal",extensions:["p","pas"],load:()=>n.e(1008).then(n.bind(n,91008)).then(e=>ns(e.pascal))}),no.t$.of({name:"Perl",extensions:["pl","pm"],load:()=>n.e(2941).then(n.bind(n,72941)).then(e=>ns(e.perl))}),no.t$.of({name:"Pig",extensions:["pig"],load:()=>n.e(9888).then(n.bind(n,59888)).then(e=>ns(e.pig))}),no.t$.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load:()=>n.e(5981).then(n.bind(n,75981)).then(e=>ns(e.powerShell))}),no.t$.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load:()=>n.e(1909).then(n.bind(n,41909)).then(e=>ns(e.properties))}),no.t$.of({name:"ProtoBuf",extensions:["proto"],load:()=>n.e(7423).then(n.bind(n,47423)).then(e=>ns(e.protobuf))}),no.t$.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load:()=>n.e(3572).then(n.bind(n,3572)).then(e=>ns(e.pug))}),no.t$.of({name:"Puppet",extensions:["pp"],load:()=>n.e(3102).then(n.bind(n,3102)).then(e=>ns(e.puppet))}),no.t$.of({name:"Q",extensions:["q"],load:()=>n.e(8907).then(n.bind(n,18907)).then(e=>ns(e.q))}),no.t$.of({name:"R",alias:["rscript"],extensions:["r","R"],load:()=>n.e(3686).then(n.bind(n,33686)).then(e=>ns(e.r))}),no.t$.of({name:"RPM Changes",load:()=>n.e(2365).then(n.bind(n,62365)).then(e=>ns(e.rpmChanges))}),no.t$.of({name:"RPM Spec",extensions:["spec"],load:()=>n.e(2365).then(n.bind(n,62365)).then(e=>ns(e.rpmSpec))}),no.t$.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load:()=>n.e(1412).then(n.bind(n,11412)).then(e=>ns(e.ruby))}),no.t$.of({name:"SAS",extensions:["sas"],load:()=>n.e(3221).then(n.bind(n,93221)).then(e=>ns(e.sas))}),no.t$.of({name:"Scala",extensions:["scala"],load:()=>n.e(7350).then(n.bind(n,7350)).then(e=>ns(e.scala))}),no.t$.of({name:"Scheme",extensions:["scm","ss"],load:()=>n.e(5635).then(n.bind(n,5635)).then(e=>ns(e.scheme))}),no.t$.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load:()=>n.e(3346).then(n.bind(n,63346)).then(e=>ns(e.shell))}),no.t$.of({name:"Sieve",extensions:["siv","sieve"],load:()=>n.e(1078).then(n.bind(n,71078)).then(e=>ns(e.sieve))}),no.t$.of({name:"Smalltalk",extensions:["st"],load:()=>n.e(9497).then(n.bind(n,59497)).then(e=>ns(e.smalltalk))}),no.t$.of({name:"Solr",load:()=>n.e(5264).then(n.bind(n,5264)).then(e=>ns(e.solr))}),no.t$.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load:()=>n.e(8022).then(n.bind(n,68022)).then(e=>ns(e.sml))}),no.t$.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load:()=>n.e(1281).then(n.bind(n,91281)).then(e=>ns(e.sparql))}),no.t$.of({name:"Spreadsheet",alias:["excel","formula"],load:()=>n.e(5818).then(n.bind(n,75818)).then(e=>ns(e.spreadsheet))}),no.t$.of({name:"Squirrel",extensions:["nut"],load:()=>n.e(7350).then(n.bind(n,7350)).then(e=>ns(e.squirrel))}),no.t$.of({name:"Stylus",extensions:["styl"],load:()=>n.e(9626).then(n.bind(n,59626)).then(e=>ns(e.stylus))}),no.t$.of({name:"Swift",extensions:["swift"],load:()=>n.e(167).then(n.bind(n,50167)).then(e=>ns(e.swift))}),no.t$.of({name:"sTeX",load:()=>n.e(4334).then(n.bind(n,74334)).then(e=>ns(e.stex))}),no.t$.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load:()=>n.e(4334).then(n.bind(n,74334)).then(e=>ns(e.stex))}),no.t$.of({name:"SystemVerilog",extensions:["v","sv","svh"],load:()=>n.e(9786).then(n.bind(n,59786)).then(e=>ns(e.verilog))}),no.t$.of({name:"Tcl",extensions:["tcl"],load:()=>n.e(9111).then(n.bind(n,89111)).then(e=>ns(e.tcl))}),no.t$.of({name:"Textile",extensions:["textile"],load:()=>n.e(2209).then(n.bind(n,92209)).then(e=>ns(e.textile))}),no.t$.of({name:"TiddlyWiki",load:()=>n.e(9616).then(n.bind(n,49616)).then(e=>ns(e.tiddlyWiki))}),no.t$.of({name:"Tiki wiki",load:()=>n.e(6063).then(n.bind(n,36063)).then(e=>ns(e.tiki))}),no.t$.of({name:"TOML",extensions:["toml"],load:()=>n.e(5768).then(n.bind(n,45768)).then(e=>ns(e.toml))}),no.t$.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load:()=>n.e(9791).then(n.bind(n,49791)).then(e=>ns(e.troff))}),no.t$.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load:()=>n.e(4925).then(n.bind(n,84925)).then(e=>ns(e.ttcn))}),no.t$.of({name:"TTCN_CFG",extensions:["cfg"],load:()=>n.e(5930).then(n.bind(n,75930)).then(e=>ns(e.ttcnCfg))}),no.t$.of({name:"Turtle",extensions:["ttl"],load:()=>n.e(9310).then(n.bind(n,19310)).then(e=>ns(e.turtle))}),no.t$.of({name:"Web IDL",extensions:["webidl"],load:()=>n.e(165).then(n.bind(n,70165)).then(e=>ns(e.webIDL))}),no.t$.of({name:"VB.NET",extensions:["vb"],load:()=>n.e(1252).then(n.bind(n,41252)).then(e=>ns(e.vb))}),no.t$.of({name:"VBScript",extensions:["vbs"],load:()=>n.e(9235).then(n.bind(n,79235)).then(e=>ns(e.vbScript))}),no.t$.of({name:"Velocity",extensions:["vtl"],load:()=>n.e(1387).then(n.bind(n,41387)).then(e=>ns(e.velocity))}),no.t$.of({name:"Verilog",extensions:["v"],load:()=>n.e(9786).then(n.bind(n,59786)).then(e=>ns(e.verilog))}),no.t$.of({name:"VHDL",extensions:["vhd","vhdl"],load:()=>n.e(3546).then(n.bind(n,33546)).then(e=>ns(e.vhdl))}),no.t$.of({name:"XQuery",extensions:["xy","xquery","xq","xqm","xqy"],load:()=>n.e(4476).then(n.bind(n,4476)).then(e=>ns(e.xQuery))}),no.t$.of({name:"Yacas",extensions:["ys"],load:()=>n.e(8483).then(n.bind(n,8483)).then(e=>ns(e.yacas))}),no.t$.of({name:"Z80",extensions:["z80"],load:()=>n.e(3174).then(n.bind(n,83174)).then(e=>ns(e.z80))}),no.t$.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load:()=>n.e(4973).then(n.bind(n,64973)).then(e=>ns(e.mscgen))}),no.t$.of({name:"X\xf9",extensions:["xu"],load:()=>n.e(4973).then(n.bind(n,64973)).then(e=>ns(e.xu))}),no.t$.of({name:"MsGenny",extensions:["msgenny"],load:()=>n.e(4973).then(n.bind(n,64973)).then(e=>ns(e.msgenny))}),no.t$.of({name:"Vue",extensions:["vue"],load:()=>Promise.all([n.e(6485),n.e(3366),n.e(1224),n.e(2158),n.e(5806)]).then(n.bind(n,85806)).then(e=>e.vue())}),no.t$.of({name:"Angular Template",load:()=>Promise.all([n.e(6485),n.e(3366),n.e(1224),n.e(2158),n.e(8260)]).then(n.bind(n,98260)).then(e=>e.angular())})];var nc=n(88082),nh=n(21769);let nu="#e06c75",nd="#abb2bf",np="#7d8799",nf="#d19a66",nm="#2c313a",ng="#282c34",ny="#353a42",nv="#528bff",nw=nc.Lz.theme({"&":{color:nd,backgroundColor:ng},".cm-content":{caretColor:nv},".cm-cursor, .cm-dropCursor":{borderLeftColor:nv},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3E4451"},".cm-panels":{backgroundColor:"#21252b",color:nd},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:ng,color:np,border:"none"},".cm-activeLineGutter":{backgroundColor:nm},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:ny},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:ny,borderBottomColor:ny},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:nm,color:nd}}},{dark:!0}),nb=no.cr.define([{tag:nh._A.keyword,color:"#c678dd"},{tag:[nh._A.name,nh._A.deleted,nh._A.character,nh._A.propertyName,nh._A.macroName],color:nu},{tag:[nh._A.function(nh._A.variableName),nh._A.labelName],color:"#61afef"},{tag:[nh._A.color,nh._A.constant(nh._A.name),nh._A.standard(nh._A.name)],color:nf},{tag:[nh._A.definition(nh._A.name),nh._A.separator],color:nd},{tag:[nh._A.typeName,nh._A.className,nh._A.number,nh._A.changed,nh._A.annotation,nh._A.modifier,nh._A.self,nh._A.namespace],color:"#e5c07b"},{tag:[nh._A.operator,nh._A.operatorKeyword,nh._A.url,nh._A.escape,nh._A.regexp,nh._A.link,nh._A.special(nh._A.string)],color:"#56b6c2"},{tag:[nh._A.meta,nh._A.comment],color:np},{tag:nh._A.strong,fontWeight:"bold"},{tag:nh._A.emphasis,fontStyle:"italic"},{tag:nh._A.strikethrough,textDecoration:"line-through"},{tag:nh._A.link,color:np,textDecoration:"underline"},{tag:nh._A.heading,fontWeight:"bold",color:nu},{tag:[nh._A.atom,nh._A.bool,nh._A.special(nh._A.variableName)],color:nf},{tag:[nh._A.processingInstruction,nh._A.string,nh._A.inserted],color:"#98c379"},{tag:nh._A.invalid,color:"#ffffff"}]),nk=[nw,(0,no.y9)(nb)];var nx=n(51876),nC=n(62463);class nS{constructor(e,t,n={}){var r;this.match=e,this.match=e,this.handler="string"==typeof t?(r=t,function(e,t,n,i){let o=r;if(t[1]){let e=t[0].lastIndexOf(t[1]);o+=t[0].slice(e+t[1].length);let r=(n+=e)-i;r>0&&(o=t[0].slice(e-r,e)+o,n=i)}return e.tr.insertText(o,n,i)}):t,this.undoable=!1!==n.undoable,this.inCode=n.inCode||!1,this.inCodeMark=!1!==n.inCodeMark}}let nM=(e,t)=>{let n=e.plugins;for(let r=0;r<n.length;r++){let i=n[r],o;if(i.spec.isInputRules&&(o=i.getState(e))){if(t){let n=e.tr,r=o.transform;for(let e=r.steps.length-1;e>=0;e--)n.step(r.steps[e].invert(r.docs[e]));if(o.text){let t=n.doc.resolve(o.from).marks();n.replaceWith(o.from,o.to,e.schema.text(o.text,t))}else n.delete(o.from,o.to);t(n)}return!0}}return!1};function nA(e,t,n=null,r){return new nS(e,(e,i,o,s)=>{let l=n instanceof Function?n(i):n,a=e.tr.delete(o,s),c=a.doc.resolve(o).blockRange(),h=c&&(0,nC.oM)(c,t,l);if(!h)return null;a.wrap(c,h);let u=a.doc.resolve(o-1).nodeBefore;return u&&u.type==t&&(0,nC.n9)(a.doc,o-1)&&(!r||r(i,u))&&a.join(o-1),a})}function nT(e,t,n=null){return new nS(e,(e,r,i,o)=>{let s=e.doc.resolve(i),l=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(i,o).setBlockType(i,i,t,l):null})}new nS(/--$/,"—",{inCodeMark:!1}),new nS(/\.\.\.$/,"…",{inCodeMark:!1}),new nS(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“",{inCodeMark:!1}),new nS(/"$/,"”",{inCodeMark:!1}),new nS(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘",{inCodeMark:!1}),new nS(/'$/,"’",{inCodeMark:!1});var nO=(e=>(e.docTypeError="docTypeError",e.contextNotFound="contextNotFound",e.timerNotFound="timerNotFound",e.ctxCallOutOfScope="ctxCallOutOfScope",e.createNodeInParserFail="createNodeInParserFail",e.stackOverFlow="stackOverFlow",e.parserMatchError="parserMatchError",e.serializerMatchError="serializerMatchError",e.getAtomFromSchemaFail="getAtomFromSchemaFail",e.expectDomTypeError="expectDomTypeError",e.callCommandBeforeEditorView="callCommandBeforeEditorView",e.missingRootElement="missingRootElement",e.missingNodeInSchema="missingNodeInSchema",e.missingMarkInSchema="missingMarkInSchema",e.ctxNotBind="ctxNotBind",e.missingYjsDoc="missingYjsDoc",e))(nO||{});class nN extends Error{constructor(e,t){super(t),this.name="MilkdownError",this.code=e}}let nI=(e,t)=>"function"==typeof t?"[Function]":t,nE=e=>JSON.stringify(e,nI);function n_(){return new nN(nO.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function nL(){return new nN(nO.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function nR(e){return new nN(nO.expectDomTypeError,`Expect to be a dom, but get: ${nE(e)}.`)}function nP(){return new nN(nO.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}let nD="undefined"!=typeof navigator?navigator:null,nF="undefined"!=typeof document?document:null,nB=nD&&nD.userAgent||"",n$=/Edge\/(\d+)/.exec(nB),nj=/MSIE \d/.exec(nB),nz=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nB),nH=!!(nj||nz||n$),nq=nj?document.documentMode:nz?+nz[1]:n$?+n$[1]:0,nW=!nH&&/gecko\/(\d+)/i.test(nB),nU=nW&&+(/Firefox\/(\d+)/.exec(nB)||[0,0])[1],nV=!nH&&/Chrome\/(\d+)/.exec(nB),nK=!!nV,nJ=nV?+nV[1]:0,nZ=!nH&&!!nD&&/Apple Computer/.test(nD.vendor),nG=nZ&&(/Mobile\/\w+/.test(nB)||!!nD&&nD.maxTouchPoints>2),nY=nG||!!nD&&/Mac/.test(nD.platform),nX=/Android \d/.test(nB),nQ=!!nF&&"webkitFontSmoothing"in nF.documentElement.style,n0=nQ?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var n1=Object.freeze({__proto__:null,android:nX,chrome:nK,chrome_version:nJ,gecko:nW,gecko_version:nU,ie:nH,ie_version:nq,ios:nG,mac:nY,safari:nZ,webkit:nQ,webkit_version:n0});function n2(e,t,n,r,i,o){if(e.composing)return!1;let s=e.state,l=s.doc.resolve(t);if(l.parent.type.spec.code)return!1;let a=l.parent.textBetween(Math.max(0,l.parentOffset-500),l.parentOffset,void 0,"￼")+r;for(let l of i){let i=l.match.exec(a),c=i&&i[0]&&l.handler(s,i,t-(i[0].length-r.length),n);if(c)return!1!==l.undoable&&c.setMeta(o,{transform:c,from:t,to:n,text:r}),e.dispatch(c),!0}return!1}let n5=new nx.hs("MILKDOWN_CUSTOM_INPUTRULES");function n3(e,t,n={}){return new nS(e,(e,r,i,o)=>{var s,l,a,c;let{tr:h}=e,u=r.length,d=r[u-1],p=r[0],f=[],m=o,g={group:d,fullMatch:p,start:i,end:o},y=null==(s=n.updateCaptured)?void 0:s.call(n,g);if(Object.assign(g,y),{group:d,fullMatch:p,start:i,end:o}=g,null===p||(null==d?void 0:d.trim())==="")return null;if(d){let e=p.search(/\S/),s=i+p.indexOf(d),u=s+d.length;f=null!=(l=h.storedMarks)?l:[],u<o&&h.delete(u,o),s>i&&h.delete(i+e,s),m=i+e+d.length;let g=null==(a=n.getAttr)?void 0:a.call(n,r);h.addMark(i,m,t.create(g)),h.setStoredMarks(f),null==(c=n.beforeDispatch)||c.call(n,{match:r,start:i,end:o,tr:h})}return h})}var n4=Object.defineProperty,n9=Object.defineProperties,n7=Object.getOwnPropertyDescriptors,n8=Object.getOwnPropertySymbols,n6=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,rt=(e,t,n)=>t in e?n4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function rn(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function rr(e,t,n){let r=e.state.doc.content.size,i=rn(t,0,r),o=rn(n,0,r),s=e.coordsAtPos(i),l=e.coordsAtPos(o,-1),a=Math.min(s.top,l.top),c=Math.max(s.bottom,l.bottom),h=Math.min(s.left,l.left),u=Math.max(s.right,l.right),d={top:a,bottom:c,left:h,right:u,width:u-h,height:c-a,x:h,y:a};return n9(((e,t)=>{for(var n in t||(t={}))n6.call(t,n)&&rt(e,n,t[n]);if(n8)for(var n of n8(t))re.call(t,n)&&rt(e,n,t[n]);return e})({},d),n7({toJSON:()=>d}))}function ri(e){return Object.assign(Object.create(e),e).setTime(Date.now())}function ro(e){return t=>{for(let n=t.depth;n>0;n-=1){let r=t.node(n);if(e(r))return{from:t.before(n),to:t.after(n),node:r}}}}function rs(e){return t=>{for(let n=t.depth;n>0;n--){let r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}}let rl=(e,t)=>{let{selection:n,doc:r}=e;if(n instanceof nx.nh)return{hasNode:n.node.type===t,pos:n.from,target:n.node};let{from:i,to:o}=n,s=!1,l=-1,a=null;return r.nodesBetween(i,o,(e,n)=>!a&&(e.type!==t||(s=!0,l=n,a=e,!1))),{hasNode:s,pos:l,target:a}};class ra{constructor(){this.sliceMap=new Map,this.get=e=>{let t="string"==typeof e?[...this.sliceMap.values()].find(t=>t.type.name===e):this.sliceMap.get(e.id);if(!t){var n;throw n="string"==typeof e?e:e.name,new nN(nO.contextNotFound,`Context "${n}" not found, do you forget to inject it?`)}return t},this.remove=e=>{let t="string"==typeof e?[...this.sliceMap.values()].find(t=>t.type.name===e):this.sliceMap.get(e.id);t&&this.sliceMap.delete(t.type.id)},this.has=e=>"string"==typeof e?[...this.sliceMap.values()].some(t=>t.type.name===e):this.sliceMap.has(e.id)}}class rc{constructor(e,t,n){this.#e=[],this.#t=()=>{this.#e.forEach(e=>e(this.#n))},this.set=e=>{this.#n=e,this.#t()},this.get=()=>this.#n,this.update=e=>{this.#n=e(this.#n),this.#t()},this.type=n,this.#n=t,e.set(n.id,this)}#e;#n;#t;on(e){return this.#e.push(e),()=>{this.#e=this.#e.filter(t=>t!==e)}}once(e){let t=this.on(n=>{e(n),t()});return t}off(e){this.#e=this.#e.filter(t=>t!==e)}offAll(){this.#e=[]}}class rh{constructor(e,t){this.id=Symbol(`Context-${t}`),this.name=t,this._defaultValue=e,this._typeInfo=()=>{throw n_()}}create(e,t=this._defaultValue){return new rc(e,t,this)}}let ru=(e,t)=>new rh(e,t);class rd{constructor(e,t,n){this.#r=new Set,this.#i=new Set,this.#o=new Map,this.#s=new Map,this.read=()=>({metadata:this.#l,injectedSlices:[...this.#r].map(e=>({name:"string"==typeof e?e:e.name,value:this.#a(e)})),consumedSlices:[...this.#i].map(e=>({name:"string"==typeof e?e:e.name,value:this.#a(e)})),recordedTimers:[...this.#o].map(([e,{duration:t}])=>({name:e.name,duration:t,status:this.#c(e)})),waitTimers:[...this.#s].map(([e,{duration:t}])=>({name:e.name,duration:t,status:this.#c(e)}))}),this.onRecord=e=>{this.#o.set(e,{start:Date.now(),duration:0})},this.onClear=e=>{this.#o.delete(e)},this.onDone=e=>{let t=this.#o.get(e);t&&(t.duration=Date.now()-t.start)},this.onWait=(e,t)=>{let n=Date.now();t.finally(()=>{this.#s.set(e,{duration:Date.now()-n})}).catch(console.error)},this.onInject=e=>{this.#r.add(e)},this.onRemove=e=>{this.#r.delete(e)},this.onUse=e=>{this.#i.add(e)},this.#a=e=>this.#h.get(e).get(),this.#c=e=>this.#u.get(e).status,this.#h=e,this.#u=t,this.#l=n}#l;#h;#u;#r;#i;#o;#s;#a;#c}class rp{constructor(e,t,n){this.produce=e=>e&&Object.keys(e).length?new rp(this.#h,this.#u,{...e}):this,this.inject=(e,t)=>{let n=e.create(this.#h.sliceMap);return null!=t&&n.set(t),this.#d?.onInject(e),this},this.remove=e=>(this.#h.remove(e),this.#d?.onRemove(e),this),this.record=e=>(e.create(this.#u.store),this.#d?.onRecord(e),this),this.clearTimer=e=>(this.#u.remove(e),this.#d?.onClear(e),this),this.isInjected=e=>this.#h.has(e),this.isRecorded=e=>this.#u.has(e),this.use=e=>(this.#d?.onUse(e),this.#h.get(e)),this.get=e=>this.use(e).get(),this.set=(e,t)=>this.use(e).set(t),this.update=(e,t)=>this.use(e).update(t),this.timer=e=>this.#u.get(e),this.done=e=>{this.timer(e).done(),this.#d?.onDone(e)},this.wait=e=>{let t=this.timer(e).start();return this.#d?.onWait(e,t),t},this.waitTimers=async e=>{await Promise.all(this.get(e).map(e=>this.wait(e)))},this.#h=e,this.#u=t,this.#l=n,n&&(this.#d=new rd(e,t,n))}#h;#u;#l;#d;get meta(){return this.#l}get inspector(){return this.#d}}class rf{constructor(){this.store=new Map,this.get=e=>{let t=this.store.get(e.id);if(!t){var n;throw n=e.name,new nN(nO.timerNotFound,`Timer "${n}" not found, do you forget to record it?`)}return t},this.remove=e=>{this.store.delete(e.id)},this.has=e=>this.store.has(e.id)}}class rm{constructor(e,t){this.#p=null,this.#f=null,this.#m="pending",this.start=()=>(this.#p??=new Promise((e,t)=>{this.#f=t=>{t instanceof CustomEvent&&t.detail.id===this.#g&&(this.#m="resolved",this.#y(),t.stopImmediatePropagation(),e())},this.#v(()=>{"pending"===this.#m&&(this.#m="rejected"),this.#y(),t(Error(`Timing ${this.type.name} timeout.`))}),this.#m="pending",addEventListener(this.type.name,this.#f)}),this.#p),this.done=()=>{dispatchEvent(new CustomEvent(this.type.name,{detail:{id:this.#g}}))},this.#y=()=>{this.#f&&removeEventListener(this.type.name,this.#f)},this.#v=e=>{setTimeout(()=>{e()},this.type.timeout)},this.#g=Symbol(t.name),this.type=t,e.set(t.id,this)}#p;#f;#g;#m;get status(){return this.#m}#y;#v}class rg{constructor(e,t=3e3){this.create=e=>new rm(e,this),this.id=Symbol(`Timer-${e}`),this.name=e,this.timeout=t}}let ry=(e,t=3e3)=>new rg(e,t);var rv=n(92322),rw=n(81035);let rb={}.hasOwnProperty,rk={}.hasOwnProperty;function rx(e,t,n){return">"+(n?"":" ")+e}function rC(e,t){return rS(e,t.inConstruct,!0)&&!rS(e,t.notInConstruct,!1)}function rS(e,t,n){if("string"==typeof t&&(t=[t]),!t||0===t.length)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function rM(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if("\n"===n.unsafe[i].character&&rC(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return"\\\n"}function rA(e,t){let n=String(e),r=n.indexOf(t),i=r,o=0,s=0;if("string"!=typeof t)throw TypeError("Expected substring");for(;-1!==r;)r===i?++o>s&&(s=o):o=1,i=r+t.length,r=n.indexOf(t,i);return s}function rT(e,t){return!!(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function rO(e,t,n){return(n?"":"    ")+e}function rN(e){let t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function rI(e){return"&#x"+e.toString(16).toUpperCase()+";"}var rE=n(23362);function r_(e,t,n){let r=(0,rE.S)(e),i=(0,rE.S)(t);return void 0===r?void 0===i?"_"===n?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===i?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===r?void 0===i?{inside:!1,outside:!1}:1===i?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===i?{inside:!1,outside:!1}:1===i?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function rL(e,t,n,r){let i=function(e){let t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),o=n.enter("emphasis"),s=n.createTracker(r),l=s.move(i),a=s.move(n.containerPhrasing(e,{after:i,before:l,...s.current()})),c=a.charCodeAt(0),h=r_(r.before.charCodeAt(r.before.length-1),c,i);h.inside&&(a=rI(c)+a.slice(1));let u=a.charCodeAt(a.length-1),d=r_(r.after.charCodeAt(0),u,i);d.inside&&(a=a.slice(0,-1)+rI(u));let p=s.move(i);return o(),n.attentionEncodeSurroundingInfo={after:d.outside,before:h.outside},l+a+p}rL.peek=function(e,t,n){return n.options.emphasis||"*"};var rR=n(95139),rP=n(56522),rD=n(84151);function rF(e,t){let n=!1;return(0,rR.YR)(e,function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,rP.dc}),!!((!e.depth||e.depth<3)&&(0,rD.d)(e)&&(t.options.setext||n))}function rB(e){return e.value||""}function r$(e,t,n,r){let i=rN(n),o='"'===i?"Quote":"Apostrophe",s=n.enter("image"),l=n.enter("label"),a=n.createTracker(r),c=a.move("![");return c+=a.move(n.safe(e.alt,{before:c,after:"]",...a.current()})),c+=a.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(e.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(l=n.enter("destinationRaw"),c+=a.move(n.safe(e.url,{before:c,after:e.title?" ":")",...a.current()}))),l(),e.title&&(l=n.enter(`title${o}`),c+=a.move(" "+i),c+=a.move(n.safe(e.title,{before:c,after:i,...a.current()})),c+=a.move(i),l()),c+=a.move(")"),s(),c}function rj(e,t,n,r){let i=e.referenceType,o=n.enter("imageReference"),s=n.enter("label"),l=n.createTracker(r),a=l.move("!["),c=n.safe(e.alt,{before:a,after:"]",...l.current()});a+=l.move(c+"]["),s();let h=n.stack;n.stack=[],s=n.enter("reference");let u=n.safe(n.associationId(e),{before:a,after:"]",...l.current()});return s(),n.stack=h,o(),"full"!==i&&c&&c===u?"shortcut"===i?a=a.slice(0,-1):a+=l.move("]"):a+=l.move(u+"]"),a}function rz(e,t,n){let r=e.value||"",i="`",o=-1;for(;RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){let e,t=n.unsafe[o],i=n.compilePattern(t);if(t.atBreak)for(;e=i.exec(r);){let t=e.index;10===r.charCodeAt(t)&&13===r.charCodeAt(t-1)&&t--,r=r.slice(0,t)+" "+r.slice(e.index+1)}}return i+r+i}function rH(e,t){let n=(0,rD.d)(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function rq(e,t,n,r){let i,o,s=rN(n),l='"'===s?"Quote":"Apostrophe",a=n.createTracker(r);if(rH(e,n)){let t=n.stack;n.stack=[],i=n.enter("autolink");let r=a.move("<");return r+=a.move(n.containerPhrasing(e,{before:r,after:">",...a.current()})),r+=a.move(">"),i(),n.stack=t,r}i=n.enter("link"),o=n.enter("label");let c=a.move("[");return c+=a.move(n.containerPhrasing(e,{before:c,after:"](",...a.current()})),c+=a.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(e.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(o=n.enter("destinationRaw"),c+=a.move(n.safe(e.url,{before:c,after:e.title?" ":")",...a.current()}))),o(),e.title&&(o=n.enter(`title${l}`),c+=a.move(" "+s),c+=a.move(n.safe(e.title,{before:c,after:s,...a.current()})),c+=a.move(s),o()),c+=a.move(")"),i(),c}function rW(e,t,n,r){let i=e.referenceType,o=n.enter("linkReference"),s=n.enter("label"),l=n.createTracker(r),a=l.move("["),c=n.containerPhrasing(e,{before:a,after:"]",...l.current()});a+=l.move(c+"]["),s();let h=n.stack;n.stack=[],s=n.enter("reference");let u=n.safe(n.associationId(e),{before:a,after:"]",...l.current()});return s(),n.stack=h,o(),"full"!==i&&c&&c===u?"shortcut"===i?a=a.slice(0,-1):a+=l.move("]"):a+=l.move(u+"]"),a}function rU(e){let t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function rV(e){let t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}rB.peek=function(){return"<"},r$.peek=function(){return"!"},rj.peek=function(){return"!"},rz.peek=function(){return"`"},rq.peek=function(e,t,n){return rH(e,n)?"<":"["},rW.peek=function(){return"["};var rK=n(95502);let rJ=(0,rK.C)(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function rZ(e,t,n,r){let i=function(e){let t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),o=n.enter("strong"),s=n.createTracker(r),l=s.move(i+i),a=s.move(n.containerPhrasing(e,{after:i,before:l,...s.current()})),c=a.charCodeAt(0),h=r_(r.before.charCodeAt(r.before.length-1),c,i);h.inside&&(a=rI(c)+a.slice(1));let u=a.charCodeAt(a.length-1),d=r_(r.after.charCodeAt(0),u,i);d.inside&&(a=a.slice(0,-1)+rI(u));let p=s.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:d.outside,before:h.outside},l+a+p}rZ.peek=function(e,t,n){return n.options.strong||"*"};let rG={blockquote:function(e,t,n,r){let i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);let s=n.indentLines(n.containerFlow(e,o.current()),rx);return i(),s},break:rM,code:function(e,t,n,r){let i=function(e){let t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),o=e.value||"",s="`"===i?"GraveAccent":"Tilde";if(rT(e,n)){let e=n.enter("codeIndented"),t=n.indentLines(o,rO);return e(),t}let l=n.createTracker(r),a=i.repeat(Math.max(rA(o,i)+1,3)),c=n.enter("codeFenced"),h=l.move(a);if(e.lang){let t=n.enter(`codeFencedLang${s}`);h+=l.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...l.current()})),t()}if(e.lang&&e.meta){let t=n.enter(`codeFencedMeta${s}`);h+=l.move(" "),h+=l.move(n.safe(e.meta,{before:h,after:"\n",encode:["`"],...l.current()})),t()}return h+=l.move("\n"),o&&(h+=l.move(o+"\n")),h+=l.move(a),c(),h},definition:function(e,t,n,r){let i=rN(n),o='"'===i?"Quote":"Apostrophe",s=n.enter("definition"),l=n.enter("label"),a=n.createTracker(r),c=a.move("[");return c+=a.move(n.safe(n.associationId(e),{before:c,after:"]",...a.current()})),c+=a.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(e.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(l=n.enter("destinationRaw"),c+=a.move(n.safe(e.url,{before:c,after:e.title?" ":"\n",...a.current()}))),l(),e.title&&(l=n.enter(`title${o}`),c+=a.move(" "+i),c+=a.move(n.safe(e.title,{before:c,after:i,...a.current()})),c+=a.move(i),l()),s(),c},emphasis:rL,hardBreak:rM,heading:function(e,t,n,r){let i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(rF(e,n)){let t=n.enter("headingSetext"),r=n.enter("phrasing"),s=n.containerPhrasing(e,{...o.current(),before:"\n",after:"\n"});return r(),t(),s+"\n"+(1===i?"=":"-").repeat(s.length-(Math.max(s.lastIndexOf("\r"),s.lastIndexOf("\n"))+1))}let s="#".repeat(i),l=n.enter("headingAtx"),a=n.enter("phrasing");o.move(s+" ");let c=n.containerPhrasing(e,{before:"# ",after:"\n",...o.current()});return/^[\t ]/.test(c)&&(c=rI(c.charCodeAt(0))+c.slice(1)),c=c?s+" "+c:s,n.options.closeAtx&&(c+=" "+s),a(),l(),c},html:rB,image:r$,imageReference:rj,inlineCode:rz,link:rq,linkReference:rW,list:function(e,t,n,r){let i=n.enter("list"),o=n.bulletCurrent,s=e.ordered?function(e){let t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):rU(n),l=e.ordered?"."===s?")":".":function(e){let t=rU(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n),a=!!t&&!!n.bulletLastUsed&&s===n.bulletLastUsed;if(!e.ordered){let t=e.children?e.children[0]:void 0;if("*"!==s&&"-"!==s||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(a=!0),rV(n)===s&&t){let t=-1;for(;++t<e.children.length;){let n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){a=!0;break}}}}a&&(s=l),n.bulletCurrent=s;let c=n.containerFlow(e,r);return n.bulletLastUsed=s,n.bulletCurrent=o,i(),c},listItem:function(e,t,n,r){let i=function(e){let t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n),o=n.bulletCurrent||rU(n);t&&"list"===t.type&&t.ordered&&(o=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+o);let s=o.length+1;("tab"===i||"mixed"===i&&(t&&"list"===t.type&&t.spread||e.spread))&&(s=4*Math.ceil(s/4));let l=n.createTracker(r);l.move(o+" ".repeat(s-o.length)),l.shift(s);let a=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,l.current()),function(e,t,n){return t?(n?"":" ".repeat(s))+e:(n?o:o+" ".repeat(s-o.length))+e});return a(),c},paragraph:function(e,t,n,r){let i=n.enter("paragraph"),o=n.enter("phrasing"),s=n.containerPhrasing(e,r);return o(),i(),s},root:function(e,t,n,r){return(e.children.some(function(e){return rJ(e)})?n.containerPhrasing:n.containerFlow).call(n,e,r)},strong:rZ,text:function(e,t,n,r){return n.safe(e.value,r)},thematicBreak:function(e,t,n){let r=(rV(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){let t=e.options.ruleRepetition||3;if(t<3)throw Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?r.slice(0,-1):r}},rY=[function(e,t,n,r){if("code"===t.type&&rT(t,r)&&("list"===e.type||e.type===t.type&&rT(e,r)))return!1;if("spread"in n&&"boolean"==typeof n.spread){if("paragraph"===e.type&&(e.type===t.type||"definition"===t.type||"heading"===t.type&&rF(t,r)))return;return+!!n.spread}}],rX=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],rQ=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:"\n",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:rX},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:"(?:[\r\n]|$)"},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:rX},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:"(?:[ 	\r\n*])"},{character:"*",inConstruct:"phrasing",notInConstruct:rX},{atBreak:!0,character:"+",after:"(?:[ 	\r\n])"},{atBreak:!0,character:"-",after:"(?:[ 	\r\n-])"},{atBreak:!0,before:"\\d+",character:".",after:"(?:[ 	\r\n]|$)"},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:rX},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:rX},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:rX},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:rX},{atBreak:!0,character:"~"}];var r0=n(55592);function r1(e){return e.label||!e.identifier?e.label||"":(0,r0.s)(e.identifier)}function r2(e){if(!e._compiled){let t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}let r5=/\r?\n|\r/g;function r3(e,t){let n,r=[],i=0,o=0;for(;n=r5.exec(e);)s(e.slice(i,n.index)),r.push(n[0]),i=n.index+n[0].length,o++;return s(e.slice(i)),r.join("");function s(e){r.push(t(e,o,!e))}}function r4(e,t){return e-t}function r9(e,t){let n,r=/\\(?=[!-/:-@[-`{-~])/g,i=[],o=[],s=e+t,l=-1,a=0;for(;n=r.exec(s);)i.push(n.index);for(;++l<i.length;)a!==i[l]&&o.push(e.slice(a,i[l])),o.push("\\"),a=i[l];return o.push(e.slice(a)),o.join("")}function r7(e){let t=e||{},n=t.now||{},r=t.lineShift||0,i=n.line||1,o=n.column||1;return{move:function(e){let t=e||"",n=t.split(/\r?\n|\r/g),s=n[n.length-1];return i+=n.length-1,o=1===n.length?o+s.length:1+s.length+r,t},current:function(){return{now:{line:i,column:o},lineShift:r}},shift:function(e){r+=e}}}function r8(e){throw Error("Cannot handle value `"+e+"`, expected node")}function r6(e){throw Error("Cannot handle unknown node `"+e.type+"`")}function ie(e,t){if("definition"===e.type&&e.type===t.type)return 0}function it(e,t){return function(e,t,n){let r,i=t.indexStack,o=e.children||[],s=[],l=-1,a=n.before;i.push(-1);let c=t.createTracker(n);for(;++l<o.length;){let h,u=o[l];if(i[i.length-1]=l,l+1<o.length){let n=t.handle.handlers[o[l+1].type];n&&n.peek&&(n=n.peek),h=n?n(o[l+1],e,t,{before:"",after:"",...c.current()}).charAt(0):""}else h=n.after;s.length>0&&("\r"===a||"\n"===a)&&"html"===u.type&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),a=" ",(c=t.createTracker(n)).move(s.join("")));let d=t.handle(u,e,t,{...c.current(),after:h,before:a});r&&r===d.slice(0,1)&&(d=rI(r.charCodeAt(0))+d.slice(1));let p=t.attentionEncodeSurroundingInfo;t.attentionEncodeSurroundingInfo=void 0,r=void 0,p&&(s.length>0&&p.before&&a===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+rI(a.charCodeAt(0))),p.after&&(r=h)),c.move(d),s.push(d),a=d.slice(-1)}return i.pop(),s.join("")}(e,this,t)}function ir(e,t){return function(e,t,n){let r=t.indexStack,i=e.children||[],o=t.createTracker(n),s=[],l=-1;for(r.push(-1);++l<i.length;){let n=i[l];r[r.length-1]=l,s.push(o.move(t.handle(n,e,t,{before:"\n",after:"\n",...o.current()}))),"list"!==n.type&&(t.bulletLastUsed=void 0),l<i.length-1&&s.push(o.move(function(e,t,n,r){let i=r.join.length;for(;i--;){let o=r.join[i](e,t,n,r);if(!0===o||1===o)break;if("number"==typeof o)return"\n".repeat(1+o);if(!1===o)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}(n,i[l+1],e,t)))}return r.pop(),s.join("")}(e,this,t)}function ii(e,t){return function(e,t,n){let r=(n.before||"")+(t||"")+(n.after||""),i=[],o=[],s={},l=-1;for(;++l<e.unsafe.length;){let t,n=e.unsafe[l];if(!rC(e.stack,n))continue;let o=e.compilePattern(n);for(;t=o.exec(r);){let e="before"in n||!!n.atBreak,r="after"in n,o=t.index+(e?t[1].length:0);i.includes(o)?(s[o].before&&!e&&(s[o].before=!1),s[o].after&&!r&&(s[o].after=!1)):(i.push(o),s[o]={before:e,after:r})}}i.sort(r4);let a=n.before?n.before.length:0,c=r.length-(n.after?n.after.length:0);for(l=-1;++l<i.length;){let e=i[l];!(e<a)&&!(e>=c)&&(!(e+1<c)||i[l+1]!==e+1||!s[e].after||s[e+1].before||s[e+1].after)&&(i[l-1]!==e-1||!s[e].before||s[e-1].before||s[e-1].after)&&(a!==e&&o.push(r9(r.slice(a,e),"\\")),a=e,!/[!-/:-@[-`{-~]/.test(r.charAt(e))||n.encode&&n.encode.includes(r.charAt(e))?(o.push(rI(r.charCodeAt(e))),a++):o.push("\\"))}return o.push(r9(r.slice(a,c),n.after)),o.join("")}(this,e,t)}function io(e){let t=this;t.compiler=function(n){var r={...t.data("settings"),...e,extensions:t.data("toMarkdownExtensions")||[]};let i={associationId:r1,containerPhrasing:it,containerFlow:ir,createTracker:r7,compilePattern:r2,enter:function(e){return i.stack.push(e),function(){i.stack.pop()}},handlers:{...rG},handle:void 0,indentLines:r3,indexStack:[],join:[...rY],options:{},safe:ii,stack:[],unsafe:[...rQ]};!function e(t,n){var r,i,o,s;let l,a=-1;if(n.extensions)for(;++a<n.extensions.length;)e(t,n.extensions[a]);for(l in n)if(rk.call(n,l))switch(l){case"extensions":break;case"unsafe":case"join":r=t[l],(i=n[l])&&r.push(...i);break;case"handlers":o=t[l],(s=n[l])&&Object.assign(o,s);break;default:t.options[l]=n[l]}return t}(i,r||{}),i.options.tightDefinitions&&i.join.push(ie),i.handle=function(e,t){let n=t||{};function r(t,...n){let i=r.invalid,o=r.handlers;if(t&&rb.call(t,e)){let n=String(t[e]);i=rb.call(o,n)?o[n]:r.unknown}if(i)return i.call(this,t,...n)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}("type",{invalid:r8,unknown:r6,handlers:i.handlers});let o=i.handle(n,void 0,i,{before:"\n",after:"\n",now:{line:1,column:1},lineShift:0});return o&&10!==o.charCodeAt(o.length-1)&&13!==o.charCodeAt(o.length-1)&&(o+="\n"),o}}var is=n(29833),il=e=>{throw TypeError(e)},ia=(e,t,n)=>t.has(e)||il("Cannot "+n),ic=(e,t,n)=>(ia(e,t,"read from private field"),n?n.call(e):t.get(e)),ih=(e,t,n)=>t.has(e)?il("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),iu=(e,t,n,r)=>(ia(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class id{}class ip{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=e=>{this.top()?.push(e)},this.open=e=>{this.elements.push(e)},this.close=()=>{let e=this.elements.pop();if(!e)throw nL();return e}}}class im extends id{constructor(e,t,n){super(),this.type=e,this.content=t,this.attrs=n}push(e,...t){this.content.push(e,...t)}pop(){return this.content.pop()}static create(e,t,n){return new im(e,t,n)}}let ig=class extends ip{constructor(e){super(),ih(this,d),ih(this,p),ih(this,f),ih(this,m),ih(this,g),ih(this,y),ih(this,v),iu(this,d,rv.CU.none),iu(this,p,e=>e.isText),iu(this,f,(e,t)=>{if(ic(this,p).call(this,e)&&ic(this,p).call(this,t)&&rv.CU.sameSet(e.marks,t.marks))return this.schema.text(e.text+t.text,e.marks)}),iu(this,m,e=>{let t=Object.values({...this.schema.nodes,...this.schema.marks}).find(t=>t.spec.parseMarkdown.match(e));if(!t)throw new nN(nO.parserMatchError,`Cannot match target parser for node: ${nE(e)}.`);return t}),iu(this,g,e=>{let t=ic(this,m).call(this,e);t.spec.parseMarkdown.runner(this,e,t)}),this.injectRoot=(e,t,n)=>(this.openNode(t,n),this.next(e.children),this),this.openNode=(e,t)=>(this.open(im.create(e,[],t)),this),iu(this,y,()=>{iu(this,d,rv.CU.none);let e=this.close();return ic(this,v).call(this,e.type,e.attrs,e.content)}),this.closeNode=()=>{try{ic(this,y).call(this)}catch(e){console.error(e)}return this},iu(this,v,(e,t,n)=>{let r=e.createAndFill(t,n,ic(this,d));if(!r)throw function(e,t,n){let r="name"in e?e.name:e,i=e=>{if(null==e)return"null";if(Array.isArray(e))return`[${e.map(i).join(", ")}]`;if("object"==typeof e)return"toJSON"in e&&"function"==typeof e.toJSON?JSON.stringify(e.toJSON()):"spec"in e?JSON.stringify(e.spec):JSON.stringify(e);if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return JSON.stringify(e);if("function"==typeof e)return`[Function: ${e.name||"anonymous"}]`;try{return String(e)}catch{return"[Unserializable]"}},o=[["[Description]",`Cannot create node for ${r}`],["[Attributes]",t],["[Content]",(n??[]).map(e=>e?"object"==typeof e&&"type"in e?`${e}`:i(e):"null")]].reduce((e,[t,n])=>{let r=`${t}: ${i(n)}.`;return e.concat(r)},[]);return new nN(nO.createNodeInParserFail,o.join("\n"))}(e,t,n);return this.push(r),r}),this.addNode=(e,t,n)=>{try{ic(this,v).call(this,e,t,n)}catch(e){console.error(e)}return this},this.openMark=(e,t)=>{let n=e.create(t);return iu(this,d,n.addToSet(ic(this,d))),this},this.closeMark=e=>(iu(this,d,e.removeFromSet(ic(this,d))),this),this.addText=e=>{try{let t=this.top();if(!t)throw nL();let n=t.pop(),r=this.schema.text(e,ic(this,d));if(!n)return t.push(r),this;let i=ic(this,f).call(this,n,r);if(i)return t.push(i),this;return t.push(n,r),this}catch(e){return console.error(e),this}},this.build=()=>{let e;do e=ic(this,y).call(this);while(this.size());return e},this.next=(e=[])=>([e].flat().forEach(e=>ic(this,g).call(this,e)),this),this.toDoc=()=>this.build(),this.run=(e,t)=>{let n=e.runSync(e.parse(t),t);return this.next(n),this},this.schema=e}};d=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,v=new WeakMap,ig.create=(e,t)=>{let n=new ig(e);return e=>(n.run(t,e),n.toDoc())};let iy=class extends id{constructor(e,t,n,r={}){super(),this.type=e,this.children=t,this.value=n,this.props=r,this.push=(e,...t)=>{this.children||(this.children=[]),this.children.push(e,...t)},this.pop=()=>this.children?.pop()}};iy.create=(e,t,n,r={})=>new iy(e,t,n,r);let iv=class extends ip{constructor(e){super(),ih(this,w),ih(this,b),ih(this,k),ih(this,x),ih(this,C),ih(this,S),ih(this,M),ih(this,A),ih(this,T),ih(this,O),ih(this,N),ih(this,I),ih(this,E),iu(this,w,rv.CU.none),iu(this,b,e=>{let t=Object.values({...this.schema.nodes,...this.schema.marks}).find(t=>t.spec.toMarkdown.match(e));if(!t){var n;throw n=e.type,new nN(nO.serializerMatchError,`Cannot match target serializer for node: ${nE(n)}.`)}return t}),iu(this,k,e=>ic(this,b).call(this,e).spec.toMarkdown.runner(this,e)),iu(this,x,(e,t)=>ic(this,b).call(this,e).spec.toMarkdown.runner(this,e,t)),iu(this,C,e=>{let{marks:t}=e,n=e=>e.type.spec.priority??50;[...t].sort((e,t)=>n(e)-n(t)).every(t=>!ic(this,x).call(this,t,e))&&ic(this,k).call(this,e),t.forEach(e=>ic(this,E).call(this,e))}),iu(this,S,(e,t)=>{if(e.type===t||e.children?.length!==1)return e;let n=e=>{if(e.type===t)return e;if(e.children?.length!==1)return null;let[r]=e.children;return r?n(r):null},r=n(e);if(!r)return e;let i=r.children?[...r.children]:void 0,o={...e,children:i};return o.children=i,r.children=[o],r}),iu(this,M,e=>{let{children:t}=e;return t&&(e.children=t.reduce((e,t,n)=>{if(0===n)return[t];let r=e.at(-1);if(r&&r.isMark&&t.isMark){let{children:n,...i}=t=ic(this,S).call(this,t,r.type),{children:o,...s}=r;if(t.type===r.type&&n&&o&&JSON.stringify(i)===JSON.stringify(s)){let t={...s,children:[...o,...n]};return e.slice(0,-1).concat(ic(this,M).call(this,t))}}return e.concat(t)},[])),e}),iu(this,A,e=>{let t={...e.props,type:e.type};return e.children&&(t.children=e.children),e.value&&(t.value=e.value),t}),this.openNode=(e,t,n)=>(this.open(iy.create(e,void 0,t,n)),this),iu(this,T,(e,t)=>{let n="",r="",i=e.children,o=-1,s=-1;if(i){(e=>{e&&e.forEach((e,t)=>{"text"===e.type&&e.value&&(o<0&&(o=t),s=t)})})(i);let e=i?.[s],t=i?.[o];if(e&&e.value.endsWith(" ")){let t=e.value,n=t.trimEnd();r=t.slice(n.length),e.value=n}if(t&&t.value.startsWith(" ")){let e=t.value,r=e.trimStart();n=e.slice(0,e.length-r.length),t.value=r}}n.length&&ic(this,N).call(this,"text",void 0,n);let l=t();return r.length&&ic(this,N).call(this,"text",void 0,r),l}),iu(this,O,(e=!1)=>{let t=this.close(),n=()=>ic(this,N).call(this,t.type,t.children,t.value,t.props);return e?ic(this,T).call(this,t,n):n()}),this.closeNode=()=>(ic(this,O).call(this),this),iu(this,N,(e,t,n,r)=>{let i=iy.create(e,t,n,r),o=ic(this,M).call(this,ic(this,A).call(this,i));return this.push(o),o}),this.addNode=(e,t,n,r)=>(ic(this,N).call(this,e,t,n,r),this),iu(this,I,(e,t,n,r)=>e.isInSet(ic(this,w))?this:(iu(this,w,e.addToSet(ic(this,w))),this.openNode(t,n,{...r,isMark:!0}))),iu(this,E,e=>{e.isInSet(ic(this,w))&&(iu(this,w,e.type.removeFromSet(ic(this,w))),ic(this,O).call(this,!0))}),this.withMark=(e,t,n,r)=>(ic(this,I).call(this,e,t,n,r),this),this.closeMark=e=>(ic(this,E).call(this,e),this),this.build=()=>{let e=null;do e=ic(this,O).call(this);while(this.size());return e},this.next=e=>(Object.prototype.hasOwnProperty.call(e,"size")?e.forEach(e=>{ic(this,C).call(this,e)}):ic(this,C).call(this,e),this),this.toString=e=>e.stringify(this.build()),this.run=e=>(this.next(e),this),this.schema=e}};w=new WeakMap,b=new WeakMap,k=new WeakMap,x=new WeakMap,C=new WeakMap,S=new WeakMap,M=new WeakMap,A=new WeakMap,T=new WeakMap,O=new WeakMap,N=new WeakMap,I=new WeakMap,E=new WeakMap,iv.create=(e,t)=>{let n=new iv(e);return e=>(n.run(e),n.toString(t))};let iw=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function ib(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("backward",e):!(n.parentOffset>0))?n:null}let ik=(e,t,n)=>{let r=ib(e,n);if(!r)return!1;let i=iM(r);if(!i){let n=r.blockRange(),i=n&&(0,nC.jP)(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)}let o=i.nodeBefore;if(iN(e,i,t,-1))return!0;if(0==r.parent.content.size&&(iC(o,"end")||nx.nh.isSelectable(o)))for(let n=r.depth;;n--){let s=(0,nC.$L)(e.doc,r.before(n),r.after(n),rv.Ji.empty);if(s&&s.slice.size<s.to-s.from){if(t){let n=e.tr.step(s);n.setSelection(iC(o,"end")?nx.LN.findFrom(n.doc.resolve(n.mapping.map(i.pos,-1)),-1):nx.nh.create(n.doc,i.pos-o.nodeSize)),t(n.scrollIntoView())}return!0}if(1==n||r.node(n-1).childCount>1)break}return!!o.isAtom&&i.depth==r.depth-1&&(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0)},ix=(e,t,n)=>{let r=ib(e,n);if(!r)return!1;let i=iM(r);return!!i&&function(e,t,n){let r=t.nodeBefore,i=t.pos-1;for(;!r.isTextblock;i--){if(r.type.spec.isolating)return!1;let e=r.lastChild;if(!e)return!1;r=e}let o=t.nodeAfter,s=t.pos+1;for(;!o.isTextblock;s++){if(o.type.spec.isolating)return!1;let e=o.firstChild;if(!e)return!1;o=e}let l=(0,nC.$L)(e.doc,i,s,rv.Ji.empty);if(!l||l.from!=i||l instanceof nC.Ln&&l.slice.size>=s-i)return!1;if(n){let t=e.tr.step(l);t.setSelection(nx.U3.create(t.doc,i)),n(t.scrollIntoView())}return!0}(e,i,t)};function iC(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)break}return!1}let iS=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=iM(r)}let s=o&&o.nodeBefore;return!!s&&!!nx.nh.isSelectable(s)&&(t&&t(e.tr.setSelection(nx.nh.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function iM(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function iA(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function iT(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}let iO=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=iT(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(t){let r=n.after(),i=e.tr.replaceWith(r,r,s.createAndFill());i.setSelection(nx.LN.near(i.doc.resolve(r),1)),t(i.scrollIntoView())}return!0};function iN(e,t,n,r){let i,o,s,l=t.nodeBefore,a=t.nodeAfter,c,h,u=l.type.spec.isolating||a.type.spec.isolating;if(!u&&(i=t.nodeBefore,o=t.nodeAfter,s=t.index(),i&&o&&i.type.compatibleContent(o.type)&&(!i.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!!t.parent.canReplace(s,s+1)&&!!(o.isTextblock||(0,nC.n9)(e.doc,t.pos))&&(n&&n(e.tr.join(t.pos).scrollIntoView()),!0))))return!0;let d=!u&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(c=(h=l.contentMatchAt(l.childCount)).findWrapping(a.type))&&h.matchType(c[0]||a.type).validEnd){if(n){let r=t.pos+a.nodeSize,i=rv.FK.empty;for(let e=c.length-1;e>=0;e--)i=rv.FK.from(c[e].create(null,i));i=rv.FK.from(l.copy(i));let o=e.tr.step(new nC.Wg(t.pos-1,r,t.pos,r,new rv.Ji(i,1,0),c.length,!0)),s=o.doc.resolve(r+2*c.length);s.nodeAfter&&s.nodeAfter.type==l.type&&(0,nC.n9)(o.doc,s.pos)&&o.join(s.pos),n(o.scrollIntoView())}return!0}let p=a.type.spec.isolating||r>0&&u?null:nx.LN.findFrom(t,1),f=p&&p.$from.blockRange(p.$to),m=f&&(0,nC.jP)(f);if(null!=m&&m>=t.depth)return n&&n(e.tr.lift(f,m).scrollIntoView()),!0;if(d&&iC(a,"start",!0)&&iC(l,"end")){let r=l,i=[];for(;i.push(r),!r.isTextblock;)r=r.lastChild;let o=a,s=1;for(;!o.isTextblock;o=o.firstChild)s++;if(r.canReplace(r.childCount,r.childCount,o.content)){if(n){let r=rv.FK.empty;for(let e=i.length-1;e>=0;e--)r=rv.FK.from(i[e].copy(r));n(e.tr.step(new nC.Wg(t.pos-i.length,t.pos+a.nodeSize,t.pos+s,t.pos+a.nodeSize-s,new rv.Ji(r,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function iI(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return!!i.node(o).isTextblock&&(n&&n(t.tr.setSelection(nx.U3.create(t.doc,e<0?i.start(o):i.end(o)))),!0)}}let iE=iI(-1),i_=iI(1);function iL(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&(0,nC.oM)(s,e,t);return!!l&&(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0)}}function iR(e,t=null){return function(n,r){let i=!1;for(let r=0;r<n.selection.ranges.length&&!i;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];n.doc.nodesBetween(o,s,(r,o)=>{if(i)return!1;if(!(!r.isTextblock||r.hasMarkup(e,t)))if(r.type==e)i=!0;else{let t=n.doc.resolve(o),r=t.index();i=t.parent.canReplaceWith(r,r+1,e)}})}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];i.setBlockType(o,s,e,t)}r(i.scrollIntoView())}return!0}}function iP(e,t=null,n){let r=!1!==(n&&n.removeWhenPresent),i=!1!==(n&&n.enterInlineAtoms),o=!(n&&n.includeWhitespace);return function(n,s){let{empty:l,$cursor:a,ranges:c}=n.selection;if(l&&!a||!function(e,t,n,r){for(let i=0;i<t.length;i++){let{$from:o,$to:s}=t[i],l=0==o.depth&&e.inlineContent&&e.type.allowsMarkType(n);if(e.nodesBetween(o.pos,s.pos,(e,t)=>{if(l||!r&&e.isAtom&&e.isInline&&t>=o.pos&&t+e.nodeSize<=s.pos)return!1;l=e.inlineContent&&e.type.allowsMarkType(n)}),l)return!0}return!1}(n.doc,c,e,i))return!1;if(s)if(a)s(e.isInSet(n.storedMarks||a.marks())?n.tr.removeStoredMark(e):n.tr.addStoredMark(e.create(t)));else{let l,a=n.tr;i||(c=function(e){let t=[];for(let n=0;n<e.length;n++){let{$from:r,$to:i}=e[n];r.doc.nodesBetween(r.pos,i.pos,(e,n)=>{if(e.isAtom&&e.content.size&&e.isInline&&n>=r.pos&&n+e.nodeSize<=i.pos)return n+1>r.pos&&t.push(new nx.yn(r,r.doc.resolve(n+1))),r=r.doc.resolve(n+1+e.content.size),!1}),r.pos<i.pos&&t.push(new nx.yn(r,i))}return t}(c)),l=r?!c.some(t=>n.doc.rangeHasMark(t.$from.pos,t.$to.pos,e)):!c.every(t=>{let n=!1;return a.doc.nodesBetween(t.$from.pos,t.$to.pos,(r,i,o)=>{if(n)return!1;n=!e.isInSet(r.marks)&&!!o&&o.type.allowsMarkType(e)&&!(r.isText&&/^\s*$/.test(r.textBetween(Math.max(0,t.$from.pos-i),Math.min(r.nodeSize,t.$to.pos-i))))}),!n});for(let n=0;n<c.length;n++){let{$from:r,$to:i}=c[n];if(l){let n=r.pos,s=i.pos,l=r.nodeAfter,c=i.nodeBefore,h=o&&l&&l.isText?/^\s*/.exec(l.text)[0].length:0,u=o&&c&&c.isText?/\s*$/.exec(c.text)[0].length:0;n+h<s&&(n+=h,s-=u),a.addMark(n,s,e.create(t))}else a.removeMark(r.pos,i.pos,e)}s(a.scrollIntoView())}return!0}}function iD(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}let iF=iD(iw,ik,iS),iB=iD(iw,(e,t,n)=>{let r=function(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("forward",e):!(n.parentOffset<n.parent.content.size))?n:null}(e,n);if(!r)return!1;let i=iA(r);if(!i)return!1;let o=i.nodeAfter;if(iN(e,i,t,1))return!0;if(0==r.parent.content.size&&(iC(o,"start")||nx.nh.isSelectable(o))){let n=(0,nC.$L)(e.doc,r.before(),r.after(),rv.Ji.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(iC(o,"start")?nx.LN.findFrom(r.doc.resolve(r.mapping.map(i.pos)),1):nx.nh.create(r.doc,r.mapping.map(i.pos))),t(r.scrollIntoView())}return!0}}return!!o.isAtom&&i.depth==r.depth-1&&(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0)},(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=iA(r)}let s=o&&o.nodeAfter;return!!s&&!!nx.nh.isSelectable(s)&&(t&&t(e.tr.setSelection(nx.nh.create(e.doc,o.pos)).scrollIntoView()),!0)}),i$={Enter:iD((e,t)=>{let{$head:n,$anchor:r}=e.selection;return!!n.parent.type.spec.code&&!!n.sameParent(r)&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)},(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof nx.i5||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=iT(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,s=e.tr.insert(n,o.createAndFill());s.setSelection(nx.U3.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if((0,nC.zy)(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&(0,nC.jP)(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof nx.nh&&e.selection.node.isBlock)return!!n.parentOffset&&!!(0,nC.zy)(e.doc,n.pos)&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i=[],o,s,l=!1,a=!1;for(let e=n.depth;;e--){if(n.node(e).isBlock){let t;l=n.end(e)==n.pos+(n.depth-e),a=n.start(e)==n.pos-(n.depth-e),s=iT(n.node(e-1).contentMatchAt(n.indexAfter(e-1)));i.unshift(t||(l&&s?{type:s}:null)),o=e;break}if(1==e)return!1;i.unshift(null)}let c=e.tr;(e.selection instanceof nx.U3||e.selection instanceof nx.i5)&&c.deleteSelection();let h=c.mapping.map(n.pos),u=(0,nC.zy)(c.doc,h,i.length,i);if(u||(i[0]=s?{type:s}:null,u=(0,nC.zy)(c.doc,h,i.length,i)),!u)return!1;if(c.split(h,i.length,i),!l&&a&&n.node(o).type!=s){let e=c.mapping.map(n.before(o)),t=c.doc.resolve(e);s&&n.node(o-1).canReplaceWith(t.index(),t.index()+1,s)&&c.setNodeMarkup(c.mapping.map(n.before(o)),s)}return t&&t(c.scrollIntoView()),!0}),"Mod-Enter":iO,Backspace:iF,"Mod-Backspace":iF,"Shift-Backspace":iF,Delete:iB,"Mod-Delete":iB,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new nx.i5(e.doc))),!0)},ij={"Ctrl-h":i$.Backspace,"Alt-Backspace":i$["Mod-Backspace"],"Ctrl-d":i$.Delete,"Ctrl-Alt-Backspace":i$["Mod-Delete"],"Alt-Delete":i$["Mod-Delete"],"Alt-d":i$["Mod-Delete"],"Ctrl-a":iE,"Ctrl-e":i_};for(let e in i$)ij[e]=i$[e];let iz=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&!!os.platform&&"darwin"==os.platform())?ij:i$;var iH=n(99439);let iq="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),iW="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function iU(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function iV(e){return new nx.k_({props:{handleKeyDown:iK(e)}})}function iK(e){let t=function(e){let t=Object.create(null);for(let n in e)t[function(e){let t,n,r,i,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let e=0;e<o.length-1;e++){let s=o[e];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))r=!0;else if(/^mod$/i.test(s))iq?i=!0:n=!0;else throw Error("Unrecognized modifier name: "+s)}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}(n)]=e[n];return t}(e);return function(e,n){let r=(0,iH.xT)(n),i,o=t[iU(r,n)];if(o&&o(e.state,e.dispatch,e))return!0;if(1==r.length&&" "!=r){if(n.shiftKey){let i=t[iU(r,n,!1)];if(i&&i(e.state,e.dispatch,e))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(iW&&n.ctrlKey&&n.altKey)&&(i=iH.E3[n.keyCode])&&i!=r){let r=t[iU(i,n)];if(r&&r(e.state,e.dispatch,e))return!0}}return!1}}var iJ=n(32806);function iZ(e,t){return e.meta={package:"@milkdown/core",group:"System",...t},e}let iG={text:(e,t,n,r)=>{let i=e.value;return/^[^*_\\]*\s+$/.test(i)?i:n.safe(i,{...r,encode:[]})},strong:(e,t,n,r)=>{let i=e.marker||n.options.strong||"*",o=n.enter("strong"),s=n.createTracker(r),l=s.move(i+i);return l+=s.move(n.containerPhrasing(e,{before:l,after:i,...s.current()})),l+=s.move(i+i),o(),l},emphasis:(e,t,n,r)=>{let i=e.marker||n.options.emphasis||"*",o=n.enter("emphasis"),s=n.createTracker(r),l=s.move(i);return l+=s.move(n.containerPhrasing(e,{before:l,after:i,...s.current()})),l+=s.move(i),o(),l}},iY=ru({},"editorView"),iX=ru({},"editorState"),iQ=ru([],"initTimer"),i0=ru({},"editor"),i1=ru([],"inputRules"),i2=ru([],"prosePlugins"),i5=ru([],"remarkPlugins"),i3=ru([],"nodeView"),i4=ru([],"markView"),i9=ru((0,is.l)().use(rw.A).use(io),"remark"),i7=ru({handlers:iG,encode:[]},"remarkStringifyOptions"),i8=ry("ConfigReady"),i6=ry("InitReady"),oe=ry("SchemaReady"),ot=ru([],"schemaTimer"),on=ru({},"schema"),or=ru([],"nodes"),oi=ru([],"marks");function oo(e){return{...e,parseDOM:e.parseDOM?.map(t=>({priority:e.priority,...t}))}}let ol=e=>(e.inject(on,{}).inject(or,[]).inject(oi,[]).inject(ot,[i6]).record(oe),async()=>{await e.waitTimers(ot);let t=e.get(i9),n=e.get(i5).reduce((e,t)=>e.use(t.plugin,t.options),t);e.set(i9,n);let r=Object.fromEntries(e.get(or).map(([e,t])=>[e,oo(t)])),i=Object.fromEntries(e.get(oi).map(([e,t])=>[e,oo(t)])),o=new rv.Sj({nodes:r,marks:i});return e.set(on,o),e.done(oe),()=>{e.remove(on).remove(or).remove(oi).remove(ot).clearTimer(oe)}});iZ(ol,{displayName:"Schema"});class oa{constructor(){this.#h=new ra,this.#w=null,this.setCtx=e=>{this.#w=e},this.chain=()=>{if(null==this.#w)throw nP();let e=this.#w,t=[],n=this.get.bind(this),r={run:()=>{let n=iD(...t),r=e.get(iY);return n(r.state,r.dispatch,r)},inline:e=>(t.push(e),r),pipe:(function(e,i){let o=n(e);return t.push(o(i)),r}).bind(this)};return r}}#h;#w;get ctx(){return this.#w}create(e,t){let n=e.create(this.#h.sliceMap);return n.set(t),n}get(e){return this.#h.get(e).get()}remove(e){return this.#h.remove(e)}call(e,t){if(null==this.#w)throw nP();let n=this.get(e)(t),r=this.#w.get(iY);return n(r.state,r.dispatch,r)}inline(e){if(null==this.#w)throw nP();let t=this.#w.get(iY);return e(t.state,t.dispatch,t)}}let oc=ru(new oa,"commands"),oh=ru([oe],"commandsTimer"),ou=ry("CommandsReady"),od=e=>{let t=new oa;return t.setCtx(e),e.inject(oc,t).inject(oh,[oe]).record(ou),async()=>(await e.waitTimers(oh),e.done(ou),()=>{e.remove(oc).remove(oh).clearTimer(ou)})};iZ(od,{displayName:"Commands"});class op{constructor(){this.#w=null,this.#b=[],this.setCtx=e=>{this.#w=e},this.add=e=>(this.#b.push(e),()=>{this.#b=this.#b.filter(t=>t!==e)}),this.addObjectKeymap=e=>{let t=[];return Object.entries(e).forEach(([e,n])=>{if("function"==typeof n){let r={key:e,onRun:()=>n};this.#b.push(r),t.push(()=>{this.#b=this.#b.filter(e=>e!==r)})}else this.#b.push(n),t.push(()=>{this.#b=this.#b.filter(e=>e!==n)})}),()=>{t.forEach(e=>e())}},this.addBaseKeymap=()=>{let e=function(e){return e.Backspace=iD(nM,iw,ix,iS),e}(iz);return this.addObjectKeymap(e)},this.build=()=>{let e={};return this.#b.forEach(t=>{e[t.key]=[...e[t.key]||[],t]}),Object.fromEntries(Object.entries(e).map(([e,t])=>{let n=t.sort((e,t)=>(t.priority??50)-(e.priority??50));return[e,(e,t,r)=>{let i=this.#w;if(null==i)throw n_();return iD(...n.map(e=>e.onRun(i)))(e,t,r)}]}))}}#w;#b;get ctx(){return this.#w}}let of=ru(new op,"keymap"),om=ru([oe],"keymapTimer"),og=ry("KeymapReady"),oy=e=>{let t=new op;return t.setCtx(e),e.inject(of,t).inject(om,[oe]).record(og),async()=>(await e.waitTimers(om),e.done(og),()=>{e.remove(of).remove(om).clearTimer(og)})},ov=ry("ParserReady"),ow=()=>{throw n_()},ob=ru(ow,"parser"),ok=ru([],"parserTimer"),ox=e=>(e.inject(ob,ow).inject(ok,[oe]).record(ov),async()=>{await e.waitTimers(ok);let t=e.get(i9),n=e.get(on);return e.set(ob,ig.create(n,t)),e.done(ov),()=>{e.remove(ob).remove(ok).clearTimer(ov)}});iZ(ox,{displayName:"Parser"});let oC=ry("SerializerReady"),oS=ru([],"serializerTimer"),oM=()=>{throw n_()},oA=ru(oM,"serializer"),oT=e=>(e.inject(oA,oM).inject(oS,[oe]).record(oC),async()=>{await e.waitTimers(oS);let t=e.get(i9),n=e.get(on);return e.set(oA,iv.create(n,t)),e.done(oC),()=>{e.remove(oA).remove(oS).clearTimer(oC)}});iZ(oT,{displayName:"Serializer"});let oO=ru("","defaultValue"),oN=ru(e=>e,"stateOptions"),oI=ru([],"editorStateTimer"),oE=ry("EditorStateReady"),o_=new nx.hs("MILKDOWN_STATE_TRACKER"),oL=e=>(e.inject(oO,"").inject(iX,{}).inject(oN,e=>e).inject(oI,[ov,oC,ou,og]).record(oE),async()=>{await e.waitTimers(oI);let t=e.get(on),n=e.get(ob),r=e.get(i1),i=e.get(oN),o=e.get(i2),s=function(e,t,n){if("string"==typeof e)return t(e);if("html"===e.type)return rv.S4.fromSchema(n).parse(e.dom);if("json"===e.type)return rv.bP.fromJSON(n,e.value);throw new nN(nO.docTypeError,`Doc type error, unsupported type: ${nE(e)}`)}(e.get(oO),n,t),l=e.get(of),a=l.addBaseKeymap(),c=[...o,new nx.k_({key:o_,state:{init:()=>{},apply:(t,n,r,i)=>{e.set(iX,i)}}}),function({rules:e}){let t=new nx.k_({key:n5,isInputRules:!0,state:{init:()=>null,apply(e,t){let n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(n,r,i,o)=>n2(n,r,i,o,e,t),handleDOMEvents:{compositionend:n=>(setTimeout(()=>{let{$cursor:r}=n.state.selection;r&&n2(n,r.pos,r.pos,"",e,t)}),!1)},handleKeyDown(n,r){if("Enter"!==r.key)return!1;let{$cursor:i}=n.state.selection;return!!i&&n2(n,i.pos,i.pos,"\n",e,t)}}});return t}({rules:r}),iV(l.build())];e.set(i2,c);let h=i({schema:t,doc:s,plugins:c}),u=nx.$t.create(h);return e.set(iX,u),e.done(oE),()=>{a(),e.remove(oO).remove(iX).remove(oN).remove(oI).clearTimer(oE)}});iZ(oL,{displayName:"EditorState"});let oR=ru([],"pasteRule"),oP=ru([oe],"pasteRuleTimer"),oD=ry("PasteRuleReady"),oF=e=>(e.inject(oR,[]).inject(oP,[oe]).record(oD),async()=>(await e.waitTimers(oP),e.done(oD),()=>{e.remove(oR).remove(oP).clearTimer(oD)}));iZ(oF,{displayName:"PasteRule"});let oB=ry("EditorViewReady"),o$=ru([],"editorViewTimer"),oj=ru({},"editorViewOptions"),oz=ru(null,"root"),oH=ru(null,"rootDOM"),oq=ru({},"rootAttrs"),oW=new nx.hs("MILKDOWN_VIEW_CLEAR"),oU=e=>(e.inject(oz,document.body).inject(iY,{}).inject(oj,{}).inject(oH,null).inject(oq,{}).inject(o$,[oE,oD]).record(oB),async()=>{await e.wait(i6);let t=e.get(oz)||document.body,n="string"==typeof t?document.querySelector(t):t;e.update(i2,t=>[new nx.k_({key:oW,view:t=>{let r=n?function(e,t){let n=document.createElement("div");return n.className="milkdown",e.appendChild(n),t.set(oH,n),Object.entries(t.get(oq)).forEach(([e,t])=>n.setAttribute(e,t)),n}(n,e):void 0;return(()=>{if(r&&n){let e=t.dom;n.replaceChild(r,e),r.appendChild(e)}})(),{destroy:()=>{r?.parentNode&&r?.parentNode.replaceChild(t.dom,r),r?.remove()}}}}),...t]),await e.waitTimers(o$);let r=e.get(iX),i=e.get(oj),o=Object.fromEntries(e.get(i3)),s=Object.fromEntries(e.get(i4)),l=new iJ.Lz(n,{state:r,nodeViews:o,markViews:s,transformPasted:(t,n,r)=>(e.get(oR).sort((e,t)=>(t.priority??50)-(e.priority??50)).map(e=>e.run).forEach(e=>{t=e(t,n,r)}),t),...i});return!function(e){e.classList.add("editor"),e.setAttribute("role","textbox")}(l.dom),e.set(iY,l),e.done(oB),()=>{l?.destroy(),e.remove(oz).remove(iY).remove(oj).remove(oH).remove(oq).remove(o$).clearTimer(oB)}});iZ(oU,{displayName:"EditorView"});var oV=(e=>(e.Idle="Idle",e.OnCreate="OnCreate",e.Created="Created",e.OnDestroy="OnDestroy",e.Destroyed="Destroyed",e))(oV||{});class oK{constructor(){this.#k=!1,this.#m="Idle",this.#x=[],this.#C=()=>void 0,this.#h=new ra,this.#u=new rf,this.#S=new Map,this.#M=new Map,this.#w=new rp(this.#h,this.#u),this.#A=()=>{let e=function(e){let t=t=>(t.record(i8),async()=>(await e(t),t.done(i8),()=>{t.clearTimer(i8)}));return iZ(t,{displayName:"Config"}),t}(async e=>{await Promise.all(this.#x.map(t=>Promise.resolve(t(e))))}),t=[ol,ox,oT,od,oy,oF,oL,oU,function(e){let t=t=>(t.inject(i0,e).inject(i2,[]).inject(i5,[]).inject(i1,[]).inject(i3,[]).inject(i4,[]).inject(i7,{handlers:iG,encode:[]}).inject(i9,(0,is.l)().use(rw.A).use(io)).inject(iQ,[i8]).record(i6),async()=>{await t.waitTimers(iQ);let e=t.get(i7);return t.set(i9,(0,is.l)().use(rw.A).use(io,e)),t.done(i6),()=>{t.remove(i0).remove(i2).remove(i5).remove(i1).remove(i3).remove(i4).remove(i7).remove(i9).remove(iQ).clearTimer(i6)}});return iZ(t,{displayName:"Init"}),t}(this),e];this.#T(t,this.#M)},this.#T=(e,t)=>{e.forEach(e=>{let n=this.#w.produce(this.#k?e.meta:void 0),r=e(n);t.set(e,{ctx:n,handler:r,cleanup:void 0})})},this.#O=(e,t=!1)=>Promise.all([e].flat().map(async e=>{let n=this.#S.get(e),r=n?.cleanup;return(t?this.#S.delete(e):this.#S.set(e,{ctx:void 0,handler:void 0,cleanup:void 0}),"function"==typeof r)?r():r})),this.#N=async()=>{await Promise.all([...this.#M.entries()].map(async([e,{cleanup:t}])=>"function"==typeof t?t():t)),this.#M.clear()},this.#I=e=>{this.#m=e,this.#C(e)},this.#E=e=>[...e.entries()].map(async([t,n])=>{let{ctx:r,handler:i}=n;if(!i)return;let o=await i();e.set(t,{ctx:r,handler:i,cleanup:o})}),this.enableInspector=(e=!0)=>(this.#k=e,this),this.onStatusChange=e=>(this.#C=e,this),this.config=e=>(this.#x.push(e),this),this.removeConfig=e=>(this.#x=this.#x.filter(t=>t!==e),this),this.use=e=>{let t=[e].flat();return t.flat().forEach(e=>{this.#S.set(e,{ctx:void 0,handler:void 0,cleanup:void 0})}),"Created"===this.#m&&this.#T(t,this.#S),this},this.remove=async e=>"OnCreate"===this.#m?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(t=>{setTimeout(()=>{t(this.remove(e))},50)})):(await this.#O([e].flat(),!0),this),this.create=async()=>("OnCreate"===this.#m||("Created"===this.#m&&await this.destroy(),this.#I("OnCreate"),this.#A(),this.#T([...this.#S.keys()],this.#S),await Promise.all([this.#E(this.#M),this.#E(this.#S)].flat()),this.#I("Created")),this),this.destroy=async(e=!1)=>"Destroyed"===this.#m||"OnDestroy"===this.#m?this:"OnCreate"===this.#m?new Promise(t=>{setTimeout(()=>{t(this.destroy(e))},50)}):(e&&(this.#x=[]),this.#I("OnDestroy"),await this.#O([...this.#S.keys()],e),await this.#N(),this.#I("Destroyed"),this),this.action=e=>e(this.#w),this.inspect=()=>this.#k?[...this.#M.values(),...this.#S.values()].map(({ctx:e})=>e?.inspector?.read()).filter(e=>!!e):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new oK}#k;#m;#x;#C;#h;#u;#S;#M;#w;#A;#T;#O;#N;#I;#E;get ctx(){return this.#w}get status(){return this.#m}}let oJ=e=>crypto.getRandomValues(new Uint8Array(e)),oZ=(e,t=21)=>((e,t,n)=>{let r=(2<<Math.log2(e.length-1))-1,i=-~(1.6*r*t/e.length);return (o=t)=>{let s="";for(;;){let t=n(i),l=0|i;for(;l--;)if((s+=e[t[l]&r]||"").length>=o)return s}}})(e,0|t,oJ);function oG(e,t){let n=function(e="cmdKey"){return ru(()=>()=>!1,e)}(e),r=i=>async()=>{r.key=n,await i.wait(ou);let o=t(i);return i.get(oc).create(n,o),r.run=t=>i.get(oc).call(e,t),()=>{i.get(oc).remove(n)}};return r}function oY(e){let t=n=>async()=>{await n.wait(oe);let r=e(n);return n.update(i1,e=>[...e,r]),t.inputRule=r,()=>{n.update(i1,e=>e.filter(e=>e!==r))}};return t}function oX(e,t){let n=r=>async()=>{let i=t(r);return r.update(or,t=>[...t.filter(t=>t[0]!==e),[e,i]]),n.id=e,n.schema=i,()=>{r.update(or,t=>t.filter(([t])=>t!==e))}};return n.type=t=>{let n=t.get(on).nodes[e];if(!n)throw new nN(nO.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${e}" in schema.`);return n},n}function oQ(e){let t,n=n=>async()=>(await n.wait(oe),t=e(n),n.update(i2,e=>[...e,t]),()=>{n.update(i2,e=>e.filter(e=>e!==t))});return n.plugin=()=>t,n.key=()=>t.spec.key,n}function o0(e){let t=n=>async()=>{await n.wait(og);let r=n.get(of),i=e(n),o=r.addObjectKeymap(i);return t.keymap=i,()=>{o()}};return t}function o1(e,t){let n=r=>async()=>{await r.wait(oe);let i=t(r);return e.type(r)instanceof rv.Z6?r.update(i3,t=>[...t,[e.id,i]]):r.update(i4,t=>[...t,[e.id,i]]),n.view=i,n.type=e,()=>{e.type(r)instanceof rv.Z6?r.update(i3,t=>t.filter(t=>t[0]!==e.id)):r.update(i4,t=>t.filter(t=>t[0]!==e.id))}};return n}function o2(e,t){let n=ru(e,t),r=e=>(e.inject(n),()=>()=>{e.remove(n)});return r.key=n,r}function o5(e,t){let n=o2(t,e),r=oX(e,e=>e.get(n.key)(e)),i=[n,r];return i.id=r.id,i.node=r,i.type=e=>r.type(e),i.ctx=n,i.key=n.key,i.extendSchema=n=>o5(e,n(t)),i}function o3(e,t){let n=o2(t,e),r=function(e,t){let n=r=>async()=>{let i=t(r);return r.update(oi,t=>[...t.filter(t=>t[0]!==e),[e,i]]),n.id=e,n.schema=i,()=>{r.update(oi,t=>t.filter(([t])=>t!==e))}};return n.type=t=>{let n=t.get(on).marks[e];if(!n)throw new nN(nO.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${e}" in schema.`);return n},n}(e,e=>e.get(n.key)(e)),i=[n,r];return i.id=r.id,i.mark=r,i.type=e=>r.type(e),i.ctx=n,i.key=n.key,i.extendSchema=n=>o3(e,n(t)),i}function o4(e,t){let n=o2(Object.fromEntries(Object.entries(t).map(([e,{shortcuts:t,priority:n}])=>[e,{shortcuts:t,priority:n}])),`${e}Keymap`),r=o0(e=>{let r=e.get(n.key);return Object.fromEntries(Object.entries(t).flatMap(([e,{command:t}])=>{let n=r[e],i=[n.shortcuts].flat(),o=n.priority;return i.map(e=>[e,{key:e,onRun:t,priority:o}])}))}),i=[n,r];return i.ctx=n,i.shortcuts=r,i.key=n.key,i.keymap=r.keymap,i}oZ("abcedfghicklmn",10);let o9=(e,t=()=>({}))=>o2(t,`${e}Attr`),o7=(e,t=()=>({}))=>o2(t,`${e}Attr`);function o8(e,t,n){let r=o2(n??{},e),i=e=>async()=>{await e.wait(i6);let n={plugin:t(e),options:e.get(r.key)};return e.update(i5,e=>[...e,n]),()=>{e.update(i5,e=>e.filter(e=>e!==n))}},o=[r,i];return o.id=e,o.plugin=i,o.options=r,o}let o6=function(){return e_.Date.now()};var se=/\s/;let st=function(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t};var sn=/^\s+/,sr=0/0,si=/^[-+]0x[0-9a-f]+$/i,so=/^0b[01]+$/i,ss=/^0o[0-7]+$/i,sl=parseInt;let sa=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||tM(t)&&"[object Symbol]"==ez(t))return sr;if(eH(e)){var t,n,r="function"==typeof e.valueOf?e.valueOf():e;e=eH(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=(n=e)?n.slice(0,st(n)+1).replace(sn,""):n;var i=so.test(e);return i||ss.test(e)?sl(e.slice(2),i?2:8):si.test(e)?sr:+e};var sc=Math.max,sh=Math.min;let su=function(e,t,n){var r,i,o,s,l,a,c=0,h=!1,u=!1,d=!0;if("function"!=typeof e)throw TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,c=t,s=e.apply(o,n)}function f(e){var n=e-a,r=e-c;return void 0===a||n>=t||n<0||u&&r>=o}function m(){var e,n,r,i=o6();if(f(i))return g(i);l=setTimeout(m,(e=i-a,n=i-c,r=t-e,u?sh(r,o-n):r))}function g(e){return(l=void 0,d&&r)?p(e):(r=i=void 0,s)}function y(){var e,n=o6(),o=f(n);if(r=arguments,i=this,a=n,o){if(void 0===l)return c=e=a,l=setTimeout(m,t),h?p(e):s;if(u)return clearTimeout(l),l=setTimeout(m,t),p(a)}return void 0===l&&(l=setTimeout(m,t)),s}return t=sa(t)||0,eH(n)&&(h=!!n.leading,o=(u="maxWait"in n)?sc(sa(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=a=i=l=void 0},y.flush=function(){return void 0===l?s:g(o6())},y},sd=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw TypeError("Expected a function");return eH(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),su(e,t,{leading:r,maxWait:t,trailing:i})};var sp=n(21166);function sf(e,t){return Object.assign(e,{meta:{package:"@milkdown/plugin-block",...t}}),e}let sm=o2({filterNodes:e=>!ro(e=>"table"===e.type.name)(e)},"blockConfig");sf(sm,{displayName:"Ctx<blockConfig>"});let sg=n1.ie&&n1.ie_version<15||n1.ios&&n1.webkit_version<604;class sy{constructor(){this.#_=()=>{if(!this.#L)return null;let e=this.#L,t=this.#R;if(t&&nx.nh.isSelectable(e.node)){let n=nx.nh.create(t.state.doc,e.$pos.pos);return t.dispatch(t.state.tr.setSelection(n)),t.focus(),this.#P=n,n}return null},this.#P=null,this.#L=null,this.#D=void 0,this.#F=!1,this.#B=()=>{this.#$?.({type:"hide"}),this.#L=null},this.#j=e=>{this.#L=e,this.#$?.({type:"show",active:e})},this.bind=(e,t)=>{this.#w=e,this.#$=t},this.addEvent=e=>{e.addEventListener("mousedown",this.#z),e.addEventListener("mouseup",this.#H),e.addEventListener("dragstart",this.#q)},this.removeEvent=e=>{e.removeEventListener("mousedown",this.#z),e.removeEventListener("mouseup",this.#H),e.removeEventListener("dragstart",this.#q)},this.unBind=()=>{this.#$=void 0},this.#z=()=>{this.#D=this.#L?.el.getBoundingClientRect(),this.#_()},this.#H=()=>{if(!this.#F)return void requestAnimationFrame(()=>{this.#D&&this.#R?.focus()});this.#F=!1,this.#P=null},this.#q=e=>{this.#F=!0;let t=this.#R;if(!t)return;t.dom.dataset.dragging="true";let n=this.#P;if(e.dataTransfer&&n){let r=n.content();e.dataTransfer.effectAllowed="copyMove";let{dom:i,text:o}=t.serializeForClipboard(r);e.dataTransfer.clearData(),e.dataTransfer.setData(sg?"Text":"text/html",i.innerHTML),sg||e.dataTransfer.setData("text/plain",o);let s=this.#L?.el;s&&e.dataTransfer.setDragImage(s,0,0),t.dragging={slice:r,move:!0}}},this.keydownCallback=e=>(this.#B(),this.#F=!1,e.dom.dataset.dragging="false",!1),this.#W=sd((e,t)=>{if(!e.editable)return;let n=e.dom.getBoundingClientRect(),r=n.left+n.width/2;if(!(e.root.elementFromPoint(r,t.clientY)instanceof Element))return void this.#B();let i=this.#U;if(!i)return;let o=function(e,t,n){if(!e.dom.parentElement)return null;try{let r=e.posAtCoords({left:t.x,top:t.y})?.inside;if(null==r||r<0)return null;let i=e.state.doc.resolve(r),o=e.state.doc.nodeAt(r),s=e.nodeDOM(r),l=t=>{let r=i.depth>=1&&0===i.index(i.depth);if(!(t||r))return;let a=i.before(i.depth);o=e.state.doc.nodeAt(a),s=e.nodeDOM(a),i=e.state.doc.resolve(a),n(i,o)||l(!0)},a=n(i,o);if(l(!a),!s||!o)return null;return{node:o,$pos:i,el:s}}catch{return null}}(e,{x:r,y:t.clientY},i);if(!o)return void this.#B();this.#j(o)},200),this.mousemoveCallback=(e,t)=>!e.composing&&!!e.editable&&(this.#W(e,t),!1),this.dragoverCallback=(e,t)=>{if(this.#F){let n=this.#R?.dom.parentElement;if(!n)return!1;let r=n.scrollHeight>n.clientHeight,i=n.getBoundingClientRect();if(r){if(n.scrollTop>0&&20>Math.abs(t.y-i.y)){let e=n.scrollTop>10?n.scrollTop-10:0;return n.scrollTop=e,!1}let r=Math.round(e.dom.getBoundingClientRect().height);if(Math.round(n.scrollTop+i.height)<r&&20>Math.abs(t.y-(i.height+i.y))){let e=n.scrollTop+10;n.scrollTop=e}}}return!1},this.dragenterCallback=e=>{e.dragging&&(this.#F=!0,e.dom.dataset.dragging="true")},this.dragleaveCallback=(e,t)=>{let n=t.clientX,r=t.clientY;(n<0||r<0||n>window.innerWidth||r>window.innerHeight)&&(this.#L=null,this.#V(e))},this.dropCallback=e=>(this.#V(e),!1),this.dragendCallback=e=>{this.#V(e)},this.#V=e=>{this.#F=!1,e.dom.dataset.dragging="false"}}#w;#_;#P;#L;#D;#F;get #U(){try{return this.#w?.get(sm.key).filterNodes}catch{return}}get #R(){return this.#w?.get(iY)}#$;#B;#j;#z;#H;#q;#W;#V}let sv=o2(()=>new sy,"blockService"),sw=o2({},"blockServiceInstance");sf(sv,{displayName:"Ctx<blockService>"}),sf(sw,{displayName:"Ctx<blockServiceInstance>"});let sb=o2({},"blockSpec");sf(sb,{displayName:"Ctx<blockSpec>"});let sk=oQ(e=>{let t=new nx.hs("MILKDOWN_BLOCK"),n=e.get(sv.key)();e.set(sw.key,n);let r=e.get(sb.key);return new nx.k_({key:t,...r,props:{...r.props,handleDOMEvents:{drop:e=>n.dropCallback(e),pointermove:(e,t)=>n.mousemoveCallback(e,t),keydown:e=>n.keydownCallback(e),dragover:(e,t)=>n.dragoverCallback(e,t),dragleave:(e,t)=>n.dragleaveCallback(e,t),dragenter:e=>n.dragenterCallback(e),dragend:e=>n.dragendCallback(e)}}})});sf(sk,{displayName:"Prose<block>"});class sx{constructor(e){this.#K=null,this.#J=!1,this.update=()=>{requestAnimationFrame(()=>{if(!this.#J)try{this.#Z(),this.#J=!0}catch{}})},this.destroy=()=>{this.#G?.unBind(),this.#G?.removeEvent(this.#Y),this.#Y.remove()},this.show=e=>{let t=e.el,n=this.#w.get(iY).dom,r={ctx:this.#w,active:e,editorDom:n,blockDom:this.#Y},i=[(0,sp.UU)()];if(this.#X){let e=this.#X(r),t=(0,sp.cY)(e);i.push(t)}(0,sp.rD)({contextElement:t,getBoundingClientRect:()=>this.#Q?this.#Q(r):t.getBoundingClientRect()},this.#Y,{placement:this.#ee?this.#ee(r):"left",middleware:[...i,...this.#et],...this.#en}).then(({x:e,y:t})=>{Object.assign(this.#Y.style,{left:`${e}px`,top:`${t}px`}),this.#Y.dataset.show="true"}).catch(console.error)},this.hide=()=>{this.#Y.dataset.show="false"},this.#w=e.ctx,this.#Y=e.content,this.#X=e.getOffset,this.#Q=e.getPosition,this.#ee=e.getPlacement,this.#et=e.middleware??[],this.#en=e.floatingUIOptions??{},this.#er=e.root,this.hide()}#Y;#w;#G;#K;#er;#J;#et;#en;#X;#Q;#ee;get active(){return this.#K}#Z(){let e=this.#w.get(iY);(this.#er??e.dom.parentElement??document.body).appendChild(this.#Y);let t=this.#w.get(sw.key);t.bind(this.#w,e=>{"hide"===e.type?(this.hide(),this.#K=null):"show"===e.type&&(this.show(e.active),this.#K=e.active)}),this.#G=t,this.#G.addEvent(this.#Y),this.#Y.draggable=!0}}let sC=[sb,sm,sv,sw,sk];function sS(e){return String(e||"").toUpperCase()}function sM(){return function(e){let t=function(e){let t=new Map;if(!e||!e.type)throw Error("mdast-util-definitions expected node");return(0,rR.YR)(e,"definition",function(e){let n=sS(e.identifier);n&&!t.get(n)&&t.set(n,e)}),function(e){let n=sS(e);return t.get(n)}}(e);(0,rR.YR)(e,function(e,n,r){if("definition"===e.type&&void 0!==r&&"number"==typeof n)return r.children.splice(n,1),[rP._Z,n];if("imageReference"===e.type||"linkReference"===e.type){let i=t(e.identifier);if(i&&r&&"number"==typeof n)return r.children[n]="imageReference"===e.type?{type:"image",url:i.url,title:i.title,alt:e.alt}:{type:"link",url:i.url,title:i.title,children:e.children},[rP._Z,n]}})}}function sA(e,t){if(!(t.childCount>=1&&t.lastChild?.type.name==="hardbreak"))return void e.next(t.content);let n=[];t.content.forEach((e,r,i)=>{i!==t.childCount-1&&n.push(e)}),e.next(rv.FK.fromArray(n))}function sT(e,t){return Object.assign(e,{meta:{package:"@milkdown/preset-commonmark",...t}}),e}sC.key=sb.key,sC.pluginKey=sk.key;let sO=o7("emphasis");sT(sO,{displayName:"Attr<emphasis>",group:"Emphasis"});let sN=o3("emphasis",e=>({attrs:{marker:{default:e.get(i7).emphasis||"*",validate:"string"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>"italic"===e}],toDOM:t=>["em",e.get(sO.key)(t)],parseMarkdown:{match:e=>"emphasis"===e.type,runner:(e,t,n)=>{e.openMark(n,{marker:t.marker}),e.next(t.children),e.closeMark(n)}},toMarkdown:{match:e=>"emphasis"===e.type.name,runner:(e,t)=>{e.withMark(t,"emphasis",void 0,{marker:t.attrs.marker})}}}));sT(sN.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"}),sT(sN.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});let sI=oG("ToggleEmphasis",e=>()=>iP(sN.type(e)));sT(sI,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});let sE=oY(e=>n3(/(?:^|[^*])\*([^*]+)\*$/,sN.type(e),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:e,start:t})=>e.startsWith("*")?{}:{fullMatch:e.slice(1),start:t+1}}));sT(sE,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});let s_=oY(e=>n3(/\b_(?![_\s])(.*?[^_\s])_\b/,sN.type(e),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:e,start:t})=>e.startsWith("_")?{}:{fullMatch:e.slice(1),start:t+1}}));sT(s_,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});let sL=o4("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:e=>{let t=e.get(oc);return()=>t.call(sI.key)}}});sT(sL.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"}),sT(sL.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});let sR=o7("strong");sT(sR,{displayName:"Attr<strong>",group:"Strong"});let sP=o3("strong",e=>({attrs:{marker:{default:e.get(i7).strong||"*",validate:"string"}},parseDOM:[{tag:"b",getAttrs:e=>"normal"!=e.style.fontWeight&&null},{tag:"strong"},{style:"font-style",getAttrs:e=>"bold"===e},{style:"font-weight=400",clearMark:e=>"strong"==e.type.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:t=>["strong",e.get(sR.key)(t)],parseMarkdown:{match:e=>"strong"===e.type,runner:(e,t,n)=>{e.openMark(n,{marker:t.marker}),e.next(t.children),e.closeMark(n)}},toMarkdown:{match:e=>"strong"===e.type.name,runner:(e,t)=>{e.withMark(t,"strong",void 0,{marker:t.attrs.marker})}}}));sT(sP.mark,{displayName:"MarkSchema<strong>",group:"Strong"}),sT(sP.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});let sD=oG("ToggleStrong",e=>()=>iP(sP.type(e)));sT(sD,{displayName:"Command<toggleStrongCommand>",group:"Strong"});let sF=oY(e=>n3(RegExp("(?<![\\w:/])(?:\\*\\*|__)([^*_]+?)(?:\\*\\*|__)(?![\\w/])$"),sP.type(e),{getAttr:e=>({marker:e[0].startsWith("*")?"*":"_"})}));sT(sF,{displayName:"InputRule<strong>",group:"Strong"});let sB=o4("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:e=>{let t=e.get(oc);return()=>t.call(sD.key)}}});sT(sB.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"}),sT(sB.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});let s$=o7("inlineCode");sT(s$,{displayName:"Attr<inlineCode>",group:"InlineCode"});let sj=o3("inlineCode",e=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:t=>["code",e.get(s$.key)(t)],parseMarkdown:{match:e=>"inlineCode"===e.type,runner:(e,t,n)=>{e.openMark(n),e.addText(t.value),e.closeMark(n)}},toMarkdown:{match:e=>"inlineCode"===e.type.name,runner:(e,t,n)=>{e.withMark(t,"inlineCode",n.text||"")}}}));sT(sj.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"}),sT(sj.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});let sz=oG("ToggleInlineCode",e=>()=>(t,n)=>{let{selection:r,tr:i}=t;if(r.empty)return!1;let{from:o,to:s}=r;return t.doc.rangeHasMark(o,s,sj.type(e))?n?.(i.removeMark(o,s,sj.type(e))):(Object.keys(t.schema.marks).filter(e=>e!==sj.type.name).map(e=>t.schema.marks[e]).forEach(e=>{i.removeMark(o,s,e)}),n?.(i.addMark(o,s,sj.type(e).create()))),!0});sT(sz,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});let sH=oY(e=>n3(/(?:`)([^`]+)(?:`)$/,sj.type(e)));sT(sH,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});let sq=o4("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:e=>{let t=e.get(oc);return()=>t.call(sz.key)}}});sT(sq.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"}),sT(sq.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});let sW=o7("link");sT(sW,{displayName:"Attr<link>",group:"Link"});let sU=o3("link",e=>({attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw nR(e);return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:t=>["a",{...e.get(sW.key)(t),...t.attrs}],parseMarkdown:{match:e=>"link"===e.type,runner:(e,t,n)=>{let r=t.url,i=t.title;e.openMark(n,{href:r,title:i}),e.next(t.children),e.closeMark(n)}},toMarkdown:{match:e=>"link"===e.type.name,runner:(e,t)=>{e.withMark(t,"link",void 0,{title:t.attrs.title,url:t.attrs.href})}}}));sT(sU.mark,{displayName:"MarkSchema<link>",group:"Link"});let sV=oG("ToggleLink",e=>(t={})=>iP(sU.type(e),t));sT(sV,{displayName:"Command<toggleLinkCommand>",group:"Link"});let sK=oG("UpdateLink",e=>(t={})=>(n,r)=>{let i;if(!r)return!1;let o=-1,{selection:s}=n,{from:l,to:a}=s;if(n.doc.nodesBetween(l,l===a?a+1:a,(t,n)=>{if(sU.type(e).isInSet(t.marks))return i=t,o=n,!1}),!i)return!1;let c=i.marks.find(({type:t})=>t===sU.type(e));if(!c)return!1;let h=o,u=o+i.nodeSize,{tr:d}=n,p=sU.type(e).create({...c.attrs,...t});return!!p&&(r(d.removeMark(h,u,c).addMark(h,u,p).setSelection(new nx.U3(d.selection.$anchor)).scrollIntoView()),!0)});sT(sK,{displayName:"Command<updateLinkCommand>",group:"Link"});let sJ=oX("doc",()=>({content:"block+",parseMarkdown:{match:({type:e})=>"root"===e,runner:(e,t,n)=>{e.injectRoot(t,n)}},toMarkdown:{match:e=>"doc"===e.type.name,runner:(e,t)=>{e.openNode("root"),e.next(t.content)}}}));function sZ(e){return(0,rP.VG)(e,e=>"html"===e.type&&["<br />","<br>","<br >","<br/>"].includes(e.value?.trim()),(e,t)=>{if(!t.length)return;let n=t[t.length-1];if(!n)return;let r=n.children.indexOf(e);-1!==r&&n.children.splice(r,1)},!0)}sT(sJ,{displayName:"NodeSchema<doc>",group:"Doc"});let sG=o8("remark-preserve-empty-line",()=>()=>sZ);sT(sG.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"}),sT(sG.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});let sY=o9("paragraph");sT(sY,{displayName:"Attr<paragraph>",group:"Paragraph"});let sX=o5("paragraph",e=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:t=>["p",e.get(sY.key)(t),0],parseMarkdown:{match:e=>"paragraph"===e.type,runner:(e,t,n)=>{e.openNode(n),t.children?e.next(t.children):e.addText(t.value||""),e.closeNode()}},toMarkdown:{match:e=>"paragraph"===e.type.name,runner:(t,n)=>{let r=e.get(iY),i=r.state?.doc.lastChild;t.openNode("paragraph"),(!n.content||0===n.content.size)&&n!==i&&function(e){let t=!1;try{e.get(sG.id),t=!0}catch{t=!1}return t}(e)?t.addNode("html",void 0,"<br />"):sA(t,n),t.closeNode()}}}));sT(sX.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"}),sT(sX.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});let sQ=oG("TurnIntoText",e=>()=>iR(sX.type(e)));sT(sQ,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});let s0=o4("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:e=>{let t=e.get(oc);return()=>t.call(sQ.key)}}});sT(s0.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"}),sT(s0.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});let s1=Array(6).fill(0).map((e,t)=>t+1),s2=o2(function(e){return e.textContent.toLowerCase().trim().replace(/\s+/g,"-")},"headingIdGenerator");sT(s2,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});let s5=o9("heading");sT(s5,{displayName:"Attr<heading>",group:"Heading"});let s3=o5("heading",e=>{let t=e.get(s2.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:"",validate:"string"},level:{default:1,validate:"number"}},parseDOM:s1.map(e=>({tag:`h${e}`,getAttrs:t=>{if(!(t instanceof HTMLElement))throw nR(t);return{level:e,id:t.id}}})),toDOM:n=>[`h${n.attrs.level}`,{...e.get(s5.key)(n),id:n.attrs.id||t(n)},0],parseMarkdown:{match:({type:e})=>"heading"===e,runner:(e,t,n)=>{let r=t.depth;e.openNode(n,{level:r}),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>"heading"===e.type.name,runner:(e,t)=>{e.openNode("heading",void 0,{depth:t.attrs.level}),sA(e,t),e.closeNode()}}}});sT(s3.node,{displayName:"NodeSchema<heading>",group:"Heading"}),sT(s3.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});let s4=oY(e=>nT(/^(?<hashes>#+)\s$/,s3.type(e),t=>{let n=t.groups?.hashes?.length||0,{$from:r}=e.get(iY).state.selection,i=r.node();if("heading"===i.type.name){let e=Number(i.attrs.level)+Number(n);return e>6&&(e=6),{level:e}}return{level:n}}));sT(s4,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});let s9=oG("WrapInHeading",e=>t=>(t??=1)<1?iR(sX.type(e)):iR(s3.type(e),{level:t}));sT(s9,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});let s7=oG("DowngradeHeading",e=>()=>(t,n,r)=>{let{$from:i}=t.selection,o=i.node();if(o.type!==s3.type(e)||!t.selection.empty||0!==i.parentOffset)return!1;let s=o.attrs.level-1;return s?(n?.(t.tr.setNodeMarkup(t.selection.$from.before(),void 0,{...o.attrs,level:s})),!0):iR(sX.type(e))(t,n,r)});sT(s7,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});let s8=o4("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:e=>{let t=e.get(oc);return()=>t.call(s9.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:e=>{let t=e.get(oc);return()=>t.call(s9.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:e=>{let t=e.get(oc);return()=>t.call(s9.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:e=>{let t=e.get(oc);return()=>t.call(s9.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:e=>{let t=e.get(oc);return()=>t.call(s9.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:e=>{let t=e.get(oc);return()=>t.call(s9.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:e=>{let t=e.get(oc);return()=>t.call(s7.key)}}});sT(s8.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"}),sT(s8.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});let s6=o9("blockquote");sT(s6,{displayName:"Attr<blockquote>",group:"Blockquote"});let le=o5("blockquote",e=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:t=>["blockquote",e.get(s6.key)(t),0],parseMarkdown:{match:({type:e})=>"blockquote"===e,runner:(e,t,n)=>{e.openNode(n).next(t.children).closeNode()}},toMarkdown:{match:e=>"blockquote"===e.type.name,runner:(e,t)=>{e.openNode("blockquote").next(t.content).closeNode()}}}));sT(le.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"}),sT(le.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});let lt=oY(e=>nA(/^\s*>\s$/,le.type(e)));sT(lt,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});let ln=oG("WrapInBlockquote",e=>()=>iL(le.type(e)));sT(ln,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});let lr=o4("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:e=>{let t=e.get(oc);return()=>t.call(ln.key)}}});sT(lr.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"}),sT(lr.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});let li=o9("codeBlock",()=>({pre:{},code:{}}));sT(li,{displayName:"Attr<codeBlock>",group:"CodeBlock"});let lo=o5("code_block",e=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:"",validate:"string"}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw nR(e);return{language:e.dataset.language}}}],toDOM:t=>{let n=e.get(li.key)(t),r=t.attrs.language,i=r&&r.length>0?{"data-language":r}:void 0;return["pre",{...n.pre,...i},["code",n.code,0]]},parseMarkdown:{match:({type:e})=>"code"===e,runner:(e,t,n)=>{let r=t.lang??"",i=t.value;e.openNode(n,{language:r}),i&&e.addText(i),e.closeNode()}},toMarkdown:{match:e=>"code_block"===e.type.name,runner:(e,t)=>{e.addNode("code",void 0,t.content.firstChild?.text||"",{lang:t.attrs.language})}}}));sT(lo.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"}),sT(lo.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});let ls=oY(e=>nT(/^```(?<language>[a-z]*)?[\s\n]$/,lo.type(e),e=>({language:e.groups?.language??""})));sT(ls,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});let ll=oG("CreateCodeBlock",e=>(t="")=>iR(lo.type(e),{language:t}));sT(ll,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"}),sT(oG("UpdateCodeBlockLanguage",()=>({pos:e,language:t}={pos:-1,language:""})=>(n,r)=>e>=0&&(r?.(n.tr.setNodeAttribute(e,"language",t)),!0)),{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});let la=o4("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:e=>{let t=e.get(oc);return()=>t.call(ll.key)}}});sT(la.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"}),sT(la.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});let lc=o9("image");sT(lc,{displayName:"Attr<image>",group:"Image"});let lh=o5("image",e=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:"",validate:"string"},alt:{default:"",validate:"string"},title:{default:"",validate:"string"}},parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw nR(e);return{src:e.getAttribute("src")||"",alt:e.getAttribute("alt")||"",title:e.getAttribute("title")||e.getAttribute("alt")||""}}}],toDOM:t=>["img",{...e.get(lc.key)(t),...t.attrs}],parseMarkdown:{match:({type:e})=>"image"===e,runner:(e,t,n)=>{let r=t.url,i=t.alt,o=t.title;e.addNode(n,{src:r,alt:i,title:o})}},toMarkdown:{match:e=>"image"===e.type.name,runner:(e,t)=>{e.addNode("image",void 0,void 0,{title:t.attrs.title,url:t.attrs.src,alt:t.attrs.alt})}}}));sT(lh.node,{displayName:"NodeSchema<image>",group:"Image"}),sT(lh.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});let lu=oG("InsertImage",e=>(t={})=>(n,r)=>{if(!r)return!0;let{src:i="",alt:o="",title:s=""}=t,l=lh.type(e).create({src:i,alt:o,title:s});return!l||(r(n.tr.replaceSelectionWith(l).scrollIntoView()),!0)});sT(lu,{displayName:"Command<insertImageCommand>",group:"Image"});let ld=oG("UpdateImage",e=>(t={})=>(n,r)=>{let i=function(e,t){if(!(e instanceof nx.nh))return;let{node:n,$from:r}=e;if(Array.isArray(t)&&t.includes(n.type)||n.type===t)return{node:n,pos:r.pos,start:r.start(r.depth),depth:r.depth}}(n.selection,lh.type(e));if(!i)return!1;let{node:o,pos:s}=i,l={...o.attrs},{src:a,alt:c,title:h}=t;return void 0!==a&&(l.src=a),void 0!==c&&(l.alt=c),void 0!==h&&(l.title=h),r?.(n.tr.setNodeMarkup(s,void 0,l).scrollIntoView()),!0});sT(ld,{displayName:"Command<updateImageCommand>",group:"Image"}),sT(oY(e=>new nS(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(t,n,r,i)=>{let[o,s,l="",a]=n;return o?t.tr.replaceWith(r,i,lh.type(e).create({src:l,alt:s,title:a})):null})),{displayName:"InputRule<insertImageInputRule>",group:"Image"});let lp=o9("hardbreak",e=>({"data-type":"hardbreak","data-is-inline":e.attrs.isInline}));sT(lp,{displayName:"Attr<hardbreak>",group:"Hardbreak"});let lf=o5("hardbreak",e=>({inline:!0,group:"inline",attrs:{isInline:{default:!1,validate:"boolean"}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:t=>t.attrs.isInline?["span",e.get(lp.key)(t)," "]:["br",e.get(lp.key)(t)],parseMarkdown:{match:({type:e})=>"break"===e,runner:(e,t,n)=>{e.addNode(n,{isInline:!!t.data?.isInline})}},leafText:()=>"\n",toMarkdown:{match:e=>"hardbreak"===e.type.name,runner:(e,t)=>{t.attrs.isInline?e.addNode("text",void 0,"\n"):e.addNode("break")}}}));sT(lf.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"}),sT(lf.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});let lm=oG("InsertHardbreak",e=>()=>(t,n)=>{let{selection:r,tr:i}=t;if(!(r instanceof nx.U3))return!1;if(r.empty){let e=r.$from.node();if(e.childCount>0&&e.lastChild?.type.name==="hardbreak")return n?.(i.replaceRangeWith(r.to-1,r.to,t.schema.node("paragraph")).setSelection(nx.LN.near(i.doc.resolve(r.to))).scrollIntoView()),!0}return n?.(i.setMeta("hardbreak",!0).replaceSelectionWith(lf.type(e).create()).scrollIntoView()),!0});sT(lm,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});let lg=o4("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:e=>{let t=e.get(oc);return()=>t.call(lm.key)}}});sT(lg.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"}),sT(lg.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});let ly=o9("hr");sT(ly,{displayName:"Attr<hr>",group:"Hr"});let lv=o5("hr",e=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:t=>["hr",e.get(ly.key)(t)],parseMarkdown:{match:({type:e})=>"thematicBreak"===e,runner:(e,t,n)=>{e.addNode(n)}},toMarkdown:{match:e=>"hr"===e.type.name,runner:e=>{e.addNode("thematicBreak")}}}));sT(lv.node,{displayName:"NodeSchema<hr>",group:"Hr"}),sT(lv.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});let lw=oY(e=>new nS(/^(?:---|___\s|\*\*\*\s)$/,(t,n,r,i)=>{let{tr:o}=t;return n[0]&&o.replaceWith(r-1,i,lv.type(e).create()),o}));sT(lw,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});let lb=oG("InsertHr",e=>()=>(t,n)=>{if(!n)return!0;let r=sX.node.type(e).create(),{tr:i,selection:o}=t,{from:s}=o,l=lv.type(e).create();if(!l)return!0;let a=i.replaceSelectionWith(l).insert(s,r),c=nx.LN.findFrom(a.doc.resolve(s),1,!0);return!c||(n(a.setSelection(c).scrollIntoView()),!0)});sT(lb,{displayName:"Command<insertHrCommand>",group:"Hr"});let lk=o9("bulletList");sT(lk,{displayName:"Attr<bulletList>",group:"BulletList"});let lx=o5("bullet_list",e=>({content:"listItem+",group:"block",attrs:{spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ul",getAttrs:e=>{if(!(e instanceof HTMLElement))throw nR(e);return{spread:"true"===e.dataset.spread}}}],toDOM:t=>["ul",{...e.get(lk.key)(t),"data-spread":t.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>"list"===e&&!t,runner:(e,t,n)=>{let r=null!=t.spread?`${t.spread}`:"false";e.openNode(n,{spread:r}).next(t.children).closeNode()}},toMarkdown:{match:e=>"bullet_list"===e.type.name,runner:(e,t)=>{e.openNode("list",void 0,{ordered:!1,spread:t.attrs.spread}).next(t.content).closeNode()}}}));sT(lx.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"}),sT(lx.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});let lC=oY(e=>nA(/^\s*([-+*])\s$/,lx.type(e)));sT(lC,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});let lS=oG("WrapInBulletList",e=>()=>iL(lx.type(e)));sT(lS,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});let lM=o4("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:e=>{let t=e.get(oc);return()=>t.call(lS.key)}}});sT(lM.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"}),sT(lM.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});let lA=o9("orderedList");sT(lA,{displayName:"Attr<orderedList>",group:"OrderedList"});let lT=o5("ordered_list",e=>({content:"listItem+",group:"block",attrs:{order:{default:1,validate:"number"},spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw nR(e);return{spread:e.dataset.spread,order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:t=>["ol",{...e.get(lA.key)(t),...1===t.attrs.order?{}:t.attrs.order,"data-spread":t.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>"list"===e&&!!t,runner:(e,t,n)=>{let r=null!=t.spread?`${t.spread}`:"true";e.openNode(n,{spread:r}).next(t.children).closeNode()}},toMarkdown:{match:e=>"ordered_list"===e.type.name,runner:(e,t)=>{e.openNode("list",void 0,{ordered:!0,start:1,spread:"true"===t.attrs.spread}),e.next(t.content),e.closeNode()}}}));sT(lT.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"}),sT(lT.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});let lO=oY(e=>nA(/^\s*(\d+)\.\s$/,lT.type(e),e=>({order:Number(e[1])}),(e,t)=>t.childCount+t.attrs.order===Number(e[1])));sT(lO,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});let lN=oG("WrapInOrderedList",e=>()=>iL(lT.type(e)));sT(lN,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});let lI=o4("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:e=>{let t=e.get(oc);return()=>t.call(lN.key)}}});sT(lI.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"}),sT(lI.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});let lE=o9("listItem");sT(lE,{displayName:"Attr<listItem>",group:"ListItem"});let l_=o5("list_item",e=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"•",validate:"string"},listType:{default:"bullet",validate:"string"},spread:{default:!0,validate:"boolean"}},defining:!0,parseDOM:[{tag:"li",getAttrs:e=>{if(!(e instanceof HTMLElement))throw nR(e);return{label:e.dataset.label,listType:e.dataset.listType,spread:"true"===e.dataset.spread}}}],toDOM:t=>["li",{...e.get(lE.key)(t),"data-label":t.attrs.label,"data-list-type":t.attrs.listType,"data-spread":t.attrs.spread},0],parseMarkdown:{match:({type:e})=>"listItem"===e,runner:(e,t,n)=>{let r=null!=t.label?`${t.label}.`:"•",i=null!=t.label?"ordered":"bullet",o=null!=t.spread?`${t.spread}`:"true";e.openNode(n,{label:r,listType:i,spread:o}),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>"list_item"===e.type.name,runner:(e,t)=>{e.openNode("listItem",void 0,{spread:t.attrs.spread}),e.next(t.content),e.closeNode()}}}));sT(l_.node,{displayName:"NodeSchema<listItem>",group:"ListItem"}),sT(l_.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});let lL=oG("SinkListItem",e=>()=>(function(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);if(!o)return!1;let s=o.startIndex;if(0==s)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=e)return!1;if(n){let r=a.lastChild&&a.lastChild.type==l.type,i=rv.FK.from(r?e.create():null),s=new rv.Ji(rv.FK.from(e.create(null,rv.FK.from(l.type.create(null,i)))),r?3:1,0),c=o.start,h=o.end;n(t.tr.step(new nC.Wg(c-(r?3:1),h,c,h,s,1,!0)).scrollIntoView())}return!0}})(l_.type(e)));sT(lL,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});let lR=oG("LiftListItem",e=>()=>(function(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);return!!o&&(!n||(r.node(o.depth-1).type==e?function(e,t,n,r){let i=e.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new nC.Wg(o-1,s,o,s,new rv.Ji(rv.FK.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new rv.u$(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));let l=(0,nC.jP)(r);if(null==l)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(o,-1)-1);return(0,nC.n9)(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),t(i.scrollIntoView()),!0}(t,n,e,o):function(e,t,n){let r=e.tr,i=n.parent;for(let e=n.end,t=n.endIndex-1,o=n.startIndex;t>o;t--)e-=i.child(t).nodeSize,r.delete(e-1,e+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=0==n.startIndex,a=n.endIndex==i.childCount,c=o.node(-1),h=o.index(-1);if(!c.canReplace(h+ +!l,h+1,s.content.append(a?rv.FK.empty:rv.FK.from(i))))return!1;let u=o.pos,d=u+s.nodeSize;return r.step(new nC.Wg(u-!!l,d+ +!!a,u+1,d-1,new rv.Ji((l?rv.FK.empty:rv.FK.from(i.copy(rv.FK.empty))).append(a?rv.FK.empty:rv.FK.from(i.copy(rv.FK.empty))),+!l,+!a),+!l)),t(r.scrollIntoView()),!0}(t,n,o)))}})(l_.type(e)));sT(lR,{displayName:"Command<liftListItemCommand>",group:"ListItem"});let lP=oG("SplitListItem",e=>()=>(function(e,t){return function(t,n){let{$from:r,$to:i,node:o}=t.selection;if(o&&o.isBlock||r.depth<2||!r.sameParent(i))return!1;let s=r.node(-1);if(s.type!=e)return!1;if(0==r.parent.content.size&&r.node(-1).childCount==r.indexAfter(-1)){if(3==r.depth||r.node(-3).type!=e||r.index(-2)!=r.node(-2).childCount-1)return!1;if(n){let i=rv.FK.empty,o=r.index(-1)?1:r.index(-2)?2:3;for(let e=r.depth-o;e>=r.depth-3;e--)i=rv.FK.from(r.node(e).copy(i));let s=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;i=i.append(rv.FK.from(e.createAndFill()));let l=r.before(r.depth-(o-1)),a=t.tr.replace(l,r.after(-s),new rv.Ji(i,4-o,0)),c=-1;a.doc.nodesBetween(l,a.doc.content.size,(e,t)=>{if(c>-1)return!1;e.isTextblock&&0==e.content.size&&(c=t+1)}),c>-1&&a.setSelection(nx.LN.near(a.doc.resolve(c))),n(a.scrollIntoView())}return!0}let l=i.pos==r.end()?s.contentMatchAt(0).defaultType:null,a=t.tr.delete(r.pos,i.pos),c=l?[null,{type:l}]:void 0;return!!(0,nC.zy)(a.doc,r.pos,2,c)&&(n&&n(a.split(r.pos,2,c).scrollIntoView()),!0)}})(l_.type(e)));sT(lP,{displayName:"Command<splitListItemCommand>",group:"ListItem"});let lD=oG("LiftFirstListItem",e=>()=>(t,n,r)=>{let{selection:i}=t;if(!(i instanceof nx.U3))return!1;let{empty:o,$from:s}=i;return!!o&&0===s.parentOffset&&s.node(-1).type===l_.type(e)&&ik(t,n,r)});sT(lD,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});let lF=o4("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:e=>{let t=e.get(oc);return()=>t.call(lP.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:e=>{let t=e.get(oc);return()=>t.call(lL.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:e=>{let t=e.get(oc);return()=>t.call(lR.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:e=>{let t=e.get(oc);return()=>t.call(lD.key)}}});sT(lF.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"}),sT(lF.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});let lB=oX("text",()=>({group:"inline",parseMarkdown:{match:({type:e})=>"text"===e,runner:(e,t)=>{e.addText(t.value)}},toMarkdown:{match:e=>"text"===e.type.name,runner:(e,t)=>{e.addNode("text",void 0,t.text)}}}));sT(lB,{displayName:"NodeSchema<text>",group:"Text"});let l$=o9("html");sT(l$,{displayName:"Attr<html>",group:"Html"});let lj=o5("html",e=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:"",validate:"string"}},toDOM:t=>{let n=document.createElement("span"),r={...e.get(l$.key)(t),"data-value":t.attrs.value,"data-type":"html"};return n.textContent=t.attrs.value,["span",r,t.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:e=>({value:e.dataset.value??""})}],parseMarkdown:{match:({type:e})=>"html"===e,runner:(e,t,n)=>{e.addNode(n,{value:t.value})}},toMarkdown:{match:e=>"html"===e.type.name,runner:(e,t)=>{e.addNode("html",void 0,t.attrs.value)}}}));sT(lj.node,{displayName:"NodeSchema<html>",group:"Html"}),sT(lj.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});let lz=[sJ,sY,sX,s2,s5,s3,lp,lf,s6,le,li,lo,ly,lv,lc,lh,lk,lx,lA,lT,lE,l_,sO,sN,sR,sP,s$,sj,sW,sU,l$,lj,lB].flat(),lH=[lt,lC,lO,ls,lw,s4].flat(),lq=[sE,s_,sH,sF],lW=oG("IsMarkSelected",()=>e=>t=>{if(!e)return!1;let{doc:n,selection:r}=t;return n.rangeHasMark(r.from,r.to,e)}),lU=oG("IsNoteSelected",()=>e=>t=>!!e&&rl(t,e).hasNode),lV=oG("ClearTextInCurrentBlock",()=>()=>(e,t)=>{let n=e.tr,{$from:r,$to:i}=n.selection,{pos:o}=r,{pos:s}=i,l=o-r.node().content.size;return!(l<0)&&(n=n.deleteRange(l,s),t?.(n),!0)}),lK=oG("SetBlockType",()=>e=>(t,n)=>{let{nodeType:r,attrs:i=null}=e??{};if(!r)return!1;let o=t.tr,{from:s,to:l}=o.selection;try{o.setBlockType(s,l,r,i)}catch{return!1}return n?.(o),!0}),lJ=oG("WrapInBlockType",()=>e=>(t,n)=>{let{nodeType:r,attrs:i=null}=e??{};if(!r)return!1;let o=t.tr;try{let{$from:e,$to:t}=o.selection,n=e.blockRange(t),s=n&&(0,nC.oM)(n,r,i);if(!s)return!1;o=o.wrap(n,s)}catch{return!1}return n?.(o),!0}),lZ=oG("AddBlockType",()=>e=>(t,n)=>{let{nodeType:r,attrs:i=null}=e??{};if(!r)return!1;let o=t.tr;try{let e=r instanceof rv.bP?r:r.createAndFill(i);if(!e)return!1;o.replaceSelectionWith(e)}catch{return!1}return n?.(o),!0}),lG=oG("SelectTextNearPos",()=>e=>(t,n)=>{let{pos:r}=e??{};if(null==r)return!1;let i=t.tr;try{let e,n=t.doc.resolve((e=t.doc.content.size,Math.min(Math.max(r,0),e)));i.setSelection(nx.U3.near(n))}catch{return!1}return n?.(i.scrollIntoView()),!0}),lY=[sQ,ln,s9,s7,ll,lm,lb,lu,ld,lN,lS,lL,lP,lR,lD,sI,sz,sD,sV,sK,lW,lU,lV,lK,lJ,lZ,lG],lX=[lr,la,lg,s8,lF,lI,lM,s0,sL,sq,sB].flat(),lQ=o8("remarkAddOrderInList",()=>()=>e=>{(0,rR.YR)(e,"list",e=>{if(e.ordered){let t=e.start??1;e.children.forEach((e,n)=>{e.label=n+t})}})});sT(lQ.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"}),sT(lQ.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});let l0=o8("remarkLineBreak",()=>()=>e=>{let t=/[\t ]*(?:\r?\n|\r)/g;(0,rR.YR)(e,"text",(e,n,r)=>{if(!e.value||"string"!=typeof e.value)return;let i=[],o=0;t.lastIndex=0;let s=t.exec(e.value);for(;s;){let n=s.index;o!==n&&i.push({type:"text",value:e.value.slice(o,n)}),i.push({type:"break",data:{isInline:!0}}),o=n+s[0].length,s=t.exec(e.value)}if(i.length>0&&r&&"number"==typeof n)return o<e.value.length&&i.push({type:"text",value:e.value.slice(o)}),r.children.splice(n,1,...i),n+i.length})});sT(l0.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"}),sT(l0.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});let l1=o8("remarkInlineLink",()=>sM);sT(l1.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"}),sT(l1.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});let l2=["root","blockquote","listItem"],l5=o8("remarkHTMLTransformer",()=>()=>e=>{(function e(t,n,r){if(t.children){let n=[];for(let r=0,i=t.children.length;r<i;r++){let i=t.children[r];if(i){let o=e(i,r,t);if(o)for(let e=0,t=o.length;e<t;e++){let t=o[e];t&&n.push(t)}}}t.children=n}return((e,t,n)=>("html"!==e.type||n&&l2.includes(n.type)&&(e.children=[{...e}],delete e.value,e.type="paragraph"),[e]))(t,n,r)})(e,0,null)[0]});sT(l5.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"}),sT(l5.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});let l3=o8("remarkMarker",()=>()=>(e,t)=>{(0,rR.YR)(e,e=>["strong","emphasis"].includes(e.type),e=>{e.marker=t.value.charAt(e.position.start.offset)})});sT(l3.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"}),sT(l3.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});let l4=oQ(()=>{let e=!1,t=new nx.hs("MILKDOWN_INLINE_NODES_CURSOR"),n=new nx.k_({key:t,state:{init:()=>!1,apply(e){if(!e.selection.empty)return!1;let t=e.selection.$from,n=t.nodeBefore,r=t.nodeAfter;return!!n&&!!r&&!!n.isInline&&!n.isText&&!!r.isInline&&!r.isText}},props:{handleDOMEvents:{compositionend:(t,r)=>!!e&&(e=!1,requestAnimationFrame(()=>{if(n.getState(t.state)){let e=t.state.selection.from;r.preventDefault(),t.dispatch(t.state.tr.insertText(r.data||"",e))}}),!0),compositionstart:t=>(n.getState(t.state)&&(e=!0),!1),beforeinput:(t,r)=>{if(n.getState(t.state)&&r instanceof InputEvent&&r.data&&!e){let e=t.state.selection.from;return r.preventDefault(),t.dispatch(t.state.tr.insertText(r.data||"",e)),!0}return!1}},decorations(e){if(n.getState(e)){let t=e.selection.$from.pos,n=document.createElement("span"),r=iJ.NZ.widget(t,n,{side:-1}),i=document.createElement("span"),o=iJ.NZ.widget(t,i);return setTimeout(()=>{n.contentEditable="true",i.contentEditable="true"}),iJ.zF.create(e.doc,[r,o])}return iJ.zF.empty}}});return n});sT(l4,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});let l9=oQ(e=>new nx.k_({key:new nx.hs("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(t,n,r)=>{if(!t.length)return;let[i]=t;if(!i)return;let[o]=i.steps;if(i.getMeta("hardbreak")){if(!(o instanceof nC.Ln))return;let{from:t}=o;return r.tr.setNodeMarkup(t,lf.type(e),void 0,[])}if(o instanceof nC.XE){let t=r.tr,{from:n,to:i}=o;return r.doc.nodesBetween(n,i,(n,r)=>{n.type===lf.type(e)&&(t=t.setNodeMarkup(r,lf.type(e),void 0,[]))}),t}}}));sT(l9,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});let l7=o2(["table","code_block"],"hardbreakFilterNodes");sT(l7,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});let l8=oQ(e=>{let t=e.get(l7.key);return new nx.k_({key:new nx.hs("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(e,n)=>{let r=e.getMeta("hardbreak"),[i]=e.steps;if(r&&i){let{from:e}=i,r=n.doc.resolve(e),o=r.depth,s=!0;for(;o>0;)t.includes(r.node(o).type.name)&&(s=!1),o--;return s}return!0}})});sT(l8,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});let l6=oQ(e=>{let t=new nx.hs("MILKDOWN_HEADING_ID"),n=n=>{if(n.composing)return;let r=e.get(s2.key),i=n.state.tr.setMeta("addToHistory",!1),o=!1,s={};n.state.doc.descendants((n,l)=>{if(n.type===s3.type(e)){if(0===n.textContent.trim().length)return;let e=n.attrs,a=r(n);s[a]?(s[a]+=1,a+=`-#${s[a]}`):s[a]=1,e.id!==a&&(o=!0,i.setMeta(t,!0).setNodeMarkup(l,void 0,{...e,id:a}))}}),o&&n.dispatch(i)};return new nx.k_({key:t,view:e=>(n(e),{update:(e,t)=>{e.state.doc.eq(t.doc)||n(e)}})})});sT(l6,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});let ae=oQ(e=>new nx.k_({key:new nx.hs("MILKDOWN_KEEP_LIST_ORDER"),appendTransaction:(t,n,r)=>{if(!r.selection||t.some(e=>!1===e.getMeta("addToHistory")||!e.isGeneric))return null;let i=lT.type(e),o=lx.type(e),s=l_.type(e),l=(e,t)=>{let n=!1,r=`${t+1}.`;return e.label!==r&&(e.label=r,n=!0),n},a=r.tr,c=!1;return r.doc.descendants((e,t,n,r)=>{if(e.type===o){let n=e.maybeChild(0);n?.type===s&&"ordered"===n.attrs.listType&&(c=!0,a.setNodeMarkup(t,i,{spread:"true"}),e.descendants((e,t,n,r)=>{if(e.type===s){let n={...e.attrs};l(n,r)&&(a=a.setNodeMarkup(t,void 0,n))}return!1}))}else if(e.type===s&&n?.type===i){let i={...e.attrs},o=!1;"ordered"!==i.listType&&(i.listType="ordered",o=!0),n?.maybeChild(0)&&(o=l(i,r)),o&&(a=a.setNodeMarkup(t,void 0,i),c=!0)}}),c?a.setMeta("addToHistory",!1):null}}));sT(ae,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});let at=[lz,lH,lq,lY,lX,[l9,l7,l8,l4,lQ,l1,l0,l5,l3,sG,l6,ae].flat()].flat();var an=n(12781),ar=n(97229),ai=n(40373);let ao="undefined"!=typeof window&&window.trustedTypes;if(ao)try{s=ao.createPolicy("vue",{createHTML:e=>e})}catch(e){}let as=s?e=>s.createHTML(e):e=>e,al="undefined"!=typeof document?document:null,aa=al&&al.createElement("template"),ac=Symbol("_vtc");an.QP;let ah=Symbol("_vod"),au=Symbol("_vsh"),ad=Symbol(""),ap=/(?:^|;)\s*display\s*:/,af=/\s*!important$/;function am(e,t,n){if((0,ai.cy)(n))n.forEach(n=>am(e,t,n));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{let r=function(e,t){let n=ay[t];if(n)return n;let r=(0,ai.PT)(t);if("filter"!==r&&r in e)return ay[t]=r;r=(0,ai.ZH)(r);for(let n=0;n<ag.length;n++){let i=ag[n]+r;if(i in e)return ay[t]=i}return t}(e,t);af.test(n)?e.setProperty((0,ai.Tg)(r),n.replace(af,""),"important"):e[r]=n}}let ag=["Webkit","Moz","ms"],ay={},av="http://www.w3.org/1999/xlink";function aw(e,t,n,r,i,o=(0,ai.J$)(t)){r&&t.startsWith("xlink:")?null==n?e.removeAttributeNS(av,t.slice(6,t.length)):e.setAttributeNS(av,t,n):null==n||o&&!(0,ai.Y2)(n)?e.removeAttribute(t):e.setAttribute(t,o?"":(0,ai.Bm)(n)?String(n):n)}function ab(e,t,n,r,i){if("innerHTML"===t||"textContent"===t){null!=n&&(e[t]="innerHTML"===t?as(n):n);return}let o=e.tagName;if("value"===t&&"PROGRESS"!==o&&!o.includes("-")){let r="OPTION"===o?e.getAttribute("value")||"":e.value,i=null==n?"checkbox"===e.type?"on":"":String(n);r===i&&"_value"in e||(e.value=i),null==n&&e.removeAttribute(t),e._value=n;return}let s=!1;if(""===n||null==n){let r=typeof e[t];"boolean"===r?n=(0,ai.Y2)(n):null==n&&"string"===r?(n="",s=!0):"number"===r&&(n=0,s=!0)}try{e[t]=n}catch(e){}s&&e.removeAttribute(i||t)}let ak=Symbol("_vei"),ax=/(?:Once|Passive|Capture)$/,aC=0,aS=Promise.resolve(),aM=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&123>e.charCodeAt(2);"undefined"!=typeof HTMLElement&&HTMLElement;let aA=(0,ai.X$)({patchProp:(e,t,n,r,i,o)=>{let s="svg"===i;"class"===t?function(e,t,n){let r=e[ac];r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,r,s):"style"===t?function(e,t,n){let r=e.style,i=(0,ai.Kg)(n),o=!1;if(n&&!i){if(t)if((0,ai.Kg)(t))for(let e of t.split(";")){let t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&am(r,t,"")}else for(let e in t)null==n[e]&&am(r,e,"");for(let e in n)"display"===e&&(o=!0),am(r,e,n[e])}else if(i){if(t!==n){let e=r[ad];e&&(n+=";"+e),r.cssText=n,o=ap.test(n)}}else t&&e.removeAttribute("style");ah in e&&(e[ah]=o?r.display:"",e[au]&&(r.display="none"))}(e,n,r):(0,ai.Mp)(t)?(0,ai.CP)(t)||function(e,t,n,r,i=null){let o=e[ak]||(e[ak]={}),s=o[t];if(r&&s)s.value=r;else{let[n,l]=function(e){let t;if(ax.test(e)){let n;for(t={};n=e.match(ax);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[":"===e[2]?e.slice(3):(0,ai.Tg)(e.slice(2)),t]}(t);if(r){let s=o[t]=function(e,t){let n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();(0,an.qL)(function(e,t){if(!(0,ai.cy)(t))return t;{let n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}}(e,n.value),t,5,[e])};return n.value=e,n.attached=aC||(aS.then(()=>aC=0),aC=Date.now()),n}(r,i);e.addEventListener(n,s,l)}else s&&(e.removeEventListener(n,s,l),o[t]=void 0)}}(e,t,0,r,o):("."===t[0]?(t=t.slice(1),0):"^"===t[0]?(t=t.slice(1),1):!function(e,t,n,r){if(r)return!!("innerHTML"===t||"textContent"===t||t in e&&aM(t)&&(0,ai.Tn)(n));if("spellcheck"===t||"draggable"===t||"translate"===t||"autocorrect"===t||"sandbox"===t&&"IFRAME"===e.tagName||"form"===t||"list"===t&&"INPUT"===e.tagName||"type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){let t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}return!(aM(t)&&(0,ai.Kg)(n))&&t in e}(e,t,r,s))?e._isVueCE&&(/[A-Z]/.test(t)||!(0,ai.Kg)(r))?ab(e,(0,ai.PT)(t),r,o,t):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),aw(e,t,r,s)):(ab(e,t,r),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||aw(e,t,r,s,o,"value"!==t))}},{insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{let t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{let i="svg"===t?al.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?al.createElementNS("http://www.w3.org/1998/Math/MathML",e):n?al.createElement(e,{is:n}):al.createElement(e);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>al.createTextNode(e),createComment:e=>al.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>al.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){let s=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),i!==o&&(i=i.nextSibling););else{aa.innerHTML=as("svg"===r?`<svg>${e}</svg>`:"mathml"===r?`<math>${e}</math>`:e);let i=aa.content;if("svg"===r||"mathml"===r){let e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}}),aT=(...e)=>{let t=(r||(r=(0,an.K9)(aA))).createApp(...e),{mount:n}=t;return t.mount=e=>{let r=function(e){return(0,ai.Kg)(e)?document.querySelector(e):e}(e);if(!r)return;let i=t._component;(0,ai.Tn)(i)||i.render||i.template||(i.template=r.innerHTML),1===r.nodeType&&(r.textContent="");let o=n(r,!1,function(e){return e instanceof SVGElement?"svg":"function"==typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};class aO{constructor(e){this.#J=!1,this.onShow=()=>{},this.onHide=()=>{},this.#ei=(e,t)=>{let{state:n,composing:r}=e,{selection:i,doc:o}=n,{ranges:s}=i,l=Math.min(...s.map(e=>e.$from.pos)),a=Math.max(...s.map(e=>e.$to.pos)),c=t&&t.doc.eq(o)&&t.selection.eq(i);if(this.#J||((this.#er??e.dom.parentElement??document.body).appendChild(this.element),this.#J=!0),!r&&!c){if(!this.#eo(e,t))return void this.hide();(0,sp.rD)({getBoundingClientRect:()=>rr(e,l,a)},this.element,{placement:"bottom-start",middleware:[(0,sp.UU)(),(0,sp.cY)(this.#es),...this.#et],...this.#en}).then(({x:e,y:t})=>{Object.assign(this.element.style,{left:`${e}px`,top:`${t}px`})}).catch(console.error),this.show()}},this.update=(e,t)=>{this.#el(e,t)},this.getContent=(e,t=e=>"paragraph"===e.type.name)=>{let{selection:n}=e.state,{empty:r,$from:i}=n,o=e.state.selection instanceof nx.U3;if("undefined"==typeof document)return;let s=this.element.contains(document.activeElement),l=!e.hasFocus()&&!s,a=!e.editable,c=(e=>rs(t)(e.$from))(e.state.selection);if(!l&&!a&&r&&o&&c)return i.parent.textBetween(Math.max(0,i.parentOffset-500),i.parentOffset,void 0,"￼")},this.destroy=()=>{this.#el.cancel()},this.show=()=>{this.element.dataset.show="true",this.onShow()},this.hide=()=>{this.element.dataset.show="false",this.onHide()},this.element=e.content,this.#ea=e.debounce??200,this.#eo=e.shouldShow??this.#ec,this.#eh=e.trigger??"/",this.#es=e.offset,this.#et=e.middleware??[],this.#en=e.floatingUIOptions??{},this.#er=e.root,this.#el=su(this.#ei,this.#ea)}#J;#et;#en;#er;#ea;#eh;#eo;#el;#es;#ei;#ec(e){let t=this.getContent(e);if(!t)return!1;let n=t.at(-1);return!!n&&(Array.isArray(this.#eh)?this.#eh.includes(n):this.#eh===n)}}let aN=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var o=t.length;for(n=0;n<o;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r);return i}(e))&&(r&&(r+=" "),r+=t);return r},{entries:aI,setPrototypeOf:aE,isFrozen:a_,getPrototypeOf:aL,getOwnPropertyDescriptor:aR}=Object,{freeze:aP,seal:aD,create:aF}=Object,{apply:aB,construct:a$}="undefined"!=typeof Reflect&&Reflect;aP||(aP=function(e){return e}),aD||(aD=function(e){return e}),aB||(aB=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.apply(t,r)}),a$||(a$=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new e(...n)});let aj=a0(Array.prototype.forEach),az=a0(Array.prototype.lastIndexOf),aH=a0(Array.prototype.pop),aq=a0(Array.prototype.push),aW=a0(Array.prototype.splice),aU=a0(String.prototype.toLowerCase),aV=a0(String.prototype.toString),aK=a0(String.prototype.match),aJ=a0(String.prototype.replace),aZ=a0(String.prototype.indexOf),aG=a0(String.prototype.trim),aY=a0(Object.prototype.hasOwnProperty),aX=a0(RegExp.prototype.test),aQ=(c=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a$(c,t)});function a0(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return aB(e,t,r)}}function a1(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aU;aE&&aE(e,null);let r=t.length;for(;r--;){let i=t[r];if("string"==typeof i){let e=n(i);e!==i&&(a_(t)||(t[r]=e),i=e)}e[i]=!0}return e}function a2(e){let t=aF(null);for(let[n,r]of aI(e))aY(e,n)&&(Array.isArray(r)?t[n]=function(e){for(let t=0;t<e.length;t++)aY(e,t)||(e[t]=null);return e}(r):r&&"object"==typeof r&&r.constructor===Object?t[n]=a2(r):t[n]=r);return t}function a5(e,t){for(;null!==e;){let n=aR(e,t);if(n){if(n.get)return a0(n.get);if("function"==typeof n.value)return a0(n.value)}e=aL(e)}return function(){return null}}let a3=aP(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),a4=aP(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),a9=aP(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),a7=aP(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),a8=aP(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),a6=aP(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ce=aP(["#text"]),ct=aP(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),cn=aP(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),cr=aP(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ci=aP(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),co=aD(/\{\{[\w\W]*|[\w\W]*\}\}/gm),cs=aD(/<%[\w\W]*|[\w\W]*%>/gm),cl=aD(/\$\{[\w\W]*/gm),ca=aD(/^data-[\-\w.\u00B7-\uFFFF]+$/),cc=aD(/^aria-[\-\w]+$/),ch=aD(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),cu=aD(/^(?:\w+script|data):/i),cd=aD(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),cp=aD(/^html$/i);var cf=Object.freeze({__proto__:null,ARIA_ATTR:cc,ATTR_WHITESPACE:cd,CUSTOM_ELEMENT:aD(/^[a-z][.\w]*(-[.\w]+)+$/i),DATA_ATTR:ca,DOCTYPE_NAME:cp,ERB_EXPR:cs,IS_ALLOWED_URI:ch,IS_SCRIPT_OR_DATA:cu,MUSTACHE_EXPR:co,TMPLIT_EXPR:cl});let cm={element:1,text:3,progressingInstruction:7,comment:8,document:9},cg=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null,r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));let i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}},cy=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};var cv=function e(){let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,r=t=>e(t);if(r.version="3.3.1",r.removed=[],!n||!n.document||n.document.nodeType!==cm.document||!n.Element)return r.isSupported=!1,r;let{document:i}=n,o=i,s=o.currentScript,{DocumentFragment:l,HTMLTemplateElement:a,Node:c,Element:h,NodeFilter:u,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:p,DOMParser:f,trustedTypes:m}=n,g=h.prototype,y=a5(g,"cloneNode"),v=a5(g,"remove"),w=a5(g,"nextSibling"),b=a5(g,"childNodes"),k=a5(g,"parentNode");if("function"==typeof a){let e=i.createElement("template");e.content&&e.content.ownerDocument&&(i=e.content.ownerDocument)}let x="",{implementation:C,createNodeIterator:S,createDocumentFragment:M,getElementsByTagName:A}=i,{importNode:T}=o,O=cy();r.isSupported="function"==typeof aI&&"function"==typeof k&&C&&void 0!==C.createHTMLDocument;let{MUSTACHE_EXPR:N,ERB_EXPR:I,TMPLIT_EXPR:E,DATA_ATTR:_,ARIA_ATTR:L,IS_SCRIPT_OR_DATA:R,ATTR_WHITESPACE:P,CUSTOM_ELEMENT:D}=cf,{IS_ALLOWED_URI:F}=cf,B=null,$=a1({},[...a3,...a4,...a9,...a8,...ce]),j=null,z=a1({},[...ct,...cn,...cr,...ci]),H=Object.seal(aF(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,W=null,U=Object.seal(aF(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}})),V=!0,K=!0,J=!1,Z=!0,G=!1,Y=!0,X=!1,Q=!1,ee=!1,et=!1,en=!1,er=!1,ei=!0,eo=!1,es=!0,el=!1,ea={},ec=null,eh=a1({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),eu=null,ed=a1({},["audio","video","img","source","image","track"]),ep=null,ef=a1({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),em="http://www.w3.org/1998/Math/MathML",eg="http://www.w3.org/2000/svg",ey="http://www.w3.org/1999/xhtml",ev=ey,ew=!1,eb=null,ek=a1({},[em,eg,ey],aV),ex=a1({},["mi","mo","mn","ms","mtext"]),eC=a1({},["annotation-xml"]),eS=a1({},["title","style","font","a","script"]),eM=null,eA=["application/xhtml+xml","text/html"],eT=null,eO=null,eN=i.createElement("form"),eI=function(e){return e instanceof RegExp||e instanceof Function},eE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!eO||eO!==e){if(e&&"object"==typeof e||(e={}),e=a2(e),eT="application/xhtml+xml"===(eM=-1===eA.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE)?aV:aU,B=aY(e,"ALLOWED_TAGS")?a1({},e.ALLOWED_TAGS,eT):$,j=aY(e,"ALLOWED_ATTR")?a1({},e.ALLOWED_ATTR,eT):z,eb=aY(e,"ALLOWED_NAMESPACES")?a1({},e.ALLOWED_NAMESPACES,aV):ek,ep=aY(e,"ADD_URI_SAFE_ATTR")?a1(a2(ef),e.ADD_URI_SAFE_ATTR,eT):ef,eu=aY(e,"ADD_DATA_URI_TAGS")?a1(a2(ed),e.ADD_DATA_URI_TAGS,eT):ed,ec=aY(e,"FORBID_CONTENTS")?a1({},e.FORBID_CONTENTS,eT):eh,q=aY(e,"FORBID_TAGS")?a1({},e.FORBID_TAGS,eT):a2({}),W=aY(e,"FORBID_ATTR")?a1({},e.FORBID_ATTR,eT):a2({}),ea=!!aY(e,"USE_PROFILES")&&e.USE_PROFILES,V=!1!==e.ALLOW_ARIA_ATTR,K=!1!==e.ALLOW_DATA_ATTR,J=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Z=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,G=e.SAFE_FOR_TEMPLATES||!1,Y=!1!==e.SAFE_FOR_XML,X=e.WHOLE_DOCUMENT||!1,et=e.RETURN_DOM||!1,en=e.RETURN_DOM_FRAGMENT||!1,er=e.RETURN_TRUSTED_TYPE||!1,ee=e.FORCE_BODY||!1,ei=!1!==e.SANITIZE_DOM,eo=e.SANITIZE_NAMED_PROPS||!1,es=!1!==e.KEEP_CONTENT,el=e.IN_PLACE||!1,F=e.ALLOWED_URI_REGEXP||ch,ev=e.NAMESPACE||ey,ex=e.MATHML_TEXT_INTEGRATION_POINTS||ex,eC=e.HTML_INTEGRATION_POINTS||eC,H=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&eI(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&eI(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(H.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),G&&(K=!1),en&&(et=!0),ea&&(B=a1({},ce),j=[],!0===ea.html&&(a1(B,a3),a1(j,ct)),!0===ea.svg&&(a1(B,a4),a1(j,cn),a1(j,ci)),!0===ea.svgFilters&&(a1(B,a9),a1(j,cn),a1(j,ci)),!0===ea.mathMl&&(a1(B,a8),a1(j,cr),a1(j,ci))),e.ADD_TAGS&&("function"==typeof e.ADD_TAGS?U.tagCheck=e.ADD_TAGS:(B===$&&(B=a2(B)),a1(B,e.ADD_TAGS,eT))),e.ADD_ATTR&&("function"==typeof e.ADD_ATTR?U.attributeCheck=e.ADD_ATTR:(j===z&&(j=a2(j)),a1(j,e.ADD_ATTR,eT))),e.ADD_URI_SAFE_ATTR&&a1(ep,e.ADD_URI_SAFE_ATTR,eT),e.FORBID_CONTENTS&&(ec===eh&&(ec=a2(ec)),a1(ec,e.FORBID_CONTENTS,eT)),e.ADD_FORBID_CONTENTS&&(ec===eh&&(ec=a2(ec)),a1(ec,e.ADD_FORBID_CONTENTS,eT)),es&&(B["#text"]=!0),X&&a1(B,["html","head","body"]),B.table&&(a1(B,["tbody"]),delete q.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw aQ('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw aQ('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=(t=e.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===t&&(t=cg(m,s)),null!==t&&"string"==typeof x&&(x=t.createHTML(""));aP&&aP(e),eO=e}},e_=a1({},[...a4,...a9,...a7]),eL=a1({},[...a8,...a6]),eR=function(e){let t=k(e);t&&t.tagName||(t={namespaceURI:ev,tagName:"template"});let n=aU(e.tagName),r=aU(t.tagName);return!!eb[e.namespaceURI]&&(e.namespaceURI===eg?t.namespaceURI===ey?"svg"===n:t.namespaceURI===em?"svg"===n&&("annotation-xml"===r||ex[r]):!!e_[n]:e.namespaceURI===em?t.namespaceURI===ey?"math"===n:t.namespaceURI===eg?"math"===n&&eC[r]:!!eL[n]:e.namespaceURI===ey?(t.namespaceURI!==eg||!!eC[r])&&(t.namespaceURI!==em||!!ex[r])&&!eL[n]&&(eS[n]||!e_[n]):"application/xhtml+xml"===eM&&!!eb[e.namespaceURI])},eP=function(e){aq(r.removed,{element:e});try{k(e).removeChild(e)}catch(t){v(e)}},eD=function(e,t){try{aq(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){aq(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(et||en)try{eP(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},eF=function(e){let n=null,r=null;if(ee)e="<remove></remove>"+e;else{let t=aK(e,/^[\r\n\t ]+/);r=t&&t[0]}"application/xhtml+xml"===eM&&ev===ey&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");let o=t?t.createHTML(e):e;if(ev===ey)try{n=new f().parseFromString(o,eM)}catch(e){}if(!n||!n.documentElement){n=C.createDocument(ev,"template",null);try{n.documentElement.innerHTML=ew?x:o}catch(e){}}let s=n.body||n.documentElement;return(e&&r&&s.insertBefore(i.createTextNode(r),s.childNodes[0]||null),ev===ey)?A.call(n,X?"html":"body")[0]:X?n.documentElement:s},eB=function(e){return S.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},e$=function(e){return e instanceof p&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},ej=function(e){return"function"==typeof c&&e instanceof c};function ez(e,t,n){aj(e,e=>{e.call(r,t,n,eO)})}let eH=function(e){let t=null;if(ez(O.beforeSanitizeElements,e,null),e$(e))return eP(e),!0;let n=eT(e.nodeName);if(ez(O.uponSanitizeElement,e,{tagName:n,allowedTags:B}),Y&&e.hasChildNodes()&&!ej(e.firstElementChild)&&aX(/<[/\w!]/g,e.innerHTML)&&aX(/<[/\w!]/g,e.textContent)||e.nodeType===cm.progressingInstruction||Y&&e.nodeType===cm.comment&&aX(/<[/\w]/g,e.data))return eP(e),!0;if(!(U.tagCheck instanceof Function&&U.tagCheck(n))&&(!B[n]||q[n])){if(!q[n]&&eW(n)&&(H.tagNameCheck instanceof RegExp&&aX(H.tagNameCheck,n)||H.tagNameCheck instanceof Function&&H.tagNameCheck(n)))return!1;if(es&&!ec[n]){let t=k(e)||e.parentNode,n=b(e)||e.childNodes;if(n&&t){let r=n.length;for(let i=r-1;i>=0;--i){let r=y(n[i],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,w(e))}}}return eP(e),!0}return e instanceof h&&!eR(e)||("noscript"===n||"noembed"===n||"noframes"===n)&&aX(/<\/no(script|embed|frames)/i,e.innerHTML)?(eP(e),!0):(G&&e.nodeType===cm.text&&(t=e.textContent,aj([N,I,E],e=>{t=aJ(t,e," ")}),e.textContent!==t&&(aq(r.removed,{element:e.cloneNode()}),e.textContent=t)),ez(O.afterSanitizeElements,e,null),!1)},eq=function(e,t,n){if(ei&&("id"===t||"name"===t)&&(n in i||n in eN))return!1;if(K&&!W[t]&&aX(_,t));else if(V&&aX(L,t));else if(U.attributeCheck instanceof Function&&U.attributeCheck(t,e));else if(!j[t]||W[t]){if(!(eW(e)&&(H.tagNameCheck instanceof RegExp&&aX(H.tagNameCheck,e)||H.tagNameCheck instanceof Function&&H.tagNameCheck(e))&&(H.attributeNameCheck instanceof RegExp&&aX(H.attributeNameCheck,t)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(t,e))||"is"===t&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&aX(H.tagNameCheck,n)||H.tagNameCheck instanceof Function&&H.tagNameCheck(n))))return!1}else if(ep[t]);else if(aX(F,aJ(n,P,"")));else if(("src"===t||"xlink:href"===t||"href"===t)&&"script"!==e&&0===aZ(n,"data:")&&eu[e]);else if(J&&!aX(R,aJ(n,P,"")));else if(n)return!1;return!0},eW=function(e){return"annotation-xml"!==e&&aK(e,D)},eU=function(e){ez(O.beforeSanitizeAttributes,e,null);let{attributes:n}=e;if(!n||e$(e))return;let i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:j,forceKeepAttr:void 0},o=n.length;for(;o--;){let{name:s,namespaceURI:l,value:a}=n[o],c=eT(s),h="value"===s?a:aG(a);if(i.attrName=c,i.attrValue=h,i.keepAttr=!0,i.forceKeepAttr=void 0,ez(O.uponSanitizeAttribute,e,i),h=i.attrValue,eo&&("id"===c||"name"===c)&&(eD(s,e),h="user-content-"+h),Y&&aX(/((--!?|])>)|<\/(style|title|textarea)/i,h)||"attributename"===c&&aK(h,"href")){eD(s,e);continue}if(i.forceKeepAttr)continue;if(!i.keepAttr||!Z&&aX(/\/>/i,h)){eD(s,e);continue}G&&aj([N,I,E],e=>{h=aJ(h,e," ")});let u=eT(e.nodeName);if(!eq(u,c,h)){eD(s,e);continue}if(t&&"object"==typeof m&&"function"==typeof m.getAttributeType)if(l);else switch(m.getAttributeType(u,c)){case"TrustedHTML":h=t.createHTML(h);break;case"TrustedScriptURL":h=t.createScriptURL(h)}if(h!==a)try{l?e.setAttributeNS(l,s,h):e.setAttribute(s,h),e$(e)?eP(e):aH(r.removed)}catch(t){eD(s,e)}}ez(O.afterSanitizeAttributes,e,null)},eV=function e(t){let n=null,r=eB(t);for(ez(O.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)ez(O.uponSanitizeShadowNode,n,null),eH(n),eU(n),n.content instanceof l&&e(n.content);ez(O.afterSanitizeShadowDOM,t,null)};return r.sanitize=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,s=null,a=null,h=null;if((ew=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!ej(e))if("function"==typeof e.toString){if("string"!=typeof(e=e.toString()))throw aQ("dirty is not a string, aborting")}else throw aQ("toString is not a function");if(!r.isSupported)return e;if(Q||eE(n),r.removed=[],"string"==typeof e&&(el=!1),el){if(e.nodeName){let t=eT(e.nodeName);if(!B[t]||q[t])throw aQ("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof c)(s=(i=eF("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType===cm.element&&"BODY"===s.nodeName||"HTML"===s.nodeName?i=s:i.appendChild(s);else{if(!et&&!G&&!X&&-1===e.indexOf("<"))return t&&er?t.createHTML(e):e;if(!(i=eF(e)))return et?null:er?x:""}i&&ee&&eP(i.firstChild);let u=eB(el?e:i);for(;a=u.nextNode();)eH(a),eU(a),a.content instanceof l&&eV(a.content);if(el)return e;if(et){if(en)for(h=M.call(i.ownerDocument);i.firstChild;)h.appendChild(i.firstChild);else h=i;return(j.shadowroot||j.shadowrootmode)&&(h=T.call(o,h,!0)),h}let d=X?i.outerHTML:i.innerHTML;return X&&B["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&aX(cp,i.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+d),G&&aj([N,I,E],e=>{d=aJ(d,e," ")}),t&&er?t.createHTML(d):d},r.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eE(e),Q=!0},r.clearConfig=function(){eO=null,Q=!1},r.isValidAttribute=function(e,t,n){return eO||eE({}),eq(eT(e),eT(t),n)},r.addHook=function(e,t){"function"==typeof t&&aq(O[e],t)},r.removeHook=function(e,t){if(void 0!==t){let n=az(O[e],t);return -1===n?void 0:aW(O[e],n,1)[0]}return aH(O[e])},r.removeHooks=function(e){O[e]=[]},r.removeAllHooks=function(){O=cy()},r}();function cw({icon:e,class:t,onClick:n}){return(0,an.h)("span",{class:aN("milkdown-icon",t),onPointerdown:n,ref:t=>{t&&e&&(t.innerHTML=cv.sanitize(e.trim()))}})}cw.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};var cb=Object.defineProperty,ck=Object.getOwnPropertySymbols,cx=Object.prototype.hasOwnProperty,cC=Object.prototype.propertyIsEnumerable,cS=(e,t,n)=>t in e?cb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function cM(e,t){return Object.assign(e,{meta:((e,t)=>{for(var n in t||(t={}))cx.call(t,n)&&cS(e,n,t[n]);if(ck)for(var n of ck(t))cC.call(t,n)&&cS(e,n,t[n]);return e})({package:"@milkdown/components"},t)}),e}let cA=o2({imageIcon:"\uD83C\uDF0C",captionIcon:"\uD83D\uDCAC",uploadButton:"Upload file",confirmButton:"Confirm ⏎",uploadPlaceholderText:"or paste the image link ...",captionPlaceholderText:"Image caption",onUpload:e=>Promise.resolve(URL.createObjectURL(e))},"imageBlockConfigCtx");function cT(e){return(0,rR.YR)(e,"paragraph",(e,t,n)=>{var r,i;if((null==(r=e.children)?void 0:r.length)!==1)return;let o=null==(i=e.children)?void 0:i[0];if(!o||"image"!==o.type)return;let{url:s,alt:l,title:a}=o;n.children.splice(t,1,{type:"image-block",url:s,alt:l,title:a})})}cM(cA,{displayName:"Config<image-block>",group:"ImageBlock"});let cO=o8("remark-image-block",()=>()=>cT);cM(cO.plugin,{displayName:"Remark<remarkImageBlock>",group:"ImageBlock"}),cM(cO.options,{displayName:"RemarkConfig<remarkImageBlock>",group:"ImageBlock"});var cN=Object.defineProperty,cI=Object.getOwnPropertySymbols,cE=Object.prototype.hasOwnProperty,c_=Object.prototype.propertyIsEnumerable,cL=(e,t,n)=>t in e?cN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;let cR="image-block",cP=o5("image-block",()=>({inline:!1,group:"block",selectable:!0,draggable:!0,isolating:!0,marks:"",atom:!0,priority:100,attrs:{src:{default:"",validate:"string"},caption:{default:"",validate:"string"},ratio:{default:1,validate:"number"}},parseDOM:[{tag:`img[data-type="${cR}"]`,getAttrs:e=>{var t;if(!(e instanceof HTMLElement))throw nR(e);return{src:e.getAttribute("src")||"",caption:e.getAttribute("caption")||"",ratio:Number(null!=(t=e.getAttribute("ratio"))?t:1)}}}],toDOM:e=>["img",((e,t)=>{for(var n in t||(t={}))cE.call(t,n)&&cL(e,n,t[n]);if(cI)for(var n of cI(t))c_.call(t,n)&&cL(e,n,t[n]);return e})({"data-type":cR},e.attrs)],parseMarkdown:{match:({type:e})=>"image-block"===e,runner:(e,t,n)=>{let r=t.url,i=t.title,o=Number(t.alt||1);(Number.isNaN(o)||0===o)&&(o=1),e.addNode(n,{src:r,caption:i,ratio:o})}},toMarkdown:{match:e=>"image-block"===e.type.name,runner:(e,t)=>{e.openNode("paragraph"),e.addNode("image",void 0,void 0,{title:t.attrs.caption,url:t.attrs.src,alt:`${Number.parseFloat(t.attrs.ratio).toFixed(2)}`}),e.closeNode()}}}));function cD({icon:e,class:t,onClick:n}){return(0,an.h)("span",{class:aN("milkdown-icon",t),onPointerdown:n,ref:t=>{t&&e&&(t.innerHTML=cv.sanitize(e.trim()))}})}cM(cP.node,{displayName:"NodeSchema<image-block>",group:"ImageBlock"}),cD.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};let cF=oZ("abcdefg",8),cB=(0,an.pM)({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:e,src:t,setLink:n,onUpload:r,imageIcon:i,uploadButton:o,confirmButton:s,uploadPlaceholderText:l,className:a}){var c,h;let u=(0,ar.KR)(!1),d=(0,ar.KR)(),p=(0,ar.KR)(null!=(c=t.value)?c:""),f=(0,ar.KR)(cF()),m=(0,ar.KR)((null==(h=t.value)?void 0:h.length)!==0),g=e=>{let t=e.target.value;m.value=0!==t.length,p.value=t},y=e=>{var t,r;"Enter"===e.key&&n(null!=(r=null==(t=d.value)?void 0:t.value)?r:"")},v=e=>{var t;let i=null==(t=e.target.files)?void 0:t[0];i&&r(i).then(e=>{e&&(n(e),m.value=!0)}).catch(e=>{console.error("An error occurred while uploading image"),console.error(e)})};return()=>(0,an.h)("div",{class:aN("image-edit",a)},(0,an.h)(cD,{icon:i,class:"image-icon"}),(0,an.h)("div",{class:aN("link-importer",u.value&&"focus")},(0,an.h)("input",{ref:d,draggable:"true",onDragstart:e=>{e.preventDefault(),e.stopPropagation()},disabled:e.value,class:"link-input-area",value:p.value,onInput:g,onKeydown:y,onFocus:()=>u.value=!0,onBlur:()=>u.value=!1}),!m.value&&(0,an.h)("div",{class:"placeholder"},(0,an.h)("input",{disabled:e.value,class:"hidden",id:f.value,type:"file",accept:"image/*",onChange:v}),(0,an.h)("label",{class:"uploader",for:f.value},(0,an.h)(cD,{icon:o})),(0,an.h)("span",{class:"text",onClick:()=>{var e;return null==(e=d.value)?void 0:e.focus()}},l))),p.value&&(0,an.h)("div",{class:"confirm",onClick:()=>{var e,t;n(null!=(t=null==(e=d.value)?void 0:e.value)?t:"")}},(0,an.h)(cD,{icon:s})))}}),c$=(0,an.pM)({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup({src:e,caption:t,ratio:n,readonly:r,setAttr:i,config:o}){var s;let l=(0,ar.KR)(),a=(0,ar.KR)(),c=(0,ar.KR)(!!(null==(s=t.value)?void 0:s.length)),h=(0,ar.KR)(0),u=()=>{var e;let t=l.value;if(!t)return;let r=t.closest(".milkdown-image-block");if(!r)return;let i=r.getBoundingClientRect().width;if(!i)return;let o=t.height,s=t.width,a=s<i?o:o/s*i,c=(a*(null!=(e=n.value)?e:1)).toFixed(2);t.dataset.origin=a.toFixed(2),t.dataset.height=c,t.style.height=`${c}px`},d=e=>{e.preventDefault(),e.stopPropagation(),r.value||(c.value=!c.value)},p=e=>{let t=e.target.value;h.value&&window.clearTimeout(h.value),h.value=window.setTimeout(()=>{i("caption",t)},1e3)},f=e=>{let t=e.target.value;h.value&&(window.clearTimeout(h.value),h.value=0),i("caption",t)},m=e=>{e.preventDefault();let t=l.value;if(!t)return;let n=t.getBoundingClientRect().top,r=e.clientY-n,i=Number(r<100?100:r).toFixed(2);t.dataset.height=i,t.style.height=`${i}px`},g=()=>{window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g);let e=l.value;if(!e)return;let t=Number(e.dataset.origin),n=Number.parseFloat(Number(Number(e.dataset.height)/t).toFixed(2));Number.isNaN(n)||i("ratio",n)},y=e=>{r.value||(e.preventDefault(),e.stopPropagation(),window.addEventListener("pointermove",m),window.addEventListener("pointerup",g))};return()=>(0,an.h)(an.FK,null,(0,an.h)("div",{class:"image-wrapper"},(0,an.h)("div",{class:"operation"},(0,an.h)("div",{class:"operation-item",onPointerdown:d},(0,an.h)(cD,{icon:o.captionIcon}))),(0,an.h)("img",{ref:l,"data-type":cR,onLoad:u,src:e.value,alt:t.value}),(0,an.h)("div",{ref:a,class:"image-resize-handle",onPointerdown:y})),c.value&&(0,an.h)("input",{draggable:"true",onDragstart:e=>{e.preventDefault(),e.stopPropagation()},class:"caption-input",placeholder:null==o?void 0:o.captionPlaceholderText,onInput:p,onBlur:f,value:t.value}))}});var cj=Object.defineProperty,cz=Object.getOwnPropertySymbols,cH=Object.prototype.hasOwnProperty,cq=Object.prototype.propertyIsEnumerable,cW=(e,t,n)=>t in e?cj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;let cU=(0,an.pM)({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(e){let{src:t}=e;return()=>{var n;return(null==(n=t.value)?void 0:n.length)?(0,an.h)(c$,((e,t)=>{for(var n in t||(t={}))cH.call(t,n)&&cW(e,n,t[n]);if(cz)for(var n of cz(t))cq.call(t,n)&&cW(e,n,t[n]);return e})({},e)):(0,an.h)(cB,{src:e.src,selected:e.selected,readonly:e.readonly,setLink:t=>e.setAttr("src",t),imageIcon:e.config.imageIcon,uploadButton:e.config.uploadButton,confirmButton:e.config.confirmButton,uploadPlaceholderText:e.config.uploadPlaceholderText,onUpload:e.config.onUpload})}}}),cV=o1(cP.node,e=>(t,n,r)=>{let i=(0,ar.KR)(t.attrs.src),o=(0,ar.KR)(t.attrs.caption),s=(0,ar.KR)(t.attrs.ratio),l=(0,ar.KR)(!1),a=(0,ar.KR)(!n.editable),c=e.get(cA.key),h=aT(cU,{src:i,caption:o,ratio:s,selected:l,readonly:a,setAttr:(e,t)=>{if(!n.editable)return;let i=r();null!=i&&n.dispatch(n.state.tr.setNodeAttribute(i,e,"src"===e?cv.sanitize(t):t))},config:c}),u=document.createElement("div");u.className="milkdown-image-block";let d=(0,an.nT)(()=>{l.value?u.classList.add("selected"):u.classList.remove("selected")}),p=c.proxyDomURL,f=e=>{if(p){let t=p(e.attrs.src);"string"==typeof t?i.value=t:t.then(e=>{i.value=e}).catch(console.error)}else i.value=e.attrs.src;s.value=e.attrs.ratio,o.value=e.attrs.caption,a.value=!n.editable};return f(t),h.mount(u),{dom:u,update:e=>e.type===t.type&&(f(e),!0),stopEvent:e=>e.target instanceof HTMLInputElement,selectNode:()=>{l.value=!0},deselectNode:()=>{l.value=!1},destroy:()=>{d(),h.unmount(),u.remove()}}});cM(cV,{displayName:"NodeView<image-block>",group:"ImageBlock"});let cK=[cO,cP,cV,cA].flat();if("undefined"!=typeof WeakMap){let e=new WeakMap;i=t=>e.get(t),o=(t,n)=>(e.set(t,n),n)}else{let e=[],t=0;i=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},o=(n,r)=>(10==t&&(t=0),e[t++]=n,e[t++]=r)}var cJ=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){let n=this.map[t];if(n!=e)continue;let r=t%this.width,i=t/this.width|0,o=r+1,s=i+1;for(let e=1;o<this.width&&this.map[t+e]==n;e++)o++;for(let e=1;s<this.height&&this.map[t+this.width*e]==n;e++)s++;return{left:r,top:i,right:o,bottom:s}}throw RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){let{left:r,right:i,top:o,bottom:s}=this.findCell(e);return"horiz"==t?(n<0?0==r:i==this.width)?null:this.map[o*this.width+(n<0?r-1:i)]:(n<0?0==o:s==this.height)?null:this.map[r+this.width*(n<0?o-1:s)]}rectBetween(e,t){let{left:n,right:r,top:i,bottom:o}=this.findCell(e),{left:s,right:l,top:a,bottom:c}=this.findCell(t);return{left:Math.min(n,s),top:Math.min(i,a),right:Math.max(r,l),bottom:Math.max(o,c)}}cellsInRect(e){let t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let i=e.left;i<e.right;i++){let o=r*this.width+i,s=this.map[o];!n[s]&&(n[s]=!0,i==e.left&&i&&this.map[o-1]==s||r==e.top&&r&&this.map[o-this.width]==s||t.push(s))}return t}positionAt(e,t,n){for(let r=0,i=0;;r++){let o=i+n.child(r).nodeSize;if(r==e){let n=t+e*this.width,r=(e+1)*this.width;for(;n<r&&this.map[n]<i;)n++;return n==r?o-1:this.map[n]}i=o}}static get(e){return i(e)||o(e,function(e){if("table"!=e.type.spec.tableRole)throw RangeError("Not a table node: "+e.type.name);let t=function(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){let i=e.child(r),o=0;if(n)for(let t=0;t<r;t++){let n=e.child(t);for(let e=0;e<n.childCount;e++){let i=n.child(e);t+i.attrs.rowspan>r&&(o+=i.attrs.colspan)}}for(let e=0;e<i.childCount;e++){let t=i.child(e);o+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=o:t!=o&&(t=Math.max(t,o))}return t}(e),n=e.childCount,r=[],i=0,o=null,s=[];for(let e=0,i=t*n;e<i;e++)r[e]=0;for(let l=0,a=0;l<n;l++){let c=e.child(l);a++;for(let e=0;;e++){for(;i<r.length&&0!=r[i];)i++;if(e==c.childCount)break;let h=c.child(e),{colspan:u,rowspan:d,colwidth:p}=h.attrs;for(let e=0;e<d;e++){if(e+l>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:a,n:d-e});break}let c=i+e*t;for(let e=0;e<u;e++){0==r[c+e]?r[c+e]=a:(o||(o=[])).push({type:"collision",row:l,pos:a,n:u-e});let n=p&&p[e];if(n){let r=(c+e)%t*2,i=s[r];null==i||i!=n&&1==s[r+1]?(s[r]=n,s[r+1]=1):i==n&&s[r+1]++}}}i+=u,a+=h.nodeSize}let h=(l+1)*t,u=0;for(;i<h;)0==r[i++]&&u++;u&&(o||(o=[])).push({type:"missing",row:l,n:u}),a++}(0===t||0===n)&&(o||(o=[])).push({type:"zero_sized"});let l=new cJ(t,n,r,o),a=!1;for(let e=0;!a&&e<s.length;e+=2)null!=s[e]&&s[e+1]<n&&(a=!0);return a&&function(e,t,n){e.problems||(e.problems=[]);let r={};for(let i=0;i<e.map.length;i++){let o=e.map[i];if(r[o])continue;r[o]=!0;let s=n.nodeAt(o);if(!s)throw RangeError(`No cell with offset ${o} found`);let l=null,a=s.attrs;for(let n=0;n<a.colspan;n++){let r=t[(i+n)%e.width*2];null==r||a.colwidth&&a.colwidth[n]==r||((l||(l=function(e){if(e.colwidth)return e.colwidth.slice();let t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}(a)))[n]=r)}l&&e.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:l})}}(l,s,e),l}(e))}};function cZ(e,t){if("string"==typeof e)return{};let n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map(e=>Number(e)):null,i=Number(e.getAttribute("colspan")||1),o={colspan:i,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(let n in t){let r=t[n].getFromDOM,i=r&&r(e);null!=i&&(o[n]=i)}return o}function cG(e,t){let n={};for(let r in 1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(",")),t){let i=t[r].setDOMAttr;i&&i(e.attrs[r],n)}return n}function cY(e){if(null!==e){if(!Array.isArray(e))throw TypeError("colwidth must be null or an array");for(let t of e)if("number"!=typeof t)throw TypeError("colwidth must be null or an array of numbers")}}function cX(e){let t=e.cached.tableNodeTypes;if(!t)for(let n in t=e.cached.tableNodeTypes={},e.nodes){let r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}return t}let cQ=new nx.hs("selectingCells");function c0(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function c1(e){let t=e.selection.$head;for(let e=t.depth;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return!0;return!1}function c2(e){let t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;let n=c0(t.$head)||function(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){let r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){let r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n-t.nodeSize)}}(t.$head);if(n)return n;throw RangeError(`No cell found around position ${t.head}`)}function c5(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function c3(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function c4(e,t,n){let r=e.node(-1),i=cJ.get(r),o=e.start(-1),s=i.nextCell(e.pos-o,t,n);return null==s?null:e.node(0).resolve(o+s)}function c9(e,t,n=1){let r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(e=>e>0)||(r.colwidth=null)),r}var c7=class e extends nx.LN{constructor(e,t=e){let n=e.node(-1),r=cJ.get(n),i=e.start(-1),o=r.rectBetween(e.pos-i,t.pos-i),s=e.node(0),l=r.cellsInRect(o).filter(e=>e!=t.pos-i);l.unshift(t.pos-i);let a=l.map(e=>{let t=n.nodeAt(e);if(!t)throw RangeError(`No cell with offset ${e} found`);let r=i+e+1;return new nx.yn(s.resolve(r),s.resolve(r+t.content.size))});super(a[0].$from,a[0].$to,a),this.$anchorCell=e,this.$headCell=t}map(t,n){let r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(c5(r)&&c5(i)&&c3(r,i)){let t=this.$anchorCell.node(-1)!=r.node(-1);return t&&this.isRowSelection()?e.rowSelection(r,i):t&&this.isColSelection()?e.colSelection(r,i):new e(r,i)}return nx.U3.between(r,i)}content(){let e=this.$anchorCell.node(-1),t=cJ.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),i={},o=[];for(let n=r.top;n<r.bottom;n++){let s=[];for(let o=n*t.width+r.left,l=r.left;l<r.right;l++,o++){let n=t.map[o];if(i[n])continue;i[n]=!0;let l=t.findCell(n),a=e.nodeAt(n);if(!a)throw RangeError(`No cell with offset ${n} found`);let c=r.left-l.left,h=l.right-r.right;if(c>0||h>0){let e=a.attrs;if(c>0&&(e=c9(e,0,c)),h>0&&(e=c9(e,e.colspan-h,h)),l.left<r.left){if(!(a=a.type.createAndFill(e)))throw RangeError(`Could not create cell with attrs ${JSON.stringify(e)}`)}else a=a.type.create(e,a.content)}if(l.top<r.top||l.bottom>r.bottom){let e={...a.attrs,rowspan:Math.min(l.bottom,r.bottom)-Math.max(l.top,r.top)};a=l.top<r.top?a.type.createAndFill(e):a.type.create(e,a.content)}s.push(a)}o.push(e.child(n).copy(rv.FK.from(s)))}let s=this.isColSelection()&&this.isRowSelection()?e:o;return new rv.Ji(rv.FK.from(s),1,1)}replace(e,t=rv.Ji.empty){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],l=e.mapping.slice(n);e.replace(l.map(o.pos),l.map(s.pos),i?rv.Ji.empty:t)}let i=nx.LN.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,t){this.replace(e,new rv.Ji(rv.FK.from(t),0,0))}forEachCell(e){let t=this.$anchorCell.node(-1),n=cJ.get(t),r=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let n=0;n<i.length;n++)e(t.nodeAt(i[n]),r+i[n])}isColSelection(){let e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);return!(Math.min(e,t)>0)&&Math.max(e+this.$anchorCell.nodeAfter.attrs.rowspan,t+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){let r=t.node(-1),i=cJ.get(r),o=t.start(-1),s=i.findCell(t.pos-o),l=i.findCell(n.pos-o),a=t.node(0);return s.top<=l.top?(s.top>0&&(t=a.resolve(o+i.map[s.left])),l.bottom<i.height&&(n=a.resolve(o+i.map[i.width*(i.height-1)+l.right-1]))):(l.top>0&&(n=a.resolve(o+i.map[l.left])),s.bottom<i.height&&(t=a.resolve(o+i.map[i.width*(i.height-1)+s.right-1]))),new e(t,n)}isRowSelection(){let e=this.$anchorCell.node(-1),t=cJ.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),i=t.colCount(this.$headCell.pos-n);return!(Math.min(r,i)>0)&&Math.max(r+this.$anchorCell.nodeAfter.attrs.colspan,i+this.$headCell.nodeAfter.attrs.colspan)==t.width}eq(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){let r=t.node(-1),i=cJ.get(r),o=t.start(-1),s=i.findCell(t.pos-o),l=i.findCell(n.pos-o),a=t.node(0);return s.left<=l.left?(s.left>0&&(t=a.resolve(o+i.map[s.top*i.width])),l.right<i.width&&(n=a.resolve(o+i.map[i.width*(l.top+1)-1]))):(l.left>0&&(n=a.resolve(o+i.map[l.top*i.width])),s.right<i.width&&(t=a.resolve(o+i.map[i.width*(s.top+1)-1]))),new e(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new e(t.resolve(n),t.resolve(r))}getBookmark(){return new c8(this.$anchorCell.pos,this.$headCell.pos)}};c7.prototype.visible=!1,nx.LN.jsonID("cell",c7);var c8=class e{constructor(e,t){this.anchor=e,this.head=t}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(e){let t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&c3(t,n)?new c7(t,n):nx.LN.near(n,1)}};function c6(e){if(!(e.selection instanceof c7))return null;let t=[];return e.selection.forEachCell((e,n)=>{t.push(iJ.NZ.node(n,n+e.nodeSize,{class:"selectedCell"}))}),iJ.zF.create(e.doc,t)}let he=new nx.hs("fix-tables");function ht(e){let t=cJ.get(e),n=[],r=t.height,i=t.width;for(let o=0;o<r;o++){let r=[];for(let n=0;n<i;n++){let s=o*i+n,l=t.map[s];if(o>0){let e=s-i;if(l===t.map[e]){r.push(null);continue}}if(n>0){let e=s-1;if(l===t.map[e]){r.push(null);continue}}r.push(e.nodeAt(l))}n.push(r)}return n}function hn(e,t){let n=[],r=cJ.get(e),i=r.height,o=r.width;for(let s=0;s<i;s++){let i=e.child(s),l=[];for(let n=0;n<o;n++){let i=t[s][n];if(!i)continue;let o=r.map[s*r.width+n],a=e.nodeAt(o);if(!a)continue;let c=a.type.createChecked(i.attrs,i.content,i.marks);l.push(c)}let a=i.type.createChecked(i.attrs,l,i.marks);n.push(a)}return e.type.createChecked(e.attrs,n,e.marks)}function hr(e,t,n,r){let i,o=t[0]>n[0]?-1:1,s=e.splice(t[0],t.length),l=+(s.length%2==0);return i=-1===r&&1===o?n[0]-1:1===r&&-1===o?n[n.length-1]-l+1:-1===o?n[0]:n[n.length-1]-l,e.splice(i,0,...s),e}function hi(e){var t=e=>"table"===e.type.spec.tableRole,n=e;for(let e=n.depth;e>=0;e-=1){let r=n.node(e);if(t(r))return{node:r,pos:0===e?0:n.before(e),start:n.start(e),depth:e}}return null}function ho(e,t){let n=hi(t.$from);if(!n)return;let r=cJ.get(n.node);if(!(e<0)&&!(e>r.width-1))return r.cellsInRect({left:e,right:e+1,top:0,bottom:r.height}).map(e=>{let t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t,depth:n.depth+2}})}function hs(e,t){let n=hi(t.$from);if(!n)return;let r=cJ.get(n.node);if(!(e<0)&&!(e>r.height-1))return r.cellsInRect({left:0,right:r.width,top:e,bottom:e+1}).map(e=>{let t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t,depth:n.depth+2}})}function hl(e,t,n=t){let r,i=t,o=n;for(let n=t;n>=0;n--){let t=ho(n,e.selection);t&&t.forEach(e=>{let t=e.node.attrs.colspan+n-1;t>=i&&(i=n),t>o&&(o=t)})}for(let n=t;n<=o;n++){let t=ho(n,e.selection);t&&t.forEach(e=>{let t=e.node.attrs.colspan+n-1;e.node.attrs.colspan>1&&t>o&&(o=t)})}let s=[];for(let t=i;t<=o;t++){let n=ho(t,e.selection);n&&n.length>0&&s.push(t)}i=s[0],o=s[s.length-1];let l=ho(i,e.selection),a=hs(0,e.selection);if(!l||!a)return;let c=e.doc.resolve(l[l.length-1].pos);for(let t=o;t>=i;t--){let n=ho(t,e.selection);if(n&&n.length>0){for(let e=a.length-1;e>=0;e--)if(a[e].pos===n[0].pos){r=n[0];break}if(r)break}}if(r)return{$anchor:c,$head:e.doc.resolve(r.pos),indexes:s}}function ha(e,t,n=t){let r,i=t,o=n;for(let n=t;n>=0;n--){let t=hs(n,e.selection);t&&t.forEach(e=>{let t=e.node.attrs.rowspan+n-1;t>=i&&(i=n),t>o&&(o=t)})}for(let n=t;n<=o;n++){let t=hs(n,e.selection);t&&t.forEach(e=>{let t=e.node.attrs.rowspan+n-1;e.node.attrs.rowspan>1&&t>o&&(o=t)})}let s=[];for(let t=i;t<=o;t++){let n=hs(t,e.selection);n&&n.length>0&&s.push(t)}i=s[0],o=s[s.length-1];let l=hs(i,e.selection),a=ho(0,e.selection);if(!l||!a)return;let c=e.doc.resolve(l[l.length-1].pos);for(let t=o;t>=i;t--){let n=hs(t,e.selection);if(n&&n.length>0){for(let e=a.length-1;e>=0;e--)if(a[e].pos===n[0].pos){r=n[0];break}if(r)break}}if(r)return{$anchor:c,$head:e.doc.resolve(r.pos),indexes:s}}function hc(e){return e[0].map((t,n)=>e.map(e=>e[n]))}function hh(e){let t=e.selection,n=c2(e),r=n.node(-1),i=n.start(-1),o=cJ.get(r);return{...t instanceof c7?o.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):o.findCell(n.pos-i),tableStart:i,map:o,table:r}}function hu(e,{map:t,tableStart:n,table:r},i){let o=i>0?-1:0;(function(e,t,n){let r=cX(t.type.schema).header_cell;for(let i=0;i<e.height;i++)if(t.nodeAt(e.map[n+i*e.width]).type!=r)return!1;return!0})(t,r,i+o)&&(o=0==i||i==t.width?null:0);for(let s=0;s<t.height;s++){let l=s*t.width+i;if(i>0&&i<t.width&&t.map[l-1]==t.map[l]){let o=t.map[l],a=r.nodeAt(o);e.setNodeMarkup(e.mapping.map(n+o),null,function(e,t,n=1){let r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let e=0;e<n;e++)r.colwidth.splice(t,0,0)}return r}(a.attrs,i-t.colCount(o))),s+=a.attrs.rowspan-1}else{let a=null==o?cX(r.type.schema).cell:r.nodeAt(t.map[l+o]).type,c=t.positionAt(s,i,r);e.insert(e.mapping.map(n+c),a.createAndFill())}}return e}function hd(e,t){if(!c1(e))return!1;if(t){let n=hh(e);t(hu(e.tr,n,n.left))}return!0}function hp(e,t){if(!c1(e))return!1;if(t){let n=hh(e);t(hu(e.tr,n,n.right))}return!0}function hf(e,t,n){let r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let e=0;e<r.length;e++){let i=t.table.nodeAt(r[e]);if(i&&i.type!==n.header_cell)return!1}return!0}function hm(e,t){if((t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic)return function(t,n){if(!c1(t))return!1;if(n){let r=cX(t.schema),i=hh(t),o=t.tr,s=i.map.cellsInRect("column"==e?{left:i.left,top:0,right:i.right,bottom:i.map.height}:"row"==e?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),l=s.map(e=>i.table.nodeAt(e));for(let e=0;e<s.length;e++)l[e].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[e],r.cell,l[e].attrs);if(0===o.steps.length)for(let e=0;e<s.length;e++)o.setNodeMarkup(i.tableStart+s[e],r.header_cell,l[e].attrs);n(o)}return!0};return function(t,n){if(!c1(t))return!1;if(n){let r=cX(t.schema),i=hh(t),o=t.tr,s=hf("row",i,r),l=hf("column",i,r),a=+("column"===e?!!s:"row"===e&&!!l),c="column"==e?{left:0,top:a,right:1,bottom:i.map.height}:"row"==e?{left:a,top:0,right:i.map.width,bottom:1}:i,h="column"==e?l?r.cell:r.header_cell:"row"==e?s?r.cell:r.header_cell:r.cell;i.map.cellsInRect(c).forEach(e=>{let t=e+i.tableStart,n=o.doc.nodeAt(t);n&&o.setNodeMarkup(t,h,n.attrs)}),n(o)}return!0}}function hg(e){return function(t,n){if(!c1(t))return!1;let r=function(e,t){if(t<0){let t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let t=e.index(-1)-1,n=e.before();t>=0;t--){let r=e.node(-1).child(t),i=r.lastChild;if(i)return n-1-i.nodeSize;n-=r.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;let t=e.node(-1);for(let n=e.indexAfter(-1),r=e.after();n<t.childCount;n++){let e=t.child(n);if(e.childCount)return r+1;r+=e.nodeSize}}return null}(c2(t),e);if(null==r)return!1;if(n){let e=t.doc.resolve(r);n(t.tr.setSelection(nx.U3.between(e,e.node(0).resolve(e.pos+e.nodeAfter.nodeSize))).scrollIntoView())}return!0}}function hy(e,t){let n=e.selection;if(!(n instanceof c7))return!1;if(t){let r=e.tr,i=cX(e.schema).cell.createAndFill().content;n.forEachCell((e,t)=>{e.content.eq(i)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new rv.Ji(i,0,0))}),r.docChanged&&t(r)}return!0}function hv(e,t){let n=e.createAndFill();return new nC.dL(n).replace(0,n.content.size,t).doc}function hw(e,t,n,r,i,o,s,l){if(0==s||s==t.height)return!1;let a=!1;for(let c=i;c<o;c++){let i=s*t.width+c,o=t.map[i];if(t.map[i-t.width]==o){a=!0;let i=n.nodeAt(o),{top:h,left:u}=t.findCell(o);e.setNodeMarkup(e.mapping.slice(l).map(o+r),null,{...i.attrs,rowspan:s-h}),e.insert(e.mapping.slice(l).map(t.positionAt(s,u,n)),i.type.createAndFill({...i.attrs,rowspan:h+i.attrs.rowspan-s})),c+=i.attrs.colspan-1}}return a}function hb(e,t,n,r,i,o,s,l){if(0==s||s==t.width)return!1;let a=!1;for(let c=i;c<o;c++){let i=c*t.width+s,o=t.map[i];if(t.map[i-1]==o){a=!0;let i=n.nodeAt(o),h=t.colCount(o),u=e.mapping.slice(l).map(o+r);e.setNodeMarkup(u,null,c9(i.attrs,s-h,i.attrs.colspan-(s-h))),e.insert(u+i.nodeSize,i.type.createAndFill(c9(i.attrs,0,s-h))),c+=i.attrs.rowspan-1}}return a}function hk(e,t,n,r,i){let o=n?e.doc.nodeAt(n-1):e.doc;if(!o)throw Error("No table found");let s=cJ.get(o),{top:l,left:a}=r,c=a+i.width,h=l+i.height,u=e.tr,d=0;function p(){if(!(o=n?u.doc.nodeAt(n-1):u.doc))throw Error("No table found");s=cJ.get(o),d=u.mapping.maps.length}(function(e,t,n,r,i,o,s){let l,a,c=cX(e.doc.type.schema);if(i>t.width)for(let o=0,s=0;o<t.height;o++){let h,u=n.child(o);s+=u.nodeSize;let d=[];h=null==u.lastChild||u.lastChild.type==c.cell?l||(l=c.cell.createAndFill()):a||(a=c.header_cell.createAndFill());for(let e=t.width;e<i;e++)d.push(h);e.insert(e.mapping.slice(0).map(s-1+r),d)}if(o>t.height){let h=[];for(let e=0,r=(t.height-1)*t.width;e<Math.max(t.width,i);e++){let i=!(e>=t.width)&&n.nodeAt(t.map[r+e]).type==c.header_cell;h.push(i?a||(a=c.header_cell.createAndFill()):l||(l=c.cell.createAndFill()))}let u=c.row.create(null,rv.FK.from(h)),d=[];for(let e=t.height;e<o;e++)d.push(u);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),d)}return!!(l||a)})(u,s,o,n,c,h,0)&&p(),hw(u,s,o,n,a,c,l,d)&&p(),hw(u,s,o,n,a,c,h,d)&&p(),hb(u,s,o,n,l,h,a,d)&&p(),hb(u,s,o,n,l,h,c,d)&&p();for(let e=l;e<h;e++){let t=s.positionAt(e,a,o),r=s.positionAt(e,c,o);u.replace(u.mapping.slice(d).map(t+n),u.mapping.slice(d).map(r+n),new rv.Ji(i.rows[e-l],0,0))}p(),u.setSelection(new c7(u.doc.resolve(n+s.positionAt(l,a,o)),u.doc.resolve(n+s.positionAt(h-1,c-1,o)))),t(u)}hm("row",{useDeprecatedLogic:!0}),hm("column",{useDeprecatedLogic:!0}),hm("cell",{useDeprecatedLogic:!0});let hx=iK({ArrowLeft:hS("horiz",-1),ArrowRight:hS("horiz",1),ArrowUp:hS("vert",-1),ArrowDown:hS("vert",1),"Shift-ArrowLeft":hM("horiz",-1),"Shift-ArrowRight":hM("horiz",1),"Shift-ArrowUp":hM("vert",-1),"Shift-ArrowDown":hM("vert",1),Backspace:hy,"Mod-Backspace":hy,Delete:hy,"Mod-Delete":hy});function hC(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function hS(e,t){return(n,r,i)=>{if(!i)return!1;let o=n.selection;if(o instanceof c7)return hC(n,r,nx.LN.near(o.$headCell,t));if("horiz"!=e&&!o.empty)return!1;let s=hN(i,e,t);if(null==s)return!1;if("horiz"==e)return hC(n,r,nx.LN.near(n.doc.resolve(o.head+t),t));{let i,o=n.doc.resolve(s),l=c4(o,e,t);return i=l?nx.LN.near(l,1):t<0?nx.LN.near(n.doc.resolve(o.before(-1)),-1):nx.LN.near(n.doc.resolve(o.after(-1)),1),hC(n,r,i)}}}function hM(e,t){return(n,r,i)=>{let o;if(!i)return!1;let s=n.selection;if(s instanceof c7)o=s;else{let r=hN(i,e,t);if(null==r)return!1;o=new c7(n.doc.resolve(r))}let l=c4(o.$headCell,e,t);return!!l&&hC(n,r,new c7(o.$anchorCell,l))}}function hA(e,t){let n=c0(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new c7(n))),!0)}function hT(e,t,n){if(!c1(e.state))return!1;let r=function(e){if(0===e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;1==t.childCount&&(n>0&&r>0||"table"==t.child(0).type.spec.tableRole);)n--,r--,t=t.child(0).content;let i=t.child(0),o=i.type.spec.tableRole,s=i.type.schema,l=[];if("row"==o)for(let e=0;e<t.childCount;e++){let i=t.child(e).content,o=e?0:Math.max(0,n-1),a=e<t.childCount-1?0:Math.max(0,r-1);(o||a)&&(i=hv(cX(s).row,new rv.Ji(i,o,a)).content),l.push(i)}else{if("cell"!=o&&"header_cell"!=o)return null;l.push(n||r?hv(cX(s).row,new rv.Ji(t,n,r)).content:t)}return function(e,t){let n=[];for(let e=0;e<t.length;e++){let r=t[e];for(let t=r.childCount-1;t>=0;t--){let{rowspan:i,colspan:o}=r.child(t).attrs;for(let t=e;t<e+i;t++)n[t]=(n[t]||0)+o}}let r=0;for(let e=0;e<n.length;e++)r=Math.max(r,n[e]);for(let i=0;i<n.length;i++)if(i>=t.length&&t.push(rv.FK.empty),n[i]<r){let o=cX(e).cell.createAndFill(),s=[];for(let e=n[i];e<r;e++)s.push(o);t[i]=t[i].append(rv.FK.from(s))}return{height:t.length,width:r,rows:t}}(s,l)}(n),i=e.state.selection;if(i instanceof c7){r||(r={width:1,height:1,rows:[rv.FK.from(hv(cX(e.state.schema).cell,n))]});let t=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),s=cJ.get(t).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=function({width:e,height:t,rows:n},r,i){if(e!=r){let t=[],i=[];for(let e=0;e<n.length;e++){let o=n[e],s=[];for(let n=t[e]||0,i=0;n<r;i++){let l=o.child(i%o.childCount);n+l.attrs.colspan>r&&(l=l.type.createChecked(c9(l.attrs,l.attrs.colspan,n+l.attrs.colspan-r),l.content)),s.push(l),n+=l.attrs.colspan;for(let n=1;n<l.attrs.rowspan;n++)t[e+n]=(t[e+n]||0)+l.attrs.colspan}i.push(rv.FK.from(s))}n=i,e=r}if(t!=i){let e=[];for(let r=0,o=0;r<i;r++,o++){let s=[],l=n[o%t];for(let e=0;e<l.childCount;e++){let t=l.child(e);r+t.attrs.rowspan>i&&(t=t.type.create({...t.attrs,rowspan:Math.max(1,i-t.attrs.rowspan)},t.content)),s.push(t)}e.push(rv.FK.from(s))}n=e,t=i}return{width:e,height:t,rows:n}}(r,s.right-s.left,s.bottom-s.top),hk(e.state,e.dispatch,o,s,r),!0}if(!r)return!1;{let t=c2(e.state),n=t.start(-1);return hk(e.state,e.dispatch,n,cJ.get(t.node(-1)).findCell(t.pos-n),r),!0}}function hO(e,t){var n;let r;if(t.ctrlKey||t.metaKey)return;let i=hI(e,t.target);if(t.shiftKey&&e.state.selection instanceof c7)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&i&&null!=(r=c0(e.state.selection.$anchor))&&(null==(n=hE(e,t))?void 0:n.pos)!=r.pos)o(r,t),t.preventDefault();else if(!i)return;function o(t,n){let r=hE(e,n),i=null==cQ.getState(e.state);if(!r||!c3(t,r))if(!i)return;else r=t;let o=new c7(t,r);if(i||!e.state.selection.eq(o)){let n=e.state.tr.setSelection(o);i&&n.setMeta(cQ,t.pos),e.dispatch(n)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",l),null!=cQ.getState(e.state)&&e.dispatch(e.state.tr.setMeta(cQ,-1))}function l(n){let r,l=cQ.getState(e.state);if(null!=l)r=e.state.doc.resolve(l);else if(hI(e,n.target)!=i&&!(r=hE(e,t)))return s();r&&o(r,n)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",l)}function hN(e,t,n){if(!(e.state.selection instanceof nx.U3))return null;let{$head:r}=e.state.selection;for(let i=r.depth-1;i>=0;i--){let o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))break;if("cell"==o.type.spec.tableRole||"header_cell"==o.type.spec.tableRole){let o=r.before(i),s="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?o:null}}return null}function hI(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function hE(e,t){let n=e.posAtCoords({left:t.clientX,top:t.clientY});if(!n)return null;let r=n.inside>=0?n.inside:n.pos;return c0(e.state.doc.resolve(r))}var h_=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),hL(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,hL(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}};function hL(e,t,n,r,i,o){let s=0,l=!0,a=t.firstChild,c=e.firstChild;if(c){for(let e=0,n=0;e<c.childCount;e++){let{colspan:h,colwidth:u}=c.child(e).attrs;for(let e=0;e<h;e++,n++){let c=i==n?o:u&&u[e],h=c?c+"px":"";if(s+=c||r,c||(l=!1),a)a.style.width!=h&&(a.style.width=h),a=a.nextSibling;else{let e=document.createElement("col");e.style.width=h,t.appendChild(e)}}}for(;a;){var h;let e=a.nextSibling;null==(h=a.parentNode)||h.removeChild(a),a=e}l?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}}let hR=new nx.hs("tableColumnResizing");var hP=class e{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(t){let n=t.getMeta(hR);if(n&&null!=n.setHandle)return new e(n.setHandle,!1);if(n&&void 0!==n.setDragging)return new e(this.activeHandle,n.setDragging);if(this.activeHandle>-1&&t.docChanged){let n=t.mapping.map(this.activeHandle,-1);return c5(t.doc.resolve(n))||(n=-1),new e(n,this.dragging)}return this}};function hD(e,t,n,r){let i=e.posAtCoords({left:t.clientX+("right"==n?-r:r),top:t.clientY});if(!i)return -1;let{pos:o}=i,s=c0(e.state.doc.resolve(o));if(!s)return -1;if("right"==n)return s.pos;let l=cJ.get(s.node(-1)),a=s.start(-1),c=l.map.indexOf(s.pos-a);return c%l.width==0?-1:a+l.map[c-1]}function hF(e,t,n){let r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function hB(e,t){e.dispatch(e.state.tr.setMeta(hR,{setHandle:t}))}function h$(e,t,n,r){let i=e.state.doc.resolve(t),o=i.node(-1),s=i.start(-1),l=cJ.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1,a=e.domAtPos(i.start(-1)).node;for(;a&&"TABLE"!=a.nodeName;)a=a.parentNode;a&&hL(o,a.firstChild,a,r,l,n)}var hj="undefined"!=typeof navigator?navigator:null,hz=hj&&hj.userAgent||"",hH=/Edge\/(\d+)/.exec(hz),hq=/MSIE \d/.exec(hz),hW=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(hz),hU=!(hq||hW||hH)&&!!hj&&/Apple Computer/.test(hj.vendor),hV=new nx.hs("safari-ime-span"),hK=!1;function hJ(e){let t=e.dom.ownerDocument.createElement("span");return t.className="ProseMirror-safari-ime-span",t}var hZ=new nx.k_(hU?{key:hV,props:{decorations:function(e){let{$from:t,$to:n,to:r}=e.selection;if(hK&&t.sameParent(n)){let t=iJ.NZ.widget(r,hJ,{ignoreSelection:!0,key:"safari-ime-span"});return iJ.zF.create(e.doc,[t])}},handleDOMEvents:{compositionstart:()=>{hK=!0},compositionend:()=>{hK=!1}}}}:{key:hV});function hG(e,t){let n=String(e);if("string"!=typeof t)throw TypeError("Expected character");let r=0,i=n.indexOf(t);for(;-1!==i;)r++,i=n.indexOf(t,i+t.length);return r}var hY=n(63758),hX=n(3407);let hQ="phrasing",h0=["autolink","link","image","label"];function h1(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function h2(e){this.config.enter.autolinkProtocol.call(this,e)}function h5(e){this.config.exit.autolinkProtocol.call(this,e)}function h3(e){this.config.exit.data.call(this,e);let t=this.stack[this.stack.length-1];(0,hY.ok)("link"===t.type),t.url="http://"+this.sliceSerialize(e)}function h4(e){this.config.exit.autolinkEmail.call(this,e)}function h9(e){this.exit(e)}function h7(e){!function(e,t,n){let r=(0,rK.C)((n||{}).ignore||[]),i=function(e){let t=[];if(!Array.isArray(e))throw TypeError("Expected find and replace tuple or list of tuples");let n=!e[0]||Array.isArray(e[0])?e:[e],r=-1;for(;++r<n.length;){var i;let e=n[r];t.push(["string"==typeof(i=e[0])?RegExp(function(e){if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(i),"g"):i,function(e){return"function"==typeof e?e:function(){return e}}(e[1])])}return t}(t),o=-1;for(;++o<i.length;)(0,rP.VG)(e,"text",s);function s(e,t){let n,s=-1;for(;++s<t.length;){let e=t[s],i=n?n.children:void 0;if(r(e,i?i.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){let n=t[t.length-1],r=i[o][0],s=i[o][1],l=0,a=n.children.indexOf(e),c=!1,h=[];r.lastIndex=0;let u=r.exec(e.value);for(;u;){let n=u.index,i={index:u.index,input:u.input,stack:[...t,e]},o=s(...u,i);if("string"==typeof o&&(o=o.length>0?{type:"text",value:o}:void 0),!1===o?r.lastIndex=n+1:(l!==n&&h.push({type:"text",value:e.value.slice(l,n)}),Array.isArray(o)?h.push(...o):o&&h.push(o),l=n+u[0].length,c=!0),!r.global)break;u=r.exec(e.value)}return c?(l<e.value.length&&h.push({type:"text",value:e.value.slice(l)}),n.children.splice(a,1,...h)):h=[e],a+h.length}(e,t)}}(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,h8],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,h6]],{ignore:["link","linkReference"]})}function h8(e,t,n,r,i){let o="";if(!ue(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!function(e){let t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}(n)))return!1;let s=function(e){let t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")"),i=hG(e,"("),o=hG(e,")");for(;-1!==r&&i>o;)e+=n.slice(0,r+1),r=(n=n.slice(r+1)).indexOf(")"),o++;return[e,n]}(n+r);if(!s[0])return!1;let l={type:"link",title:null,url:o+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[l,{type:"text",value:s[1]}]:l}function h6(e,t,n,r){return!(!ue(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function ue(e,t){let n=e.input.charCodeAt(e.index-1);return(0===e.index||(0,hX.Ny)(n)||(0,hX.es)(n))&&(!t||47!==n)}var ut=n(35983);function un(){this.buffer()}function ur(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function ui(){this.buffer()}function uo(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function us(e){let t=this.resume(),n=this.stack[this.stack.length-1];(0,hY.ok)("footnoteReference"===n.type),n.identifier=(0,ut.B)(this.sliceSerialize(e)).toLowerCase(),n.label=t}function ul(e){this.exit(e)}function ua(e){let t=this.resume(),n=this.stack[this.stack.length-1];(0,hY.ok)("footnoteDefinition"===n.type),n.identifier=(0,ut.B)(this.sliceSerialize(e)).toLowerCase(),n.label=t}function uc(e){this.exit(e)}function uh(e,t,n,r){let i=n.createTracker(r),o=i.move("[^"),s=n.enter("footnoteReference"),l=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),l(),s(),o+=i.move("]")}function uu(e,t,n){return 0===t?e:ud(e,t,n)}function ud(e,t,n){return(n?"":"    ")+e}uh.peek=function(){return"["};let up=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function uf(e){this.enter({type:"delete",children:[]},e)}function um(e){this.exit(e)}function ug(e,t,n,r){let i=n.createTracker(r),o=n.enter("strikethrough"),s=i.move("~~");return s+=n.containerPhrasing(e,{...i.current(),before:s,after:"~"}),s+=i.move("~~"),o(),s}function uy(e){return e.length}function uv(e){let t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:114*(82===t||114===t)}function uw(e){let t=e._align;(0,hY.ok)(t,"expected `_align` on table"),this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function ub(e){this.exit(e),this.data.inTable=void 0}function uk(e){this.enter({type:"tableRow",children:[]},e)}function ux(e){this.exit(e)}function uC(e){this.enter({type:"tableCell",children:[]},e)}function uS(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,uM));let n=this.stack[this.stack.length-1];(0,hY.ok)("inlineCode"===n.type),n.value=t,this.exit(e)}function uM(e,t){return"|"===t?t:e}function uA(e){let t=this.stack[this.stack.length-2];(0,hY.ok)("listItem"===t.type),t.checked="taskListCheckValueChecked"===e.type}function uT(e){let t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"==typeof t.checked){let e=this.stack[this.stack.length-1];(0,hY.ok)("paragraph"===e.type);let n=e.children[0];if(n&&"text"===n.type){let r,i=t.children,o=-1;for(;++o<i.length;){let e=i[o];if("paragraph"===e.type){r=e;break}}r===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"==typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function uO(e,t,n,r){let i=e.children[0],o="boolean"==typeof e.checked&&i&&"paragraph"===i.type,s="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);o&&l.move(s);let a=rG.listItem(e,t,n,{...r,...l.current()});return o&&(a=a.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(e){return e+s})),a}ug.peek=function(){return"~"};var uN=n(38220);let uI={tokenize:function(e,t,n){let r=0;return function t(o){return(87===o||119===o)&&r<3?(r++,e.consume(o),t):46===o&&3===r?(e.consume(o),i):n(o)};function i(e){return null===e?n(e):t(e)}},partial:!0},uE={tokenize:function(e,t,n){let r,i,o;return s;function s(t){return 46===t||95===t?e.check(uL,a,l)(t):null===t||(0,hX.Ee)(t)||(0,hX.Ny)(t)||45!==t&&(0,hX.es)(t)?a(t):(o=!0,e.consume(t),s)}function l(t){return 95===t?r=!0:(i=r,r=void 0),e.consume(t),s}function a(e){return i||r||!o?n(e):t(e)}},partial:!0},u_={tokenize:function(e,t){let n=0,r=0;return i;function i(s){return 40===s?(n++,e.consume(s),i):41===s&&r<n?o(s):33===s||34===s||38===s||39===s||41===s||42===s||44===s||46===s||58===s||59===s||60===s||63===s||93===s||95===s||126===s?e.check(uL,t,o)(s):null===s||(0,hX.Ee)(s)||(0,hX.Ny)(s)?t(s):(e.consume(s),i)}function o(t){return 41===t&&r++,e.consume(t),i}},partial:!0},uL={tokenize:function(e,t,n){return r;function r(s){return 33===s||34===s||39===s||41===s||42===s||44===s||46===s||58===s||59===s||63===s||95===s||126===s?(e.consume(s),r):38===s?(e.consume(s),o):93===s?(e.consume(s),i):60===s||null===s||(0,hX.Ee)(s)||(0,hX.Ny)(s)?t(s):n(s)}function i(e){return null===e||40===e||91===e||(0,hX.Ee)(e)||(0,hX.Ny)(e)?t(e):r(e)}function o(t){return(0,hX.CW)(t)?function t(i){return 59===i?(e.consume(i),r):(0,hX.CW)(i)?(e.consume(i),t):n(i)}(t):n(t)}},partial:!0},uR={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(e){return(0,hX.lV)(e)?n(e):t(e)}},partial:!0},uP={name:"wwwAutolink",tokenize:function(e,t,n){let r=this;return function(t){return 87!==t&&119!==t||!uj.call(r,r.previous)||uW(r.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(uI,e.attempt(uE,e.attempt(u_,i),n),n)(t))};function i(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:uj},uD={name:"protocolAutolink",tokenize:function(e,t,n){let r=this,i="",o=!1;return function(t){return(72===t||104===t)&&uz.call(r,r.previous)&&!uW(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(t),e.consume(t),s):n(t)};function s(t){if((0,hX.CW)(t)&&i.length<5)return i+=String.fromCodePoint(t),e.consume(t),s;if(58===t){let n=i.toLowerCase();if("http"===n||"https"===n)return e.consume(t),l}return n(t)}function l(t){return 47===t?(e.consume(t),o)?a:(o=!0,l):n(t)}function a(t){return null===t||(0,hX.JQ)(t)||(0,hX.Ee)(t)||(0,hX.Ny)(t)||(0,hX.es)(t)?n(t):e.attempt(uE,e.attempt(u_,c),n)(t)}function c(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:uz},uF={name:"emailAutolink",tokenize:function(e,t,n){let r,i,o=this;return function(t){return!uq(t)||!uH.call(o,o.previous)||uW(o.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),function t(r){return uq(r)?(e.consume(r),t):64===r?(e.consume(r),s):n(r)}(t))};function s(t){return 46===t?e.check(uR,a,l)(t):45===t||95===t||(0,hX.lV)(t)?(i=!0,e.consume(t),s):a(t)}function l(t){return e.consume(t),r=!0,s}function a(s){return i&&r&&(0,hX.CW)(o.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(s)):n(s)}},previous:uH},uB={},u$=48;for(;u$<123;)uB[u$]=uF,58==++u$?u$=65:91===u$&&(u$=97);function uj(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||(0,hX.Ee)(e)}function uz(e){return!(0,hX.CW)(e)}function uH(e){return!(47===e||uq(e))}function uq(e){return 43===e||45===e||46===e||95===e||(0,hX.lV)(e)}function uW(e){let t=e.length,n=!1;for(;t--;){let r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}uB[43]=uF,uB[45]=uF,uB[46]=uF,uB[95]=uF,uB[72]=[uF,uD],uB[104]=[uF,uD],uB[87]=[uF,uP],uB[119]=[uF,uP];var uU=n(33634),uV=n(79168);let uK={tokenize:function(e,t,n){let r=this;return(0,uV.N)(e,function(e){let i=r.events[r.events.length-1];return i&&"gfmFootnoteDefinitionIndent"===i[1].type&&4===i[2].sliceSerialize(i[1],!0).length?t(e):n(e)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function uJ(e,t,n){let r,i=this,o=i.events.length,s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);for(;o--;){let e=i.events[o][1];if("labelImage"===e.type){r=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(o){if(!r||!r._balanced)return n(o);let l=(0,ut.B)(i.sliceSerialize({start:r.end,end:i.now()}));return 94===l.codePointAt(0)&&s.includes(l.slice(1))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),t(o)):n(o)}}function uZ(e,t){let n=e.length;for(;n--;)if("labelImage"===e[n][1].type&&"enter"===e[n][0]){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";let r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;let o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",s,t],["exit",s,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function uG(e,t,n){let r,i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]),s=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),l};function l(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",a)}function a(l){if(s>999||93===l&&!r||null===l||91===l||(0,hX.Ee)(l))return n(l);if(93===l){e.exit("chunkString");let r=e.exit("gfmFootnoteCallString");return o.includes((0,ut.B)(i.sliceSerialize(r)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(l)}return(0,hX.Ee)(l)||(r=!0),s++,e.consume(l),92===l?c:a}function c(t){return 91===t||92===t||93===t?(e.consume(t),s++,a):a(t)}}function uY(e,t,n){let r,i,o=this,s=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]),l=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),a};function a(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(t)}function c(t){if(l>999||93===t&&!i||null===t||91===t||(0,hX.Ee)(t))return n(t);if(93===t){e.exit("chunkString");let n=e.exit("gfmFootnoteDefinitionLabelString");return r=(0,ut.B)(o.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),u}return(0,hX.Ee)(t)||(i=!0),l++,e.consume(t),92===t?h:c}function h(t){return 91===t||92===t||93===t?(e.consume(t),l++,c):c(t)}function u(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s.includes(r)||s.push(r),(0,uV.N)(e,d,"gfmFootnoteDefinitionWhitespace")):n(t)}function d(e){return t(e)}}function uX(e,t,n){return e.check(uU.B,t,e.attempt(uK,t,n))}function uQ(e){e.exit("gfmFootnoteDefinition")}var u0=n(17032),u1=n(41006);class u2{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,r){let i=0;if(0!==n||0!==r.length){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length,n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let r=n.pop();for(;r;){for(let t of r)e.push(t);r=n.pop()}this.map.length=0}}function u5(e,t,n){let r,i=this,o=0,s=0;return function(e){let t=i.events.length-1;for(;t>-1;){let e=i.events[t][1].type;if("lineEnding"===e||"linePrefix"===e)t--;else break}let r=t>-1?i.events[t][1].type:null,o="tableHead"===r||"tableRow"===r?v:l;return o===v&&i.parser.lazy[i.now().line]?n(e):o(e)};function l(t){var n;return e.enter("tableHead"),e.enter("tableRow"),124===(n=t)||(r=!0,s+=1),a(n)}function a(t){return null===t?n(t):(0,hX.HP)(t)?s>1?(s=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),u):n(t):(0,hX.On)(t)?(0,uV.N)(e,a,"whitespace")(t):(s+=1,r&&(r=!1,o+=1),124===t)?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,a):(e.enter("data"),c(t))}function c(t){return null===t||124===t||(0,hX.Ee)(t)?(e.exit("data"),a(t)):(e.consume(t),92===t?h:c)}function h(t){return 92===t||124===t?(e.consume(t),c):c(t)}function u(t){return(i.interrupt=!1,i.parser.lazy[i.now().line])?n(t):(e.enter("tableDelimiterRow"),r=!1,(0,hX.On)(t))?(0,uV.N)(e,d,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):d(t)}function d(t){return 45===t||58===t?f(t):124===t?(r=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),p):n(t)}function p(t){return(0,hX.On)(t)?(0,uV.N)(e,f,"whitespace")(t):f(t)}function f(t){return 58===t?(s+=1,r=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),m):45===t?(s+=1,m(t)):null===t||(0,hX.HP)(t)?y(t):n(t)}function m(t){return 45===t?(e.enter("tableDelimiterFiller"),function t(n){return 45===n?(e.consume(n),t):58===n?(r=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(n),e.exit("tableDelimiterMarker"),g):(e.exit("tableDelimiterFiller"),g(n))}(t)):n(t)}function g(t){return(0,hX.On)(t)?(0,uV.N)(e,y,"whitespace")(t):y(t)}function y(i){if(124===i)return d(i);if(null===i||(0,hX.HP)(i))return r&&o===s?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(i)):n(i);return n(i)}function v(t){return e.enter("tableRow"),w(t)}function w(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),w):null===n||(0,hX.HP)(n)?(e.exit("tableRow"),t(n)):(0,hX.On)(n)?(0,uV.N)(e,w,"whitespace")(n):(e.enter("data"),b(n))}function b(t){return null===t||124===t||(0,hX.Ee)(t)?(e.exit("data"),w(t)):(e.consume(t),92===t?k:b)}function k(t){return 92===t||124===t?(e.consume(t),b):b(t)}}function u3(e,t){let n,r,i,o=-1,s=!0,l=0,a=[0,0,0,0],c=[0,0,0,0],h=!1,u=0,d=new u2;for(;++o<e.length;){let p=e[o],f=p[1];"enter"===p[0]?"tableHead"===f.type?(h=!1,0!==u&&(u9(d,t,u,n,r),r=void 0,u=0),n={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},d.add(o,0,[["enter",n,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(s=!0,i=void 0,a=[0,0,0,0],c=[0,o+1,0,0],h&&(h=!1,r={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},d.add(o,0,[["enter",r,t]])),l="tableDelimiterRow"===f.type?2:r?3:1):l&&("data"===f.type||"tableDelimiterMarker"===f.type||"tableDelimiterFiller"===f.type)?(s=!1,0===c[2]&&(0!==a[1]&&(c[0]=c[1],i=u4(d,t,a,l,void 0,i),a=[0,0,0,0]),c[2]=o)):"tableCellDivider"===f.type&&(s?s=!1:(0!==a[1]&&(c[0]=c[1],i=u4(d,t,a,l,void 0,i)),c=[(a=c)[1],o,0,0])):"tableHead"===f.type?(h=!0,u=o):"tableRow"===f.type||"tableDelimiterRow"===f.type?(u=o,0!==a[1]?(c[0]=c[1],i=u4(d,t,a,l,o,i)):0!==c[1]&&(i=u4(d,t,c,l,o,i)),l=0):l&&("data"===f.type||"tableDelimiterMarker"===f.type||"tableDelimiterFiller"===f.type)&&(c[3]=o)}for(0!==u&&u9(d,t,u,n,r),d.consume(t.events),o=-1;++o<t.events.length;){let e=t.events[o];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=function(e,t){let n=!1,r=[];for(;t<e.length;){let i=e[t];if(n){if("enter"===i[0])"tableContent"===i[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===i[1].type){if("tableDelimiterMarker"===e[t-1][1].type){let e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===i[1].type)break}else"enter"===i[0]&&"tableDelimiterRow"===i[1].type&&(n=!0);t+=1}return r}(t.events,o))}return e}function u4(e,t,n,r,i,o){0!==n[0]&&(o.end=Object.assign({},u7(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));let s=u7(t.events,n[1]);if(o={type:1===r?"tableHeader":2===r?"tableDelimiter":"tableData",start:Object.assign({},s),end:Object.assign({},s)},e.add(n[1],0,[["enter",o,t]]),0!==n[2]){let i=u7(t.events,n[2]),o=u7(t.events,n[3]),s={type:"tableContent",start:Object.assign({},i),end:Object.assign({},o)};if(e.add(n[2],0,[["enter",s,t]]),2!==r){let r=t.events[n[2]],i=t.events[n[3]];if(r[1].end=Object.assign({},i[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){let t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",s,t]])}return void 0!==i&&(o.end=Object.assign({},u7(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function u9(e,t,n,r,i){let o=[],s=u7(t.events,n);i&&(i.end=Object.assign({},s),o.push(["exit",i,t])),r.end=Object.assign({},s),o.push(["exit",r,t]),e.add(n+1,0,o)}function u7(e,t){let n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}let u8={name:"tasklistCheck",tokenize:function(e,t,n){let r=this;return function(t){return null===r.previous&&r._gfmTasklistFirstContentOfListItem?(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i):n(t)};function i(t){return(0,hX.Ee)(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),o):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),o):n(t)}function o(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),s):n(t)}function s(r){return(0,hX.HP)(r)?t(r):(0,hX.On)(r)?e.check({tokenize:u6},t,n)(r):n(r)}}};function u6(e,t,n){return(0,uV.N)(e,function(e){return null===e?n(e):t(e)},"whitespace")}let de={};function dt(e){let t,n=e||de,r=this.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),s=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push((0,uN.y)([{text:uB},{document:{91:{name:"gfmFootnoteDefinition",tokenize:uY,continuation:{tokenize:uX},exit:uQ}},text:{91:{name:"gfmFootnoteCall",tokenize:uG},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:uJ,resolveTo:uZ}}},function(e){let t=(e||{}).singleTilde,n={name:"strikethrough",tokenize:function(e,n,r){let i=this.previous,o=this.events,s=0;return function(l){return 126===i&&"characterEscape"!==o[o.length-1][1].type?r(l):(e.enter("strikethroughSequenceTemporary"),function o(l){let a=(0,rE.S)(i);if(126===l)return s>1?r(l):(e.consume(l),s++,o);if(s<2&&!t)return r(l);let c=e.exit("strikethroughSequenceTemporary"),h=(0,rE.S)(l);return c._open=!h||2===h&&!!a,c._close=!a||2===a&&!!h,n(l)}(l))}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset==e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";let i={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},o={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},s=[["enter",i,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",o,t]],l=t.parser.constructs.insideSpan.null;l&&(0,u0.m)(s,s.length,0,(0,u1.W)(l,e.slice(r+1,n),t)),(0,u0.m)(s,s.length,0,[["exit",o,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",i,t]]),(0,u0.m)(e,r-1,n-r+3,s),n=r+s.length-2;break}}for(n=-1;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null==t&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}(n),{flow:{null:{name:"table",tokenize:u5,resolveAll:u3}}},{text:{91:u8}}])),o.push([{transforms:[h7],enter:{literalAutolink:h1,literalAutolinkEmail:h2,literalAutolinkHttp:h2,literalAutolinkWww:h2},exit:{literalAutolink:h9,literalAutolinkEmail:h4,literalAutolinkHttp:h5,literalAutolinkWww:h3}},{enter:{gfmFootnoteCallString:un,gfmFootnoteCall:ur,gfmFootnoteDefinitionLabelString:ui,gfmFootnoteDefinition:uo},exit:{gfmFootnoteCallString:us,gfmFootnoteCall:ul,gfmFootnoteDefinitionLabelString:ua,gfmFootnoteDefinition:uc}},{canContainEols:["delete"],enter:{strikethrough:uf},exit:{strikethrough:um}},{enter:{table:uw,tableData:uC,tableHeader:uC,tableRow:uk},exit:{codeText:uS,table:ub,tableData:ux,tableHeader:ux,tableRow:ux}},{exit:{taskListCheckValueChecked:uA,taskListCheckValueUnchecked:uA,paragraph:uT}}]),s.push({extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:hQ,notInConstruct:h0},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:hQ,notInConstruct:h0},{character:":",before:"[ps]",after:"\\/",inConstruct:hQ,notInConstruct:h0}]},(t=!1,n&&n.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,n,r,i){let o=r.createTracker(i),s=o.move("[^"),l=r.enter("footnoteDefinition"),a=r.enter("label");return s+=o.move(r.safe(r.associationId(e),{before:s,after:"]"})),a(),s+=o.move("]:"),e.children&&e.children.length>0&&(o.shift(4),s+=o.move((t?"\n":" ")+r.indentLines(r.containerFlow(e,o.current()),t?ud:uu))),l(),s},footnoteReference:uh},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:up}],handlers:{delete:ug}},function(e){let t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let r=rG.inlineCode(e,t,n);return n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&")),r},table:function(e,t,n,r){return l(function(e,t,n){let r=e.children,i=-1,o=[],s=t.enter("table");for(;++i<r.length;)o[i]=a(r[i],t,n);return s(),o}(e,n,r),e.align)},tableCell:s,tableRow:function(e,t,n,r){let i=l([a(e,n,r)]);return i.slice(0,i.indexOf("\n"))}}};function s(e,t,n,r){let i=n.enter("tableCell"),s=n.enter("phrasing"),l=n.containerPhrasing(e,{...r,before:o,after:o});return s(),i(),l}function l(e,t){return function(e,t){let n=t||{},r=(n.align||[]).concat(),i=n.stringLength||uy,o=[],s=[],l=[],a=[],c=0,h=-1;for(;++h<e.length;){let t=[],r=[],o=-1;for(e[h].length>c&&(c=e[h].length);++o<e[h].length;){var u;let s=null==(u=e[h][o])?"":String(u);if(!1!==n.alignDelimiters){let e=i(s);r[o]=e,(void 0===a[o]||e>a[o])&&(a[o]=e)}t.push(s)}s[h]=t,l[h]=r}let d=-1;if("object"==typeof r&&"length"in r)for(;++d<c;)o[d]=uv(r[d]);else{let e=uv(r);for(;++d<c;)o[d]=e}d=-1;let p=[],f=[];for(;++d<c;){let e=o[d],t="",r="";99===e?(t=":",r=":"):108===e?t=":":114===e&&(r=":");let i=!1===n.alignDelimiters?1:Math.max(1,a[d]-t.length-r.length),s=t+"-".repeat(i)+r;!1!==n.alignDelimiters&&((i=t.length+i+r.length)>a[d]&&(a[d]=i),f[d]=i),p[d]=s}s.splice(1,0,p),l.splice(1,0,f),h=-1;let m=[];for(;++h<s.length;){let e=s[h],t=l[h];d=-1;let r=[];for(;++d<c;){let i=e[d]||"",s="",l="";if(!1!==n.alignDelimiters){let e=a[d]-(t[d]||0),n=o[d];114===n?s=" ".repeat(e):99===n?e%2?(s=" ".repeat(e/2+.5),l=" ".repeat(e/2-.5)):l=s=" ".repeat(e/2):l=" ".repeat(e)}!1===n.delimiterStart||d||r.push("|"),!1!==n.padding&&(!1!==n.alignDelimiters||""!==i)&&(!1!==n.delimiterStart||d)&&r.push(" "),!1!==n.alignDelimiters&&r.push(s),r.push(i),!1!==n.alignDelimiters&&r.push(l),!1!==n.padding&&r.push(" "),(!1!==n.delimiterEnd||d!==c-1)&&r.push("|")}m.push(!1===n.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return m.join("\n")}(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function a(e,t,n){let r=e.children,i=-1,o=[],l=t.enter("tableRow");for(;++i<r.length;)o[i]=s(r[i],e,t,n);return l(),o}}(n),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:uO}}]})}function dn(e,t){return Object.assign(e,{meta:{package:"@milkdown/preset-gfm",...t}}),e}let dr=o7("strike_through");dn(dr,{displayName:"Attr<strikethrough>",group:"Strikethrough"});let di=o3("strike_through",e=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:e=>"line-through"===e}],toDOM:t=>["del",e.get(dr.key)(t)],parseMarkdown:{match:e=>"delete"===e.type,runner:(e,t,n)=>{e.openMark(n),e.next(t.children),e.closeMark(n)}},toMarkdown:{match:e=>"strike_through"===e.type.name,runner:(e,t)=>{e.withMark(t,"delete")}}}));dn(di.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"}),dn(di.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});let ds=oG("ToggleStrikeThrough",e=>()=>iP(di.type(e)));dn(ds,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});let dl=oY(e=>n3(RegExp("(?<![\\w:/])(~{1,2})(.+?)\\1(?!\\w|\\/)"),di.type(e)));dn(dl,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});let da=o4("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:e=>{let t=e.get(oc);return()=>t.call(ds.key)}}});dn(da.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"}),dn(da.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});let dc=function(e){let t=e.cellAttributes||{},n={colspan:{default:1,validate:"number"},rowspan:{default:1,validate:"number"},colwidth:{default:null,validate:cY}};for(let e in t)n[e]={default:t[e].default,validate:t[e].validate};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:()=>["table",["tbody",0]]},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:()=>["tr",0]},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:e=>cZ(e,t)}],toDOM:e=>["td",cG(e,t),0]},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:e=>cZ(e,t)}],toDOM:e=>["th",cG(e,t),0]}}}({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:e=>e.style.textAlign||"left",setDOMAttr:(e,t)=>{t.style=`text-align: ${e||"left"}`}}}}),dh=o5("table",()=>({...dc.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:e=>"table"===e.type,runner:(e,t,n)=>{let r=t.align,i=t.children.map((e,t)=>({...e,align:r,isHeader:0===t}));e.openNode(n),e.next(i),e.closeNode()}},toMarkdown:{match:e=>"table"===e.type.name,runner:(e,t)=>{let n=t.content.firstChild?.content;if(!n)return;let r=[];n.forEach(e=>{r.push(e.attrs.alignment)}),e.openNode("table",void 0,{align:r}),e.next(t.content),e.closeNode()}}}));dn(dh.node,{displayName:"NodeSchema<table>",group:"Table"}),dn(dh.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});let du=o5("table_header_row",()=>({...dc.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"}],toDOM:()=>["tr",{"data-is-header":!0},0],parseMarkdown:{match:e=>!!("tableRow"===e.type&&e.isHeader),runner:(e,t,n)=>{let r=t.align,i=t.children.map((e,n)=>({...e,align:r[n],isHeader:t.isHeader}));e.openNode(n),e.next(i),e.closeNode()}},toMarkdown:{match:e=>"table_header_row"===e.type.name,runner:(e,t)=>{e.openNode("tableRow",void 0,{isHeader:!0}),e.next(t.content),e.closeNode()}}}));dn(du.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"}),dn(du.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});let dd=o5("table_row",()=>({...dc.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:e=>"tableRow"===e.type,runner:(e,t,n)=>{let r=t.align,i=t.children.map((e,t)=>({...e,align:r[t]}));e.openNode(n),e.next(i),e.closeNode()}},toMarkdown:{match:e=>"table_row"===e.type.name,runner:(e,t)=>{0!==t.content.size&&(e.openNode("tableRow"),e.next(t.content),e.closeNode())}}}));dn(dd.node,{displayName:"NodeSchema<tableRow>",group:"Table"}),dn(dd.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});let dp=o5("table_cell",()=>({...dc.table_cell,disableDropCursor:!0,parseMarkdown:{match:e=>"tableCell"===e.type&&!e.isHeader,runner:(e,t,n)=>{let r=t.align;e.openNode(n,{alignment:r}).openNode(e.schema.nodes.paragraph).next(t.children).closeNode().closeNode()}},toMarkdown:{match:e=>"table_cell"===e.type.name,runner:(e,t)=>{e.openNode("tableCell").next(t.content).closeNode()}}}));dn(dp.node,{displayName:"NodeSchema<tableCell>",group:"Table"}),dn(dp.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});let df=o5("table_header",()=>({...dc.table_header,disableDropCursor:!0,parseMarkdown:{match:e=>"tableCell"===e.type&&!!e.isHeader,runner:(e,t,n)=>{let r=t.align;e.openNode(n,{alignment:r}),e.openNode(e.schema.nodes.paragraph),e.next(t.children),e.closeNode(),e.closeNode()}},toMarkdown:{match:e=>"table_header"===e.type.name,runner:(e,t)=>{e.openNode("tableCell"),e.next(t.content),e.closeNode()}}}));function dm(e,t=3,n=3){let r=Array(n).fill(0).map(()=>dp.type(e).createAndFill()),i=Array(n).fill(0).map(()=>df.type(e).createAndFill()),o=Array(t).fill(0).map((t,n)=>0===n?du.type(e).create(null,i):dd.type(e).create(null,r));return dh.type(e).create(null,o)}function dg(e){return(t,n)=>r=>{n=n??r.selection.from;let i=r.doc.resolve(n),o=rs(e=>"table"===e.type.name)(i),s=o?{node:o.node,from:o.start}:void 0,l="row"===e;if(s){let e=cJ.get(s.node);if(t>=0&&t<(l?e.height:e.width)){let n=e.positionAt(l?t:e.height-1,l?e.width-1:t,s.node),i=r.doc.resolve(s.from+n),o=l?c7.rowSelection:c7.colSelection,a=e.positionAt(l?t:0,l?0:t,s.node),c=r.doc.resolve(s.from+a);return ri(r.setSelection(o(i,c)))}}return r}}dn(df.node,{displayName:"NodeSchema<tableHeader>",group:"Table"}),dn(df.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});let dy=dg("row"),dv=dg("col");function dw(e,t,{map:n,tableStart:r,table:i},o){let s=Array(o).fill(0).reduce((e,t,n)=>e+i.child(n).nodeSize,r),l=Array(n.width).fill(0).map((t,r)=>{let o=i.nodeAt(n.map[r]);return dp.type(e).createAndFill({alignment:o?.attrs.alignment})});return t.insert(s,dd.type(e).create(null,l)),t}let db=oG("GoToPrevTableCell",()=>()=>hg(-1));dn(db,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});let dk=oG("GoToNextTableCell",()=>()=>hg(1));dn(dk,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});let dx=oG("ExitTable",e=>()=>(t,n)=>{var r;if(!c1(t))return!1;let{$head:i}=t.selection,o=(r=dh.type(e),ro(e=>e.type===r)(i));if(!o)return!1;let{to:s}=o,l=t.tr.replaceWith(s,s,sX.type(e).createAndFill());return l.setSelection(nx.LN.near(l.doc.resolve(s),1)).scrollIntoView(),n?.(l),!0});dn(dx,{displayName:"Command<breakTableCommand>",group:"Table"});let dC=oG("InsertTable",e=>({row:t,col:n}={})=>(r,i)=>{let{selection:o,tr:s}=r,{from:l}=o,a=dm(e,t,n),c=s.replaceSelectionWith(a),h=nx.LN.findFrom(c.doc.resolve(l),1,!0);return h&&c.setSelection(h),i?.(c),!0});dn(dC,{displayName:"Command<insertTableCommand>",group:"Table"});let dS=oG("MoveRow",()=>({from:e,to:t,pos:n}={})=>{var r;return r={from:e??0,to:t??0,pos:n},(e,t)=>{let{from:n,to:i,select:o=!0,pos:s=e.selection.from}=r,l=e.tr;return!!function(e){var t,n,r,i,o,s;let l,{tr:a,originIndex:c,targetIndex:h,select:u,pos:d}=e,p=hi(a.doc.resolve(d));if(!p)return!1;let f=null==(t=ha(a,c))?void 0:t.indexes,m=null==(n=ha(a,h))?void 0:n.indexes;if(!f||!m||f.includes(h))return!1;let g=(r=p.node,i=f,o=m,s=0,l=ht(r),hn(r,l=hr(l,i,o,0)));if(a.replaceWith(p.pos,p.pos+p.node.nodeSize,g),!u)return!0;let y=cJ.get(g),v=p.start,w=y.positionAt(h,y.width-1,g),b=a.doc.resolve(v+w),k=y.positionAt(h,0,g),x=a.doc.resolve(v+k);return a.setSelection(c7.rowSelection(b,x)),!0}({tr:l,originIndex:n,targetIndex:i,select:o,pos:s})&&(null==t||t(l),!0)}});dn(dS,{displayName:"Command<moveRowCommand>",group:"Table"});let dM=oG("MoveCol",()=>({from:e,to:t,pos:n}={})=>{var r;return r={from:e??0,to:t??0,pos:n},(e,t)=>{let{from:n,to:i,select:o=!0,pos:s=e.selection.from}=r,l=e.tr;return!!function(e){var t,n,r,i,o,s;let l,{tr:a,originIndex:c,targetIndex:h,select:u,pos:d}=e,p=hi(a.doc.resolve(d));if(!p)return!1;let f=null==(t=hl(a,c))?void 0:t.indexes,m=null==(n=hl(a,h))?void 0:n.indexes;if(!f||!m||f.includes(h))return!1;let g=(r=p.node,i=f,o=m,s=0,l=hc(ht(r)),hn(r,l=hc(l=hr(l,i,o,0))));if(a.replaceWith(p.pos,p.pos+p.node.nodeSize,g),!u)return!0;let y=cJ.get(g),v=p.start,w=y.positionAt(y.height-1,h,g),b=a.doc.resolve(v+w),k=y.positionAt(0,h,g),x=a.doc.resolve(v+k);return a.setSelection(c7.colSelection(b,x)),!0}({tr:l,originIndex:n,targetIndex:i,select:o,pos:s})&&(null==t||t(l),!0)}});dn(dM,{displayName:"Command<moveColCommand>",group:"Table"});let dA=oG("SelectRow",()=>(e={index:0})=>(t,n)=>{let{tr:r}=t;return!!n?.(dy(e.index,e.pos)(r))});dn(dA,{displayName:"Command<selectRowCommand>",group:"Table"});let dT=oG("SelectCol",()=>(e={index:0})=>(t,n)=>{let{tr:r}=t;return!!n?.(dv(e.index,e.pos)(r))});dn(dT,{displayName:"Command<selectColCommand>",group:"Table"});let dO=oG("SelectTable",()=>()=>(e,t)=>{let{tr:n}=e;return!!t?.(function(e){let t=function(e){let t=hi(e.$from);if(!t)return;let n=cJ.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map(e=>{let n=t.node.nodeAt(e),r=e+t.start;return{pos:r,start:r+1,node:n}})}(e.selection);if(t&&t[0]){let n=e.doc.resolve(t[0].pos),r=t[t.length-1];if(r){let t=e.doc.resolve(r.pos);return ri(e.setSelection(new c7(t,n)))}}return e}(n))});dn(dO,{displayName:"Command<selectTableCommand>",group:"Table"});let dN=oG("DeleteSelectedCells",()=>()=>(e,t)=>{let{selection:n}=e;if(!(n instanceof c7))return!1;let r=n.isRowSelection(),i=n.isColSelection();return r&&i?function(e,t){let n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}(e,t):i?function(e,t){if(!c1(e))return!1;if(t){let n=hh(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let e=n.right-1;!function(e,{map:t,table:n,tableStart:r},i){let o=e.mapping.maps.length;for(let s=0;s<t.height;){let l=s*t.width+i,a=t.map[l],c=n.nodeAt(a),h=c.attrs;if(i>0&&t.map[l-1]==a||i<t.width-1&&t.map[l+1]==a)e.setNodeMarkup(e.mapping.slice(o).map(r+a),null,c9(h,i-t.colCount(a)));else{let t=e.mapping.slice(o).map(r+a);e.delete(t,t+c.nodeSize)}s+=h.rowspan}}(r,n,e),e!=n.left;e--){let e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=cJ.get(e)}t(r)}return!0}(e,t):function(e,t){if(!c1(e))return!1;if(t){let n=hh(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let e=n.bottom-1;!function(e,{map:t,table:n,tableStart:r},i){let o=0;for(let e=0;e<i;e++)o+=n.child(e).nodeSize;let s=o+n.child(i).nodeSize,l=e.mapping.maps.length;e.delete(o+r,s+r);let a=new Set;for(let o=0,s=i*t.width;o<t.width;o++,s++){let c=t.map[s];if(!a.has(c)){if(a.add(c),i>0&&c==t.map[s-t.width]){let t=n.nodeAt(c).attrs;e.setNodeMarkup(e.mapping.slice(l).map(c+r),null,{...t,rowspan:t.rowspan-1}),o+=t.colspan-1}else if(i<t.height&&c==t.map[s+t.width]){let s=n.nodeAt(c),a=s.attrs,h=s.type.create({...a,rowspan:s.attrs.rowspan-1},s.content),u=t.positionAt(i+1,o,n);e.insert(e.mapping.slice(l).map(r+u),h),o+=a.colspan-1}}}}(r,n,e),e!=n.top;e--){let e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=cJ.get(n.table)}t(r)}return!0}(e,t)});dn(dN,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});let dI=oG("AddColBefore",()=>()=>hd);dn(dI,{displayName:"Command<addColBeforeCommand>",group:"Table"});let dE=oG("AddColAfter",()=>()=>hp);dn(dE,{displayName:"Command<addColAfterCommand>",group:"Table"});let d_=oG("AddRowBefore",e=>()=>(t,n)=>{if(!c1(t))return!1;if(n){let r=hh(t);n(dw(e,t.tr,r,r.top))}return!0});dn(d_,{displayName:"Command<addRowBeforeCommand>",group:"Table"});let dL=oG("AddRowAfter",e=>()=>(t,n)=>{if(!c1(t))return!1;if(n){let r=hh(t);n(dw(e,t.tr,r,r.bottom))}return!0});dn(dL,{displayName:"Command<addRowAfterCommand>",group:"Table"});let dR=oG("SetAlign",()=>(e="left")=>(function(e,t){return function(n,r){if(!c1(n))return!1;let i=c2(n);if(i.nodeAfter.attrs[e]===t)return!1;if(r){let o=n.tr;n.selection instanceof c7?n.selection.forEachCell((n,r)=>{n.attrs[e]!==t&&o.setNodeMarkup(r,null,{...n.attrs,[e]:t})}):o.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[e]:t}),r(o)}return!0}})("alignment",e));dn(dR,{displayName:"Command<setAlignCommand>",group:"Table"});let dP=oY(e=>new nS(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(t,n,r,i)=>{let o=t.doc.resolve(r);if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),dh.type(e)))return null;let s=dm(e,Math.max(Number(n.groups?.row??0),2),Number(n.groups?.col)),l=t.tr.replaceRangeWith(r,i,s);return l.setSelection(nx.U3.create(l.doc,r+3)).scrollIntoView()}));dn(dP,{displayName:"InputRule<insertTableInputRule>",group:"Table"});let dD=function(e){let t=n=>async()=>{await n.wait(oe);let r=e(n);return n.update(oR,e=>[...e,r]),t.pasteRule=r,()=>{n.update(oR,e=>e.filter(e=>e!==r))}};return t}(e=>({run:(t,n,r)=>{if(r)return t;let i=t.content;return t.content.forEach((t,n,r)=>{if(t?.type!==dh.type(e))return;let o=t.childCount,s=t.lastChild?.childCount??0;if(0===o||0===s){i=i.replaceChild(r,sX.type(e).create());return}let l=t.firstChild;if(!(s>0&&l&&0===l.childCount))return;let a=Array(s).fill(0).map(()=>df.type(e).createAndFill()),c=new rv.Ji(rv.FK.from(a),0,0),h=l.replace(0,0,c),u=t.replace(0,l.nodeSize,new rv.Ji(rv.FK.from(h),0,0));i=i.replaceChild(r,u)}),new rv.Ji(rv.FK.from(i),t.openStart,t.openEnd)}}));dn(dD,{displayName:"PasteRule<table>",group:"Table"});let dF=o4("tableKeymap",{NextCell:{priority:100,shortcuts:["Mod-]","Tab"],command:e=>{let t=e.get(oc);return()=>t.call(dk.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:e=>{let t=e.get(oc);return()=>t.call(db.key)}},ExitTable:{shortcuts:["Mod-Enter","Enter"],command:e=>{let t=e.get(oc);return()=>t.call(dx.key)}}});dn(dF.ctx,{displayName:"KeymapCtx<table>",group:"Table"}),dn(dF.shortcuts,{displayName:"Keymap<table>",group:"Table"});let dB="footnote_definition",d$="footnoteDefinition",dj=o5("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`dl[data-type="${dB}"]`,getAttrs:e=>{if(!(e instanceof HTMLElement))throw nR(e);return{label:e.dataset.label}},contentElement:"dd"}],toDOM:e=>{let t=e.attrs.label;return["dl",{"data-label":t,"data-type":dB},["dt",t],["dd",0]]},parseMarkdown:{match:({type:e})=>e===d$,runner:(e,t,n)=>{e.openNode(n,{label:t.label}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name===dB,runner:(e,t)=>{e.openNode(d$,void 0,{label:t.attrs.label,identifier:t.attrs.label}).next(t.content).closeNode()}}}));dn(dj.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"}),dn(dj.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});let dz="footnote_reference",dH=o5("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`sup[data-type="${dz}"]`,getAttrs:e=>{if(!(e instanceof HTMLElement))throw nR(e);return{label:e.dataset.label}}}],toDOM:e=>{let t=e.attrs.label;return["sup",{"data-label":t,"data-type":dz},t]},parseMarkdown:{match:({type:e})=>"footnoteReference"===e,runner:(e,t,n)=>{e.addNode(n,{label:t.label})}},toMarkdown:{match:e=>e.type.name===dz,runner:(e,t)=>{e.addNode("footnoteReference",void 0,void 0,{label:t.attrs.label,identifier:t.attrs.label})}}}));dn(dH.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"}),dn(dH.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});let dq=l_.extendSchema(e=>t=>{let n=e(t);return{...n,attrs:{...n.attrs,checked:{default:null,validate:"boolean|null"}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:e=>{if(!(e instanceof HTMLElement))throw nR(e);return{label:e.dataset.label,listType:e.dataset.listType,spread:e.dataset.spread,checked:e.dataset.checked?"true"===e.dataset.checked:null}}},...n?.parseDOM||[]],toDOM:e=>n.toDOM&&null==e.attrs.checked?n.toDOM(e):["li",{"data-item-type":"task","data-label":e.attrs.label,"data-list-type":e.attrs.listType,"data-spread":e.attrs.spread,"data-checked":e.attrs.checked},0],parseMarkdown:{match:({type:e})=>"listItem"===e,runner:(e,t,r)=>{if(null==t.checked)return void n.parseMarkdown.runner(e,t,r);let i=null!=t.label?`${t.label}.`:"•",o=null!=t.checked?!!t.checked:null,s=null!=t.label?"ordered":"bullet",l=null!=t.spread?`${t.spread}`:"true";e.openNode(r,{label:i,listType:s,spread:l,checked:o}),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>"list_item"===e.type.name,runner:(e,t)=>{if(null==t.attrs.checked)return void n.toMarkdown.runner(e,t);let r=t.attrs.label,i=t.attrs.listType,o="true"===t.attrs.spread,s=t.attrs.checked;e.openNode("listItem",void 0,{label:r,listType:i,spread:o,checked:s}),e.next(t.content),e.closeNode()}}}});dn(dq.node,{displayName:"NodeSchema<taskListItem>",group:"ListItem"}),dn(dq.ctx,{displayName:"NodeSchemaCtx<taskListItem>",group:"ListItem"});let dW=oY(()=>new nS(/^\[(?<checked>\s|x)\]\s$/,(e,t,n,r)=>{let i=e.doc.resolve(n),o=0,s=i.node(o);for(;s&&"list_item"!==s.type.name;)o--,s=i.node(o);if(!s||null!=s.attrs.checked)return null;let l=t.groups?.checked==="x",a=i.before(o),c=e.tr;return c.deleteRange(n,r).setNodeMarkup(a,void 0,{...s.attrs,checked:l}),c}));dn(dW,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});let dU=[da,dF].flat(),dV=[dP,dW],dK=[dl],dJ=[dD],dZ=oQ(()=>hZ);dn(dZ,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"}),dn(oQ(()=>(function({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:r=h_,lastColumnResizable:i=!0}={}){let o=new nx.k_({key:hR,state:{init(e,t){var i;let s=null==(i=o.spec)||null==(i=i.props)?void 0:i.nodeViews,l=cX(t.schema).table.name;return r&&s&&(s[l]=(e,t)=>new r(e,n,t)),new hP(-1,!1)},apply:(e,t)=>t.apply(e)},props:{attributes:e=>{let t=hR.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(t,n)=>{!function(e,t,n,r){if(!e.editable)return;let i=hR.getState(e.state);if(i&&!i.dragging){let o=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),s=-1;if(o){let{left:r,right:i}=o.getBoundingClientRect();t.clientX-r<=n?s=hD(e,t,"left",n):i-t.clientX<=n&&(s=hD(e,t,"right",n))}if(s!=i.activeHandle){if(!r&&-1!==s){let t=e.state.doc.resolve(s),n=t.node(-1),r=cJ.get(n),i=t.start(-1);if(r.colCount(t.pos-i)+t.nodeAfter.attrs.colspan-1==r.width-1)return}hB(e,s)}}}(t,n,e,i)},mouseleave:e=>{!function(e){if(!e.editable)return;let t=hR.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&hB(e,-1)}(e)},mousedown:(e,r)=>{!function(e,t,n,r){var i;if(!e.editable)return;let o=null!=(i=e.dom.ownerDocument.defaultView)?i:window,s=hR.getState(e.state);if(!s||-1==s.activeHandle||s.dragging)return;let l=e.state.doc.nodeAt(s.activeHandle),a=function(e,t,{colspan:n,colwidth:r}){let i=r&&r[r.length-1];if(i)return i;let o=e.domAtPos(t),s=o.node.childNodes[o.offset].offsetWidth,l=n;if(r)for(let e=0;e<n;e++)r[e]&&(s-=r[e],l--);return s/l}(e,s.activeHandle,l.attrs);function c(t){o.removeEventListener("mouseup",c),o.removeEventListener("mousemove",h);let r=hR.getState(e.state);(null==r?void 0:r.dragging)&&(function(e,t,n){let r=e.state.doc.resolve(t),i=r.node(-1),o=cJ.get(i),s=r.start(-1),l=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,a=e.state.tr;for(let e=0;e<o.height;e++){let t=e*o.width+l;if(e&&o.map[t]==o.map[t-o.width])continue;let r=o.map[t],c=i.nodeAt(r).attrs,h=1==c.colspan?0:l-o.colCount(r);if(c.colwidth&&c.colwidth[h]==n)continue;let u=c.colwidth?c.colwidth.slice():Array(c.colspan).fill(0);u[h]=n,a.setNodeMarkup(s+r,null,{...c,colwidth:u})}a.docChanged&&e.dispatch(a)}(e,r.activeHandle,hF(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(hR,{setDragging:null})))}function h(t){if(!t.which)return c(t);let i=hR.getState(e.state);if(i&&i.dragging){let o=hF(i.dragging,t,n);h$(e,i.activeHandle,o,r)}}e.dispatch(e.state.tr.setMeta(hR,{setDragging:{startX:t.clientX,startWidth:a}})),h$(e,s.activeHandle,a,r),o.addEventListener("mouseup",c),o.addEventListener("mousemove",h),t.preventDefault()}(e,r,t,n)}},decorations:e=>{let t=hR.getState(e);if(t&&t.activeHandle>-1)return function(e,t){let n=[],r=e.doc.resolve(t),i=r.node(-1);if(!i)return iJ.zF.empty;let o=cJ.get(i),s=r.start(-1),l=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1;for(let t=0;t<o.height;t++){let r=l+t*o.width;if((l==o.width-1||o.map[r]!=o.map[r+1])&&(0==t||o.map[r]!=o.map[r-o.width])){var a;let t=o.map[r],l=s+t+i.nodeAt(t).nodeSize-1,c=document.createElement("div");c.className="column-resize-handle",(null==(a=hR.getState(e))?void 0:a.dragging)&&n.push(iJ.NZ.node(s+t,s+t+i.nodeAt(t).nodeSize,{class:"column-resize-dragging"})),n.push(iJ.NZ.widget(l,c))}}return iJ.zF.create(e.doc,n)}(e,t.activeHandle)},nodeViews:{}}});return o})({})),{displayName:"Prose<columnResizingPlugin>",group:"Prose"});let dG=oQ(()=>(function({allowTableNodeSelection:e=!1}={}){return new nx.k_({key:cQ,state:{init:()=>null,apply(e,t){let n=e.getMeta(cQ);if(null!=n)return -1==n?null:n;if(null==t||!e.docChanged)return t;let{deleted:r,pos:i}=e.mapping.mapResult(t);return r?null:i}},props:{decorations:c6,handleDOMEvents:{mousedown:hO},createSelectionBetween:e=>null!=cQ.getState(e.state)?e.state.selection:null,handleTripleClick:hA,handleKeyDown:hx,handlePaste:hT},appendTransaction:(t,n,r)=>(function(e,t,n){let r,i,o=(t||e).selection,s=(t||e).doc;if(o instanceof nx.nh&&(i=o.node.type.spec.tableRole)){if("cell"==i||"header_cell"==i)r=c7.create(s,o.from);else if("row"==i){let e=s.resolve(o.from+1);r=c7.rowSelection(e,e)}else if(!n){let e=cJ.get(o.node),t=o.from+1,n=t+e.map[e.width*e.height-1];r=c7.create(s,t+1,n)}}else o instanceof nx.U3&&function({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,r=t.pos,i=e.depth;for(;i>=0&&!(e.after(i+1)<e.end(i));i--,n++);for(let e=t.depth;e>=0&&!(t.before(e+1)>t.start(e));e--,r--);return n==r&&/row|table/.test(e.node(i).type.spec.tableRole)}(o)?r=nx.U3.create(s,o.from):o instanceof nx.U3&&function({$from:e,$to:t}){let n,r;for(let t=e.depth;t>0;t--){let r=e.node(t);if("cell"===r.type.spec.tableRole||"header_cell"===r.type.spec.tableRole){n=r;break}}for(let e=t.depth;e>0;e--){let n=t.node(e);if("cell"===n.type.spec.tableRole||"header_cell"===n.type.spec.tableRole){r=n;break}}return n!==r&&0===t.parentOffset}(o)&&(r=nx.U3.create(s,o.$from.start(),o.$from.end()));return r&&(t||(t=e.tr)).setSelection(r),t})(r,function(e,t){let n,r=(t,r)=>{"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){let i,o,s=cJ.get(t);if(!s.problems)return r;r||(r=e.tr);let l=[];for(let e=0;e<s.height;e++)l.push(0);for(let e=0;e<s.problems.length;e++){let i=s.problems[e];if("collision"==i.type){let e=t.nodeAt(i.pos);if(!e)continue;let o=e.attrs;for(let e=0;e<o.rowspan;e++)l[i.row+e]+=i.n;r.setNodeMarkup(r.mapping.map(n+1+i.pos),null,c9(o,o.colspan-i.n,i.n))}else if("missing"==i.type)l[i.row]+=i.n;else if("overlong_rowspan"==i.type){let e=t.nodeAt(i.pos);if(!e)continue;r.setNodeMarkup(r.mapping.map(n+1+i.pos),null,{...e.attrs,rowspan:e.attrs.rowspan-i.n})}else if("colwidth mismatch"==i.type){let e=t.nodeAt(i.pos);if(!e)continue;r.setNodeMarkup(r.mapping.map(n+1+i.pos),null,{...e.attrs,colwidth:i.colwidth})}else if("zero_sized"==i.type){let e=r.mapping.map(n);r.delete(e,e+t.nodeSize)}}for(let e=0;e<l.length;e++)l[e]&&(null==i&&(i=e),o=e);for(let a=0,c=n+1;a<s.height;a++){let n=t.child(a),s=c+n.nodeSize,h=l[a];if(h>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);let l=[];for(let n=0;n<h;n++){let n=cX(e.schema)[t].createAndFill();n&&l.push(n)}let u=(0==a||i==a-1)&&o==a?c+1:s-1;r.insert(r.mapping.map(u),l)}c=s}return r.setMeta(he,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&function e(t,n,r,i){let o=t.childCount,s=n.childCount;e:for(let l=0,a=0;l<s;l++){let s=n.child(l);for(let e=a,n=Math.min(o,l+3);e<n;e++)if(t.child(e)==s){a=e+1,r+=s.nodeSize;continue e}i(s,r),a<o&&t.child(a).sameMarkup(s)?e(t.child(a),s,r+1,i):s.nodesBetween(0,s.content.size,i,r+1),r+=s.nodeSize}}(t.doc,e.doc,0,r):e.doc.descendants(r),n}(r,n),e)})})({allowTableNodeSelection:!0}));dn(dG,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});let dY=o8("remarkGFM",()=>dt);dn(dY.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"}),dn(dY.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});let dX=new nx.hs("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN"),dQ=oQ(()=>new nx.k_({key:dX,appendTransaction:(e,t,n)=>{let r;return t.doc!==n.doc&&n.doc.descendants((e,t)=>{if(r||(r=n.tr),"table_cell"!==e.type.name)return;let i=n.doc.resolve(t),o=i.node(i.depth),s=i.node(i.depth-1).firstChild;if(!s)return;let l=function(e,t){let n=0;return t.forEach((t,r,i)=>{t===e&&(n=i)}),n}(e,o),a=s.maybeChild(l);if(!a)return;let c=a.attrs.alignment;c!==e.attrs.alignment&&r.setNodeMarkup(t,void 0,{...e.attrs,alignment:c})}),r}}));dn(dQ,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});let d0=[dQ,dZ,dY,dG].flat(),d1=[[dq,dh,du,dd,df,dp,dj,dH,dr,di].flat(),dV,dJ,dK,dU,[dk,db,dx,dC,dS,dM,dA,dT,dO,dN,d_,dL,dI,dE,dR,ds],d0].flat();var d2=n(45395),d5=n(38348);function d3(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=e(t,n);return!!i&&(r(n.update(i)),!0)}}let d4=d3(function(e,t,n=t.selection.ranges){let r=[],i=-1;for(let{from:e,to:o}of n){let n=r.length,s=1e9,l=d8(t,e).line;if(l){for(let n=e;n<=o;){let a=t.doc.lineAt(n);if(a.from>i&&(e==o||o>a.from)){i=a.from;let e=/^\s*/.exec(a.text)[0].length,t=e==a.length,n=a.text.slice(e,e+l.length)==l?e:-1;e<a.text.length&&e<s&&(s=e),r.push({line:a,comment:n,token:l,indent:e,empty:t,single:!1})}n=a.to+1}if(s<1e9)for(let e=n;e<r.length;e++)r[e].indent<r[e].line.text.length&&(r[e].indent=s);r.length==n+1&&(r[n].single=!0)}}if(2!=e&&r.some(e=>e.comment<0&&(!e.empty||e.single))){let e=[];for(let{line:t,token:n,indent:i,empty:o,single:s}of r)(s||!o)&&e.push({from:t.from+i,insert:n+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some(e=>e.comment>=0)){let e=[];for(let{line:t,comment:n,token:i}of r)if(n>=0){let r=t.from+n,o=r+i.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null},0),d9=d3(d6,0),d7=d3((e,t)=>d6(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),i=n.to<=r.to?r:e.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:e.doc.lineAt(n.to-1));let o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=i.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return t}(t)),0);function d8(e,t){let n=e.languageDataAt("commentTokens",t,1);return n.length?n[0]:{}}function d6(e,t,n=t.selection.ranges){let r=n.map(e=>d8(t,e.from).block);if(!r.every(e=>e))return null;let i=n.map((e,n)=>(function(e,{open:t,close:n},r,i){let o,s,l=e.sliceDoc(r-50,r),a=e.sliceDoc(i,i+50),c=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(a)[0].length,u=l.length-c;if(l.slice(u-t.length,u)==t&&a.slice(h,h+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:i+h,margin:h&&1}};i-r<=100?o=s=e.sliceDoc(r,i):(o=e.sliceDoc(r,r+50),s=e.sliceDoc(i-50,i));let d=/^\s*/.exec(o)[0].length,p=/\s*$/.exec(s)[0].length,f=s.length-p-n.length;return o.slice(d,d+t.length)==t&&s.slice(f,f+n.length)==n?{open:{pos:r+d+t.length,margin:+!!/\s/.test(o.charAt(d+t.length))},close:{pos:i-p-n.length,margin:+!!/\s/.test(s.charAt(f-1))}}:null})(t,r[n],e.from,e.to));if(2!=e&&!i.every(e=>e))return{changes:t.changes(n.map((e,t)=>i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}]))};if(1!=e&&i.some(e=>e)){let e=[];for(let t=0,n;t<i.length;t++)if(n=i[t]){let i=r[t],{open:o,close:s}=n;e.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:e}}return null}let pe=d2.YH.define(),pt=d2.YH.define(),pn=d2.sj.define(),pr=d2.sj.define({combine:e=>(0,d2.QR)(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,r)=>e(n,r)||t(n,r)})}),pi=d2.sU.define({create:()=>py.empty,update(e,t){let n=t.state.facet(pr),r=t.annotation(pe);if(r){let i=ph.fromTransaction(t,r.selection),o=r.side,s=0==o?e.undone:e.done;return s=i?pu(s,s.length,n.minDepth,i):pf(s,t.startState.selection),new py(0==o?r.rest:s,0==o?s:r.rest)}let i=t.annotation(pt);if(("full"==i||"before"==i)&&(e=e.isolate()),!1===t.annotation(d2.ZX.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=ph.fromTransaction(t),s=t.annotation(d2.ZX.time),l=t.annotation(d2.ZX.userEvent);return o?e=e.addChanges(o,s,l,n,t):t.selection&&(e=e.addSelection(t.startState.selection,s,l,n.newGroupDelay)),("full"==i||"after"==i)&&(e=e.isolate()),e},toJSON:e=>({done:e.done.map(e=>e.toJSON()),undone:e.undone.map(e=>e.toJSON())}),fromJSON:e=>new py(e.done.map(ph.fromJSON),e.undone.map(ph.fromJSON))});function po(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let i=n.field(pi,!1);if(!i)return!1;let o=i.pop(e,n,t);return!!o&&(r(o),!0)}}let ps=po(0,!1),pl=po(1,!1),pa=po(0,!0),pc=po(1,!0);class ph{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new ph(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null==(e=this.changes)?void 0:e.toJSON(),mapped:null==(t=this.mapped)?void 0:t.toJSON(),startSelection:null==(n=this.startSelection)?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(e=>e.toJSON())}}static fromJSON(e){return new ph(e.changes&&d2.VR.fromJSON(e.changes),[],e.mapped&&d2.Gu.fromJSON(e.mapped),e.startSelection&&d2.OF.fromJSON(e.startSelection),e.selectionsAfter.map(d2.OF.fromJSON))}static fromTransaction(e,t){let n=pp;for(let t of e.startState.facet(pn)){let r=t(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new ph(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,pp)}static selection(e){return new ph(void 0,pp,void 0,void 0,e)}}function pu(e,t,n,r){let i=e.slice(t+1>n+20?t-n-1:0,t);return i.push(r),i}function pd(e,t){return e.length?t.length?e.concat(t):e:t}let pp=[];function pf(e,t){if(!e.length)return[ph.selection([t])];{let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),pu(e,e.length-1,1e9,n.setSelAfter(r)))}}function pm(e,t){if(!e.length)return e;let n=e.length,r=pp;for(;n;){let i=function(e,t,n){let r=pd(e.selectionsAfter.length?e.selectionsAfter.map(e=>e.map(t)):pp,n);if(!e.changes)return ph.selection(r);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new ph(i,d2.Pe.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[ph.selection(r)]:pp}let pg=/^(input\.type|delete)($|\.)/;class py{constructor(e,t,n=0,r){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new py(this.done,this.undone):this}addChanges(e,t,n,r,i){var o,s;let l,a,c=this.done,h=c[c.length-1];return new py(c=h&&h.changes&&!h.changes.empty&&e.changes&&(!n||pg.test(n))&&(!h.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(i,(o=h.changes,s=e.changes,l=[],a=!1,o.iterChangedRanges((e,t)=>l.push(e,t)),s.iterChangedRanges((e,t,n,r)=>{for(let e=0;e<l.length;){let t=l[e++],i=l[e++];r>=t&&n<=i&&(a=!0)}}),a))||"input.type.compose"==n)?pu(c,c.length-1,r.minDepth,new ph(e.changes.compose(h.changes),pd(d2.Pe.mapEffects(e.effects,h.changes),h.effects),h.mapped,h.startSelection,pp)):pu(c,c.length,r.minDepth,e),pp,t,n)}addSelection(e,t,n,r){var i;let o=this.done.length?this.done[this.done.length-1].selectionsAfter:pp;return o.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(i=o[o.length-1],i.ranges.length==e.ranges.length&&0===i.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length)?this:new py(pf(this.done,e),this.undone,t,n)}addMapping(e){return new py(pm(this.done,e),pm(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1],o=i.selectionsAfter[0]||t.selection;if(n&&i.selectionsAfter.length){let n,s;return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:pe.of({side:e,rest:(n=r[r.length-1],(s=r.slice())[r.length-1]=n.setSelAfter(n.selectionsAfter.slice(0,n.selectionsAfter.length-1)),s),selection:o}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0})}{if(!i.changes)return null;let n=1==r.length?pp:r.slice(0,r.length-1);return i.mapped&&(n=pm(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:pe.of({side:e,rest:n,selection:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}}}py.empty=new py(pp,pp);function pv(e,t){return d2.OF.create(e.ranges.map(t),e.mainIndex)}function pw(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function pb({state:e,dispatch:t},n){let r=pv(e.selection,n);return!r.eq(e.selection,!0)&&(t(pw(e,r)),!0)}function pk(e,t){return d2.OF.cursor(t?e.to:e.from)}function px(e,t){return pb(e,n=>n.empty?e.moveByChar(n,t):pk(n,t))}function pC(e){return e.textDirectionAt(e.state.selection.main.head)==nc.OP.LTR}let pS=e=>px(e,!pC(e)),pM=e=>px(e,pC(e));function pA(e,t){return pb(e,n=>n.empty?e.moveByGroup(n,t):pk(n,t))}function pT(e,t,n){let r,i,o=(0,no.mv)(e).resolveInner(t.head),s=n?d5.uY.closedBy:d5.uY.openedBy;for(let r=t.head;;){let t=n?o.childAfter(r):o.childBefore(r);if(!t)break;!function(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}(e,t,s)?r=n?t.to:t.from:o=t}return i=o.type.prop(s)&&(r=n?(0,no.jU)(e,o.from,1):(0,no.jU)(e,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,d2.OF.cursor(i,n?-1:1)}function pO(e,t){return pb(e,n=>{if(!n.empty)return pk(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)})}"undefined"!=typeof Intl&&Intl.Segmenter;let pN=e=>pO(e,!1),pI=e=>pO(e,!0);function pE(e){let t=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,n=0,r=0,i;if(t){for(let t of e.state.facet(nc.Lz.scrollMargins)){let i=t(e);(null==i?void 0:i.top)&&(n=Math.max(null==i?void 0:i.top,n)),(null==i?void 0:i.bottom)&&(r=Math.max(null==i?void 0:i.bottom,r))}i=e.scrollDOM.clientHeight-n-r}else i=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:t,height:Math.max(e.defaultLineHeight,i-5)}}function p_(e,t){let n,r=pE(e),{state:i}=e,o=pv(i.selection,n=>n.empty?e.moveVertically(n,t,r.height):pk(n,t));if(o.eq(i.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(i.selection.main.head),s=e.scrollDOM.getBoundingClientRect(),l=s.top+r.marginTop,a=s.bottom-r.marginBottom;t&&t.top>l&&t.bottom<a&&(n=nc.Lz.scrollIntoView(o.main.head,{y:"start",yMargin:t.top-l}))}return e.dispatch(pw(i,o),{effects:n}),!0}let pL=e=>p_(e,!1),pR=e=>p_(e,!0);function pP(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=d2.OF.cursor(r.from+n))}return i}function pD(e,t){let n=pv(e.state.selection,e=>{let n=t(e);return d2.OF.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return!n.eq(e.state.selection)&&(e.dispatch(pw(e.state,n)),!0)}function pF(e,t){return pD(e,n=>e.moveByChar(n,t))}let pB=e=>pF(e,!pC(e)),p$=e=>pF(e,pC(e));function pj(e,t){return pD(e,n=>e.moveByGroup(n,t))}function pz(e,t){return pD(e,n=>e.moveVertically(n,t))}let pH=e=>pz(e,!1),pq=e=>pz(e,!0);function pW(e,t){return pD(e,n=>e.moveVertically(n,t,pE(e).height))}let pU=e=>pW(e,!1),pV=e=>pW(e,!0),pK=({state:e,dispatch:t})=>(t(pw(e,{anchor:0})),!0),pJ=({state:e,dispatch:t})=>(t(pw(e,{anchor:e.doc.length})),!0),pZ=({state:e,dispatch:t})=>(t(pw(e,{anchor:e.selection.main.anchor,head:0})),!0),pG=({state:e,dispatch:t})=>(t(pw(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function pY(e,t){let{state:n}=e,r=n.selection,i=n.selection.ranges.slice();for(let r of n.selection.ranges){let o=n.doc.lineAt(r.head);if(t?o.to<e.state.doc.length:o.from>0)for(let n=r;;){let r=e.moveVertically(n,t);if(r.head<o.from||r.head>o.to){i.some(e=>e.head==r.head)||i.push(r);break}if(r.head==n.head)break;n=r}}return i.length!=r.ranges.length&&(e.dispatch(pw(n,d2.OF.create(i,i.length-1))),!0)}function pX(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,i=r.changeByRange(r=>{let{from:i,to:o}=r;if(i==o){let s=t(r);s<i?(n="delete.backward",s=pQ(e,s,!1)):s>i&&(n="delete.forward",s=pQ(e,s,!0)),i=Math.min(i,s),o=Math.max(o,s)}else i=pQ(e,i,!1),o=pQ(e,o,!0);return i==o?{range:r}:{changes:{from:i,to:o},range:d2.OF.cursor(i,i<r.head?-1:1)}});return!i.changes.empty&&(e.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?nc.Lz.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function pQ(e,t,n){if(e instanceof nc.Lz)for(let r of e.state.facet(nc.Lz.atomicRanges).map(t=>t(e)))r.between(t,t,(e,r)=>{e<t&&r>t&&(t=n?r:e)});return t}let p0=(e,t,n)=>pX(e,r=>{let i=r.from,{state:o}=e,s=o.doc.lineAt(i),l,a;if(n&&!t&&i>s.from&&i<s.from+200&&!/[^ \t]/.test(l=s.text.slice(0,i-s.from))){if("	"==l[l.length-1])return i-1;let e=(0,d2.y$)(l,o.tabSize)%(0,no.tp)(o)||(0,no.tp)(o);for(let t=0;t<e&&" "==l[l.length-1-t];t++)i--;a=i}else(a=(0,d2.zK)(s.text,i-s.from,t,t)+s.from)==i&&s.number!=(t?o.doc.lines:1)?a+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(s.text.slice(a-s.from,i-s.from))&&(a=(0,d2.zK)(s.text,a-s.from,!1,!1)+s.from);return a}),p1=e=>p0(e,!1,!0),p2=e=>p0(e,!0,!1),p5=(e,t)=>pX(e,n=>{let r=n.head,{state:i}=e,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n.head&&o.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let l=(0,d2.zK)(o.text,r-o.from,t)+o.from,a=o.text.slice(Math.min(r,l)-o.from,Math.max(r,l)-o.from),c=s(a);if(null!=e&&c!=e)break;(" "!=a||r!=n.head)&&(e=c),r=l}return r}),p3=e=>p5(e,!1);function p4(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return t}function p9(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let t of p4(e)){if(n?t.to==e.doc.length:0==t.from)continue;let o=e.doc.lineAt(n?t.to+1:t.from-1),s=o.length+1;if(n)for(let n of(r.push({from:t.to,to:o.to},{from:t.from,insert:o.text+e.lineBreak}),t.ranges))i.push(d2.OF.range(Math.min(e.doc.length,n.anchor+s),Math.min(e.doc.length,n.head+s)));else for(let n of(r.push({from:o.from,to:t.from},{from:t.to,insert:e.lineBreak+o.text}),t.ranges))i.push(d2.OF.range(n.anchor-s,n.head-s))}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:d2.OF.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}function p7(e,t,n){if(e.readOnly)return!1;let r=[];for(let t of p4(e))n?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});let i=e.changes(r);return t(e.update({changes:i,selection:e.selection.map(i,n?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}let p8=fe(!1),p6=fe(!0);function fe(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{let{from:r,to:i}=n,o=t.doc.lineAt(r),s=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n=(0,no.mv)(e).resolveInner(t),r=n.childBefore(t),i=n.childAfter(t),o;return r&&i&&r.to<=t&&i.from>=t&&(o=r.type.prop(d5.uY.closedBy))&&o.indexOf(i.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(i.from).from&&!/\S/.test(e.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}(t,r);e&&(r=i=(i<=o.to?o:t.doc.lineAt(i)).to);let l=new no.KB(t,{simulateBreak:r,simulateDoubleBreak:!!s}),a=(0,no._v)(l,r);for(null==a&&(a=(0,d2.y$)(/^\s*/.exec(t.doc.lineAt(r).text)[0],t.tabSize));i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?{from:r,to:i}=s:r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",(0,no.EI)(t,a)];return s&&c.push((0,no.EI)(t,l.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:d2.EY.of(c)},range:d2.OF.cursor(r+1+c[1].length)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function ft(e,t){let n=-1;return e.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let s=e.doc.lineAt(o);s.number>n&&(r.empty||r.to>s.from)&&(t(s,i,r),n=s.number),o=s.to+1}let o=e.changes(i);return{changes:i,range:d2.OF.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}let fn=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(ft(e,(t,n)=>{n.push({from:t.from,insert:e.facet(no.Xt)})}),{userEvent:"input.indent"})),!0),fr=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(ft(e,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let i=(0,d2.y$)(r,e.tabSize),o=0,s=(0,no.EI)(e,Math.max(0,i-(0,no.tp)(e)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:s.slice(o)})}),{userEvent:"delete.dedent"})),!0),fi=[{key:"Ctrl-b",run:pS,shift:pB,preventDefault:!0},{key:"Ctrl-f",run:pM,shift:p$},{key:"Ctrl-p",run:pN,shift:pH},{key:"Ctrl-n",run:pI,shift:pq},{key:"Ctrl-a",run:e=>pb(e,t=>d2.OF.cursor(e.lineBlockAt(t.head).from,1)),shift:e=>pD(e,t=>d2.OF.cursor(e.lineBlockAt(t.head).from))},{key:"Ctrl-e",run:e=>pb(e,t=>d2.OF.cursor(e.lineBlockAt(t.head).to,-1)),shift:e=>pD(e,t=>d2.OF.cursor(e.lineBlockAt(t.head).to))},{key:"Ctrl-d",run:p2},{key:"Ctrl-h",run:p1},{key:"Ctrl-k",run:e=>pX(e,t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})},{key:"Ctrl-Alt-h",run:p3},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:d2.EY.of(["",""])},range:d2.OF.cursor(e.from)}));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),i=n==r.from?n-1:(0,d2.zK)(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:(0,d2.zK)(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(i,n))},range:d2.OF.cursor(o)}});return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:pR}],fo=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>pb(e,t=>pT(e.state,t,!pC(e))),shift:e=>pD(e,t=>pT(e.state,t,!pC(e)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>pb(e,t=>pT(e.state,t,pC(e))),shift:e=>pD(e,t=>pT(e.state,t,pC(e)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>p9(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>p7(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>p9(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>p7(e,t,!0)},{key:"Mod-Alt-ArrowUp",run:e=>pY(e,!1)},{key:"Mod-Alt-ArrowDown",run:e=>pY(e,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=d2.OF.create([n.main]):n.main.empty||(r=d2.OF.create([d2.OF.cursor(n.main.head)])),!!r&&(t(pw(e,r)),!0)}},{key:"Mod-Enter",run:p6},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=p4(e).map(({from:t,to:n})=>d2.OF.range(t,Math.min(n+1,e.doc.length)));return t(e.update({selection:d2.OF.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=pv(e.selection,t=>{let n=(0,no.mv)(e),r=n.resolveStack(t.from,1);if(t.empty){let e=n.resolveStack(t.from,-1);e.node.from>=r.node.from&&e.node.to<=r.node.to&&(r=e)}for(let e=r;e;e=e.next){let{node:n}=e;if((n.from<t.from&&n.to>=t.to||n.to>t.to&&n.from<=t.from)&&e.next)return d2.OF.range(n.to,n.from)}return t});return!n.eq(e.selection)&&(t(pw(e,n)),!0)},preventDefault:!0},{key:"Mod-[",run:fr},{key:"Mod-]",run:fn},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new no.KB(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),i=ft(e,(t,i,o)=>{let s=(0,no._v)(r,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let l=/^\s*/.exec(t.text)[0],a=(0,no.EI)(e,s);(l!=a||o.from<t.from+l.length)&&(n[t.from]=s,i.push({from:t.from,to:t.from+l.length,insert:a}))});return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(p4(t).map(({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n}))),r=pv(t.selection,t=>{let n;if(e.lineWrapping){let r=e.lineBlockAt(t.head),i=e.coordsAtPos(t.head,t.assoc||1);i&&(n=r.bottom+e.documentTop-i.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)}).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>(function(e,t,n){let r=!1,i=pv(e.selection,t=>{let i=(0,no.jU)(e,t.head,-1)||(0,no.jU)(e,t.head,1)||t.head>0&&(0,no.jU)(e,t.head-1,1)||t.head<e.doc.length&&(0,no.jU)(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;let o=i.start.from==t.head?i.end.to:i.end.from;return n?d2.OF.range(t.anchor,o):d2.OF.cursor(o)});return!!r&&(t(pw(e,i)),!0)})(e,t,!1)},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=d8(e.state,n.from);return r.line?d4(e):!!r.block&&d7(e)}},{key:"Alt-A",run:d9},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:pS,shift:pB,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>pA(e,!pC(e)),shift:e=>pj(e,!pC(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>pb(e,t=>pP(e,t,!pC(e))),shift:e=>pD(e,t=>pP(e,t,!pC(e))),preventDefault:!0},{key:"ArrowRight",run:pM,shift:p$,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>pA(e,pC(e)),shift:e=>pj(e,pC(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>pb(e,t=>pP(e,t,pC(e))),shift:e=>pD(e,t=>pP(e,t,pC(e))),preventDefault:!0},{key:"ArrowUp",run:pN,shift:pH,preventDefault:!0},{mac:"Cmd-ArrowUp",run:pK,shift:pZ},{mac:"Ctrl-ArrowUp",run:pL,shift:pU},{key:"ArrowDown",run:pI,shift:pq,preventDefault:!0},{mac:"Cmd-ArrowDown",run:pJ,shift:pG},{mac:"Ctrl-ArrowDown",run:pR,shift:pV},{key:"PageUp",run:pL,shift:pU},{key:"PageDown",run:pR,shift:pV},{key:"Home",run:e=>pb(e,t=>pP(e,t,!1)),shift:e=>pD(e,t=>pP(e,t,!1)),preventDefault:!0},{key:"Mod-Home",run:pK,shift:pZ},{key:"End",run:e=>pb(e,t=>pP(e,t,!0)),shift:e=>pD(e,t=>pP(e,t,!0)),preventDefault:!0},{key:"Mod-End",run:pJ,shift:pG},{key:"Enter",run:p8,shift:p8},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:p1,shift:p1,preventDefault:!0},{key:"Delete",run:p2,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:p3,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>p5(e,!0),preventDefault:!0},{mac:"Mod-Backspace",run:e=>pX(e,t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}),preventDefault:!0},{mac:"Mod-Delete",run:e=>pX(e,t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}),preventDefault:!0}].concat(fi.map(e=>({mac:e.key,run:e.run,shift:e.shift})))),fs={key:"Tab",run:fn,shift:fr};var fl=function(){};fl.prototype.append=function(e){return e.length?(e=fl.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},fl.prototype.prepend=function(e){return e.length?fl.from(e).append(this):this},fl.prototype.appendInner=function(e){return new fc(this,e)},fl.prototype.slice=function(e,t){return(void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t)?fl.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},fl.prototype.get=function(e){if(!(e<0)&&!(e>=this.length))return this.getInner(e)},fl.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},fl.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},fl.from=function(e){return e instanceof fl?e:e&&e.length?new fa(e):fl.empty};var fa=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(fl);fl.empty=new fa([]);var fc=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;if(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r)||n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;if(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i)||n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))return!1},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(fl);class fh{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){let n,r,i,o;if(0==this.eventCount)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}t&&(r=(n=this.remapping(s,this.items.length)).maps.length);let l=e.tr,a=[],c=[];return this.items.forEach((e,t)=>{if(!e.step){n||(r=(n=this.remapping(s,t+1)).maps.length),r--,c.push(e);return}if(n){c.push(new fu(e.map));let t=e.step.map(n.slice(r)),i;t&&l.maybeStep(t).doc&&(i=l.mapping.maps[l.mapping.maps.length-1],a.push(new fu(i,void 0,void 0,a.length+c.length))),r--,i&&n.appendMap(i,r)}else l.maybeStep(e.step);if(e.selection)return i=n?e.selection.map(n.slice(r)):e.selection,o=new fh(this.items.slice(0,s).append(c.reverse().concat(a)),this.eventCount-1),!1},this.items.length,0),{remaining:o,transform:l,selection:i}}addTransform(e,t,n,r){var i,o;let s,l=[],a=this.eventCount,c=this.items,h=!r&&c.length?c.get(c.length-1):null;for(let n=0;n<e.steps.length;n++){let i=e.steps[n].invert(e.docs[n]),o=new fu(e.mapping.maps[n],i,t),s;(s=h&&h.merge(o))&&(o=s,n?l.pop():c=c.slice(0,c.length-1)),l.push(o),t&&(a++,t=void 0),r||(h=o)}let u=a-n.depth;return u>fp&&(i=c,o=u,i.forEach((e,t)=>{if(e.selection&&0==o--)return s=t,!1}),c=i.slice(s),a-=u),new fh(c.append(l),a)}remapping(e,t){let n=new nC.X9;return this.items.forEach((t,r)=>{let i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,i)},e,t),n}addMaps(e){return 0==this.eventCount?this:new fh(this.items.append(e.map(e=>new fu(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach(e=>{e.selection&&s--},r);let l=t;this.items.forEach(t=>{let r=i.getMirror(--l);if(null==r)return;o=Math.min(o,r);let a=i.maps[r];if(t.step){let o=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(i.slice(l+1,r));c&&s++,n.push(new fu(a,o,c))}else n.push(new fu(a))},r);let a=[];for(let e=t;e<o;e++)a.push(new fu(i.maps[e]));let c=new fh(this.items.slice(0,r).append(a).append(n),s);return c.emptyItemCount()>500&&(c=c.compress(this.items.length-n.length)),c}emptyItemCount(){let e=0;return this.items.forEach(t=>{!t.step&&e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],i=0;return this.items.forEach((o,s)=>{if(s>=e)r.push(o),o.selection&&i++;else if(o.step){let e=o.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let l=o.selection&&o.selection.map(t.slice(n));l&&i++;let a=new fu(s.invert(),e,l),c,h=r.length-1;(c=r.length&&r[h].merge(a))?r[h]=c:r.push(a)}}else o.map&&n--},this.items.length,0),new fh(fl.from(r.reverse()),i)}}fh.empty=new fh(fl.empty,0);class fu{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new fu(t.getMap().invert(),t,this.selection)}}}class fd{constructor(e,t,n,r,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}let fp=20;function ff(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,r,i)=>t.push(r,i));return t}function fm(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}let fg=!1,fy=null;function fv(e){let t=e.plugins;if(fy!=t){fg=!1,fy=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){fg=!0;break}}return fg}let fw=new nx.hs("history"),fb=new nx.hs("closeHistory");function fk(e,t){return(n,r)=>{let i=fw.getState(n);if(!i||0==(e?i.undone:i.done).eventCount)return!1;if(r){let o=function(e,t,n){let r=fv(t),i=fw.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),i,r),a=new fd(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(fw,{redo:n,historyState:a})}(i,n,e);o&&r(t?o.scrollIntoView():o)}return!0}}let fx=fk(!1,!0),fC=fk(!0,!0);fk(!1,!1),fk(!0,!1);var fS=Object.defineProperty,fM=Object.getOwnPropertySymbols,fA=Object.prototype.hasOwnProperty,fT=Object.prototype.propertyIsEnumerable,fO=(e,t,n)=>t in e?fS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function fN(e,t){return Object.assign(e,{meta:((e,t)=>{for(var n in t||(t={}))fA.call(t,n)&&fO(e,n,t[n]);if(fM)for(var n of fM(t))fT.call(t,n)&&fO(e,n,t[n]);return e})({package:"@milkdown/components"},t)}),e}let fI=o2({extensions:[],languages:[],expandIcon:"⬇",searchIcon:"\uD83D\uDD0D",clearSearchIcon:"⌫",searchPlaceholder:"Search language",noResultText:"No result",copyText:"Copy",copyIcon:"\uD83D\uDCCB",onCopy:()=>{},renderLanguage:e=>e,renderPreview:()=>null,previewToggleButton:e=>e?"Edit":"Hide",previewLabel:"Preview",previewLoading:"Loading..."},"codeBlockConfigCtx");fN(fI,{displayName:"Config<code-block>",group:"CodeBlock"});class fE{constructor(e){this.languages=e,this.map={},e.forEach(e=>{e.alias.forEach(t=>{this.map[t]=e})})}getAll(){return this.languages.map(e=>({name:e.name,alias:e.alias}))}load(e){let t=this.map[e.toLowerCase()];return t?t.support?Promise.resolve(t.support):t.load():Promise.resolve(void 0)}}function f_({icon:e,class:t,onClick:n}){return(0,an.h)("span",{class:aN("milkdown-icon",t),onPointerdown:n,ref:t=>{t&&e&&(t.innerHTML=cv.sanitize(e.trim()))}})}f_.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};let fL=(0,an.pM)({props:{copyText:{type:String,required:!0},copyIcon:{type:String,required:!0},onCopy:{type:Function,required:!0},text:{type:String,required:!0}},setup(e){let t=()=>{(function(e){let t,n;return t=this,n=function*(){try{return navigator.clipboard.writeText(e)}catch(o){let t=document.createElement("textarea"),n=document.activeElement;t.value=e,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";let r=document.getSelection(),i=r?r.rangeCount>0&&r.getRangeAt(0):null;document.body.appendChild(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length,document.execCommand("copy"),document.body.removeChild(t),i&&(r.removeAllRanges(),r.addRange(i)),n&&n.focus()}},new Promise((e,r)=>{var i=e=>{try{s(n.next(e))}catch(e){r(e)}},o=e=>{try{s(n.throw(e))}catch(e){r(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(i,o);s((n=n.apply(t,null)).next())})})(e.text).then(()=>e.onCopy(e.text)).catch(console.error)};return()=>(0,an.h)(an.FK,null,(0,an.h)("button",{type:"button",class:"copy-button",onClick:t},(0,an.h)(f_,{icon:e.copyIcon}),e.copyText))}}),fR=(0,an.pM)({props:{language:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},config:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0}},setup({language:e,config:t,setLanguage:n,getAllLanguages:r,getReadOnly:i}){let o=(0,ar.KR)(),s=(0,ar.KR)(!1),l=(0,ar.KR)(),a=(0,ar.KR)(),c=(0,ar.KR)("");(0,an.wB)([s,o,a],()=>{c.value="";let e=o.value,t=a.value;e&&t&&(0,sp.rD)(e,t,{placement:"bottom-start"}).then(({x:e,y:n})=>{Object.assign(t.style,{left:`${e}px`,top:`${n}px`})}).catch(console.error)});let h=e=>{if(e.preventDefault(),e.stopPropagation(),i())return;let t=!s.value;s.value=t,t&&setTimeout(()=>{var e;return null==(e=l.value)?void 0:e.focus()},0)},u=e=>{c.value=e.target.value},d=e=>{"Escape"===e.key&&(c.value="")},p=(0,an.EW)(()=>{var t;if(!s.value)return[];let n=null!=(t=r())?t:[],i=n.find(t=>t.name.toLowerCase()===e.value.toLowerCase()),o=n.filter(e=>{let t=c.value.toLowerCase();return(e.name.toLowerCase().includes(t)||e.alias.some(e=>e.toLowerCase().includes(t)))&&e!==i});return 0===o.length?[]:i?[i,...o]:o}),f=e=>{let t=e.target;if(o.value&&o.value.contains(t))return;let n=a.value,r=o.value;r&&n&&"true"===r.dataset.expanded&&(n.contains(t)||(s.value=!1))};return(0,an.sV)(()=>{window.addEventListener("click",f)}),(0,an.hi)(()=>{window.removeEventListener("click",f)}),()=>(0,an.h)(an.FK,null,(0,an.h)("button",{type:"button",ref:o,class:"language-button",onClick:h,"data-expanded":String(s.value)},e.value||"Text",(0,an.h)("div",{class:"expand-icon"},(0,an.h)(f_,{icon:t.expandIcon}))),(0,an.h)("div",{ref:a,class:"language-picker"},s.value?(0,an.h)("div",{class:"list-wrapper"},(0,an.h)("div",{class:"search-box"},(0,an.h)("div",{class:"search-icon"},(0,an.h)(f_,{icon:t.searchIcon})),(0,an.h)("input",{ref:l,class:"search-input",placeholder:t.searchPlaceholder,value:c.value,onInput:u,onKeydown:d}),(0,an.h)("div",{class:aN("clear-icon",0===c.value.length&&"hidden"),onMousedown:e=>{e.preventDefault(),c.value=""}},(0,an.h)(f_,{icon:t.clearSearchIcon}))),(0,an.h)("ul",{class:"language-list",role:"listbox",onKeydown:e=>{if("Enter"===e.key){let e=document.activeElement;e instanceof HTMLElement&&e.dataset.language&&n(e.dataset.language)}}},p.value.length?p.value.map(r=>(0,an.h)("li",{role:"listitem",tabindex:"0",class:"language-list-item","aria-selected":r.name.toLowerCase()===e.value.toLowerCase(),"data-language":r.name,onClick:()=>{n(r.name),s.value=!1}},t.renderLanguage(r.name,r.name.toLowerCase()===e.value.toLowerCase()))):(0,an.h)("li",{class:"language-list-item no-result"},t.noResultText))):null))}}),fP=(0,an.pM)({props:{text:{type:Object,required:!0},language:{type:Object,required:!0},config:{type:Object,required:!0},previewOnlyMode:{type:Object,required:!0},preview:{type:Object,required:!0}},setup(e){let{previewOnlyMode:t,config:n,preview:r}=e,i=(0,ar.KR)();return(0,an.nT)(()=>{let e=i.value;if(!e)return;for(;e.firstChild;)e.removeChild(e.firstChild);let t=r.value;("string"==typeof t||t instanceof Element)&&(e.innerHTML=cv.sanitize(t))}),()=>r.value?(0,an.h)("div",{class:"preview-panel"},!t.value&&(0,an.h)(an.FK,null,(0,an.h)("div",{class:"preview-divider"}),(0,an.h)("div",{class:"preview-label"},n.previewLabel)),(0,an.h)("div",{ref:i,class:"preview"})):null}}),fD=(0,an.pM)({props:{text:{type:Object,required:!0},selected:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},codemirror:{type:Object,required:!0},language:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0},config:{type:Object,required:!0}},setup(e){var t;let n=null!=(t=e.config.previewOnlyByDefault)?t:e.getReadOnly(),r=(0,ar.KR)(n),i=(0,ar.KR)(),o=(0,ar.KR)(null);(0,an.sV)(()=>{for(var t;null==(t=i.value)?void 0:t.firstChild;)i.value.removeChild(i.value.firstChild);i.value&&i.value.appendChild(e.codemirror.dom)}),(0,an.wB)(()=>[e.text.value,e.language.value],()=>{let t=e.config.renderPreview(e.language.value,e.text.value,e=>o.value=e);t&&(o.value=t),void 0!==t||o.value||(o.value=cv.sanitize(e.config.previewLoading)),null===t&&(o.value=null)},{immediate:!0});let s=()=>{};return()=>{var t;return(0,an.h)(an.FK,null,(0,an.h)("div",{class:"tools"},(0,an.h)(fR,{language:e.language,config:e.config,setLanguage:e.setLanguage,getAllLanguages:e.getAllLanguages,getReadOnly:e.getReadOnly}),(0,an.h)("div",{class:"tools-button-group"},(0,an.h)(fL,{copyIcon:e.config.copyIcon,copyText:e.config.copyText,onCopy:null!=(t=e.config.onCopy)?t:s,text:e.text.value}),o.value?(0,an.h)("button",{class:"preview-toggle-button",onClick:()=>r.value=!r.value},(0,an.h)(f_,{icon:e.config.previewToggleButton(r.value)})):null)),(0,an.h)("div",{ref:i,class:aN("codemirror-host",o.value&&r.value&&"hidden")}),(0,an.h)(fP,{text:e.text,language:e.language,config:e.config,previewOnlyMode:r,preview:o}))}}});class fF{constructor(e,t,n,r,i){this.node=e,this.view=t,this.getPos=n,this.loader=r,this.config=i,this.selected=(0,ar.KR)(!1),this.language=(0,ar.KR)(""),this.text=(0,ar.KR)(""),this.updating=!1,this.languageName="",this.forwardUpdate=e=>{var t;if(this.updating||!this.cm.hasFocus)return;let n=(null!=(t=this.getPos())?t:0)+1,{main:r}=e.state.selection,i=n+r.from,o=n+r.to,s=this.view.state.selection;if(e.docChanged||s.from!==i||s.to!==o){let t=this.view.state.tr;e.changes.iterChanges((e,r,i,o,s)=>{s.length?t.replaceWith(n+e,n+r,this.view.state.schema.text(s.toString())):t.delete(n+e,n+r),n+=o-i-(r-e)}),t.setSelection(nx.U3.create(t.doc,i,o)),this.view.dispatch(t)}},this.createApp=()=>aT(fD,{text:this.text,selected:this.selected,codemirror:this.cm,language:this.language,getAllLanguages:this.getAllLanguages,getReadOnly:()=>!this.view.editable,setLanguage:this.setLanguage,config:this.config}),this.codeMirrorKeymap=()=>{let e=this.view;return[{key:"ArrowUp",run:()=>this.maybeEscape("line",-1)},{key:"ArrowLeft",run:()=>this.maybeEscape("char",-1)},{key:"ArrowDown",run:()=>this.maybeEscape("line",1)},{key:"ArrowRight",run:()=>this.maybeEscape("char",1)},{key:"Mod-Enter",run:()=>!!iO(e.state,e.dispatch)&&(e.focus(),!0)},{key:"Mod-z",run:()=>fx(e.state,e.dispatch)},{key:"Shift-Mod-z",run:()=>fC(e.state,e.dispatch)},{key:"Mod-y",run:()=>fC(e.state,e.dispatch)},{key:"Backspace",run:()=>{var e;let t=this.cm.state.selection.ranges;if(t.length>1)return!1;let n=t[0];if(n&&(!n.empty||n.anchor>0)||this.cm.state.doc.lines>=2)return!1;let r=this.view.state,i=null!=(e=this.getPos())?e:0,o=r.tr.replaceWith(i,i+this.node.nodeSize,r.schema.nodes.paragraph.createChecked({},this.node.content));return o.setSelection(nx.U3.near(o.doc.resolve(i))),this.view.dispatch(o),this.view.focus(),!0}}]},this.maybeEscape=(e,t)=>{var n;let{state:r}=this.cm,i=r.selection.main;if(!i.empty||("line"===e&&(i=r.doc.lineAt(i.head)),t<0?i.from>0:i.to<r.doc.length))return!1;let o=(null!=(n=this.getPos())?n:0)+(t<0?0:this.node.nodeSize),s=nx.U3.near(this.view.state.doc.resolve(o),t),l=this.view.state.tr.setSelection(s).scrollIntoView();return this.view.dispatch(l),this.view.focus(),!0},this.setLanguage=e=>{var t;this.view.dispatch(this.view.state.tr.setNodeAttribute(null!=(t=this.getPos())?t:0,"language",e))},this.getAllLanguages=()=>this.loader.getAll(),this.languageConf=new d2.xx,this.readOnlyConf=new d2.xx,this.cm=new nc.Lz({doc:this.node.textContent,root:this.view.root,extensions:[this.readOnlyConf.of(d2.$t.readOnly.of(!this.view.editable)),(0,nc.VH)(),nc.w4.of(this.codeMirrorKeymap()),this.languageConf.of([]),d2.$t.changeFilter.of(()=>this.view.editable),...i.extensions,nc.Lz.updateListener.of(this.forwardUpdate)]}),this.app=this.createApp(),this.dom=this.createDom(this.app),this.disposeSelectedWatcher=(0,an.nT)(()=>{this.selected.value?this.dom.classList.add("selected"):this.dom.classList.remove("selected")}),this.updateLanguage()}createDom(e){let t=document.createElement("div");return t.className="milkdown-code-block",this.text.value=this.node.textContent,e.mount(t),t}updateLanguage(){let e=this.node.attrs.language;e!==this.languageName&&(this.language.value=e,this.loader.load(null!=e?e:"").then(t=>{t&&(this.cm.dispatch({effects:this.languageConf.reconfigure(t)}),this.languageName=e)}).catch(console.error))}setSelection(e,t){this.cm.dom.isConnected&&(this.cm.focus(),this.updating=!0,this.cm.dispatch({selection:{anchor:e,head:t}}),this.updating=!1)}update(e){if(e.type!==this.node.type)return!1;if(this.updating)return!0;this.node=e,this.text.value=e.textContent,this.updateLanguage(),this.view.editable===this.cm.state.readOnly&&this.cm.dispatch({effects:this.readOnlyConf.reconfigure(d2.$t.readOnly.of(!this.view.editable))});let t=function(e,t){if(e===t)return null;let n=0,r=e.length,i=t.length;for(;n<r&&e.charCodeAt(n)===t.charCodeAt(n);)++n;for(;r>n&&i>n&&e.charCodeAt(r-1)===t.charCodeAt(i-1);)r--,i--;return{from:n,to:r,text:t.slice(n,i)}}(this.cm.state.doc.toString(),e.textContent);return t&&(this.updating=!0,this.cm.dispatch({changes:{from:t.from,to:t.to,insert:t.text},scrollIntoView:!0}),this.updating=!1),!0}selectNode(){this.selected.value=!0,this.cm.focus()}deselectNode(){this.selected.value=!1}stopEvent(){return!0}destroy(){this.app.unmount(),this.cm.destroy(),this.disposeSelectedWatcher()}}let fB=o1(lo.node,e=>{let t=e.get(fI.key),n=new fE(t.languages);return(e,r,i)=>new fF(e,r,i,n,t)});fN(fB,{displayName:"NodeView<code-block>",group:"CodeBlock"});let f$=[fB,fI];function fj(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)!function e(t,n){if("string"==typeof n)t.appendChild(document.createTextNode(n));else if(null==n);else if(null!=n.nodeType)t.appendChild(n);else if(Array.isArray(n))for(var r=0;r<n.length;r++)e(t,n[r]);else throw RangeError("Unsupported child node: "+n)}(e,arguments[t]);return e}let fz="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class fH{constructor(e,t,n=0,r=e.length,i,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=i?e=>i(fz(e)):fz,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return -1;this.bufferPos=0,this.buffer=this.iter.value}return(0,d2.vS)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=(0,d2.MK)(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=(0,d2.Fh)(e);let r=this.normalize(t);if(r.length)for(let e=0,i=n;;e++){let o=r.charCodeAt(e),s=this.match(o,i,this.bufferPos+this.bufferStart);if(e==r.length-1){if(s)return this.value=s,this;break}i==n&&e<t.length&&t.charCodeAt(e)==o&&i++}}}match(e,t,n){let r=null;for(let t=0;t<this.matches.length;t+=2){let i=this.matches[t],o=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?r={from:this.matches[t+1],to:n}:(this.matches[t]++,o=!0)),o||(this.matches.splice(t,2),t-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?r={from:t,to:n}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}"undefined"!=typeof Symbol&&(fH.prototype[Symbol.iterator]=function(){return this});let fq={from:-1,to:-1,match:/.*/.exec("")},fW="gm"+(null==/x/.unicode?"":"u");class fU{constructor(e,t,n,r=0,i=e.length){if(this.text=e,this.to=i,this.curLine="",this.done=!1,this.value=fq,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new fJ(e,t,n,r,i);this.re=new RegExp(t,fW+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=fZ(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=fZ(this.text,r+ +(n==r)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}let fV=new WeakMap;class fK{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=fV.get(e);if(!r||r.from>=n||r.to<=t){let r=new fK(t,e.sliceString(t,n));return fV.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:i,from:o}=r;return o>t&&(i=e.sliceString(t,o)+i,o=t),r.to<n&&(i+=e.sliceString(r.to,n)),fV.set(e,new fK(o,i)),new fK(t,i.slice(t-o,n-o))}}class fJ{constructor(e,t,n,r,i){this.text=e,this.to=i,this.done=!1,this.value=fq,this.matchPos=fZ(e,r),this.re=new RegExp(t,fW+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=fK.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,n=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,n,t)))return this.value={from:e,to:n,match:t},this.matchPos=fZ(this.text,n+ +(e==n)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=fK.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function fZ(e,t){if(t>=e.length)return t;let n=e.lineAt(t),r;for(;t<n.to&&(r=n.text.charCodeAt(t-n.from))>=56320&&r<57344;)t++;return t}function fG(e){let t=fj("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,i=r.doc.lineAt(r.selection.main.head),[,o,s,l,a]=n,c=l?+l.slice(1):0,h=s?+s:i.number;if(s&&a){let e=h/100;o&&(e=e*("-"==o?-1:1)+i.number/r.doc.lines),h=Math.round(r.doc.lines*e)}else s&&o&&(h=h*("-"==o?-1:1)+i.number);let u=r.doc.line(Math.max(1,Math.min(r.doc.lines,h))),d=d2.OF.cursor(u.from+Math.max(0,Math.min(c,u.length)));e.dispatch({effects:[fY.of(!1),nc.Lz.scrollIntoView(d.from,{y:"center"})],selection:d}),e.focus()}return{dom:fj("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:fY.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},fj("label",e.state.phrase("Go to line"),": ",t)," ",fj("button",{class:"cm-button",type:"submit"},e.state.phrase("go")),fj("button",{name:"close",onclick:()=>{e.dispatch({effects:fY.of(!1)}),e.focus()},"aria-label":e.state.phrase("close"),type:"button"},["\xd7"]))}}"undefined"!=typeof Symbol&&(fU.prototype[Symbol.iterator]=fJ.prototype[Symbol.iterator]=function(){return this});let fY=d2.Pe.define(),fX=d2.sU.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(fY)&&(e=n.value);return e},provide:e=>nc.S7.from(e,e=>e?fG:null)}),fQ=nc.Lz.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),f0={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},f1=d2.sj.define({combine:e=>(0,d2.QR)(e,f0,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}),f2=nc.NZ.mark({class:"cm-selectionMatch"}),f5=nc.NZ.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function f3(e,t,n,r){return(0==n||e(t.sliceDoc(n-1,n))!=d2.Je.Word)&&(r==t.doc.length||e(t.sliceDoc(r,r+1))!=d2.Je.Word)}let f4=nc.Z9.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(f1),{state:n}=e,r=n.selection;if(r.ranges.length>1)return nc.NZ.none;let i=r.main,o,s=null;if(i.empty){if(!t.highlightWordAroundCursor)return nc.NZ.none;let e=n.wordAt(i.head);if(!e)return nc.NZ.none;s=n.charCategorizer(i.head),o=n.sliceDoc(e.from,e.to)}else{let e=i.to-i.from;if(e<t.minSelectionLength||e>200)return nc.NZ.none;if(t.wholeWords){var l,a,c;if(o=n.sliceDoc(i.from,i.to),!(f3(s=n.charCategorizer(i.head),n,i.from,i.to)&&(l=s,a=i.from,c=i.to,l(n.sliceDoc(a,a+1))==d2.Je.Word&&l(n.sliceDoc(c-1,c))==d2.Je.Word)))return nc.NZ.none}else if(!(o=n.sliceDoc(i.from,i.to)))return nc.NZ.none}let h=[];for(let r of e.visibleRanges){let e=new fH(n.doc,o,r.from,r.to);for(;!e.next().done;){let{from:r,to:o}=e.value;if((!s||f3(s,n,r,o))&&(i.empty&&r<=i.from&&o>=i.to?h.push(f5.range(r,o)):(r>=i.to||o<=i.from)&&h.push(f2.range(r,o)),h.length>t.maxMatches))return nc.NZ.none}}return nc.NZ.set(h)}},{decorations:e=>e.decorations}),f9=nc.Lz.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),f7=d2.sj.define({combine:e=>(0,d2.QR)(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new mA(e),scrollToMatch:e=>nc.Lz.scrollIntoView(e)})});class f8{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,fW),!0}catch(e){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new mo(this):new mt(this)}getCursor(e,t=0,n){let r=e.doc?e:d2.$t.create({doc:e});return null==n&&(n=r.doc.length),this.regexp?mn(this,r,t,n):me(this,r,t,n)}}class f6{constructor(e){this.spec=e}}function me(e,t,n,r){var i,o;return new fH(t.doc,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?(i=t.doc,o=t.charCategorizer(t.selection.main.head),(e,t,n,r)=>((r>e||r+n.length<t)&&(r=Math.max(0,e-2),n=i.sliceString(r,Math.min(i.length,t+2))),(o(mr(n,e-r))!=d2.Je.Word||o(mi(n,e-r))!=d2.Je.Word)&&(o(mi(n,t-r))!=d2.Je.Word||o(mr(n,t-r))!=d2.Je.Word))):void 0)}class mt extends f6{constructor(e){super(e)}nextMatch(e,t,n){let r=me(this.spec,e,n,e.doc.length).nextOverlapping();if(r.done){let n=Math.min(e.doc.length,t+this.spec.unquoted.length);r=me(this.spec,e,0,n).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==n?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),i=me(this.spec,e,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=n)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=me(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=me(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}function mn(e,t,n,r){var i;return new fU(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(i=t.charCategorizer(t.selection.main.head),(e,t,n)=>!n[0].length||(i(mr(n.input,n.index))!=d2.Je.Word||i(mi(n.input,n.index))!=d2.Je.Word)&&(i(mi(n.input,n.index+n[0].length))!=d2.Je.Word||i(mr(n.input,n.index+n[0].length))!=d2.Je.Word)):void 0},n,r)}function mr(e,t){return e.slice((0,d2.zK)(e,t,!1),t)}function mi(e,t){return e.slice(t,(0,d2.zK)(e,t))}class mo extends f6{nextMatch(e,t,n){let r=mn(this.spec,e,n,e.doc.length).next();return r.done&&(r=mn(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let i=Math.max(t,n-1e4*r),o=mn(this.spec,e,i,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==t||s.from>i+10))return s;if(i==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,n)=>{if("&"==n)return e.match[0];if("$"==n)return"$";for(let t=n.length;t>0;t--){let r=+n.slice(0,t);if(r>0&&r<e.match.length)return e.match[r]+n.slice(t)}return t})}matchAll(e,t){let n=mn(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=mn(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}let ms=d2.Pe.define(),ml=d2.Pe.define(),ma=d2.sU.define({create:e=>new mc(mb(e).create(),null),update(e,t){for(let n of t.effects)n.is(ms)?e=new mc(n.value.create(),e.panel):n.is(ml)&&(e=new mc(e.query,n.value?mw:null));return e},provide:e=>nc.S7.from(e,e=>e.panel)});class mc{constructor(e,t){this.query=e,this.panel=t}}let mh=nc.NZ.mark({class:"cm-searchMatch"}),mu=nc.NZ.mark({class:"cm-searchMatch cm-searchMatch-selected"}),md=nc.Z9.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(ma))}update(e){let t=e.state.field(ma);(t!=e.startState.field(ma)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return nc.NZ.none;let{view:n}=this,r=new d2.vB;for(let t=0,i=n.visibleRanges,o=i.length;t<o;t++){let{from:s,to:l}=i[t];for(;t<o-1&&l>i[t+1].from-500;)l=i[++t].to;e.highlight(n.state,s,l,(e,t)=>{let i=n.state.selection.ranges.some(n=>n.from==e&&n.to==t);r.add(e,t,i?mu:mh)})}return r.finish()}},{decorations:e=>e.decorations});function mp(e){return t=>{let n=t.state.field(ma,!1);return n&&n.query.spec.valid?e(t,n):mC(t)}}let mf=mp((e,{query:t})=>{let{to:n}=e.state.selection.main,r=t.nextMatch(e.state,n,n);if(!r)return!1;let i=d2.OF.single(r.from,r.to),o=e.state.facet(f7);return e.dispatch({selection:i,effects:[mN(e,r),o.scrollToMatch(i.main,e)],userEvent:"select.search"}),mx(e),!0}),mm=mp((e,{query:t})=>{let{state:n}=e,{from:r}=n.selection.main,i=t.prevMatch(n,r,r);if(!i)return!1;let o=d2.OF.single(i.from,i.to),s=e.state.facet(f7);return e.dispatch({selection:o,effects:[mN(e,i),s.scrollToMatch(o.main,e)],userEvent:"select.search"}),mx(e),!0}),mg=mp((e,{query:t})=>{let n=t.matchAll(e.state,1e3);return!!n&&!!n.length&&(e.dispatch({selection:d2.OF.create(n.map(e=>d2.OF.range(e.from,e.to))),userEvent:"select.search.matches"}),!0)}),my=mp((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=t.nextMatch(n,r,r);if(!o)return!1;let s=o,l=[],a,c,h=[];s.from==r&&s.to==i&&(c=n.toText(t.getReplacement(s)),l.push({from:s.from,to:s.to,insert:c}),s=t.nextMatch(n,s.from,s.to),h.push(nc.Lz.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let u=e.state.changes(l);return s&&(a=d2.OF.single(s.from,s.to).map(u),h.push(mN(e,s)),h.push(n.facet(f7).scrollToMatch(a.main,e))),e.dispatch({changes:u,selection:a,effects:h,userEvent:"input.replace"}),!0}),mv=mp((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state,1e9).map(e=>{let{from:n,to:r}=e;return{from:n,to:r,insert:t.getReplacement(e)}});if(!n.length)return!1;let r=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:nc.Lz.announce.of(r),userEvent:"input.replace.all"}),!0});function mw(e){return e.state.facet(f7).createPanel(e)}function mb(e,t){var n,r,i,o,s;let l=e.selection.main,a=l.empty||l.to>l.from+100?"":e.sliceDoc(l.from,l.to);if(t&&!a)return t;let c=e.facet(f7);return new f8({search:(null!=(n=null==t?void 0:t.literal)?n:c.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:null!=(r=null==t?void 0:t.caseSensitive)?r:c.caseSensitive,literal:null!=(i=null==t?void 0:t.literal)?i:c.literal,regexp:null!=(o=null==t?void 0:t.regexp)?o:c.regexp,wholeWord:null!=(s=null==t?void 0:t.wholeWord)?s:c.wholeWord})}function mk(e){let t=(0,nc.ld)(e,mw);return t&&t.dom.querySelector("[main-field]")}function mx(e){let t=mk(e);t&&t==e.root.activeElement&&t.select()}let mC=e=>{let t=e.state.field(ma,!1);if(t&&t.panel){let n=mk(e);if(n&&n!=e.root.activeElement){let r=mb(e.state,t.query.spec);r.valid&&e.dispatch({effects:ms.of(r)}),n.focus(),n.select()}}else e.dispatch({effects:[ml.of(!0),t?ms.of(mb(e.state,t.query.spec)):d2.Pe.appendConfig.of(mE)]});return!0},mS=e=>{let t=e.state.field(ma,!1);if(!t||!t.panel)return!1;let n=(0,nc.ld)(e,mw);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:ml.of(!1)}),!0},mM=[{key:"Mod-f",run:mC,scope:"editor search-panel"},{key:"F3",run:mf,shift:mm,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:mf,shift:mm,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:mS,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let t=new fH(e.doc,e.sliceDoc(r,i));!t.next().done;){if(o.length>1e3)return!1;t.value.from==r&&(s=o.length),o.push(d2.OF.range(t.value.from,t.value.to))}return t(e.update({selection:d2.OF.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:e=>{let t=(0,nc.ld)(e,fG);if(!t){let n=[fY.of(!0)];null==e.state.field(fX,!1)&&n.push(d2.Pe.appendConfig.of([fX,fQ])),e.dispatch({effects:n}),t=(0,nc.ld)(e,fG)}return t&&t.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some(e=>e.from===e.to))return(({state:e,dispatch:t})=>{let{selection:n}=e,r=d2.OF.create(n.ranges.map(t=>e.wordAt(t.head)||d2.OF.cursor(t.head)),n.mainIndex);return!r.eq(n)&&(t(e.update({selection:r})),!0)})({state:e,dispatch:t});let r=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some(t=>e.sliceDoc(t.from,t.to)!=r))return!1;let i=function(e,t){let{main:n,ranges:r}=e.selection,i=e.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let n=!1,i=new fH(e.doc,t,r[r.length-1].to);;)if(i.next(),i.done){if(n)return null;i=new fH(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),n=!0}else{if(n&&r.some(e=>e.from==i.value.from))continue;if(o){let t=e.wordAt(i.value.from);if(!t||t.from!=i.value.from||t.to!=i.value.to)continue}return i.value}}(e,r);return!!i&&(t(e.update({selection:e.selection.addRange(d2.OF.range(i.from,i.to),!1),effects:nc.Lz.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class mA{constructor(e){this.view=e;let t=this.query=e.state.field(ma).query.spec;function n(e,t,n){return fj("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=fj("input",{value:t.search,placeholder:mT(e,"Find"),"aria-label":mT(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=fj("input",{value:t.replace,placeholder:mT(e,"Replace"),"aria-label":mT(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=fj("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=fj("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=fj("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=fj("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",()=>mf(e),[mT(e,"next")]),n("prev",()=>mm(e),[mT(e,"previous")]),n("select",()=>mg(e),[mT(e,"all")]),fj("label",null,[this.caseField,mT(e,"match case")]),fj("label",null,[this.reField,mT(e,"regexp")]),fj("label",null,[this.wordField,mT(e,"by word")]),...e.state.readOnly?[]:[fj("br"),this.replaceField,n("replace",()=>my(e),[mT(e,"replace")]),n("replaceAll",()=>mv(e),[mT(e,"replace all")])],fj("button",{name:"close",onclick:()=>mS(e),"aria-label":mT(e,"close"),type:"button"},["\xd7"])])}commit(){let e=new f8({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:ms.of(e)}))}keydown(e){(0,nc.TS)(this.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?mm:mf)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),my(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(ms)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(f7).top}}function mT(e,t){return e.state.phrase(t)}let mO=/[\s\.,:;?!]/;function mN(e,{from:t,to:n}){let r=e.state.doc.lineAt(t),i=e.state.doc.lineAt(n).to,o=Math.max(r.from,t-30),s=Math.min(i,n+30),l=e.state.sliceDoc(o,s);if(o!=r.from){for(let e=0;e<30;e++)if(!mO.test(l[e+1])&&mO.test(l[e])){l=l.slice(e);break}}if(s!=i){for(let e=l.length-1;e>l.length-30;e--)if(!mO.test(l[e-1])&&mO.test(l[e])){l=l.slice(0,e);break}}return nc.Lz.announce.of(`${e.state.phrase("current match")}. ${l} ${e.state.phrase("on line")} ${r.number}.`)}let mI=nc.Lz.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),mE=[ma,d2.Nb.low(md),mI];var m_=n(3685);class mL{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class mR{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=n.facet(mU).markerFilter;r&&(e=r(e,n));let i=e.slice().sort((e,t)=>e.from-t.from||e.to-t.to),o=new d2.vB,s=[],l=0,a=n.doc.iter(),c=0,h=n.doc.length;for(let e=0;;){let t,n,r=e==i.length?null:i[e];if(!r&&!s.length)break;if(s.length)t=l,n=s.reduce((e,t)=>Math.min(e,t.to),r&&r.from>t?r.from:1e8);else{if((t=r.from)>h)break;n=r.to,s.push(r),e++}for(;e<i.length;){let r=i[e];if(r.from==t&&(r.to>r.from||r.to==t))s.push(r),e++,n=Math.min(r.to,n);else{n=Math.min(r.from,n);break}}n=Math.min(n,h);let u=!1;if(s.some(e=>e.from==t&&(e.to==n||n==h))&&!(u=t==n)&&n-t<10){let e=t-(c+a.value.length);e>0&&(a.next(e),c=t);for(let e=t;;){if(e>=n){u=!0;break}if(!a.lineBreak&&c+a.value.length>e)break;e=c+a.value.length,c+=a.value.length,a.next()}}let d=m0(s);if(u)o.add(t,t,nc.NZ.widget({widget:new mZ(d),diagnostics:s.slice()}));else{let e=s.reduce((e,t)=>t.markClass?e+" "+t.markClass:e,"");o.add(t,n,nc.NZ.mark({class:"cm-lintRange cm-lintRange-"+d+e,diagnostics:s.slice(),inclusiveEnd:s.some(e=>e.to>n)}))}if((l=n)==h)break;for(let e=0;e<s.length;e++)s[e].to<=l&&s.splice(e--,1)}let u=o.finish();return new mR(u,t,mP(u))}}function mP(e,t=null,n=0){let r=null;return e.between(n,1e9,(e,n,{spec:i})=>{if(!(t&&0>i.diagnostics.indexOf(t)))if(r){if(0>i.diagnostics.indexOf(r.diagnostic))return!1;r=new mL(r.from,n,r.diagnostic)}else r=new mL(e,n,t||i.diagnostics[0])}),r}function mD(e,t){let n=t.pos,r=t.end||n,i=e.state.facet(mU).hideOn(e,n,r);if(null!=i)return i;let o=e.startState.doc.lineAt(t.pos);return!!(e.effects.some(e=>e.is(mF))||e.changes.touchesRange(o.from,Math.max(o.to,r)))}let mF=d2.Pe.define(),mB=d2.Pe.define(),m$=d2.Pe.define(),mj=d2.sU.define({create:()=>new mR(nc.NZ.none,null,null),update(e,t){if(t.docChanged&&e.diagnostics.size){let n=e.diagnostics.map(t.changes),r=null,i=e.panel;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);r=mP(n,e.selected.diagnostic,i)||mP(n,null,i)}!n.size&&i&&t.state.facet(mU).autoPanel&&(i=null),e=new mR(n,i,r)}for(let n of t.effects)if(n.is(mF)){let r=t.state.facet(mU).autoPanel?n.value.length?mY.open:null:e.panel;e=mR.init(n.value,r,t.state)}else n.is(mB)?e=new mR(e.diagnostics,n.value?mY.open:null,e.selected):n.is(m$)&&(e=new mR(e.diagnostics,e.panel,n.value));return e},provide:e=>[nc.S7.from(e,e=>e.panel),nc.Lz.decorations.from(e,e=>e.diagnostics)]}),mz=nc.NZ.mark({class:"cm-lintRange cm-lintRange-active"});function mH(e,t){return fj("ul",{class:"cm-tooltip-lint"},t.map(t=>mJ(e,t,!1)))}let mq=e=>{let t=e.state.field(mj,!1);return!!t&&!!t.panel&&(e.dispatch({effects:mB.of(!1)}),!0)},mW=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(mj,!1);t&&t.panel||e.dispatch({effects:function(e,t){return e.field(mj,!1)?t:t.concat(d2.Pe.appendConfig.of(m5))}(e.state,[mB.of(!0)])});let n=(0,nc.ld)(e,mY.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(mj,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return(!!r.value||!!(r=t.diagnostics.iter(0)).value&&(r.from!=n.from||r.to!=n.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}],mU=d2.sj.define({combine:e=>({sources:e.map(e=>e.source).filter(e=>null!=e),...(0,d2.QR)(e.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:mV,tooltipFilter:mV,needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t,hideOn:(e,t)=>e?t?(n,r,i)=>e(n,r,i)||t(n,r,i):e:t,autoPanel:(e,t)=>e||t})})});function mV(e,t){return e?t?(n,r)=>t(e(n,r),r):e:t}function mK(e){let t=[];if(e)t:for(let{name:n}of e){for(let e=0;e<n.length;e++){let r=n[e];if(/[a-zA-Z]/.test(r)&&!t.some(e=>e.toLowerCase()==r.toLowerCase())){t.push(r);continue t}}t.push("")}return t}function mJ(e,t,n){var r;let i=n?mK(t.actions):[];return fj("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},fj("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null==(r=t.actions)?void 0:r.map((n,r)=>{let o=!1,s=r=>{if(r.preventDefault(),o)return;o=!0;let i=mP(e.state.field(mj).diagnostics,t);i&&n.apply(e,i.from,i.to)},{name:l}=n,a=i[r]?l.indexOf(i[r]):-1,c=a<0?l:[l.slice(0,a),fj("u",l.slice(a,a+1)),l.slice(a+1)];return fj("button",{type:"button",class:"cm-diagnosticAction"+(n.markClass?" "+n.markClass:""),onclick:s,onmousedown:s,"aria-label":` Action: ${l}${a<0?"":` (access key "${i[r]})"`}.`},c)}),t.source&&fj("div",{class:"cm-diagnosticSource"},t.source))}class mZ extends nc.xO{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return fj("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class mG{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(0xffffffff*Math.random()).toString(16),this.dom=mJ(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class mY{constructor(e){this.view=e,this.items=[];let t=t=>{if(27==t.keyCode)mq(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65)||!(t.keyCode<=90)||!(this.selectedIndex>=0))return;let{diagnostic:n}=this.items[this.selectedIndex],r=mK(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=mP(this.view.state.field(mj).diagnostics,n);t&&n.actions[i].apply(e,t.from,t.to)}}t.preventDefault()},n=e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)};this.list=fj("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=fj("div",{class:"cm-panel-lint"},this.list,fj("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>mq(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(mj).selected;if(!e)return -1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return -1}update(){let{diagnostics:e,selected:t}=this.view.state.field(mj),n=0,r=!1,i=null,o=new Set;for(e.between(0,this.view.state.doc.length,(e,s,{spec:l})=>{for(let e of l.diagnostics){if(o.has(e))continue;o.add(e);let s=-1,l;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==e){s=t;break}s<0?(l=new mG(this.view,e),this.items.splice(n,0,l),r=!0):(l=this.items[s],s>n&&(this.items.splice(n,s-n),r=!0)),t&&l.diagnostic==t.diagnostic?l.dom.hasAttribute("aria-selected")||(l.dom.setAttribute("aria-selected","true"),i=l):l.dom.hasAttribute("aria-selected")&&l.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new mG(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{let n=t.height/this.list.offsetHeight;e.top<t.top?this.list.scrollTop-=(t.top-e.top)/n:e.bottom>t.bottom&&(this.list.scrollTop+=(e.bottom-t.bottom)/n)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=mP(this.view.state.field(mj).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:m$.of(t)})}static open(e){return new mY(e)}}function mX(e){return function(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}let mQ=nc.Lz.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:mX("#d11")},".cm-lintRange-warning":{backgroundImage:mX("orange")},".cm-lintRange-info":{backgroundImage:mX("#999")},".cm-lintRange-hint":{backgroundImage:mX("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function m0(e){let t="hint",n=1;for(let i of e){var r;let e="error"==(r=i.severity)?4:"warning"==r?3:"info"==r?2:1;e>n&&(n=e,t=i.severity)}return t}nc.wJ;let m1=d2.Pe.define(),m2=d2.sU.define({create:()=>null,update:(e,t)=>(e&&t.docChanged&&(e=mD(t,e)?null:{...e,pos:t.changes.mapPos(e.pos)}),t.effects.reduce((e,t)=>t.is(m1)?t.value:e,e)),provide:e=>nc.DK.from(e)}),m5=[mj,nc.Lz.decorations.compute([mj],e=>{let{selected:t,panel:n}=e.field(mj);return t&&n&&t.from!=t.to?nc.NZ.set([mz.range(t.from,t.to)]):nc.NZ.none}),(0,nc.Ux)(function(e,t,n){let{diagnostics:r}=e.state.field(mj),i,o=-1,s=-1;r.between(t-(n<0),t+ +(n>0),(e,r,{spec:l})=>{if(t>=e&&t<=r&&(e==r||(t>e||n>0)&&(t<r||n<0)))return i=l.diagnostics,o=e,s=r,!1});let l=e.state.facet(mU).tooltipFilter;return(i&&l&&(i=l(i,e.state)),i)?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>({dom:mH(e,i)})}:null},{hideOn:mD}),mQ],m3=d2.sj.define({combine:e=>(0,d2.QR)(e,{hoverTime:300,markerFilter:null,tooltipFilter:null})}),m4=[(0,nc.$K)(),(0,nc.Wu)(),(0,nc.N$)(),function(e={}){return[pi,pr.of(e),nc.Lz.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?ps:"historyRedo"==e.inputType?pl:null;return!!n&&(e.preventDefault(),n(t))}})]}(),(0,no.Lv)(),(0,nc.VH)(),(0,nc.A)(),d2.$t.allowMultipleSelections.of(!0),(0,no.WD)(),(0,no.y9)(no.Zt,{fallback:!0}),(0,no.SG)(),(0,m_.wm)(),(0,m_.yU)(),(0,nc.D4)(),(0,nc.HJ)(),(0,nc.dz)(),[f9,f4],nc.w4.of([...m_.Bc,...fo,...mM,{key:"Mod-z",run:ps,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:pl,preventDefault:!0},{linux:"Ctrl-Shift-z",run:pl,preventDefault:!0},{key:"Mod-u",run:pa,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:pc,preventDefault:!0},...no.f7,...m_.OO,...mW])];function m9(e,t){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])}function m7(e,t){return Math.min(m9(e,[t[0],t[1]]),m9(e,[t[2],t[3]]))}Map.groupBy,Object.entries,Object.groupBy;class m8 extends nx.LN{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return m8.valid(n)?new m8(n):nx.LN.near(n)}content(){return rv.Ji.empty}eq(e){return e instanceof m8&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for GapCursor.fromJSON");return new m8(e.resolve(t.pos))}getBookmark(){return new m6(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0==n){if(r.type.spec.isolating)return!0;continue}for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||ge(e.type))return!0;if(e.inlineContent)return!1}}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||ge(e.type))return!0;if(e.inlineContent)return!1}}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){n:for(;;){if(!n&&m8.valid(e))return e;let r=e.pos,i=null;for(let n=e.depth;;n--){let o=e.node(n);if(t>0?e.indexAfter(n)<o.childCount:e.index(n)>0){i=o.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let s=e.doc.resolve(r);if(m8.valid(s))return s}for(;;){let o=t>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!nx.nh.isSelectable(i)){e=e.doc.resolve(r+i.nodeSize*t),n=!1;continue n}break}i=o,r+=t;let s=e.doc.resolve(r);if(m8.valid(s))return s}return null}}}m8.prototype.visible=!1,m8.findFrom=m8.findGapCursorFrom,nx.LN.jsonID("gapcursor",m8);class m6{constructor(e){this.pos=e}map(e){return new m6(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return m8.valid(t)?new m8(t):nx.LN.near(t)}}function ge(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}let gt=iK({ArrowLeft:gn("horiz",-1),ArrowRight:gn("horiz",1),ArrowUp:gn("vert",-1),ArrowDown:gn("vert",1)});function gn(e,t){let n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,i){let o=e.selection,s=t>0?o.$to:o.$from,l=o.empty;if(o instanceof nx.U3){if(!i.endOfTextblock(n)||0==s.depth)return!1;l=!1,s=e.doc.resolve(t>0?s.after():s.before())}let a=m8.findGapCursorFrom(s,t,l);return!!a&&(r&&r(e.tr.setSelection(new m8(a))),!0)}}function gr(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!m8.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&nx.nh.isSelectable(e.state.doc.nodeAt(i.inside)))&&(e.dispatch(e.state.tr.setSelection(new m8(r))),!0)}function gi(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof m8))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=rv.FK.empty;for(let e=r.length-1;e>=0;e--)i=rv.FK.from(r[e].createAndFill(null,i));let o=e.state.tr.replace(n.pos,n.pos,new rv.Ji(i,0,0));return o.setSelection(nx.U3.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function go(e){if(!(e.selection instanceof m8))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",iJ.zF.create(e.doc,[iJ.NZ.widget(e.selection.head,t,{key:"gapcursor"})])}function gs(e,t){return Object.assign(e,{meta:{package:"@milkdown/plugin-cursor",...t}}),e}let gl=o2(null,"dropIndicatorState");gs(gl,{displayName:"Ctx<dropIndicatorState>"});let ga=o2({width:2,color:!1,class:"milkdown-drop-indicator"},"dropIndicatorConfig");gs(ga,{displayName:"Ctx<dropIndicatorConfig>"});let gc=new nx.hs("MILKDOWN_DROP_INDICATOR_DOM"),gh=oQ(e=>new nx.k_({key:gc,view:t=>{let n=e.get(ga.key),r=document.createElement("div");Object.assign(r.style,{position:"fixed",pointerEvents:"none",display:"none",backgroundColor:n.color,top:"0",left:"0"}),r.classList.add(n.class),r.classList.add("milkdown-drop-indicator"),t.dom.parentNode?.appendChild(r);let i=e.use(gl.key),o=e=>{!function(e,t,n){let r,i;if(!t)return Object.assign(e.style,{display:"none"});let{line:o}=t,{width:s}=n,{p1:{x:l,y:a},p2:{x:c,y:h}}=o,u=a,d=l;a===h?(r=c-l,i=s,u-=s/2):(r=s,i=h-a,d-=s/2),u=Math.round(u),d=Math.round(d),Object.assign(e.style,{display:"block",width:`${r}px`,height:`${i}px`,transform:`translate(${d}px, ${u}px)`})}(r,e,n)};return i.on(o),{destroy:()=>{i.off(o),r.remove()}}}}));gs(gh,{displayName:"Prose<dropIndicatorDOM>"});let gu=oQ(e=>(function(e){let t;return new nx.k_({key:new nx.hs("prosekit-drop-indicator"),view:n=>{var r;let i,o,s,l,a;return r=e.onDrag,a=[],function(e,t,n){let r,i,o,s=e.dom,l=!1,a=()=>{r&&clearTimeout(r),l=!1,r=setTimeout(()=>{l||n.onHide?.()},30)},c=r=>{l=!0;let{clientX:s,clientY:c}=r;if(i===s&&o===c)return;i=s,o=c;let h=t([s,c],r);if(!h)return void a();{let[t,[r,i,o,s]]=h;n.onShow?.({view:e,pos:t,line:{p1:{x:r,y:i},p2:{x:o,y:s}}})}};return s.addEventListener("dragover",c),s.addEventListener("dragend",a),s.addEventListener("drop",a),s.addEventListener("dragleave",a),{destroy:()=>{s.removeEventListener("dragover",c),s.removeEventListener("dragend",a),s.removeEventListener("drop",a),s.removeEventListener("dragleave",a)}}}(n,t=(e,t)=>{var c,h;return s&&(c=s,h=e,c[0]===h[0]&&c[1]===h[1])?l:(s=e,l=((e,t)=>{if(!n.editable||n.isDestroyed)return;let s=(()=>{let e=n.dom.getBoundingClientRect(),t=n.state.doc;return a&&i&&o&&e.width===o.width&&e.height===o.height&&e.x===o.x&&e.y===o.y&&i.eq(t)?a:(o=e,i=t,a=function(e){let t=[[-1,e.state.doc]],n=[];for(;t.length>0;){let[i,o]=t.pop();if(i>=0){var r;let t=e.nodeDOM(i);if(t&&1===(r=t).nodeType&&"http://www.w3.org/1999/xhtml"===r.namespaceURI){let{top:e,bottom:r,left:s,right:l}=t.getBoundingClientRect();n.push([i,[s,e,l,e]],[i+o.nodeSize,[s,r,l,r]])}}if(o.isBlock&&!o.isTextblock){let e=i+1;for(let n of o.children)t.push([e,n]),e+=n.nodeSize}}return n}(n))})();s.sort((t,n)=>{let[r,i]=t,[o,s]=n;return m7(e,i)-m7(e,s)||r-o});let l=(s=s.slice(0,8)).find(e=>r?.({view:n,pos:e[0],event:t})!==!1);if(!(l&&function(e,t){let n=e.dragging;if(!n)return;let{move:r}=n;if(!r)return;let i=e.state.selection;if(!(i instanceof nx.nh))return;let{from:o,to:s}=i;return o<=t&&t<=s}(n,l[0])))return l})(e,t))},e)},props:{handleDrop(e,n,r,i){if(!t)return!1;let o=t([n.clientX,n.clientY],n);if(!o)return!1;n.preventDefault();let s=o[0],l=e.state.tr;if(i){let{node:t}=e.dragging||{};t?t.replace(l):l.deleteSelection()}let a=l.mapping.map(s),c=0==r.openStart&&0==r.openEnd&&1==r.content.childCount,h=l.doc;if(c?l.replaceRangeWith(a,a,r.content.firstChild):l.replaceRange(a,a,r),l.doc.eq(h))return!0;let u=l.doc.resolve(a);if(c&&nx.nh.isSelectable(r.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(r.content.firstChild))l.setSelection(new nx.nh(u));else{var d,p,f;let t=l.mapping.map(s);l.mapping.maps[l.mapping.maps.length-1].forEach((e,n,r,i)=>t=i),l.setSelection((d=e,p=u,f=l.doc.resolve(t),d.someProp("createSelectionBetween",e=>e(d,p,f))||nx.U3.between(p,f,void 0)))}return e.focus(),e.dispatch(l.setMeta("uiEvent","drop")),!0}}})})({onShow:t=>{e.set(gl.key,t)},onHide:()=>{e.set(gl.key,null)},onDrag:()=>!0}));gs(gu,{displayName:"Prose<dropIndicator>"});let gd=oQ(()=>new nx.k_({props:{decorations:go,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&m8.valid(n)?new m8(n):null,handleClick:gr,handleKeyDown:gt,handleDOMEvents:{beforeinput:gi}}}));gs(gd,{displayName:"Prose<gapCursor>"});let gp=[gd,ga,gl,gh,gu].flat();var gf=new nx.hs("prosemirror-virtual-cursor");function gm(e){let t=e.index(),n=e.parent.maybeChild(t),r=e.textOffset?n:null;return!r&&t>0&&(r=e.parent.maybeChild(t-1)),[null==r?void 0:r.marks,null==n?void 0:n.marks]}function gg(e){return e&&"object"==typeof e&&"$cursor"in e}var gy=Object.defineProperty,gv=Object.getOwnPropertySymbols,gw=Object.prototype.hasOwnProperty,gb=Object.prototype.propertyIsEnumerable,gk=(e,t,n)=>t in e?gy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function gx(e,t){return Object.assign(e,{meta:((e,t)=>{for(var n in t||(t={}))gw.call(t,n)&&gk(e,n,t[n]);if(gv)for(var n of gv(t))gb.call(t,n)&&gk(e,n,t[n]);return e})({package:"@milkdown/components"},t)}),e}let gC=o2({imageIcon:"\uD83C\uDF0C",uploadButton:"Upload",confirmButton:"⏎",uploadPlaceholderText:"/Paste",onUpload:e=>Promise.resolve(URL.createObjectURL(e))},"inlineImageConfigCtx");function gS({icon:e,class:t,onClick:n}){return(0,an.h)("span",{class:aN("milkdown-icon",t),onPointerdown:n,ref:t=>{t&&e&&(t.innerHTML=cv.sanitize(e.trim()))}})}gx(gC,{displayName:"Config<image-inline>",group:"ImageInline"}),gS.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};let gM=oZ("abcdefg",8),gA=(0,an.pM)({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:e,src:t,setLink:n,onUpload:r,imageIcon:i,uploadButton:o,confirmButton:s,uploadPlaceholderText:l,className:a}){var c,h;let u=(0,ar.KR)(!1),d=(0,ar.KR)(),p=(0,ar.KR)(null!=(c=t.value)?c:""),f=(0,ar.KR)(gM()),m=(0,ar.KR)((null==(h=t.value)?void 0:h.length)!==0),g=e=>{let t=e.target.value;m.value=0!==t.length,p.value=t},y=e=>{var t,r;"Enter"===e.key&&n(null!=(r=null==(t=d.value)?void 0:t.value)?r:"")},v=e=>{var t;let i=null==(t=e.target.files)?void 0:t[0];i&&r(i).then(e=>{e&&(n(e),m.value=!0)}).catch(e=>{console.error("An error occurred while uploading image"),console.error(e)})};return()=>(0,an.h)("div",{class:aN("image-edit",a)},(0,an.h)(gS,{icon:i,class:"image-icon"}),(0,an.h)("div",{class:aN("link-importer",u.value&&"focus")},(0,an.h)("input",{ref:d,draggable:"true",onDragstart:e=>{e.preventDefault(),e.stopPropagation()},disabled:e.value,class:"link-input-area",value:p.value,onInput:g,onKeydown:y,onFocus:()=>u.value=!0,onBlur:()=>u.value=!1}),!m.value&&(0,an.h)("div",{class:"placeholder"},(0,an.h)("input",{disabled:e.value,class:"hidden",id:f.value,type:"file",accept:"image/*",onChange:v}),(0,an.h)("label",{class:"uploader",for:f.value},(0,an.h)(gS,{icon:o})),(0,an.h)("span",{class:"text",onClick:()=>{var e;return null==(e=d.value)?void 0:e.focus()}},l))),p.value&&(0,an.h)("div",{class:"confirm",onClick:()=>{var e,t;n(null!=(t=null==(e=d.value)?void 0:e.value)?t:"")}},(0,an.h)(gS,{icon:s})))}}),gT=(0,an.pM)({props:{src:{type:Object,required:!0},alt:{type:Object,required:!0},title:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(e){let{src:t,alt:n,title:r}=e;return()=>{var i;return(null==(i=t.value)?void 0:i.length)?(0,an.h)("img",{class:"image-inline",src:t.value,alt:n.value,title:r.value}):(0,an.h)(gA,{src:e.src,selected:e.selected,readonly:e.readonly,setLink:t=>e.setAttr("src",t),imageIcon:e.config.imageIcon,uploadButton:e.config.uploadButton,confirmButton:e.config.confirmButton,uploadPlaceholderText:e.config.uploadPlaceholderText,onUpload:e.config.onUpload,className:"empty-image-inline"})}}}),gO=o1(lh.node,e=>(t,n,r)=>{let i=(0,ar.KR)(t.attrs.src),o=(0,ar.KR)(t.attrs.alt),s=(0,ar.KR)(t.attrs.title),l=(0,ar.KR)(!1),a=(0,ar.KR)(!n.editable),c=e.get(gC.key),h=aT(gT,{src:i,alt:o,title:s,selected:l,readonly:a,setAttr:(e,t)=>{if(!n.editable)return;let i=r();null!=i&&n.dispatch(n.state.tr.setNodeAttribute(i,e,"src"===e?cv.sanitize(t):t))},config:c}),u=document.createElement("span");u.className="milkdown-image-inline";let d=(0,an.nT)(()=>{l.value?u.classList.add("selected"):u.classList.remove("selected")}),p=c.proxyDomURL,f=e=>{if(p){let t=p(e.attrs.src);"string"==typeof t?i.value=t:t.then(e=>{i.value=e}).catch(console.error)}else i.value=e.attrs.src;o.value=e.attrs.alt,s.value=e.attrs.title};return f(t),h.mount(u),{dom:u,update:e=>e.type===t.type&&(f(e),!0),stopEvent:e=>e.target instanceof HTMLInputElement,selectNode:()=>{l.value=!0},deselectNode:()=>{l.value=!1},destroy:()=>{d(),h.unmount(),u.remove()}}});gx(gO,{displayName:"NodeView<image-inline>",group:"ImageInline"});let gN=[gC,gO];var gI=n(84739);class gE{constructor(e){this.#J=!1,this.onShow=()=>{},this.onHide=()=>{},this.#ei=(e,t)=>{let{state:n,composing:r}=e,{selection:i,doc:o}=n,{ranges:s}=i,l=Math.min(...s.map(e=>e.$from.pos)),a=Math.max(...s.map(e=>e.$to.pos)),c=t&&t.doc.eq(o)&&t.selection.eq(i);if(this.#J||((this.#er??e.dom.parentElement??document.body).appendChild(this.element),this.#J=!0),!r&&!c){if(!this.#eo(e,t))return void this.hide();(0,sp.rD)({getBoundingClientRect:()=>rr(e,l,a)},this.element,{placement:this.#en.placement??"top",middleware:[(0,sp.UU)(),(0,sp.cY)(this.#es),(0,sp.BN)(this.#eu),...this.#et]}).then(({x:e,y:t})=>{Object.assign(this.element.style,{left:`${e}px`,top:`${t}px`})}).catch(console.error),this.show()}},this.update=(e,t)=>{this.#el(e,t)},this.destroy=()=>{this.#el.cancel()},this.show=e=>{this.element.dataset.show="true",e&&(0,sp.rD)(e,this.element,{placement:"top",middleware:[(0,sp.UU)(),(0,sp.cY)(this.#es),(0,sp.BN)(this.#eu),...this.#et],...this.#en}).then(({x:e,y:t})=>{Object.assign(this.element.style,{left:`${e}px`,top:`${t}px`})}).catch(console.error),this.onShow()},this.hide=()=>{"false"!==this.element.dataset.show&&(this.element.dataset.show="false",this.onHide())},this.element=e.content,this.#ea=e.debounce??200,this.#eo=e.shouldShow??this.#ec,this.#es=e.offset,this.#eu=e.shift,this.#et=e.middleware??[],this.#en=e.floatingUIOptions??{},this.#er=e.root,this.element.dataset.show="false",this.#el=sd(this.#ei,this.#ea)}#ea;#eo;#et;#en;#er;#J;#es;#eu;#el;#ei;#ec(e){let{doc:t,selection:n}=e.state,{empty:r,from:i,to:o}=n,s=!t.textBetween(i,o).length&&e.state.selection instanceof nx.U3,l=this.element.contains(document.activeElement),a=!e.hasFocus()&&!l,c=!e.editable;return!a&&!r&&!s&&!c}}function g_(e){let t=o2({},`${e}_TOOLTIP_SPEC`),n=oQ(n=>{let r=n.get(t.key);return new nx.k_({key:new nx.hs(`${e}_TOOLTIP`),...r})}),r=[t,n];return r.key=t.key,r.pluginKey=n.key,t.meta={package:"@milkdown/plugin-tooltip",displayName:`Ctx<tooltipSpec>|${e}`},n.meta={package:"@milkdown/plugin-tooltip",displayName:`Prose<tooltip>|${e}`},r}let gL={tokenize:function(e,t,n){let r=this,i=r.events[r.events.length-1],o=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,s=0;return function(t){return e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),function t(r){return 36===r?(e.consume(r),s++,t):s<2?n(r):(e.exit("mathFlowFenceSequence"),(0,uV.N)(e,l,"whitespace")(r))}(t)};function l(t){return null===t||(0,hX.HP)(t)?a(t):(e.enter("mathFlowFenceMeta"),e.enter("chunkString",{contentType:"string"}),function t(r){return null===r||(0,hX.HP)(r)?(e.exit("chunkString"),e.exit("mathFlowFenceMeta"),a(r)):36===r?n(r):(e.consume(r),t)}(t))}function a(n){return(e.exit("mathFlowFence"),r.interrupt)?t(n):e.attempt(gR,c,d)(n)}function c(t){return e.attempt({tokenize:p,partial:!0},d,h)(t)}function h(t){return(o?(0,uV.N)(e,u,"linePrefix",o+1):u)(t)}function u(t){return null===t?d(t):(0,hX.HP)(t)?e.attempt(gR,c,d)(t):(e.enter("mathFlowValue"),function t(n){return null===n||(0,hX.HP)(n)?(e.exit("mathFlowValue"),u(n)):(e.consume(n),t)}(t))}function d(n){return e.exit("mathFlow"),t(n)}function p(e,t,n){let i=0;return(0,uV.N)(e,function(t){return e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),function t(r){return 36===r?(i++,e.consume(r),t):i<s?n(r):(e.exit("mathFlowFenceSequence"),(0,uV.N)(e,o,"whitespace")(r))}(t)},"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function o(r){return null===r||(0,hX.HP)(r)?(e.exit("mathFlowFence"),t(r)):n(r)}}},concrete:!0,name:"mathFlow"},gR={tokenize:function(e,t,n){let r=this;return function(n){return null===n?t(n):(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),i)};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0};function gP(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[3][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type)){for(t=i;++t<r;)if("mathTextData"===e[t][1].type){e[r][1].type="mathTextPadding",e[i][1].type="mathTextPadding",i+=2,r-=2;break}}for(t=i-1,r++;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):(t===r||"lineEnding"===e[t][1].type)&&(e[n][1].type="mathTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e}function gD(e){return 36!==e||"characterEscape"===this.events[this.events.length-1][1].type}let gF={};function gB(e){let t,n=e||gF,r=this.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),s=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push({flow:{36:gL},text:{36:(null==(t=(n||{}).singleDollarTextMath)&&(t=!0),{tokenize:function(e,n,r){let i,o,s=0;return function(n){return e.enter("mathText"),e.enter("mathTextSequence"),function n(i){return 36===i?(e.consume(i),s++,n):s<2&&!t?r(i):(e.exit("mathTextSequence"),l(i))}(n)};function l(t){return null===t?r(t):36===t?(o=e.enter("mathTextSequence"),i=0,function t(r){return 36===r?(e.consume(r),i++,t):i===s?(e.exit("mathTextSequence"),e.exit("mathText"),n(r)):(o.type="mathTextData",a(r))}(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),l):(0,hX.HP)(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l):(e.enter("mathTextData"),a(t))}function a(t){return null===t||32===t||36===t||(0,hX.HP)(t)?(e.exit("mathTextData"),l(t)):(e.consume(t),a)}},resolve:gP,previous:gD,name:"mathText"})}}),o.push(function(){return{enter:{mathFlow:function(e){this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[{type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]}]}},e)},mathFlowFenceMeta:function(){this.buffer()},mathText:function(e){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},e),this.buffer()}},exit:{mathFlow:function(e){let t=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),n=this.stack[this.stack.length-1];(0,hY.ok)("math"===n.type),this.exit(e),n.value=t;let r=n.data.hChildren[0];(0,hY.ok)("element"===r.type),(0,hY.ok)("code"===r.tagName),r.children.push({type:"text",value:t}),this.data.mathFlowInside=void 0},mathFlowFence:function(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)},mathFlowFenceMeta:function(){let e=this.resume(),t=this.stack[this.stack.length-1];(0,hY.ok)("math"===t.type),t.meta=e},mathFlowValue:e,mathText:function(e){let t=this.resume(),n=this.stack[this.stack.length-1];(0,hY.ok)("inlineMath"===n.type),this.exit(e),n.value=t,n.data.hChildren.push({type:"text",value:t})},mathTextData:e}};function e(e){this.config.enter.data.call(this,e),this.config.exit.data.call(this,e)}}()),s.push(function(e){let t=(e||{}).singleDollarTextMath;return null==t&&(t=!0),n.peek=function(){return"$"},{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:"\n",inConstruct:"mathFlowMeta"},{character:"$",after:t?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:function(e,t,n,r){let i=e.value||"",o=n.createTracker(r),s="$".repeat(Math.max(rA(i,"$")+1,2)),l=n.enter("mathFlow"),a=o.move(s);if(e.meta){let t=n.enter("mathFlowMeta");a+=o.move(n.safe(e.meta,{after:"\n",before:a,encode:["$"],...o.current()})),t()}return a+=o.move("\n"),i&&(a+=o.move(i+"\n")),a+=o.move(s),l(),a},inlineMath:n}};function n(e,n,r){let i=e.value||"",o=1;for(!t&&o++;RegExp("(^|[^$])"+"\\$".repeat(o)+"([^$]|$)").test(i);)o++;let s="$".repeat(o);/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^\$|\$$/.test(i))&&(i=" "+i+" ");let l=-1;for(;++l<r.unsafe.length;){let e,t=r.unsafe[l];if(!t.atBreak)continue;let n=r.compilePattern(t);for(;e=n.exec(i);){let t=e.index;10===i.codePointAt(t)&&13===i.codePointAt(t-1)&&t--,i=i.slice(0,t)+" "+i.slice(e.index+1)}}return s+i+s}}(n))}var g$=Object.defineProperty,gj=Object.getOwnPropertySymbols,gz=Object.prototype.hasOwnProperty,gH=Object.prototype.propertyIsEnumerable,gq=(e,t,n)=>t in e?g$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function gW(e,t){return Object.assign(e,{meta:((e,t)=>{for(var n in t||(t={}))gz.call(t,n)&&gq(e,n,t[n]);if(gj)for(var n of gj(t))gH.call(t,n)&&gq(e,n,t[n]);return e})({package:"@milkdown/components"},t)}),e}var gU=Object.defineProperty,gV=Object.getOwnPropertySymbols,gK=Object.prototype.hasOwnProperty,gJ=Object.prototype.propertyIsEnumerable,gZ=(e,t,n)=>t in e?gU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gG=(e,t)=>{for(var n in t||(t={}))gK.call(t,n)&&gZ(e,n,t[n]);if(gV)for(var n of gV(t))gJ.call(t,n)&&gZ(e,n,t[n]);return e};let gY=o2(gG({},{mode:"preview"}),"linkTooltipStateCtx");gW(gY,{displayName:"State<link-tooltip>",group:"LinkTooltip"});let gX=o2(gG({},{addLink:()=>{},editLink:()=>{},removeLink:()=>{}}),"linkTooltipAPICtx");gW(gY,{displayName:"API<link-tooltip>",group:"LinkTooltip"});let gQ=o2(gG({},{linkIcon:"\uD83D\uDD17",editButton:"✎",removeButton:"⌫",confirmButton:"Confirm ⏎",onCopyLink:()=>{},inputPlaceholder:"Paste link..."}),"linkTooltipConfigCtx");gW(gY,{displayName:"Config<link-tooltip>",group:"LinkTooltip"});let g0=oG("ToggleLink",e=>()=>t=>{let{doc:n,selection:r}=t,i=sU.type(e);return n.rangeHasMark(r.from,r.to,i)?e.get(gX.key).removeLink(r.from,r.to):e.get(gX.key).addLink(r.from,r.to),!0}),g1=g_("LINK_PREVIEW");gW(g1[0],{displayName:"PreviewTooltipSpec<link-tooltip>",group:"LinkTooltip"}),gW(g1[1],{displayName:"PreviewTooltipPlugin<link-tooltip>",group:"LinkTooltip"});let g2=g_("LINK_EDIT");function g5({icon:e,class:t,onClick:n}){return(0,an.h)("span",{class:aN("milkdown-icon",t),onPointerdown:n,ref:t=>{t&&e&&(t.innerHTML=cv.sanitize(e.trim()))}})}gW(g2[0],{displayName:"EditTooltipSpec<link-tooltip>",group:"LinkTooltip"}),gW(g2[1],{displayName:"EditTooltipPlugin<link-tooltip>",group:"LinkTooltip"}),g5.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};let g3=(0,an.pM)({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onConfirm:{type:Function,required:!0},onCancel:{type:Function,required:!0}},setup({config:e,src:t,onConfirm:n,onCancel:r}){let i=(0,ar.KR)(t);(0,an.wB)(t,e=>{i.value=e});let o=()=>{n(i.value)},s=e=>{e.stopPropagation(),"Enter"===e.key&&(e.preventDefault(),o()),"Escape"===e.key&&(e.preventDefault(),r())};return()=>(0,an.h)("div",{class:"link-edit"},(0,an.h)("input",{class:"input-area",placeholder:e.value.inputPlaceholder,onKeydown:s,onInput:e=>{i.value=e.target.value},value:i.value}),i.value?(0,an.h)(g5,{class:"button confirm",icon:e.value.confirmButton,onClick:o}):null)}});var g4=Object.defineProperty,g9=Object.defineProperties,g7=Object.getOwnPropertyDescriptors,g8=Object.getOwnPropertySymbols,g6=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,yt=e=>{throw TypeError(e)},yn=(e,t,n)=>t in e?g4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yr=(e,t)=>{for(var n in t||(t={}))g6.call(t,n)&&yn(e,n,t[n]);if(g8)for(var n of g8(t))ye.call(t,n)&&yn(e,n,t[n]);return e},yi=(e,t)=>g9(e,g7(t)),yo=(e,t,n)=>t.has(e)||yt("Cannot "+n),ys=(e,t,n)=>(yo(e,t,"read from private field"),n?n.call(e):t.get(e)),yl=(e,t,n)=>t.has(e)?yt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ya=(e,t,n,r)=>(yo(e,t,"write to private field"),t.set(e,n),n);let yc={from:-1,to:-1,mark:null};class yh{constructor(e,t){this.ctx=e,yl(this,_),yl(this,L),yl(this,R,yr({},yc)),yl(this,P),yl(this,D),yl(this,F,(0,ar.KR)("")),yl(this,B,()=>{ys(this,L).hide(),this.ctx.update(gY.key,e=>yi(yr({},e),{mode:"preview"})),ya(this,R,yr({},yc))}),yl(this,$,e=>{let t=this.ctx.get(iY),{from:n,to:r,mark:i}=ys(this,R),o=sU.type(this.ctx),s=cv.sanitize(e);if(i&&i.attrs.href===s)return void ys(this,B).call(this);let l=t.state.tr;i&&l.removeMark(n,r,i),l.addMark(n,r,o.create({href:s})),t.dispatch(l),ys(this,B).call(this)}),yl(this,j,(e,t,n)=>{let r=this.ctx.get(gQ.key);ys(this,D).value=r,ys(this,F).value=e,this.ctx.update(gY.key,e=>yi(yr({},e),{mode:"edit"}));let i=this.ctx.get(iY);i.dispatch(i.state.tr.setSelection(nx.U3.create(i.state.doc,t,n))),ys(this,L).show({getBoundingClientRect:()=>rr(i,t,n)}),requestAnimationFrame(()=>{var e;null==(e=ys(this,_).querySelector("input"))||e.focus()})}),this.update=e=>{let{state:t}=e,{selection:n}=t;if(!(n instanceof nx.U3))return;let{from:r,to:i}=n;(r!==ys(this,R).from||i!==ys(this,R).to)&&ys(this,B).call(this)},this.destroy=()=>{ys(this,P).unmount(),ys(this,L).destroy(),ys(this,_).remove()},this.addLink=(e,t)=>{ya(this,R,{from:e,to:t,mark:null}),ys(this,j).call(this,"",e,t)},this.editLink=(e,t,n)=>{ya(this,R,{from:t,to:n,mark:e}),ys(this,j).call(this,e.attrs.href,t,n)},this.removeLink=(e,t)=>{let n=this.ctx.get(iY),r=n.state.tr;r.removeMark(e,t,sU.type(this.ctx)),n.dispatch(r),ys(this,B).call(this)},ya(this,D,(0,ar.KR)(this.ctx.get(gQ.key)));let n=document.createElement("div");n.className="milkdown-link-edit";let r=aT(g3,{config:ys(this,D),src:ys(this,F),onConfirm:ys(this,$),onCancel:ys(this,B)});r.mount(n),ya(this,P,r),ya(this,_,n),ya(this,L,new gE({content:n,debounce:0,shouldShow:()=>!1})),ys(this,L).onHide=()=>{requestAnimationFrame(()=>{t.dom.focus({preventScroll:!0})})},ys(this,L).update(t)}}_=new WeakMap,L=new WeakMap,R=new WeakMap,P=new WeakMap,D=new WeakMap,F=new WeakMap,B=new WeakMap,$=new WeakMap,j=new WeakMap;var yu=Object.defineProperty,yd=Object.defineProperties,yp=Object.getOwnPropertyDescriptors,yf=Object.getOwnPropertySymbols,ym=Object.prototype.hasOwnProperty,yg=Object.prototype.propertyIsEnumerable,yy=(e,t,n)=>t in e?yu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;let yv=(0,an.pM)({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onEdit:{type:Object,required:!0},onRemove:{type:Object,required:!0}},setup({config:e,src:t,onEdit:n,onRemove:r}){let i=e=>{e.preventDefault(),e.stopPropagation(),n.value()},o=e=>{e.preventDefault(),e.stopPropagation(),r.value()},s=n=>{n.preventDefault();let r=t.value;navigator.clipboard&&r&&navigator.clipboard.writeText(r).then(()=>{e.value.onCopyLink(r)}).catch(e=>console.error(e))};return()=>(0,an.h)("div",{class:"link-preview"},(0,an.h)(g5,{class:"button link-icon",icon:e.value.linkIcon,onClick:s}),(0,an.h)("a",{href:t.value,target:"_blank",class:"link-display"},t.value),(0,an.h)(g5,{class:"button link-edit-button",icon:e.value.editButton,onClick:i}),(0,an.h)(g5,{class:"button link-remove-button",icon:e.value.removeButton,onClick:o}))}});var yw=e=>{throw TypeError(e)},yb=(e,t,n)=>t.has(e)||yw("Cannot "+n),yk=(e,t,n)=>(yb(e,t,"read from private field"),n?n.call(e):t.get(e)),yx=(e,t,n)=>t.has(e)?yw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),yC=(e,t,n,r)=>(yb(e,t,"write to private field"),t.set(e,n),n);class yS{constructor(e,t){this.ctx=e,yx(this,z),yx(this,H),yx(this,q,this.ctx.use(gY.key)),yx(this,W),yx(this,U,(0,ar.KR)("")),yx(this,V,(0,ar.KR)(()=>{})),yx(this,K,(0,ar.KR)(()=>{})),yx(this,J),yx(this,Z,!1),yx(this,G,({mode:e})=>{"edit"===e&&yk(this,Q).call(this)}),yx(this,Y,()=>{yC(this,Z,!0)}),yx(this,X,()=>{yC(this,Z,!1)}),yx(this,Q,()=>{yk(this,H).hide(),yk(this,H).element.removeEventListener("mouseenter",yk(this,Y)),yk(this,H).element.removeEventListener("mouseleave",yk(this,X))}),this.show=(e,t,n,r)=>{yk(this,W).value=this.ctx.get(gQ.key),yk(this,U).value=e.attrs.href,yk(this,V).value=()=>{this.ctx.get(gX.key).editLink(e,t,n)},yk(this,K).value=()=>{this.ctx.get(gX.key).removeLink(t,n),yk(this,Q).call(this)},yk(this,H).show({getBoundingClientRect:()=>r}),yk(this,H).element.addEventListener("mouseenter",yk(this,Y)),yk(this,H).element.addEventListener("mouseleave",yk(this,X))},this.hide=()=>{yk(this,Z)||yk(this,Q).call(this)},this.update=()=>{},this.destroy=()=>{yk(this,J).unmount(),yk(this,q).off(yk(this,G)),yk(this,H).destroy(),yk(this,z).remove()},yC(this,W,(0,ar.KR)(this.ctx.get(gQ.key))),yC(this,J,aT(yv,{config:yk(this,W),src:yk(this,U),onEdit:yk(this,V),onRemove:yk(this,K)})),yC(this,z,document.createElement("div")),yk(this,z).className="milkdown-link-preview",yk(this,J).mount(yk(this,z)),yC(this,H,new gE({debounce:0,content:yk(this,z),shouldShow:()=>!1})),yk(this,H).update(t),yC(this,q,e.use(gY.key)),yk(this,q).on(yk(this,G))}}function yM(e){let t,n,r=su((n,r)=>{if(!t||!n.hasFocus()||"edit"===e.get(gY.key).mode)return;let i=function(e,t,n){let r=t.posAtCoords({left:n.clientX,top:n.clientY});if(!r)return;let{pos:i}=r,o=t.state.doc.nodeAt(i);if(!o)return;let s=o.marks.find(t=>t.type===sU.mark.type(e));if(s&&g1.pluginKey())return{show:!0,pos:i,node:o,mark:s}}(e,n,r);if(i){var o,s,l,a,c;let e,r=n.state.doc.resolve(i.pos),h=(o=i.mark,s=i.node,l=n.state.doc,a=r.before(),c=r.after(),e={start:-1,end:-1},l.nodesBetween(a,c,(t,n)=>{if(e.start>-1)return!1;-1===e.start&&o.isInSet(t.marks)&&s===t&&(e={start:n,end:n+Math.max(t.textContent.length,1)})}),e),u=h.start,d=h.end;t.show(i.mark,u,d,rr(n,u,d));return}t.hide()},50);e.set(g1.key,{props:{handleDOMEvents:{mousemove:r,mouseleave:()=>{setTimeout(()=>{null==t||t.hide()},50)}}},view:n=>t=new yS(e,n)}),e.update(gX.key,e=>yd(((e,t)=>{for(var n in t||(t={}))ym.call(t,n)&&yy(e,n,t[n]);if(yf)for(var n of yf(t))yg.call(t,n)&&yy(e,n,t[n]);return e})({},e),yp({addLink:(e,t)=>{null==n||n.addLink(e,t)},editLink:(e,t,r)=>{null==n||n.editLink(e,t,r)},removeLink:(e,t)=>{null==n||n.removeLink(e,t)}}))),e.set(g2.key,{view:t=>n=new yh(e,t)})}z=new WeakMap,H=new WeakMap,q=new WeakMap,W=new WeakMap,U=new WeakMap,V=new WeakMap,K=new WeakMap,J=new WeakMap,Z=new WeakMap,G=new WeakMap,Y=new WeakMap,X=new WeakMap,Q=new WeakMap;let yA=[gY,gX,gQ,g1,g2,g0].flat();var yT=Object.defineProperty,yO=Object.getOwnPropertySymbols,yN=Object.prototype.hasOwnProperty,yI=Object.prototype.propertyIsEnumerable,yE=(e,t,n)=>t in e?yT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function y_(e,t){return Object.assign(e,{meta:((e,t)=>{for(var n in t||(t={}))yN.call(t,n)&&yE(e,n,t[n]);if(yO)for(var n of yO(t))yI.call(t,n)&&yE(e,n,t[n]);return e})({package:"@milkdown/components"},t)}),e}let yL=o2({renderLabel:({label:e,listType:t,checked:n})=>null==n?"bullet"===t?"⦿":e:n?"☑":"□"},"listItemBlockConfigCtx");function yR({icon:e,class:t,onClick:n}){return(0,an.h)("span",{class:aN("milkdown-icon",t),onPointerdown:n,ref:t=>{t&&e&&(t.innerHTML=cv.sanitize(e.trim()))}})}y_(yL,{displayName:"Config<list-item-block>",group:"ListItemBlock"}),yR.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};let yP=(0,an.pM)({props:{label:{type:Object,required:!0},checked:{type:Object,required:!0},listType:{type:Object,required:!0},config:{type:Object,required:!0},readonly:{type:Object,required:!0},selected:{type:Object,required:!0},setAttr:{type:Function,required:!0},onMount:{type:Function,required:!0}},setup({label:e,checked:t,listType:n,config:r,readonly:i,setAttr:o,onMount:s,selected:l}){let a=e=>{null!=e&&e instanceof Element&&s(e)},c=e=>{e.stopPropagation(),e.preventDefault(),null!=t.value&&o("checked",!t.value)},h=(0,an.EW)(()=>r.renderLabel({label:e.value,listType:n.value,checked:t.value,readonly:i.value})),u=(0,an.EW)(()=>null==t.value?"bullet"===n.value?"bullet":"ordered":t.value?"checked":"unchecked");return()=>(0,an.h)("li",{class:aN("list-item",l.value&&"ProseMirror-selectednode")},(0,an.h)("div",{class:"label-wrapper",onPointerdown:c,contenteditable:!1},(0,an.h)(yR,{class:aN("label",i.value&&"readonly",u.value),icon:h.value})),(0,an.h)("div",{class:"children",ref:a}))}}),yD=o1(l_.node,e=>(t,n,r)=>{let i=document.createElement("div");i.className="milkdown-list-item-block";let o=document.createElement("div");o.setAttribute("data-content-dom","true"),o.classList.add("content-dom");let s=(0,ar.KR)(t.attrs.label),l=(0,ar.KR)(t.attrs.checked),a=(0,ar.KR)(t.attrs.listType),c=(0,ar.KR)(!n.editable),h=e.get(yL.key),u=(0,ar.KR)(!1),d=(0,an.nT)(()=>{u.value?i.classList.add("selected"):i.classList.remove("selected")}),p=0,f=aT(yP,{label:s,checked:l,listType:a,readonly:c,config:h,selected:u,setAttr:(e,t)=>{if(!n.editable)return;let i=r();null!=i&&(n.hasFocus()||n.focus(),n.dispatch(n.state.tr.setNodeAttribute(i,e,t)))},onMount:e=>{let{anchor:t,head:r}=n.state.selection;e.appendChild(o);let i=n.state.doc.resolve(t),s=n.state.doc.resolve(r);p=requestAnimationFrame(()=>{if(cancelAnimationFrame(p),!i.doc.eq(n.state.doc))return;let e=new nx.U3(i,s);n.dispatch(n.state.tr.setSelection(e))})}});f.mount(i);let m=e=>{a.value=e.attrs.listType,s.value=e.attrs.label,l.value=e.attrs.checked,c.value=!n.editable};m(t);let g=t;return{dom:i,contentDOM:o,update:e=>e.type===t.type&&(!!(e.sameMarkup(g)&&e.content.eq(g.content))||(g=e,m(e),!0)),ignoreMutation:e=>!i||!o||"selection"!==e.type&&(o===e.target&&"attributes"===e.type||!o.contains(e.target)),selectNode:()=>{u.value=!0},deselectNode:()=>{u.value=!1},destroy:()=>{d(),f.unmount(),i.remove(),o.remove()}}});y_(yD,{displayName:"NodeView<list-item-block>",group:"ListItemBlock"});let yF=[yL,yD];var yB=Object.defineProperty,y$=Object.getOwnPropertySymbols,yj=Object.prototype.hasOwnProperty,yz=Object.prototype.propertyIsEnumerable,yH=(e,t,n)=>t in e?yB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function yq(e,t){return Object.assign(e,{meta:((e,t)=>{for(var n in t||(t={}))yj.call(t,n)&&yH(e,n,t[n]);if(y$)for(var n of y$(t))yz.call(t,n)&&yH(e,n,t[n]);return e})({package:"@milkdown/components"},t)}),e}var yW=Object.defineProperty,yU=Object.getOwnPropertySymbols,yV=Object.prototype.hasOwnProperty,yK=Object.prototype.propertyIsEnumerable,yJ=(e,t,n)=>t in e?yW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;let yZ=o2(((e,t)=>{for(var n in t||(t={}))yV.call(t,n)&&yJ(e,n,t[n]);if(yU)for(var n of yU(t))yK.call(t,n)&&yJ(e,n,t[n]);return e})({},{renderButton:e=>{switch(e){case"add_row":case"add_col":return"+";case"delete_row":case"delete_col":return"-";case"align_col_left":return"left";case"align_col_center":return"center";case"align_col_right":return"right";case"col_drag_handle":case"row_drag_handle":return"="}}}),"tableBlockConfigCtx");function yG({icon:e,class:t,onClick:n}){return(0,an.h)("span",{class:aN("milkdown-icon",t),onPointerdown:n,ref:t=>{t&&e&&(t.innerHTML=cv.sanitize(e.trim()))}})}function yY(e){let{dragPreviewRef:t,tableWrapperRef:n,contentWrapperRef:r,yLineHandleRef:i,xLineHandleRef:o,colHandleRef:s,rowHandleRef:l}=e,a=t.value;if(!a)return;let c=n.value;if(!c)return;let h=r.value;if(!h)return;let u=h.querySelector("tbody");if(!u)return;let d=a.querySelector("tbody");if(!d)return;let p=i.value;if(!p)return;let f=o.value;if(!f)return;let m=s.value;if(!m)return;let g=l.value;if(g)return{preview:a,wrapper:c,content:h,contentRoot:u,previewRoot:d,yHandle:p,xHandle:f,colHandle:m,rowHandle:g}}function yX(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function yQ(e,t,n,r,i){let{width:o,height:s}=r.querySelector("tbody").getBoundingClientRect();if("y"===e){let e=r.querySelectorAll("tr")[i];if(!e)return;n.appendChild(e.cloneNode(!0));let s=e.getBoundingClientRect().height;Object.assign(t.style,{width:`${o}px`,height:`${s}px`}),t.dataset.show="true";return}if("x"===e){let e;Array.from(r.querySelectorAll("tr")).forEach(t=>{let r=t.children[i];if(!r)return;void 0===e&&(e=r.getBoundingClientRect().width);let o=r.parentElement.cloneNode(!1),s=r.cloneNode(!0);o.appendChild(s),n.appendChild(o)}),Object.assign(t.style,{width:`${e}px`,height:`${s}px`}),t.dataset.show="true";return}}function y0(e,t,n,r){let{xHandle:i,yHandle:o,colHandle:s,rowHandle:l,preview:a}=n;i.dataset.displayType="y"===e?"indicator":"none",o.dataset.displayType="x"===e?"indicator":"none","y"===e?(s.dataset.show="false",y2(l)):(l.dataset.show="false",y2(s));let{hoverIndex:c,dragInfo:h}=r,[u,d]=c.value;h.value={startCoords:[t.clientX,t.clientY],startIndex:"y"===e?u:d,endIndex:"y"===e?u:d,type:"y"===e?"row":"col"},a.dataset.direction="y"===e?"vertical":"horizontal"}function y1(e,t,n,r){let i=null==n?void 0:n.get(iY);if(!(null==i?void 0:i.editable))return;t.stopPropagation(),t.dataTransfer&&(t.dataTransfer.effectAllowed="move");let o=yY(e);o&&requestAnimationFrame(()=>{r(o)})}function y2(e){var t;null==(t=e.querySelector(".button-group"))||t.setAttribute("data-show","false")}function y5(e,t){for(let n=0;n<e.childCount;n++)if(e.child(n)===t)return n;return -1}function y3(e,[t,n]){let r=e.value;if(!r)return;let i=r.querySelectorAll("tr"),o=i[t];if(!o)return;let s=i[0];if(!s)return;let l=s.children[n];if(!l)return;let a=o.children[n];if(a)return{row:o,col:a,headerCol:l}}function y4({refs:e,index:t,before:n,after:r}){let{contentWrapperRef:i,colHandleRef:o,hoverIndex:s}=e,l=o.value;if(!l)return;s.value=t;let a=y3(i,t);if(!a)return;let{headerCol:c}=a;l.dataset.show="true",n&&n(l),(0,sp.rD)(c,l,{placement:"top"}).then(({x:e,y:t})=>{Object.assign(l.style,{left:`${e}px`,top:`${t}px`}),r&&r(l)}).catch(console.error)}function y9({refs:e,index:t,before:n,after:r}){let{contentWrapperRef:i,rowHandleRef:o,hoverIndex:s}=e,l=o.value;if(!l)return;s.value=t;let a=y3(i,t);if(!a)return;let{row:c}=a;l.dataset.show="true",n&&n(l),(0,sp.rD)(c,l,{placement:"left"}).then(({x:e,y:t})=>{Object.assign(l.style,{left:`${e}px`,top:`${t}px`}),r&&r(l)}).catch(console.error)}function y7(e,t,n){let r="x"===n?"left":"top",i="x"===n?"right":"bottom",o=e.length-1,s=e.findIndex((e,n)=>{let s=e.getBoundingClientRect(),l=s[r],a=s[i];return!!(l<=t)&&!!(t<=a)||n===o&&!!(t>a)||0===n&&!!(t<l)}),l=e[s];return l?[l,s]:void 0}yq(yZ,{displayName:"Config<table-block>",group:"TableBlock"}),yG.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};let y8=(0,an.pM)({props:{view:{type:Object,required:!0},ctx:{type:Object,required:!0},getPos:{type:Function,required:!0},config:{type:Object,required:!0},onMount:{type:Function,required:!0},node:{type:Object,required:!0}},setup({view:e,node:t,ctx:n,getPos:r,config:i,onMount:o}){let s=(0,ar.KR)(),l=e=>{null!=e&&(e instanceof HTMLElement?(s.value=e,o(e)):s.value=void 0)},a=(0,ar.KR)(),c=(0,ar.KR)(),h=(0,ar.KR)(),u=(0,ar.KR)(),d=(0,ar.KR)(),p=(0,ar.KR)(),f=(0,ar.KR)([0,0]),m={dragPreviewRef:p,tableWrapperRef:d,contentWrapperRef:s,yLineHandleRef:u,xLineHandleRef:h,colHandleRef:a,rowHandleRef:c,hoverIndex:f,lineHoverIndex:(0,ar.KR)([-1,-1]),dragInfo:(0,ar.KR)()},{pointerLeave:g,pointerMove:y}=function(e,t){return{pointerMove:sd(n=>{if(!(null==t?void 0:t.editable))return;let{contentWrapperRef:r,yLineHandleRef:i,xLineHandleRef:o,colHandleRef:s,rowHandleRef:l,hoverIndex:a,lineHoverIndex:c}=e,h=i.value;if(!h)return;let u=o.value;if(!u)return;let d=r.value;if(!d)return;let p=l.value;if(!p)return;let f=s.value;if(!f)return;let m=function(e,t){var n,r,i;if(t)try{let o=t.posAtCoords({left:e.clientX,top:e.clientY});if(!o)return;let s=null==o?void 0:o.inside;if(null==s||s<0)return;let l=t.state.doc.resolve(s),a=t.state.doc.nodeAt(s);if(!a)return;let c=["table_cell","table_header"],h=["table_row","table_header_row"],u=c.includes(a.type.name)?a:null==(n=ro(e=>c.includes(e.type.name))(l))?void 0:n.node,d=null==(r=ro(e=>h.includes(e.type.name))(l))?void 0:r.node,p=null==(i=ro(e=>"table"===e.type.name)(l))?void 0:i.node;if(!u||!d||!p)return;let f=y5(d,u);return[y5(p,d),f]}catch(e){return}}(n,t);if(!m)return;let g=y3(r,m);if(!g)return;let[y,v]=m,w=g.col.getBoundingClientRect(),b=8>Math.abs(n.clientX-w.left),k=8>Math.abs(w.right-n.clientX),x=8>Math.abs(n.clientY-w.top),C=8>Math.abs(w.bottom-n.clientY),S=p.querySelector(".button-group"),M=f.querySelector(".button-group");if(S&&(S.dataset.show="false"),M&&(M.dataset.show="false"),b||k||x||C){let e=d.getBoundingClientRect();p.dataset.show="false",f.dataset.show="false",u.dataset.displayType="tool",h.dataset.displayType="tool";let t=h.getBoundingClientRect().width,n=u.getBoundingClientRect().height;b||k?(c.value[1]=b?v:v+1,(0,sp.rD)(g.col,h,{placement:b?"left":"right",middleware:[(0,sp.cY)(b?-1*t:0)]}).then(({x:t})=>{h.dataset.show="true",Object.assign(h.style,{height:`${e.height}px`,left:`${t}px`})}).catch(console.error)):h.dataset.show="false",0!==m[0]&&(x||C)?(c.value[0]=x?y:y+1,(0,sp.rD)(g.row,u,{placement:x?"top":"bottom",middleware:[(0,sp.cY)(x?-1*n:0)]}).then(({y:t})=>{u.dataset.show="true",Object.assign(u.style,{width:`${e.width}px`,top:`${t}px`})}).catch(console.error)):u.dataset.show="false";return}c.value=[-1,-1],h.dataset.show="false",u.dataset.show="false",p.dataset.show="true",f.dataset.show="true",y9({refs:e,index:m}),y4({refs:e,index:m}),a.value=m},20),pointerLeave:()=>{let{rowHandleRef:t,colHandleRef:n,yLineHandleRef:r,xLineHandleRef:i}=e;setTimeout(()=>{let e=t.value;if(!e)return;let o=n.value;if(!o)return;let s=r.value;if(!s)return;let l=i.value;l&&(e.dataset.show="false",o.dataset.show="false",s.dataset.show="false",l.dataset.show="false")},200)}}}(m,e),{dragRow:v,dragCol:w}=function(e,t,n){let{dragPreviewRef:r,yLineHandleRef:i,xLineHandleRef:o,dragInfo:s}=e,l=n=>{y1(e,n,t,t=>{y0("y",n,t,e);let{preview:r,content:i,previewRoot:o}=t;yX(o);let{hoverIndex:s}=e,[l]=s.value;yQ("y",r,o,i,l)})},a=n=>{y1(e,n,t,t=>{y0("x",n,t,e);let{preview:r,content:i,previewRoot:o}=t,{hoverIndex:s}=e,[l,a]=s.value;yX(o),yQ("x",r,o,i,a)})},c=()=>{let e=r.value;if(!e||"false"===e.dataset.show)return;let t=null==e?void 0:e.querySelector("tbody");for(;null==t?void 0:t.firstChild;)null==t||t.removeChild(t.firstChild);e&&(e.dataset.show="false")},h=()=>{var l;let a=r.value;if(!a)return;let c=i.value;if(!c)return;let h=o.value;if(!h)return;let u=s.value;if(!u||!t||"false"===a.dataset.show||!e.colHandleRef.value||!e.rowHandleRef.value||(c.dataset.show="false",h.dataset.show="false",u.startIndex===u.endIndex))return;let d=t.get(oc),p={from:u.startIndex,to:u.endIndex,pos:(null!=(l=null==n?void 0:n())?l:0)+1};"col"===u.type?(d.call(dT.key,{pos:p.pos,index:u.startIndex}),d.call(dM.key,p),y4({refs:e,index:[0,u.endIndex]})):(d.call(dA.key,{pos:p.pos,index:u.startIndex}),d.call(dS.key,p),y9({refs:e,index:[u.endIndex,0]})),requestAnimationFrame(()=>{t.get(iY).focus()})},u=sd(t=>{let n=yY(e);if(!n)return;let{preview:r,content:i,contentRoot:o,xHandle:s,yHandle:l}=n,{dragInfo:a,hoverIndex:c}=e;if("false"===r.dataset.show)return;let h=y3(e.contentWrapperRef,c.value);if(!h||!o.querySelector("tr"))return;let u=a.value;if(!u||!o.offsetParent)return;let d=o.offsetParent.offsetTop,p=o.offsetParent.offsetLeft;if("col"===u.type){let e=h.col.getBoundingClientRect().width,{left:n,width:s}=o.getBoundingClientRect(),a=p-n,c=t.clientX+a-e/2,[f]=u.startCoords,m=f<t.clientX?"right":"left";r.style.top=`${d}px`;let g=c<n+a-20?n+a-20:c>n+s+a-e+20?n+s+a-e+20:c;r.style.left=`${g}px`;let y=function(e,t){let n=e.querySelector("tr");if(n)return y7(Array.from(n.children),t,"x")}(o,t.clientX);if(y){let[e,t]=y,n=l.getBoundingClientRect().width,r=i.getBoundingClientRect();u.endIndex=t,(0,sp.rD)(e,l,{placement:"left"===m?"left":"right",middleware:[(0,sp.cY)("left"===m?-1*n:0)]}).then(({x:e})=>{l.dataset.show="true",Object.assign(l.style,{height:`${r.height}px`,left:`${e}px`,top:`${d}px`})}).catch(console.error)}}else if("row"===u.type){var f;let e=h.row.getBoundingClientRect().height,{top:n,height:l}=o.getBoundingClientRect(),a=d-n,c=t.clientY+a-e/2,[m,g]=u.startCoords,y=g<t.clientY?"down":"up",v=c<n+a-20?n+a-20:c>n+l+a-e+20?n+l+a-e+20:c;r.style.top=`${v}px`,r.style.left=`${p}px`;let w=(f=t.clientY,y7(Array.from(o.querySelectorAll("tr")),f,"y"));if(w){let[e,t]=w,n=s.getBoundingClientRect().height,r=i.getBoundingClientRect();u.endIndex=t,(0,sp.rD)(e,s,{placement:"up"===y?"top":"bottom",middleware:[(0,sp.cY)("up"===y?-1*n:0)]}).then(({y:e})=>{s.dataset.show="true",Object.assign(s.style,{width:`${r.width}px`,top:`${e}px`})}).catch(console.error)}}},20);return(0,an.sV)(()=>{window.addEventListener("dragover",u),window.addEventListener("dragend",c),window.addEventListener("drop",h)}),(0,an.hi)(()=>{window.removeEventListener("dragover",u),window.removeEventListener("dragend",c),window.removeEventListener("drop",h)}),{dragRow:l,dragCol:a}}(m,n,r),{onAddRow:b,onAddCol:k,selectCol:x,selectRow:C,deleteSelected:S,onAlign:M}=function(e,t,n){let{xLineHandleRef:r,contentWrapperRef:i,colHandleRef:o,rowHandleRef:s,hoverIndex:l,lineHoverIndex:a}=e;return{onAddRow:()=>{var e,o,s;if(!t)return;let l=r.value;if(!l)return;let[c]=a.value;if(c<0||!t.get(iY).editable)return;let h=Array.from(null!=(o=null==(e=i.value)?void 0:e.querySelectorAll("tr"))?o:[]),u=t.get(oc),d=(null!=(s=null==n?void 0:n())?s:0)+1;h.length===c?(u.call(dA.key,{pos:d,index:c-1}),u.call(dL.key)):(u.call(dA.key,{pos:d,index:c}),u.call(d_.key)),u.call(dA.key,{pos:d,index:c}),l.dataset.show="false"},onAddCol:()=>{var e,o,s,l;if(!t||!r.value)return;let[c,h]=a.value;if(h<0||!t.get(iY).editable)return;let u=Array.from(null!=(s=null==(o=null==(e=i.value)?void 0:e.querySelector("tr"))?void 0:o.children)?s:[]),d=t.get(oc),p=(null!=(l=null==n?void 0:n())?l:0)+1;u.length===h?(d.call(dT.key,{pos:p,index:h-1}),d.call(dE.key)):(d.call(dT.key,{pos:p,index:h}),d.call(dI.key)),d.call(dT.key,{pos:p,index:h})},selectCol:()=>{var e,r;if(!t)return;let[i,s]=l.value,a=t.get(oc),c=(null!=(e=null==n?void 0:n())?e:0)+1;a.call(dT.key,{pos:c,index:s});let h=null==(r=o.value)?void 0:r.querySelector(".button-group");h&&(h.dataset.show="true"===h.dataset.show?"false":"true")},selectRow:()=>{var e,r;if(!t)return;let[i,o]=l.value,a=t.get(oc),c=(null!=(e=null==n?void 0:n())?e:0)+1;a.call(dA.key,{pos:c,index:i});let h=null==(r=s.value)?void 0:r.querySelector(".button-group");h&&i>0&&(h.dataset.show="true"===h.dataset.show?"false":"true")},deleteSelected:e=>{t&&t.get(iY).editable&&(e.preventDefault(),e.stopPropagation(),t.get(oc).call(dN.key),requestAnimationFrame(()=>{t.get(iY).focus()}))},onAlign:e=>n=>{t&&t.get(iY).editable&&(n.preventDefault(),n.stopPropagation(),t.get(oc).call(dR.key,e),requestAnimationFrame(()=>{t.get(iY).focus()}))}}}(m,n,r);return(0,an.sV)(()=>{requestAnimationFrame(()=>{e.editable&&function(e,t,n){if(!n||!t)return;let{selection:r}=t.state;if(!(r instanceof c7))return;let{$from:i}=r,o=hi(i);if(o&&o.node===n){if(r.isColSelection()){let{$head:t}=r;y4({refs:e,index:[0,t.index(t.depth-1)],before:e=>{var t;null==(t=e.querySelector(".button-group"))||t.setAttribute("data-show","true")}});return}if(r.isRowSelection()){let{$head:t}=r,n=ro(e=>"table_row"===e.type.name||"table_header_row"===e.type.name)(t);if(!n)return;let i=y5(o.node,n.node);y9({refs:e,index:[i,0],before:e=>{var t;i>0&&(null==(t=e.querySelector(".button-group"))||t.setAttribute("data-show","true"))}})}}}(m,e,t.value)})}),()=>(0,an.h)("div",{onDragstart:e=>e.preventDefault(),onDragover:e=>e.preventDefault(),onDragleave:e=>e.preventDefault(),onPointermove:y,onPointerleave:g},(0,an.h)("div",{"data-show":"false",contenteditable:"false",draggable:"true","data-role":"col-drag-handle",class:"handle cell-handle",onDragstart:w,onClick:x,onPointerdown:e=>e.stopPropagation(),onPointermove:e=>e.stopPropagation(),ref:a},(0,an.h)(yG,{icon:i.renderButton("col_drag_handle")}),(0,an.h)("div",{"data-show":"false",class:"button-group",onPointermove:e=>e.stopPropagation()},(0,an.h)("button",{type:"button",onPointerdown:M("left")},(0,an.h)(yG,{icon:i.renderButton("align_col_left")})),(0,an.h)("button",{type:"button",onPointerdown:M("center")},(0,an.h)(yG,{icon:i.renderButton("align_col_center")})),(0,an.h)("button",{type:"button",onPointerdown:M("right")},(0,an.h)(yG,{icon:i.renderButton("align_col_right")})),(0,an.h)("button",{type:"button",onPointerdown:S},(0,an.h)(yG,{icon:i.renderButton("delete_col")})))),(0,an.h)("div",{"data-show":"false",contenteditable:"false",draggable:"true","data-role":"row-drag-handle",class:"handle cell-handle",onDragstart:v,onClick:C,onPointerdown:e=>e.stopPropagation(),onPointermove:e=>e.stopPropagation(),ref:c},(0,an.h)(yG,{icon:i.renderButton("row_drag_handle")}),(0,an.h)("div",{"data-show":"false",class:"button-group",onPointermove:e=>e.stopPropagation()},(0,an.h)("button",{type:"button",onPointerdown:S},(0,an.h)(yG,{icon:i.renderButton("delete_row")})))),(0,an.h)("div",{class:"table-wrapper",ref:d},(0,an.h)("div",{"data-show":"false",class:"drag-preview","data-direction":"vertical",ref:p},(0,an.h)("table",null,(0,an.h)("tbody",null))),(0,an.h)("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"x-line-drag-handle",class:"handle line-handle",onPointermove:e=>e.stopPropagation(),ref:h},(0,an.h)("button",{type:"button",onClick:b,class:"add-button"},(0,an.h)(yG,{icon:i.renderButton("add_row")}))),(0,an.h)("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"y-line-drag-handle",class:"handle line-handle",onPointermove:e=>e.stopPropagation(),ref:u},(0,an.h)("button",{type:"button",onClick:k,class:"add-button"},(0,an.h)(yG,{icon:i.renderButton("add_col")}))),(0,an.h)("table",{ref:l,class:"children"})))}});var y6=e=>{throw TypeError(e)};class ve{constructor(e,t,n,r){this.ctx=e,this.node=t,this.view=n,this.getPos=r,((e,t,n)=>t.has(e)?y6("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n))(this,ee);let i=document.createElement("div");i.className="milkdown-table-block";let o=document.createElement("tbody");this.contentDOM=o,o.setAttribute("data-content-dom","true"),o.classList.add("content-dom"),this.nodeRef=(0,ar.IJ)(t);let s=aT(y8,{view:n,ctx:e,getPos:r,config:e.get(yZ.key),onMount:e=>{e.appendChild(o)},node:this.nodeRef});s.mount(i),this.app=s,this.dom=i}update(e){return!(e.type!==this.node.type||e.sameMarkup(this.node)&&e.content.eq(this.node.content))&&(this.node=e,this.nodeRef.value=e,!0)}stopEvent(e){if("drop"===e.type||e.type.startsWith("drag"))return!0;if("mousedown"===e.type||"pointerdown"===e.type){if(e.target instanceof Element&&e.target.closest("button"))return!0;let r=e.target;if(r instanceof HTMLElement&&(r.closest("th")||r.closest("td"))){var t,n;return(t=ee,n=et,t.has(this)||y6("Cannot access private method"),n).call(this,e)}}return!1}ignoreMutation(e){return!this.dom||!this.contentDOM||"selection"!==e.type&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target))}destroy(){this.app.unmount(),this.dom.remove(),this.contentDOM.remove()}}ee=new WeakSet,et=function(e){let t=this.view;if(!t.editable)return!1;let{state:n,dispatch:r}=t,i=t.posAtCoords({left:e.clientX,top:e.clientY});if(!i)return!1;let o=n.doc.resolve(i.inside),s=ro(e=>"table_cell"===e.type.name||"table_header"===e.type.name)(o);if(!s)return!1;if(n.selection instanceof nx.U3){let e=ro(e=>"table_cell"===e.type.name||"table_header"===e.type.name)(n.selection.$from);if((null==e?void 0:e.node)===s.node)return!1}let{from:l}=s,a=nx.nh.create(n.doc,l+1);return!n.selection.eq(a)&&(n.selection instanceof c7?setTimeout(()=>{r(n.tr.setSelection(a).scrollIntoView())},20):requestAnimationFrame(()=>{r(n.tr.setSelection(a).scrollIntoView())}),!0)};let vt=o1(dh.node,e=>(t,n,r)=>new ve(e,t,n,r));yq(vt,{displayName:"NodeView<table-block>",group:"TableBlock"});let vn=[yZ,vt],vr=oQ(e=>{let t=e.get(on);e.update(oj,e=>({...e,editable:e.editable??(()=>!0)}));let n=new nx.hs("MILKDOWN_CLIPBOARD");return new nx.k_({key:n,props:{handlePaste:(n,r)=>{let i,o=e.get(ob),s=n.props.editable?.(n.state),{clipboardData:l}=r;if(!s||!l||n.state.selection.$from.node().type.spec.code)return!1;let a=l.getData("text/plain"),c=l.getData("vscode-editor-data");if(c){let e=JSON.parse(c),r=e?.mode;if(a&&r){let{tr:e}=n.state,i=function(e,t){let n=t.nodes[e];if(!n)throw new nN(nO.getAtomFromSchemaFail,`Cannot get node: ${e} from schema.`);return n}("code_block",t);return e.replaceSelectionWith(i.create({language:r})).setSelection(nx.U3.near(e.doc.resolve(Math.max(0,e.selection.from-2)))).insertText(a.replace(/\r\n?/g,"\n")),n.dispatch(e),!0}}let h=l.getData("text/html");if(0===h.length&&0===a.length)return!1;let u=rv.S4.fromSchema(t);if(0===h.length){let e=o(a);if(!e||"string"==typeof e)return!1;i=rv.ZF.fromSchema(t).serializeFragment(e.content)}else{let e=document.createElement("template");e.innerHTML=h,i=e.content.cloneNode(!0),e.remove()}let d=u.parseSlice(i),p=function(e){if(1===e.content.childCount){let t=e.content.firstChild;if((null==t?void 0:t.type.name)==="text"&&0===t.marks.length)return t;if((null==t?void 0:t.type.name)==="paragraph"&&1===t.childCount){let e=t.firstChild;if((null==e?void 0:e.type.name)==="text"&&0===e.marks.length)return e}}return!1}(d);if(p)return n.dispatch(n.state.tr.replaceSelectionWith(p,!0)),!0;try{return n.dispatch(n.state.tr.replaceSelection(d)),!0}catch{return!1}},clipboardTextSerializer:n=>{let r=e.get(oA);if(function e(t){if(!t)return!1;if(Array.isArray(t))return!(t.length>1)&&e(t[0]);let n=t.content;return n?e(n):"text"===t.type}(n.content.toJSON()))return n.content.textBetween(0,n.content.size,"\n\n");let i=t.topNodeType.createAndFill(void 0,n.content);return i?r(i):""}}})});function vi(e,t){return Object.assign(e,{meta:{package:"@milkdown/plugin-history",...t}}),e}Object.assign(vr,{meta:{package:"@milkdown/plugin-clipboard",displayName:"Prose<clipboard>"}});let vo=oG("Undo",()=>()=>fx);vi(vo,{displayName:"Command<undo>"});let vs=oG("Redo",()=>()=>fC);vi(vs,{displayName:"Command<redo>"});let vl=o2({},"historyProviderConfig");vi(vl,{displayName:"Ctx<historyProviderConfig>"});let va=oQ(e=>(function(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new nx.k_({key:fw,state:{init:()=>new fd(fh.empty,fh.empty,null,0,-1),apply:(t,n,r)=>(function(e,t,n,r){let i=n.getMeta(fw),o;if(i)return i.historyState;n.getMeta(fb)&&(e=new fd(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(fw))if(s.getMeta(fw).redo)return new fd(e.done.addTransform(n,void 0,r,fv(t)),e.undone,ff(n.mapping.maps),e.prevTime,e.prevComposition);else return new fd(e.done,e.undone.addTransform(n,void 0,r,fv(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))if(o=n.getMeta("rebased"))return new fd(e.done.rebased(n,o),e.undone.rebased(n,o),fm(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);else return new fd(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),fm(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let i=n.getMeta("composition"),o=0==e.prevTime||!s&&e.prevComposition!=i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,r)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)}),n}(n,e.prevRanges)),l=s?fm(e.prevRanges,n.mapping):ff(n.mapping.maps);return new fd(e.done.addTransform(n,o?t.selection.getBookmark():void 0,r,fv(t)),fh.empty,l,n.time,null==i?e.prevComposition:i)}})(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?fx:"historyRedo"==n?fC:null;return!!r&&!!e.editable&&(t.preventDefault(),r(e.state,e.dispatch))}}}})})(e.get(vl.key)));vi(va,{displayName:"Ctx<historyProviderPlugin>"});let vc=o4("historyKeymap",{Undo:{shortcuts:"Mod-z",command:e=>{let t=e.get(oc);return()=>t.call(vo.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:e=>{let t=e.get(oc);return()=>t.call(vs.key)}}});vi(vc.ctx,{displayName:"KeymapCtx<history>"}),vi(vc.shortcuts,{displayName:"Keymap<history>"});let vh=[vl,va,vc,vo,vs].flat(),vu=o2({type:"space",size:2},"indentConfig");vu.meta={package:"@milkdown/plugin-indent",displayName:"Ctx<indentConfig>"};let vd=o0(e=>({Tab:(t,n)=>{let r=e.get(vu.key),{tr:i}=t,o=function(e,t){let{doc:n,selection:r}=e;if(!n||!r||!(r instanceof nx.U3||r instanceof nx.i5))return e;let{to:i}=r,o="space"===t.type?Array(t.size).fill(" ").join(""):"	";return e.insertText(o,i)}(i,r);return!!o.docChanged&&(n?.(o),!0)}}));vd.meta={package:"@milkdown/plugin-indent",displayName:"Shortcut<indent>"};let vp=[vu,vd];class vf{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.selectionUpdatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=e=>(this.beforeMountedListeners.push(e),this),this.mounted=e=>(this.mountedListeners.push(e),this),this.updated=e=>(this.updatedListeners.push(e),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners,selectionUpdated:this.selectionUpdatedListeners}}markdownUpdated(e){return this.markdownUpdatedListeners.push(e),this}blur(e){return this.blurListeners.push(e),this}focus(e){return this.focusListeners.push(e),this}destroy(e){return this.destroyListeners.push(e),this}selectionUpdated(e){return this.selectionUpdatedListeners.push(e),this}}let vm=ru(new vf,"listener"),vg=new nx.hs("MILKDOWN_LISTENER"),vy=e=>(e.inject(vm,new vf),async()=>{await e.wait(i6);let{listeners:t}=e.get(vm);t.beforeMount.forEach(t=>t(e)),await e.wait(oC);let n=e.get(oA),r=null,i=null,o=null,s=new nx.k_({key:vg,view:()=>({destroy:()=>{t.destroy.forEach(t=>t(e))}}),props:{handleDOMEvents:{focus:()=>(t.focus.forEach(t=>t(e)),!1),blur:()=>(t.blur.forEach(t=>t(e)),!1)}},state:{init:(e,t)=>{r=t.doc,i=n(t.doc)},apply:s=>{let l=s.selection;if((!o&&l||o&&!l.eq(o))&&(t.selectionUpdated.forEach(t=>{t(e,l,o)}),o=l),(s.docChanged||s.storedMarksSet)&&!1!==s.getMeta("addToHistory"))return su(()=>{let{doc:o}=s;if(t.updated.length>0&&r&&!r.eq(o)&&t.updated.forEach(t=>{t(e,o,r)}),t.markdownUpdated.length>0&&r&&!r.eq(o)){let r=n(o);t.markdownUpdated.forEach(t=>{t(e,r,i)}),i=r}r=o},200)()}}});e.update(i2,e=>e.concat(s)),await e.wait(oB),t.mounted.forEach(t=>t(e))});vy.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};let vv=o2({shouldAppend:e=>!(!e||["heading","paragraph"].includes(e.type.name)),getNode:e=>e.schema.nodes.paragraph.create()},"trailingConfig");vv.meta={package:"@milkdown/plugin-trailing",displayName:"Ctx<trailingConfig>"};let vw=oQ(e=>{let t=new nx.hs("MILKDOWN_TRAILING"),{shouldAppend:n,getNode:r}=e.get(vv.key),i=new nx.k_({key:t,state:{init:(e,t)=>n(t.tr.doc.lastChild,t),apply:(e,t,r,i)=>e.docChanged?n(e.doc.lastChild,i):t},appendTransaction:(e,t,n)=>{let{doc:o,tr:s}=n,l=r?.(n),a=i.getState(n),c=o.content.size;if(a&&l)return s.insert(c,l)}});return i});vw.meta={package:"@milkdown/plugin-trailing",displayName:"Prose<trailing>"};let vb=[vv,vw];var vk=(e=>(e.CodeMirror="code-mirror",e.ListItem="list-item",e.LinkTooltip="link-tooltip",e.Cursor="cursor",e.ImageBlock="image-block",e.BlockEdit="block-edit",e.Toolbar="toolbar",e.Placeholder="placeholder",e.Table="table",e.Latex="latex",e))(vk||{});let vx={cursor:!0,"list-item":!0,"link-tooltip":!0,"image-block":!0,"block-edit":!0,placeholder:!0,toolbar:!0,"code-mirror":!0,table:!0,latex:!0},vC=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM8.25 16.625C8.0375 16.625 7.85942 16.5531 7.71575 16.4093C7.57192 16.2654 7.5 16.0872 7.5 15.8748C7.5 15.6621 7.57192 15.484 7.71575 15.3405C7.85942 15.1968 8.0375 15.125 8.25 15.125H15.75C15.9625 15.125 16.1406 15.1969 16.2843 15.3408C16.4281 15.4846 16.5 15.6628 16.5 15.8753C16.5 16.0879 16.4281 16.266 16.2843 16.4095C16.1406 16.5532 15.9625 16.625 15.75 16.625H8.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM8.25 8.875C8.0375 8.875 7.85942 8.80308 7.71575 8.65925C7.57192 8.51542 7.5 8.33725 7.5 8.12475C7.5 7.91208 7.57192 7.734 7.71575 7.5905C7.85942 7.44683 8.0375 7.375 8.25 7.375H15.75C15.9625 7.375 16.1406 7.44692 16.2843 7.59075C16.4281 7.73458 16.5 7.91275 16.5 8.12525C16.5 8.33792 16.4281 8.516 16.2843 8.6595C16.1406 8.80317 15.9625 8.875 15.75 8.875H8.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,vS=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM4.25 16.625C4.0375 16.625 3.85942 16.5531 3.71575 16.4093C3.57192 16.2654 3.5 16.0872 3.5 15.8748C3.5 15.6621 3.57192 15.484 3.71575 15.3405C3.85942 15.1968 4.0375 15.125 4.25 15.125H13.75C13.9625 15.125 14.1406 15.1969 14.2843 15.3408C14.4281 15.4846 14.5 15.6628 14.5 15.8753C14.5 16.0879 14.4281 16.266 14.2843 16.4095C14.1406 16.5532 13.9625 16.625 13.75 16.625H4.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM4.25 8.875C4.0375 8.875 3.85942 8.80308 3.71575 8.65925C3.57192 8.51542 3.5 8.33725 3.5 8.12475C3.5 7.91208 3.57192 7.734 3.71575 7.5905C3.85942 7.44683 4.0375 7.375 4.25 7.375H13.75C13.9625 7.375 14.1406 7.44692 14.2843 7.59075C14.4281 7.73458 14.5 7.91275 14.5 8.12525C14.5 8.33792 14.4281 8.516 14.2843 8.6595C14.1406 8.80317 13.9625 8.875 13.75 8.875H4.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,vM=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25ZM10.25 8.875C10.0375 8.875 9.85942 8.80308 9.71575 8.65925C9.57192 8.51542 9.5 8.33725 9.5 8.12475C9.5 7.91208 9.57192 7.734 9.71575 7.5905C9.85942 7.44683 10.0375 7.375 10.25 7.375H19.75C19.9625 7.375 20.1406 7.44692 20.2843 7.59075C20.4281 7.73458 20.5 7.91275 20.5 8.12525C20.5 8.33792 20.4281 8.516 20.2843 8.6595C20.1406 8.80317 19.9625 8.875 19.75 8.875H10.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM10.25 16.625C10.0375 16.625 9.85942 16.5531 9.71575 16.4093C9.57192 16.2654 9.5 16.0872 9.5 15.8748C9.5 15.6621 9.57192 15.484 9.71575 15.3405C9.85942 15.1968 10.0375 15.125 10.25 15.125H19.75C19.9625 15.125 20.1406 15.1969 20.2843 15.3408C20.4281 15.4846 20.5 15.6628 20.5 15.8753C20.5 16.0879 20.4281 16.266 20.2843 16.4095C20.1406 16.5532 19.9625 16.625 19.75 16.625H10.25ZM4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25Z"
    />
  </svg>
`,vA=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M8.85758 18.625C8.4358 18.625 8.07715 18.4772 7.78163 18.1817C7.48613 17.8862 7.33838 17.5275 7.33838 17.1058V6.8942C7.33838 6.47242 7.48613 6.11377 7.78163 5.81825C8.07715 5.52275 8.4358 5.375 8.85758 5.375H12.1999C13.2191 5.375 14.1406 5.69231 14.9643 6.32693C15.788 6.96154 16.1999 7.81603 16.1999 8.89038C16.1999 9.63779 16.0194 10.2471 15.6585 10.7183C15.2976 11.1894 14.9088 11.5314 14.4922 11.7442C15.005 11.9211 15.4947 12.2708 15.9614 12.7933C16.428 13.3157 16.6614 14.0192 16.6614 14.9038C16.6614 16.182 16.1902 17.1217 15.2479 17.723C14.3056 18.3243 13.3563 18.625 12.3999 18.625H8.85758ZM9.4883 16.6327H12.3191C13.1063 16.6327 13.6627 16.4141 13.9884 15.9769C14.314 15.5397 14.4768 15.1205 14.4768 14.7192C14.4768 14.3179 14.314 13.8987 13.9884 13.4615C13.6627 13.0243 13.0909 12.8057 12.273 12.8057H9.4883V16.6327ZM9.4883 10.875H12.0826C12.6903 10.875 13.172 10.7013 13.5278 10.3539C13.8836 10.0064 14.0615 9.59037 14.0615 9.10575C14.0615 8.59035 13.8733 8.16918 13.497 7.84225C13.1207 7.51533 12.6595 7.35188 12.1133 7.35188H9.4883V10.875Z"
    />
  </svg>
`,vT=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_952_6527)">
      <circle cx="12" cy="12" r="3" />
    </g>
    <defs>
      <clipPath id="clip0_952_6527">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vO=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8070)">
      <path
        d="M4 10.5C3.17 10.5 2.5 11.17 2.5 12C2.5 12.83 3.17 13.5 4 13.5C4.83 13.5 5.5 12.83 5.5 12C5.5 11.17 4.83 10.5 4 10.5ZM4 4.5C3.17 4.5 2.5 5.17 2.5 6C2.5 6.83 3.17 7.5 4 7.5C4.83 7.5 5.5 6.83 5.5 6C5.5 5.17 4.83 4.5 4 4.5ZM4 16.5C3.17 16.5 2.5 17.18 2.5 18C2.5 18.82 3.18 19.5 4 19.5C4.82 19.5 5.5 18.82 5.5 18C5.5 17.18 4.83 16.5 4 16.5ZM8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19ZM8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13ZM7 6C7 6.55 7.45 7 8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8070">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vN=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M9 22a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6.1l-3.7 3.71c-.2.19-.45.29-.7.29zm1-6v3.08L13.08 16H20V4H4v12z"
    />
  </svg>
`,vI=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_1151)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM10.71 16.29C10.32 16.68 9.69 16.68 9.3 16.29L5.71 12.7C5.32 12.31 5.32 11.68 5.71 11.29C6.1 10.9 6.73 10.9 7.12 11.29L10 14.17L16.88 7.29C17.27 6.9 17.9 6.9 18.29 7.29C18.68 7.68 18.68 8.31 18.29 8.7L10.71 16.29Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_1151">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vE=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_535)">
      <path
        d="M18 19H6C5.45 19 5 18.55 5 18V6C5 5.45 5.45 5 6 5H18C18.55 5 19 5.45 19 6V18C19 18.55 18.55 19 18 19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_535">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,v_=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M19.5 8.25l-7.5 7.5-7.5-7.5"
    />
  </svg>
`,vL=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1098_15553)">
      <path
        d="M18.3007 5.70973C17.9107 5.31973 17.2807 5.31973 16.8907 5.70973L12.0007 10.5897L7.1107 5.69973C6.7207 5.30973 6.0907 5.30973 5.7007 5.69973C5.3107 6.08973 5.3107 6.71973 5.7007 7.10973L10.5907 11.9997L5.7007 16.8897C5.3107 17.2797 5.3107 17.9097 5.7007 18.2997C6.0907 18.6897 6.7207 18.6897 7.1107 18.2997L12.0007 13.4097L16.8907 18.2997C17.2807 18.6897 17.9107 18.6897 18.3007 18.2997C18.6907 17.9097 18.6907 17.2797 18.3007 16.8897L13.4107 11.9997L18.3007 7.10973C18.6807 6.72973 18.6807 6.08973 18.3007 5.70973Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1098_15553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vR=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8081)">
      <path
        d="M9.4 16.6L4.8 12L9.4 7.4L8 6L2 12L8 18L9.4 16.6ZM14.6 16.6L19.2 12L14.6 7.4L16 6L22 12L16 18L14.6 16.6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8081">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vP=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
  >
    <g clip-path="url(#clip0_1013_1606)">
      <path
        d="M9.00012 16.1998L5.50012 12.6998C5.11012 12.3098 4.49012 12.3098 4.10012 12.6998C3.71012 13.0898 3.71012 13.7098 4.10012 14.0998L8.29012 18.2898C8.68012 18.6798 9.31012 18.6798 9.70012 18.2898L20.3001 7.69982C20.6901 7.30982 20.6901 6.68982 20.3001 6.29982C19.9101 5.90982 19.2901 5.90982 18.9001 6.29982L9.00012 16.1998Z"
        fill="#817567"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1606">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vD=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
    fill="none"
  >
    <path
      d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"
    />
  </svg>
`,vF=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7900)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M19 13H5C4.45 13 4 12.55 4 12C4 11.45 4.45 11 5 11H19C19.55 11 20 11.45 20 12C20 12.55 19.55 13 19 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7900">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vB=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 16 16"
  >
    <path
      d="M3.5 9.83366C3.35833 9.83366 3.23961 9.78571 3.14383 9.68983C3.04794 9.59394 3 9.47516 3 9.33349C3 9.19171 3.04794 9.07299 3.14383 8.97733C3.23961 8.88155 3.35833 8.83366 3.5 8.83366H12.5C12.6417 8.83366 12.7604 8.8816 12.8562 8.97749C12.9521 9.07338 13 9.19216 13 9.33383C13 9.4756 12.9521 9.59433 12.8562 9.68999C12.7604 9.78577 12.6417 9.83366 12.5 9.83366H3.5ZM3.5 7.16699C3.35833 7.16699 3.23961 7.11905 3.14383 7.02316C3.04794 6.92727 3 6.80849 3 6.66683C3 6.52505 3.04794 6.40633 3.14383 6.31066C3.23961 6.21488 3.35833 6.16699 3.5 6.16699H12.5C12.6417 6.16699 12.7604 6.21494 12.8562 6.31083C12.9521 6.40671 13 6.52549 13 6.66716C13 6.80894 12.9521 6.92766 12.8562 7.02333C12.7604 7.1191 12.6417 7.16699 12.5 7.16699H3.5Z"
    />
  </svg>
`,v$=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1013_1585)">
      <path
        d="M14.06 9.02L14.98 9.94L5.92 19H5V18.08L14.06 9.02ZM17.66 3C17.41 3 17.15 3.1 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C18.17 3.09 17.92 3 17.66 3ZM14.06 6.19L3 17.25V21H6.75L17.81 9.94L14.06 6.19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1585">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vj=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5553)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM12 17H14V7H10V9H12V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vz=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5559)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15H11V13H13C14.1 13 15 12.11 15 11V9C15 7.89 14.1 7 13 7H9V9H13V11H11C9.9 11 9 11.89 9 13V17H15V15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5559">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vH=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5565)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13.5C15 12.67 14.33 12 13.5 12C14.33 12 15 11.33 15 10.5V9C15 7.89 14.1 7 13 7H9V9H13V11H11V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5565">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vq=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7757)">
      <path
        d="M19.04 3H5.04004C3.94004 3 3.04004 3.9 3.04004 5V19C3.04004 20.1 3.94004 21 5.04004 21H19.04C20.14 21 21.04 20.1 21.04 19V5C21.04 3.9 20.14 3 19.04 3ZM19.04 19H5.04004V5H19.04V19ZM13.04 17H15.04V7H13.04V11H11.04V7H9.04004V13H13.04V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7757">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vW=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7760)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H9V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7760">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vU=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7763)">
      <path
        d="M11 17H13C14.1 17 15 16.11 15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H11C9.9 7 9 7.89 9 9V15C9 16.11 9.9 17 11 17ZM11 13H13V15H11V13ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7763">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vV=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8075)">
      <path
        d="M19 5V19H5V5H19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM14.14 11.86L11.14 15.73L9 13.14L6 17H18L14.14 11.86Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8075">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vK=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M6.29811 18.625C6.04505 18.625 5.83115 18.5375 5.65641 18.3626C5.48166 18.1877 5.39429 17.9736 5.39429 17.7203C5.39429 17.467 5.48166 17.2532 5.65641 17.0788C5.83115 16.9045 6.04505 16.8173 6.29811 16.8173H9.21159L12.452 7.18265H9.53851C9.28545 7.18265 9.07155 7.0952 8.89681 6.9203C8.72206 6.7454 8.63469 6.5313 8.63469 6.278C8.63469 6.02472 8.72206 5.81089 8.89681 5.63652C9.07155 5.46217 9.28545 5.375 9.53851 5.375H16.8847C17.1377 5.375 17.3516 5.46245 17.5264 5.63735C17.7011 5.81225 17.7885 6.02634 17.7885 6.27962C17.7885 6.53293 17.7011 6.74676 17.5264 6.92113C17.3516 7.09548 17.1377 7.18265 16.8847 7.18265H14.2789L11.0385 16.8173H13.6443C13.8973 16.8173 14.1112 16.9048 14.286 17.0797C14.4607 17.2546 14.5481 17.4687 14.5481 17.722C14.5481 17.9752 14.4607 18.1891 14.286 18.3634C14.1112 18.5378 13.8973 18.625 13.6443 18.625H6.29811Z"
    />
  </svg>
`,vJ=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M17.0385 19.5003V16.5388H14.0769V15.0388H17.0385V12.0773H18.5384V15.0388H21.5V16.5388H18.5384V19.5003H17.0385ZM10.8077 16.5388H7.03845C5.78282 16.5388 4.7125 16.0963 3.8275 15.2114C2.9425 14.3266 2.5 13.2564 2.5 12.0009C2.5 10.7454 2.9425 9.67504 3.8275 8.78979C4.7125 7.90454 5.78282 7.46191 7.03845 7.46191H10.8077V8.96186H7.03845C6.1987 8.96186 5.48235 9.25834 4.8894 9.85129C4.29645 10.4442 3.99998 11.1606 3.99998 12.0003C3.99998 12.8401 4.29645 13.5564 4.8894 14.1494C5.48235 14.7423 6.1987 15.0388 7.03845 15.0388H10.8077V16.5388ZM8.25 12.7503V11.2504H15.75V12.7503H8.25ZM21.5 12.0003H20C20 11.1606 19.7035 10.4442 19.1106 9.85129C18.5176 9.25834 17.8013 8.96186 16.9615 8.96186H13.1923V7.46191H16.9615C18.2171 7.46191 19.2875 7.90441 20.1725 8.78939C21.0575 9.67439 21.5 10.7447 21.5 12.0003Z"
    />
  </svg>
`,vZ=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7680)">
      <path
        d="M11 18C11 19.1 10.1 20 9 20C7.9 20 7 19.1 7 18C7 16.9 7.9 16 9 16C10.1 16 11 16.9 11 18ZM9 10C7.9 10 7 10.9 7 12C7 13.1 7.9 14 9 14C10.1 14 11 13.1 11 12C11 10.9 10.1 10 9 10ZM9 4C7.9 4 7 4.9 7 6C7 7.1 7.9 8 9 8C10.1 8 11 7.1 11 6C11 4.9 10.1 4 9 4ZM15 8C16.1 8 17 7.1 17 6C17 4.9 16.1 4 15 4C13.9 4 13 4.9 13 6C13 7.1 13.9 8 15 8ZM15 10C13.9 10 13 10.9 13 12C13 13.1 13.9 14 15 14C16.1 14 17 13.1 17 12C17 10.9 16.1 10 15 10ZM15 16C13.9 16 13 16.9 13 18C13 19.1 13.9 20 15 20C16.1 20 17 19.1 17 18C17 16.9 16.1 16 15 16Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7680">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vG=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8067)">
      <path
        d="M8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6C7 6.55 7.45 7 8 7ZM20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17ZM20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11ZM4.5 16H2.5C2.22 16 2 16.22 2 16.5C2 16.78 2.22 17 2.5 17H4V17.5H3.5C3.22 17.5 3 17.72 3 18C3 18.28 3.22 18.5 3.5 18.5H4V19H2.5C2.22 19 2 19.22 2 19.5C2 19.78 2.22 20 2.5 20H4.5C4.78 20 5 19.78 5 19.5V16.5C5 16.22 4.78 16 4.5 16ZM2.5 5H3V7.5C3 7.78 3.22 8 3.5 8C3.78 8 4 7.78 4 7.5V4.5C4 4.22 3.78 4 3.5 4H2.5C2.22 4 2 4.22 2 4.5C2 4.78 2.22 5 2.5 5ZM4.5 10H2.5C2.22 10 2 10.22 2 10.5C2 10.78 2.22 11 2.5 11H3.8L2.12 12.96C2.04 13.05 2 13.17 2 13.28V13.5C2 13.78 2.22 14 2.5 14H4.5C4.78 14 5 13.78 5 13.5C5 13.22 4.78 13 4.5 13H3.2L4.88 11.04C4.96 10.95 5 10.83 5 10.72V10.5C5 10.22 4.78 10 4.5 10Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8067">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vY=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7676)">
      <path
        d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7676">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vX=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7897)">
      <path
        d="M7.17 17C7.68 17 8.15 16.71 8.37 16.26L9.79 13.42C9.93 13.14 10 12.84 10 12.53V8C10 7.45 9.55 7 9 7H5C4.45 7 4 7.45 4 8V12C4 12.55 4.45 13 5 13H7L5.97 15.06C5.52 15.95 6.17 17 7.17 17ZM17.17 17C17.68 17 18.15 16.71 18.37 16.26L19.79 13.42C19.93 13.14 20 12.84 20 12.53V8C20 7.45 19.55 7 19 7H15C14.45 7 14 7.45 14 8V12C14 12.55 14.45 13 15 13H17L15.97 15.06C15.52 15.95 16.17 17 17.17 17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7897">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,vQ=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M7.30775 20.4997C6.81058 20.4997 6.385 20.3227 6.031 19.9687C5.677 19.6147 5.5 19.1892 5.5 18.692V5.99973H5.25C5.0375 5.99973 4.85942 5.92782 4.71575 5.78398C4.57192 5.64015 4.5 5.46198 4.5 5.24948C4.5 5.03682 4.57192 4.85873 4.71575 4.71523C4.85942 4.57157 5.0375 4.49973 5.25 4.49973H9C9 4.2549 9.08625 4.04624 9.25875 3.87374C9.43108 3.7014 9.63967 3.61523 9.8845 3.61523H14.1155C14.3603 3.61523 14.5689 3.7014 14.7413 3.87374C14.9138 4.04624 15 4.2549 15 4.49973H18.75C18.9625 4.49973 19.1406 4.57165 19.2843 4.71548C19.4281 4.85932 19.5 5.03748 19.5 5.24998C19.5 5.46265 19.4281 5.64073 19.2843 5.78423C19.1406 5.9279 18.9625 5.99973 18.75 5.99973H18.5V18.692C18.5 19.1892 18.323 19.6147 17.969 19.9687C17.615 20.3227 17.1894 20.4997 16.6923 20.4997H7.30775ZM17 5.99973H7V18.692C7 18.7818 7.02883 18.8556 7.0865 18.9132C7.14417 18.9709 7.21792 18.9997 7.30775 18.9997H16.6923C16.7821 18.9997 16.8558 18.9709 16.9135 18.9132C16.9712 18.8556 17 18.7818 17 18.692V5.99973ZM10.1543 16.9997C10.3668 16.9997 10.5448 16.9279 10.6885 16.7842C10.832 16.6404 10.9037 16.4622 10.9037 16.2497V8.74973C10.9037 8.53723 10.8318 8.35907 10.688 8.21523C10.5443 8.07157 10.3662 7.99973 10.1535 7.99973C9.941 7.99973 9.76292 8.07157 9.61925 8.21523C9.47575 8.35907 9.404 8.53723 9.404 8.74973V16.2497C9.404 16.4622 9.47583 16.6404 9.6195 16.7842C9.76333 16.9279 9.94158 16.9997 10.1543 16.9997ZM13.8465 16.9997C14.059 16.9997 14.2371 16.9279 14.3807 16.7842C14.5243 16.6404 14.596 16.4622 14.596 16.2497V8.74973C14.596 8.53723 14.5242 8.35907 14.3805 8.21523C14.2367 8.07157 14.0584 7.99973 13.8458 7.99973C13.6333 7.99973 13.4552 8.07157 13.3115 8.21523C13.168 8.35907 13.0962 8.53723 13.0962 8.74973V16.2497C13.0962 16.4622 13.1682 16.6404 13.312 16.7842C13.4557 16.9279 13.6338 16.9997 13.8465 16.9997Z"
    />
  </svg>
`,v0=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
    />
  </svg>
`,v1=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M3.25 13.7404C3.0375 13.7404 2.85938 13.6684 2.71563 13.5246C2.57188 13.3808 2.5 13.2026 2.5 12.99C2.5 12.7774 2.57188 12.5993 2.71563 12.4558C2.85938 12.3122 3.0375 12.2404 3.25 12.2404H20.75C20.9625 12.2404 21.1406 12.3123 21.2843 12.4561C21.4281 12.5999 21.5 12.7781 21.5 12.9907C21.5 13.2033 21.4281 13.3814 21.2843 13.525C21.1406 13.6686 20.9625 13.7404 20.75 13.7404H3.25ZM10.9423 10.2596V6.62495H6.5673C6.2735 6.62495 6.02377 6.52201 5.8181 6.31613C5.61245 6.11026 5.50963 5.86027 5.50963 5.56615C5.50963 5.27205 5.61245 5.02083 5.8181 4.8125C6.02377 4.60417 6.2735 4.5 6.5673 4.5H17.4423C17.7361 4.5 17.9858 4.60294 18.1915 4.80883C18.3971 5.01471 18.5 5.2647 18.5 5.5588C18.5 5.85292 18.3971 6.10413 18.1915 6.31245C17.9858 6.52078 17.7361 6.62495 17.4423 6.62495H13.0673V10.2596H10.9423ZM10.9423 15.7211H13.0673V18.4423C13.0673 18.7361 12.9643 18.9858 12.7584 19.1915C12.5526 19.3971 12.3026 19.5 12.0085 19.5C11.7144 19.5 11.4631 19.3962 11.2548 19.1887C11.0465 18.9811 10.9423 18.7291 10.9423 18.4327V15.7211Z"
    />
  </svg>
`,v2=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8078)">
      <path
        d="M20 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H20C21.1 21 22 20.1 22 19V5C22 3.9 21.1 3 20 3ZM20 5V8H5V5H20ZM15 19H10V10H15V19ZM5 10H8V19H5V10ZM17 19V10H20V19H17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8078">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,v5=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5547)">
      <path
        d="M5 5.5C5 6.33 5.67 7 6.5 7H10.5V17.5C10.5 18.33 11.17 19 12 19C12.83 19 13.5 18.33 13.5 17.5V7H17.5C18.33 7 19 6.33 19 5.5C19 4.67 18.33 4 17.5 4H6.5C5.67 4 5 4.67 5 5.5Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5547">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,v3=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M5.66936 16.3389L9.39244 12.6158C9.54115 12.4671 9.71679 12.3937 9.91936 12.3957C10.1219 12.3976 10.2975 12.4761 10.4463 12.6312C10.5847 12.7823 10.654 12.9585 10.654 13.1599C10.654 13.3613 10.5847 13.5363 10.4463 13.6851L6.32704 17.8197C6.14627 18.0004 5.93538 18.0908 5.69436 18.0908C5.45333 18.0908 5.24243 18.0004 5.06166 17.8197L3.01744 15.7754C2.87899 15.637 2.81136 15.4629 2.81456 15.2533C2.81776 15.0437 2.88859 14.8697 3.02706 14.7312C3.16551 14.5928 3.34008 14.5235 3.55076 14.5235C3.76144 14.5235 3.93494 14.5928 4.07126 14.7312L5.66936 16.3389ZM5.66936 8.72359L9.39244 5.00049C9.54115 4.85177 9.71679 4.77838 9.91936 4.78031C10.1219 4.78223 10.2975 4.86075 10.4463 5.01586C10.5847 5.16691 10.654 5.34314 10.654 5.54454C10.654 5.74592 10.5847 5.92097 10.4463 6.06969L6.32704 10.2043C6.14627 10.3851 5.93538 10.4755 5.69436 10.4755C5.45333 10.4755 5.24243 10.3851 5.06166 10.2043L3.01744 8.16009C2.87899 8.02162 2.81136 7.84759 2.81456 7.63799C2.81776 7.42837 2.88859 7.25433 3.02706 7.11586C3.16551 6.97741 3.34008 6.90819 3.55076 6.90819C3.76144 6.90819 3.93494 6.97741 4.07126 7.11586L5.66936 8.72359ZM13.7597 16.5581C13.5472 16.5581 13.3691 16.4862 13.2253 16.3424C13.0816 16.1986 13.0097 16.0204 13.0097 15.8078C13.0097 15.5952 13.0816 15.4171 13.2253 15.2735C13.3691 15.13 13.5472 15.0582 13.7597 15.0582H20.7597C20.9722 15.0582 21.1503 15.1301 21.2941 15.2739C21.4378 15.4177 21.5097 15.5959 21.5097 15.8085C21.5097 16.0211 21.4378 16.1992 21.2941 16.3427C21.1503 16.4863 20.9722 16.5581 20.7597 16.5581H13.7597ZM13.7597 8.94276C13.5472 8.94276 13.3691 8.87085 13.2253 8.72704C13.0816 8.58324 13.0097 8.40504 13.0097 8.19244C13.0097 7.97985 13.0816 7.80177 13.2253 7.65819C13.3691 7.5146 13.5472 7.44281 13.7597 7.44281H20.7597C20.9722 7.44281 21.1503 7.51471 21.2941 7.65851C21.4378 7.80233 21.5097 7.98053 21.5097 8.19311C21.5097 8.40571 21.4378 8.5838 21.2941 8.72739C21.1503 8.87097 20.9722 8.94276 20.7597 8.94276H13.7597Z"
    />
  </svg>
`,v4=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M7 19v-.808L13.096 12L7 5.808V5h10v1.25H9.102L14.727 12l-5.625 5.77H17V19z"
    />
  </svg>
`,v9=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
  >
    <path
      d="m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z"
    />
  </svg>
`,v7={[vk.CodeMirror]:{theme:nk,languages:na,expandIcon:v_,searchIcon:v0,clearSearchIcon:vL,searchPlaceholder:"Search language",noResultText:"No result",previewToggleIcon:e=>e?v$:v9}},v8=ru([],"FeaturesCtx"),v6=ru({},"CrepeCtx");function we(e){return e.use("FeaturesCtx")}function wt(e){return t=>{we(t).update(t=>t.includes(e)?t:[...t,e])}}function wn(e){return"code_block"===e.$from.parent.type.name}function wr(e){var t;let n=null==(t=e.$from.node(e.$from.depth-1))?void 0:t.type;return(null==n?void 0:n.name)==="list_item"}var wi=e=>{throw TypeError(e)},wo=(e,t,n)=>t.has(e)||wi("Cannot "+n),ws=(e,t,n)=>(wo(e,t,"read from private field"),n?n.call(e):t.get(e)),wl=(e,t,n)=>t.has(e)?wi("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);class wa{constructor(){wl(this,en,[]),this.clear=()=>(((e,t,n,r)=>(wo(e,t,"write to private field"),t.set(e,n)))(this,en,[]),this),wl(this,er,e=>{let t={group:e,addItem:(n,r)=>{let i={...r,key:n};return e.items.push(i),t},clear:()=>(e.items=[],t)};return t}),this.addGroup=(e,t)=>{let n={key:e,label:t,items:[]};return ws(this,en).push(n),ws(this,er).call(this,n)},this.getGroup=e=>{let t=ws(this,en).find(t=>t.key===e);if(!t)throw Error(`Group with key ${e} not found`);return ws(this,er).call(this,t)},this.build=()=>ws(this,en)}}en=new WeakMap,er=new WeakMap;let wc=(0,an.pM)({props:{ctx:{type:Object,required:!0},show:{type:Object,required:!0},filter:{type:Object,required:!0},hide:{type:Function,required:!0},config:{type:Object,required:!1}},setup({ctx:e,show:t,filter:n,hide:r,config:i}){let o=(0,ar.KR)(),s=(0,an.EW)(()=>(function(e,t,n){var r,i,o,s,l,a,c,h,u,d,p,f,m,g,y,v,w,b,k,x,C,S,M,A,T,O,N,I,E,_,L,R,P,D,F,B,$,j,z,H,q,W,U,V,K,J,Z,G,Y,X,Q,ee,et,en,er,ei,eo,es,el,ea,ec,eh,eu,ed,ep,ef,em,eg,ey,ev,ew,eb,ek,ex,eC,eS,eM,eA,eT,eO,eN,eI,eE,e_,eL,eR,eP,eD,eF,eB,e$,ej,ez,eH,eq,eW,eU,eV,eK,eJ,eZ,eG,eY,eX,eQ,e0,e1,e2,e5,e3,e4,e9,e7,e8,e6,te,tt,tn,tr;let ti=n&&we(n).get(),to=null==ti?void 0:ti.includes(vk.Latex),ts=null==ti?void 0:ti.includes(vk.ImageBlock),tl=null==ti?void 0:ti.includes(vk.Table),ta=new wa;if((null==t?void 0:t.textGroup)!==null){let e=ta.addGroup("text",null!=(i=null==(r=null==t?void 0:t.textGroup)?void 0:r.label)?i:"Text");(null==(o=null==t?void 0:t.textGroup)?void 0:o.text)!==null&&e.addItem("text",{label:null!=(a=null==(l=null==(s=null==t?void 0:t.textGroup)?void 0:s.text)?void 0:l.label)?a:"Text",icon:null!=(u=null==(h=null==(c=null==t?void 0:t.textGroup)?void 0:c.text)?void 0:h.icon)?u:v5,onRun:e=>{let t=e.get(oc),n=sX.type(e);t.call(lV.key),t.call(lK.key,{nodeType:n})}}),(null==(d=null==t?void 0:t.textGroup)?void 0:d.h1)!==null&&e.addItem("h1",{label:null!=(m=null==(f=null==(p=null==t?void 0:t.textGroup)?void 0:p.h1)?void 0:f.label)?m:"Heading 1",icon:null!=(v=null==(y=null==(g=null==t?void 0:t.textGroup)?void 0:g.h1)?void 0:y.icon)?v:vj,onRun:e=>{let t=e.get(oc),n=s3.type(e);t.call(lV.key),t.call(lK.key,{nodeType:n,attrs:{level:1}})}}),(null==(w=null==t?void 0:t.textGroup)?void 0:w.h2)!==null&&e.addItem("h2",{label:null!=(x=null==(k=null==(b=null==t?void 0:t.textGroup)?void 0:b.h2)?void 0:k.label)?x:"Heading 2",icon:null!=(M=null==(S=null==(C=null==t?void 0:t.textGroup)?void 0:C.h2)?void 0:S.icon)?M:vz,onRun:e=>{let t=e.get(oc),n=s3.type(e);t.call(lV.key),t.call(lK.key,{nodeType:n,attrs:{level:2}})}}),(null==(A=null==t?void 0:t.textGroup)?void 0:A.h3)!==null&&e.addItem("h3",{label:null!=(N=null==(O=null==(T=null==t?void 0:t.textGroup)?void 0:T.h3)?void 0:O.label)?N:"Heading 3",icon:null!=(_=null==(E=null==(I=null==t?void 0:t.textGroup)?void 0:I.h3)?void 0:E.icon)?_:vH,onRun:e=>{let t=e.get(oc),n=s3.type(e);t.call(lV.key),t.call(lK.key,{nodeType:n,attrs:{level:3}})}}),(null==(L=null==t?void 0:t.textGroup)?void 0:L.h4)!==null&&e.addItem("h4",{label:null!=(D=null==(P=null==(R=null==t?void 0:t.textGroup)?void 0:R.h4)?void 0:P.label)?D:"Heading 4",icon:null!=($=null==(B=null==(F=null==t?void 0:t.textGroup)?void 0:F.h4)?void 0:B.icon)?$:vq,onRun:e=>{let t=e.get(oc),n=s3.type(e);t.call(lV.key),t.call(lK.key,{nodeType:n,attrs:{level:4}})}}),(null==(j=null==t?void 0:t.textGroup)?void 0:j.h5)!==null&&e.addItem("h5",{label:null!=(q=null==(H=null==(z=null==t?void 0:t.textGroup)?void 0:z.h5)?void 0:H.label)?q:"Heading 5",icon:null!=(V=null==(U=null==(W=null==t?void 0:t.textGroup)?void 0:W.h5)?void 0:U.icon)?V:vW,onRun:e=>{let t=e.get(oc),n=s3.type(e);t.call(lV.key),t.call(lK.key,{nodeType:n,attrs:{level:5}})}}),(null==(K=null==t?void 0:t.textGroup)?void 0:K.h6)!==null&&e.addItem("h6",{label:null!=(G=null==(Z=null==(J=null==t?void 0:t.textGroup)?void 0:J.h6)?void 0:Z.label)?G:"Heading 6",icon:null!=(Q=null==(X=null==(Y=null==t?void 0:t.textGroup)?void 0:Y.h6)?void 0:X.icon)?Q:vU,onRun:e=>{let t=e.get(oc),n=s3.type(e);t.call(lV.key),t.call(lK.key,{nodeType:n,attrs:{level:6}})}}),(null==(ee=null==t?void 0:t.textGroup)?void 0:ee.quote)!==null&&e.addItem("quote",{label:null!=(er=null==(en=null==(et=null==t?void 0:t.textGroup)?void 0:et.quote)?void 0:en.label)?er:"Quote",icon:null!=(es=null==(eo=null==(ei=null==t?void 0:t.textGroup)?void 0:ei.quote)?void 0:eo.icon)?es:vX,onRun:e=>{let t=e.get(oc),n=le.type(e);t.call(lV.key),t.call(lJ.key,{nodeType:n})}}),(null==(el=null==t?void 0:t.textGroup)?void 0:el.divider)!==null&&e.addItem("divider",{label:null!=(eh=null==(ec=null==(ea=null==t?void 0:t.textGroup)?void 0:ea.divider)?void 0:ec.label)?eh:"Divider",icon:null!=(ep=null==(ed=null==(eu=null==t?void 0:t.textGroup)?void 0:eu.divider)?void 0:ed.icon)?ep:vF,onRun:e=>{let t=e.get(oc),n=lv.type(e);t.call(lV.key),t.call(lZ.key,{nodeType:n})}})}if((null==t?void 0:t.listGroup)!==null){let e=ta.addGroup("list",null!=(em=null==(ef=null==t?void 0:t.listGroup)?void 0:ef.label)?em:"List");(null==(eg=null==t?void 0:t.listGroup)?void 0:eg.bulletList)!==null&&e.addItem("bullet-list",{label:null!=(ew=null==(ev=null==(ey=null==t?void 0:t.listGroup)?void 0:ey.bulletList)?void 0:ev.label)?ew:"Bullet List",icon:null!=(ex=null==(ek=null==(eb=null==t?void 0:t.listGroup)?void 0:eb.bulletList)?void 0:ek.icon)?ex:vO,onRun:e=>{let t=e.get(oc),n=lx.type(e);t.call(lV.key),t.call(lJ.key,{nodeType:n})}}),(null==(eC=null==t?void 0:t.listGroup)?void 0:eC.orderedList)!==null&&e.addItem("ordered-list",{label:null!=(eA=null==(eM=null==(eS=null==t?void 0:t.listGroup)?void 0:eS.orderedList)?void 0:eM.label)?eA:"Ordered List",icon:null!=(eN=null==(eO=null==(eT=null==t?void 0:t.listGroup)?void 0:eT.orderedList)?void 0:eO.icon)?eN:vG,onRun:e=>{let t=e.get(oc),n=lT.type(e);t.call(lV.key),t.call(lJ.key,{nodeType:n})}}),(null==(eI=null==t?void 0:t.listGroup)?void 0:eI.taskList)!==null&&e.addItem("task-list",{label:null!=(eL=null==(e_=null==(eE=null==t?void 0:t.listGroup)?void 0:eE.taskList)?void 0:e_.label)?eL:"Task List",icon:null!=(eD=null==(eP=null==(eR=null==t?void 0:t.listGroup)?void 0:eR.taskList)?void 0:eP.icon)?eD:v3,onRun:e=>{let t=e.get(oc),n=l_.type(e);t.call(lV.key),t.call(lJ.key,{nodeType:n,attrs:{checked:!1}})}})}if((null==t?void 0:t.advancedGroup)!==null){let e=ta.addGroup("advanced",null!=(eB=null==(eF=null==t?void 0:t.advancedGroup)?void 0:eF.label)?eB:"Advanced");(null==(e$=null==t?void 0:t.advancedGroup)?void 0:e$.image)!==null&&ts&&e.addItem("image",{label:null!=(eH=null==(ez=null==(ej=null==t?void 0:t.advancedGroup)?void 0:ej.image)?void 0:ez.label)?eH:"Image",icon:null!=(eU=null==(eW=null==(eq=null==t?void 0:t.advancedGroup)?void 0:eq.image)?void 0:eW.icon)?eU:vV,onRun:e=>{let t=e.get(oc),n=cP.type(e);t.call(lV.key),t.call(lZ.key,{nodeType:n})}}),(null==(eV=null==t?void 0:t.advancedGroup)?void 0:eV.codeBlock)!==null&&e.addItem("code",{label:null!=(eZ=null==(eJ=null==(eK=null==t?void 0:t.advancedGroup)?void 0:eK.codeBlock)?void 0:eJ.label)?eZ:"Code",icon:null!=(eX=null==(eY=null==(eG=null==t?void 0:t.advancedGroup)?void 0:eG.codeBlock)?void 0:eY.icon)?eX:vR,onRun:e=>{let t=e.get(oc),n=lo.type(e);t.call(lV.key),t.call(lK.key,{nodeType:n})}}),(null==(eQ=null==t?void 0:t.advancedGroup)?void 0:eQ.table)!==null&&tl&&e.addItem("table",{label:null!=(e2=null==(e1=null==(e0=null==t?void 0:t.advancedGroup)?void 0:e0.table)?void 0:e1.label)?e2:"Table",icon:null!=(e4=null==(e3=null==(e5=null==t?void 0:t.advancedGroup)?void 0:e5.table)?void 0:e3.icon)?e4:v2,onRun:e=>{let t=e.get(oc),n=e.get(iY);t.call(lV.key);let{from:r}=n.state.selection;t.call(lZ.key,{nodeType:dm(e,3,3)}),t.call(lG.key,{pos:r})}}),(null==(e9=null==t?void 0:t.advancedGroup)?void 0:e9.math)!==null&&to&&e.addItem("math",{label:null!=(e6=null==(e8=null==(e7=null==t?void 0:t.advancedGroup)?void 0:e7.math)?void 0:e8.label)?e6:"Math",icon:null!=(tn=null==(tt=null==(te=null==t?void 0:t.advancedGroup)?void 0:te.math)?void 0:tt.icon)?tn:v4,onRun:e=>{let t=e.get(oc),n=lo.type(e);t.call(lV.key),t.call(lZ.key,{nodeType:n,attrs:{language:"LaTex"}})}})}null==(tr=null==t?void 0:t.buildMenu)||tr.call(t,ta);let tc=ta.build();e&&(tc=tc.map(t=>{let n=t.items.filter(t=>t.label.toLowerCase().includes(e.toLowerCase()));return{...t,items:n}}).filter(e=>e.items.length>0));let th=tc.flatMap(e=>e.items);return th.forEach((e,t)=>{Object.assign(e,{index:t})}),tc.reduce((e,t)=>{let n=e+t.items.length;return Object.assign(t,{range:[e,n]}),n},0),{groups:tc,size:th.length}})(n.value,i,e)),l=(0,ar.KR)(0),a=(0,ar.KR)({x:-999,y:-999}),c=e=>{let{x:t,y:n}=e;a.value={x:t,y:n}};(0,an.wB)([s,t],()=>{let{size:e}=s.value;0===e&&t.value?r():l.value>=e&&(l.value=0)});let h=(e,t)=>{let n=l.value,r="function"==typeof e?e(n):e;null==t||t(r),l.value=r},u=e=>{var t,n;let r=null==(t=o.value)?void 0:t.querySelector(`[data-index="${e}"]`),i=null==(n=o.value)?void 0:n.querySelector(".menu-groups");r&&i&&(i.scrollTop=r.offsetTop-i.offsetTop)},d=t=>{let n=s.value.groups.flatMap(e=>e.items).at(t);n&&e&&n.onRun(e),r()},p=e=>{let{size:t,groups:n}=s.value;if("Escape"===e.key){e.preventDefault(),null==r||r();return}return"ArrowDown"===e.key?(e.preventDefault(),h(e=>e<t-1?e+1:e,u)):"ArrowUp"===e.key?(e.preventDefault(),h(e=>e<=0?e:e-1,u)):"ArrowLeft"===e.key?(e.preventDefault(),h(e=>{let t=n.find(t=>t.range[0]<=e&&t.range[1]>e);if(!t)return e;let r=n[n.indexOf(t)-1];return r?r.range[1]-1:e},u)):"ArrowRight"===e.key?(e.preventDefault(),h(e=>{let t=n.find(t=>t.range[0]<=e&&t.range[1]>e);if(!t)return e;let r=n[n.indexOf(t)+1];return r?r.range[0]:e},u)):void("Enter"===e.key&&(e.preventDefault(),d(l.value)))};return(0,an.nT)(()=>{t.value?window.addEventListener("keydown",p,{capture:!0}):window.removeEventListener("keydown",p,{capture:!0})}),(0,an.hi)(()=>{window.removeEventListener("keydown",p,{capture:!0})}),()=>(0,an.h)("div",{ref:o,onPointerdown:e=>e.preventDefault()},(0,an.h)("nav",{class:"tab-group"},(0,an.h)("ul",null,s.value.groups.map(e=>(0,an.h)("li",{key:e.key,onPointerdown:()=>h(e.range[0],u),class:l.value>=e.range[0]&&l.value<e.range[1]?"selected":""},e.label)))),(0,an.h)("div",{class:"menu-groups",onPointermove:c},s.value.groups.map(e=>(0,an.h)("div",{key:e.key,class:"menu-group"},(0,an.h)("h6",null,e.label),(0,an.h)("ul",null,e.items.map(e=>{let t;return(0,an.h)("li",{key:e.key,"data-index":e.index,class:l.value===e.index?"hover":"",onPointerenter:(t=e.index,e=>{let n=a.value;if(!n)return;let{x:r,y:i}=e;(r!==n.x||i!==n.y)&&h(t)}),onPointerdown:()=>{var t,n;null==(n=null==(t=o.value)?void 0:t.querySelector(`[data-index="${e.index}"]`))||n.classList.add("active")},onPointerup:()=>{var t,n;null==(n=null==(t=o.value)?void 0:t.querySelector(`[data-index="${e.index}"]`))||n.classList.remove("active"),d(e.index)}},(0,an.h)(cw,{icon:e.icon}),(0,an.h)("span",null,e.label))}))))))}});var wh=e=>{throw TypeError(e)},wu=(e,t,n)=>t.has(e)||wh("Cannot "+n),wd=(e,t,n)=>(wu(e,t,"read from private field"),n?n.call(e):t.get(e)),wp=(e,t,n)=>t.has(e)?wh("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),wf=(e,t,n,r)=>(wu(e,t,"write to private field"),t.set(e,n),n);let wm=function(e){let t=o2({},`${e}_SLASH_SPEC`),n=oQ(n=>{let r=n.get(t.key);return new nx.k_({key:new nx.hs(`${e}_SLASH`),...r})}),r=[t,n];return r.key=t.key,r.pluginKey=n.key,t.meta={package:"@milkdown/plugin-slash",displayName:`Ctx<slashSpec>|${e}`},n.meta={package:"@milkdown/plugin-slash",displayName:`Prose<slash>|${e}`},r}("CREPE_MENU"),wg=o2({show:()=>{},hide:()=>{}},"menuAPICtx");class wy{constructor(e,t,n){wp(this,ei),wp(this,eo),wp(this,es),wp(this,el),wp(this,ea,null),this.update=e=>{wd(this,el).update(e)},this.show=e=>{wf(this,ea,e),wd(this,es).value="",wd(this,el).show()},this.hide=()=>{wf(this,ea,null),wd(this,el).hide()},this.destroy=()=>{wd(this,el).destroy(),wd(this,eo).unmount(),wd(this,ei).remove()};let r=document.createElement("div");r.classList.add("milkdown-slash-menu");let i=(0,ar.KR)(!1),o=(0,ar.KR)("");wf(this,es,o);let s=aT(wc,{ctx:e,config:n,show:i,filter:o,hide:this.hide});wf(this,eo,s),s.mount(r),wf(this,ei,r);let l=this;wf(this,el,new aO({content:wd(this,ei),debounce:20,shouldShow(e){if(wn(e.state.selection)||wr(e.state.selection))return!1;let t=this.getContent(e,e=>["paragraph","heading"].includes(e.type.name));if(null==t||!function(e){if(!(e instanceof nx.U3))return!1;let{$head:t}=e,n=t.parent;return t.parentOffset===n.content.size}(e.state.selection))return!1;let n=wd(l,ea);if(o.value=t.startsWith("/")?t.slice(1):t,"number"==typeof n){let t=Math.min(n,e.state.doc.nodeSize-2);return e.state.doc.resolve(t).node()===e.state.doc.resolve(e.state.selection.from).node()||(wf(l,ea,null),!1)}return!!t.startsWith("/")},offset:10})),wd(this,el).onShow=()=>{i.value=!0},wd(this,el).onHide=()=>{i.value=!1},this.update(t),e.set(wg.key,{show:e=>this.show(e),hide:()=>this.hide()})}}ei=new WeakMap,eo=new WeakMap,es=new WeakMap,el=new WeakMap,ea=new WeakMap;let wv=(0,an.pM)({props:{onAdd:{type:Function,required:!0},addIcon:{type:String,required:!0},handleIcon:{type:String,required:!0}},setup(e){let t=(0,ar.KR)();return()=>(0,an.h)(an.FK,null,(0,an.h)("div",{ref:t,class:"operation-item",onPointerdown:e=>{var n;e.preventDefault(),e.stopPropagation(),null==(n=t.value)||n.classList.add("active")},onPointerup:n=>{var r;n.preventDefault(),n.stopPropagation(),null==(r=t.value)||r.classList.remove("active"),e.onAdd()}},(0,an.h)(cw,{icon:e.addIcon})),(0,an.h)("div",{class:"operation-item"},(0,an.h)(cw,{icon:e.handleIcon})))}});var ww=e=>{throw TypeError(e)},wb=(e,t,n)=>t.has(e)||ww("Cannot "+n),wk=(e,t,n)=>(wb(e,t,"read from private field"),n?n.call(e):t.get(e)),wx=(e,t,n)=>t.has(e)?ww("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),wC=(e,t,n,r)=>(wb(e,t,"write to private field"),t.set(e,n),n);class wS{constructor(e,t){var n,r,i;wx(this,ec),wx(this,eh),wx(this,eu),wx(this,ed),this.update=()=>{wk(this,eh).update()},this.destroy=()=>{wk(this,eh).destroy(),wk(this,ec).remove(),wk(this,eu).unmount()},this.onAdd=()=>{let e=wk(this,ed),t=e.get(iY);t.hasFocus()||t.focus();let{state:n,dispatch:r}=t,i=wk(this,eh).active;if(!i)return;let o=i.$pos.pos+i.node.nodeSize,s=n.tr.insert(o,sX.type(e).create());r((s=s.setSelection(nx.U3.near(s.doc.resolve(o)))).scrollIntoView()),wk(this,eh).hide(),e.get(wg.key).show(s.selection.from)},wC(this,ed,e);let o=document.createElement("div");o.classList.add("milkdown-block-handle");let s=aT(wv,{onAdd:this.onAdd,addIcon:null!=(n=null==t?void 0:t.handleAddIcon)?n:vY,handleIcon:null!=(r=null==t?void 0:t.handleDragIcon)?r:vZ});s.mount(o),wC(this,eu,s),wC(this,ec,o);let l=null!=(i=null==t?void 0:t.blockHandle)?i:{};wC(this,eh,new sx({ctx:e,content:o,getOffset:()=>16,getPlacement:({active:e,blockDom:t})=>{if("heading"===e.node.type.name)return"left";let n=0;e.node.descendants(e=>{n+=e.childCount});let r=e.el,i=r.getBoundingClientRect(),o=t.getBoundingClientRect(),s=window.getComputedStyle(r),l=Number.parseInt(s.paddingTop,10)||0,a=Number.parseInt(s.paddingBottom,10)||0,c=i.height-l-a,h=o.height;return n>2||h<c?"left-start":"left"},...l})),this.update()}}ec=new WeakMap,eh=new WeakMap,eu=new WeakMap,ed=new WeakMap;let wM=lo.extendSchema(e=>t=>{let n=e(t);return{...n,toMarkdown:{match:n.toMarkdown.match,runner:(e,t)=>{var r,i;if("latex"!==(null!=(r=t.attrs.language)?r:"").toLowerCase())return n.toMarkdown.runner(e,t);e.addNode("math",void 0,(null==(i=t.content.firstChild)?void 0:i.text)||"")}}}}),wA="math_inline",wT=o5(wA,()=>({group:"inline",inline:!0,draggable:!0,atom:!0,attrs:{value:{default:""}},parseDOM:[{tag:`span[data-type="${wA}"]`,getAttrs:e=>{var t;return{value:null!=(t=e.dataset.value)?t:""}}}],toDOM:e=>{let t=e.attrs.value,n=document.createElement("span");return n.dataset.type=wA,n.dataset.value=t,gI.Ay.render(t,n,{throwOnError:!1}),n},parseMarkdown:{match:e=>"inlineMath"===e.type,runner:(e,t,n)=>{e.addNode(n,{value:t.value})}},toMarkdown:{match:e=>e.type.name===wA,runner:(e,t)=>{e.addNode("inlineMath",void 0,t.attrs.value)}}})),wO=oG("ToggleLatex",e=>()=>(t,n)=>{let{hasNode:r,pos:i,target:o}=rl(t,wT.type(e)),{selection:s,doc:l,tr:a}=t;if(!r){let t=l.textBetween(s.from,s.to),r=a.replaceSelectionWith(wT.type(e).create({value:t}));return n&&n(r.setSelection(nx.nh.create(r.doc,s.from))),!0}let{from:c,to:h}=s;if(!o||i<0)return!1;let u=a.delete(i,i+1),d=o.attrs.value;return u=u.insertText(d,i),n&&n(u.setSelection(nx.U3.create(u.doc,c,h+d.length-1))),!0}),wN=g_("INLINE_LATEX"),wI=(0,an.pM)({props:{config:{type:Object,required:!0},innerView:{type:Object,required:!0},updateValue:{type:Object,required:!0}},setup(e){let t=t=>{if(t&&t instanceof HTMLElement){for(;t.firstChild;)t.removeChild(t.firstChild);e.innerView.value&&t.appendChild(e.innerView.value.dom)}},n=t=>{t.preventDefault(),e.updateValue.value()};return()=>(0,an.h)("div",{class:"container"},e.innerView&&(0,an.h)("div",{ref:t}),(0,an.h)("button",{type:"button",onPointerdown:n},(0,an.h)(cw,{icon:e.config.inlineEditConfirm})))}});var wE=e=>{throw TypeError(e)},w_=(e,t,n)=>t.has(e)||wE("Cannot "+n),wL=(e,t,n)=>(w_(e,t,"read from private field"),n?n.call(e):t.get(e)),wR=(e,t,n)=>t.has(e)?wE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),wP=(e,t,n,r)=>(w_(e,t,"write to private field"),t.set(e,n),n);class wD{constructor(e,t,n){this.ctx=e,wR(this,ep),wR(this,ef),wR(this,em),wR(this,eg,(0,ar.IJ)(null)),wR(this,ey,(0,ar.IJ)(()=>{})),wR(this,ev),wR(this,ew,()=>{wL(this,eg).value&&(wL(this,eg).value.destroy(),wL(this,eg).value=null)}),wR(this,eb,e=>{let t=(()=>{let{selection:t,schema:n}=e.state;if(t.empty||!(t instanceof nx.nh))return!1;let r=t.node;if(r.type.name!==wA)return!1;let i=t.from,o=n.nodes.paragraph.create(null,n.text(r.attrs.value)),s=new iJ.Lz(wL(this,em),{state:nx.$t.create({doc:o,schema:new rv.Sj({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:()=>["p",0]},text:{group:"inline"}}}),plugins:[iV({"Mod-z":fx,"Mod-Z":fC,"Mod-y":fC,Enter:()=>(wL(this,ey).value(),!0)})]})});return wL(this,eg).value=s,wL(this,ey).value=()=>{let{tr:t}=e.state;t.setNodeAttribute(i,"value",s.state.doc.textContent),e.dispatch(t),requestAnimationFrame(()=>{e.focus()})},!0})();return t||wL(this,ew).call(this),t}),this.update=(e,t)=>{wL(this,ef).update(e,t)},this.destroy=()=>{wL(this,ev).unmount(),wL(this,ef).destroy(),wL(this,ep).remove()};let r=document.createElement("div");r.className="milkdown-latex-inline-edit",wP(this,ep,r),wP(this,ev,aT(wI,{config:n,innerView:wL(this,eg),updateValue:wL(this,ey)})),wL(this,ev).mount(r),wP(this,ef,new gE({debounce:0,content:wL(this,ep),shouldShow:wL(this,eb),offset:10,floatingUIOptions:{placement:"bottom"}})),wL(this,ef).update(t),wP(this,em,document.createElement("div"))}}ep=new WeakMap,ef=new WeakMap,em=new WeakMap,eg=new WeakMap,ey=new WeakMap,ev=new WeakMap,ew=new WeakMap,eb=new WeakMap;let wF=oY(e=>(function(e,t,n={}){return new nS(e,(e,r,i,o)=>{var s,l,a;let{tr:c}=e,h=r[1],u=r[0],d={group:h,fullMatch:u,start:i,end:o},p=null==(s=n.updateCaptured)?void 0:s.call(n,d);if(Object.assign(d,p),{group:h,fullMatch:u,start:i,end:o}=d,null===u||!h||""===h.trim())return null;let f=null==(l=n.getAttr)?void 0:l.call(n,r),m=t.createAndFill(f);return m&&(c.replaceRangeWith(t.isBlock?c.doc.resolve(i).before():i,o,m),null==(a=n.beforeDispatch)||a.call(n,{match:[u,null!=h?h:""],start:i,end:o,tr:c})),c})})(/(?:\$)([^$]+)(?:\$)$/,wT.type(e),{getAttr:e=>{var t;return{value:null!=(t=e[1])?t:""}}})),wB=oY(e=>nT(/^\$\$[\s\n]$/,lo.type(e),()=>({language:"LaTeX"}))),w$=o8("remarkMath",()=>gB);function wj(e){return(0,rR.YR)(e,"math",(e,t,n)=>{let{value:r}=e;n.children.splice(t,1,{type:"code",lang:"LaTeX",value:r})})}let wz=o8("remarkMathBlock",()=>()=>wj),wH=o2({text:"Please enter...",mode:"block"},"placeholderConfigCtx"),wq=oQ(e=>new nx.k_({key:new nx.hs("CREPE_PLACEHOLDER"),props:{decorations:t=>{var n;if(e.get("CrepeCtx").readonly)return null;let r=e.get(wH.key);if("doc"===r.mode&&!function(e){var t;return e.childCount<=1&&!(null==(t=e.firstChild)?void 0:t.content.size)}(t.doc)||wn(t.selection)||wr(t.selection))return null;let i=function(e,t){let{selection:n}=e;if(!n.empty)return null;let r=n.$anchor,i=r.parent;if(i.content.size>0||ro(e=>"table"===e.type.name)(r))return null;let o=r.before();return iJ.NZ.node(o,o+i.nodeSize,{class:"crepe-placeholder","data-placeholder":t})}(t,null!=(n=r.text)?n:"Please enter...");return i?iJ.zF.create(t.doc,[i]):null}}})),wW=(0,an.pM)({props:{ctx:{type:Object,required:!0},hide:{type:Function,required:!0},show:{type:Object,required:!0},selection:{type:Object,required:!0},config:{type:Object,required:!1}},setup(e){let{ctx:t,config:n}=e,r=(0,an.EW)(()=>(function(e,t){var n,r,i,o,s,l,a;let c=new wa;c.addGroup("formatting","Formatting").addItem("bold",{icon:null!=(n=null==e?void 0:e.boldIcon)?n:vA,active:e=>e.get(oc).call(lW.key,sP.type(e)),onRun:e=>{e.get(oc).call(sD.key)}}).addItem("italic",{icon:null!=(r=null==e?void 0:e.italicIcon)?r:vK,active:e=>e.get(oc).call(lW.key,sN.type(e)),onRun:e=>{e.get(oc).call(sI.key)}}).addItem("strikethrough",{icon:null!=(i=null==e?void 0:e.strikethroughIcon)?i:v1,active:e=>e.get(oc).call(lW.key,di.type(e)),onRun:e=>{e.get(oc).call(ds.key)}});let h=c.addGroup("function","Function");h.addItem("code",{icon:null!=(o=null==e?void 0:e.codeIcon)?o:vR,active:e=>e.get(oc).call(lW.key,sj.type(e)),onRun:e=>{e.get(oc).call(sz.key)}});let u=t&&we(t).get();return(null==u?void 0:u.includes(vk.Latex))&&h.addItem("latex",{icon:null!=(s=null==e?void 0:e.latexIcon)?s:v4,active:e=>e.get(oc).call(lU.key,wT.type(e)),onRun:e=>{e.get(oc).call(wO.key)}}),h.addItem("link",{icon:null!=(l=null==e?void 0:e.linkIcon)?l:vJ,active:e=>e.get(oc).call(lW.key,sU.type(e)),onRun:e=>{e.get(oc).call(g0.key)}}),null==(a=null==e?void 0:e.buildToolbar)||a.call(e,c),c.build()})(n,t));return()=>(0,an.h)(an.FK,null,r.value.map(n=>n.items.map(n=>{var r;let i;return(0,an.h)("button",{type:"button",class:aN("toolbar-item",t&&(r=n.active,e.selection.value,t.get(i0).status===oV.Created&&r(t))&&"active"),onPointerdown:(i=n.onRun,e=>{e.preventDefault(),t&&i(t)})},(0,an.h)(cw,{icon:n.icon}))})).reduce((e,t,n)=>(0===n?e.push(...t):e.push((0,an.h)("div",{class:"divider"}),...t),e),[]))}});var wU=e=>{throw TypeError(e)},wV=(e,t,n)=>t.has(e)||wU("Cannot "+n),wK=(e,t,n)=>(wV(e,t,"read from private field"),n?n.call(e):t.get(e)),wJ=(e,t,n)=>t.has(e)?wU("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),wZ=(e,t,n,r)=>(wV(e,t,"write to private field"),t.set(e,n),n);let wG=g_("CREPE_TOOLBAR");class wY{constructor(e,t,n){wJ(this,ek),wJ(this,ex),wJ(this,eC),wJ(this,eS),wJ(this,eM,(0,ar.KR)(!1)),this.update=(e,t)=>{wK(this,ek).update(e,t),wK(this,eS).value=e.state.selection},this.destroy=()=>{wK(this,ek).destroy(),wK(this,eC).unmount(),wK(this,ex).remove()},this.hide=()=>{wK(this,ek).hide()};let r=document.createElement("div");r.className="milkdown-toolbar",wZ(this,eS,(0,ar.IJ)(t.state.selection));let i=aT(wW,{ctx:e,hide:this.hide,config:n,selection:wK(this,eS),show:wK(this,eM)});i.mount(r),wZ(this,ex,r),wZ(this,eC,i),wZ(this,ek,new gE({content:wK(this,ex),debounce:20,offset:10,shouldShow(e){let{doc:t,selection:n}=e.state,{empty:i,from:o,to:s}=n,l=!t.textBetween(o,s).length&&n instanceof nx.U3,a=!(n instanceof nx.U3),c=e.dom.getRootNode().activeElement,h=r.contains(c),u=!e.hasFocus()&&!h,d=!e.editable;return!u&&!a&&!i&&!l&&!d}})),wK(this,ek).onShow=()=>{wK(this,eM).value=!0},wK(this,ek).onHide=()=>{wK(this,eM).value=!1},this.update(t)}}ek=new WeakMap,ex=new WeakMap,eC=new WeakMap,eS=new WeakMap,eM=new WeakMap;var wX=e=>{throw TypeError(e)},wQ=(e,t,n)=>t.has(e)||wX("Cannot "+n),w0=(e,t,n)=>(wQ(e,t,"read from private field"),n?n.call(e):t.get(e)),w1=(e,t,n)=>t.has(e)?wX("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),w2=(e,t,n,r)=>(wQ(e,t,"write to private field"),t.set(e,n),n);class w5{constructor({root:e,defaultValue:t=""}={}){var n;w1(this,eA),w1(this,eT),w1(this,eO,!0),this.addFeature=(e,t)=>(e(w0(this,eA),t),this),this.create=()=>w0(this,eA).create(),this.destroy=()=>w0(this,eA).destroy(),this.setReadonly=e=>(w2(this,eO,!e),w0(this,eA).action(t=>{w0(this,eA).status===oV.Created&&t.get(iY).setProps({editable:()=>!e})}),this),this.getMarkdown=()=>w0(this,eA).action(e=>{let t=e.get(iY),n=(e.get(on),e.get(oA));return n(t.state.doc)}),this.on=e=>(w0(this,eA).status!==oV.Created?w0(this,eA).config(t=>{e(t.get(vm))}):w0(this,eA).action(t=>{e(t.get(vm))}),this),w2(this,eT,null!=(n="string"==typeof e?document.querySelector(e):e)?n:document.body),w2(this,eA,oK.make().config(e=>{e.inject(v6,this),e.inject(v8,[])}).config(e=>{e.set(oz,w0(this,eT)),e.set(oO,t),e.set(oj,{editable:()=>w0(this,eO)}),e.update(vu.key,e=>({...e,size:4}))}).use(at).use(vy).use(vh).use(vp).use(vb).use(vr).use(d1))}get editor(){return w0(this,eA)}get readonly(){return!w0(this,eO)}}eA=new WeakMap,eT=new WeakMap,eO=new WeakMap;class w3 extends w5{constructor({features:e={},featureConfigs:t={},...n}={}){super(n);let r=ni(t,v7);Object.entries({...vx,...e}).filter(([,e])=>e).map(([e])=>e).forEach(e=>{let t=r[e];!function(e,t,n){switch(e){case vk.CodeMirror:return((e,t={})=>{e.config(wt(vk.CodeMirror)).config(e=>{let{languages:n=[],theme:r}=t,i=[nc.w4.of(fo.concat(fs)),m4];r&&i.push(r),t.extensions&&i.push(...t.extensions),e.update(fI.key,e=>{var r;return{extensions:i,languages:n,expandIcon:t.expandIcon||v_,searchIcon:t.searchIcon||v0,clearSearchIcon:t.clearSearchIcon||vL,searchPlaceholder:t.searchPlaceholder||"Search language",copyText:t.copyText||"Copy",copyIcon:t.copyIcon||vD,onCopy:t.onCopy||(()=>{}),noResultText:t.noResultText||"No result",renderLanguage:t.renderLanguage||e.renderLanguage,renderPreview:t.renderPreview||e.renderPreview,previewToggleButton:e=>{var n,r;return[(null==(n=t.previewToggleIcon)?void 0:n.call(t,e))||(e?v$:v9),(null==(r=t.previewToggleText)?void 0:r.call(t,e))||(e?"Edit":"Hide")].map(e=>e.trim()).join(" ")},previewLabel:t.previewLabel||e.previewLabel,previewLoading:t.previewLoading||e.previewLoading,previewOnlyByDefault:null!=(r=t.previewOnlyByDefault)?r:e.previewOnlyByDefault}})}).use(f$)})(t,n);case vk.ListItem:return t.config(wt(vk.ListItem)).config(e=>{var t,r;return t=e,r=n,void t.set(yL.key,{renderLabel:({label:e,listType:t,checked:n})=>{var i,o,s;return null==n?"bullet"===t?null!=(i=null==r?void 0:r.bulletIcon)?i:vT:e:n?null!=(o=null==r?void 0:r.checkBoxCheckedIcon)?o:vI:null!=(s=null==r?void 0:r.checkBoxUncheckedIcon)?s:vE}})}).use(yF);case vk.LinkTooltip:return t.config(wt(vk.LinkTooltip)).config(yM).config(e=>{e.update(gQ.key,e=>{var t,r,i,o,s,l;return{...e,linkIcon:null!=(t=null==n?void 0:n.linkIcon)?t:vD,editButton:null!=(r=null==n?void 0:n.editButton)?r:v$,removeButton:null!=(i=null==n?void 0:n.removeButton)?i:vQ,confirmButton:null!=(o=null==n?void 0:n.confirmButton)?o:vP,inputPlaceholder:null!=(s=null==n?void 0:n.inputPlaceholder)?s:"Paste link...",onCopyLink:null!=(l=null==n?void 0:n.onCopyLink)?l:()=>{}}})}).use(yA);case vk.ImageBlock:return t.config(wt(vk.ImageBlock)).config(e=>{e.update(gC.key,e=>{var t,r,i,o,s,l;return{uploadButton:null!=(t=null==n?void 0:n.inlineUploadButton)?t:"Upload",imageIcon:null!=(r=null==n?void 0:n.inlineImageIcon)?r:vV,confirmButton:null!=(i=null==n?void 0:n.inlineConfirmButton)?i:vP,uploadPlaceholderText:null!=(o=null==n?void 0:n.inlineUploadPlaceholderText)?o:"or paste link",onUpload:null!=(l=null!=(s=null==n?void 0:n.inlineOnUpload)?s:null==n?void 0:n.onUpload)?l:e.onUpload,proxyDomURL:null==n?void 0:n.proxyDomURL}}),e.update(cA.key,e=>{var t,r,i,o,s,l,a,c;return{uploadButton:null!=(t=null==n?void 0:n.blockUploadButton)?t:"Upload file",imageIcon:null!=(r=null==n?void 0:n.blockImageIcon)?r:vV,captionIcon:null!=(i=null==n?void 0:n.blockCaptionIcon)?i:vN,confirmButton:null!=(o=null==n?void 0:n.blockConfirmButton)?o:"Confirm",captionPlaceholderText:null!=(s=null==n?void 0:n.blockCaptionPlaceholderText)?s:"Write Image Caption",uploadPlaceholderText:null!=(l=null==n?void 0:n.blockUploadPlaceholderText)?l:"or paste link",onUpload:null!=(c=null!=(a=null==n?void 0:n.blockOnUpload)?a:null==n?void 0:n.onUpload)?c:e.onUpload,proxyDomURL:null==n?void 0:n.proxyDomURL}})}).use(cK).use(gN);case vk.Cursor:if(t.config(wt(vk.Cursor)).config(e=>{e.update(ga.key,()=>{var e,t;return{class:"crepe-drop-cursor",width:null!=(e=null==n?void 0:n.width)?e:4,color:null!=(t=null==n?void 0:n.color)&&t}})}).use(gp),(null==n?void 0:n.virtual)===!1)return;let r=function(e){let t=!1,n="undefined"==typeof document?null:document.createElement("div");return new nx.k_({key:gf,view:e=>{let r;!0!==t&&function(e,t){for(let[n,r]of Object.entries(e.marks))!1!==r.spec.inclusive||t.includes(n)||console.warn(`[prosemirror-virtual-cursor] Virtual cursor does not work well with marks that have inclusive set to false. Please consider removing the inclusive option from the "${n}" mark or adding it to the "skipWarning" option.`)}(e.state.schema,t||[]);let i=e.dom.ownerDocument,o=n=n||document.createElement("div"),s=()=>{!function(e,t){var n,r;if(!e||!e.dom||e.isDestroyed||!t)return;let{state:i,dom:o}=e,{selection:s}=i;if(!gg(s))return;let l=function(e,t){var n;let r=window.getSelection();if(!r||!r.rangeCount)return null;let i=null==(n=null==r?void 0:r.getRangeAt(0))?void 0:n.cloneRange();if(!i)return null;i.collapse(t);let o=i.getClientRects(),s=(null==o?void 0:o.length)?o[o.length-1]:null;return(null==s?void 0:s.height)?s:e.coordsAtPos(e.state.selection.head)}(e,s.$head===s.$from);if(!l)return;let a=o.getBoundingClientRect(),c="prosemirror-virtual-cursor",h=i.selection.$head,[u,d]=gm(h),p=i.storedMarks||h.marks();s.$cursor&&u&&d&&p&&!rv.CU.sameSet(u,d)&&(rv.CU.sameSet(u,p)?c+=" prosemirror-virtual-cursor-left":rv.CU.sameSet(d,p)&&(c+=" prosemirror-virtual-cursor-right")),t.className=c,r="prosemirror-virtual-cursor-animation",(n=t).classList.remove(r),n.offsetWidth,n.classList.add(r),t.style.height=`${l.bottom-l.top}px`,t.style.left=`${l.left-a.left}px`,t.style.top=`${l.top-a.top}px`}(e,o)};return window.ResizeObserver&&(r=new window.ResizeObserver(()=>s())).observe(e.dom),i.addEventListener("selectionchange",s),{update:()=>{s()},destroy:()=>{i.removeEventListener("selectionchange",s),r&&r.unobserve(e.dom)}}},props:{handleKeyDown:(e,t)=>{var n;let{selection:r}=e.state;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||t.isComposing||!["ArrowLeft","ArrowRight"].includes(t.key)||!gg(r)||!r.empty)return!1;let i=r.$head,[o,s]=gm(i),l=e.state.storedMarks||i.marks();if(o&&s&&!rv.CU.sameSet(o,s)){if("ArrowLeft"===t.key&&!rv.CU.sameSet(o,l))return e.dispatch(e.state.tr.setStoredMarks(o)),!0;if("ArrowRight"===t.key&&!rv.CU.sameSet(s,l))return e.dispatch(e.state.tr.setStoredMarks(s)),!0}return"ArrowLeft"===t.key&&1===i.textOffset?(e.dispatch(e.state.tr.setSelection(nx.U3.create(e.state.doc,i.pos-1)).setStoredMarks(i.marks())),!0):"ArrowRight"===t.key&&i.textOffset+1===(null==(n=i.parent.maybeChild(i.index()))?void 0:n.nodeSize)&&(e.dispatch(e.state.tr.setSelection(nx.U3.create(e.state.doc,i.pos+1)).setStoredMarks(i.marks())),!0)},decorations:e=>{if(n&&gg(e.selection)&&e.selection.empty)return iJ.zF.create(e.doc,[iJ.NZ.widget(0,n,{key:"prosemirror-virtual-cursor"})])},attributes:{class:"virtual-cursor-enabled"}}})}();t.use(oQ(()=>r));return;case vk.BlockEdit:return t.config(wt(vk.BlockEdit)).config(e=>{var t,r;return t=e,r=n,void(t.set(sm.key,{filterNodes:e=>!ro(e=>["table","blockquote","math_inline"].includes(e.type.name))(e)}),t.set(sC.key,{view:()=>new wS(t,r)}))}).config(e=>{var t,r;return t=e,r=n,void t.set(wm.key,{view:e=>new wy(t,e,r)})}).use(wg).use(sC).use(wm);case vk.Placeholder:return t.config(wt(vk.Placeholder)).config(e=>{n&&e.update(wH.key,e=>({...e,...n}))}).use(wq).use(wH);case vk.Toolbar:return t.config(wt(vk.Toolbar)).config(e=>{e.set(wG.key,{view:t=>new wY(e,t,n)})}).use(wG);case vk.Table:return t.config(wt(vk.Table)).config(e=>{e.update(yZ.key,e=>({...e,renderButton:e=>{var t,r,i,o,s,l,a,c,h;switch(e){case"add_row":return null!=(t=null==n?void 0:n.addRowIcon)?t:vY;case"add_col":return null!=(r=null==n?void 0:n.addColIcon)?r:vY;case"delete_row":return null!=(i=null==n?void 0:n.deleteRowIcon)?i:vQ;case"delete_col":return null!=(o=null==n?void 0:n.deleteColIcon)?o:vQ;case"align_col_left":return null!=(s=null==n?void 0:n.alignLeftIcon)?s:vS;case"align_col_center":return null!=(l=null==n?void 0:n.alignCenterIcon)?l:vC;case"align_col_right":return null!=(a=null==n?void 0:n.alignRightIcon)?a:vM;case"col_drag_handle":return null!=(c=null==n?void 0:n.colDragHandleIcon)?c:vB;case"row_drag_handle":return null!=(h=null==n?void 0:n.rowDragHandleIcon)?h:vB}}}))}).use(vn);case vk.Latex:return t.config(wt(vk.Latex)).config(e=>{if(!we(e).get().includes(vk.CodeMirror))throw Error("You need to enable CodeMirror to use LaTeX feature");e.update(fI.key,e=>({...e,renderPreview:(t,r,i)=>{var o,s;return"latex"===t.toLowerCase()&&r.length>0?(o=r,s=null==n?void 0:n.katexOptions,gI.Ay.renderToString(o,{...s,throwOnError:!1,displayMode:!0})):(0,e.renderPreview)(t,r,i)}})),e.set(wN.key,{view:t=>{var r;return new wD(e,t,{inlineEditConfirm:null!=(r=null==n?void 0:n.inlineEditConfirm)?r:vP,...n})}})}).use(w$).use(wz).use(wT).use(wN).use(wF).use(wB).use(wM).use(wO)}}(e,this.editor,t)})}}w3.Feature=vk},38348:(e,t,n)=>{"use strict";var r;n.d(t,{$g:()=>D,PH:()=>f,Qj:()=>r,RY:()=>_,Z6:()=>h,cF:()=>i,fI:()=>u,iX:()=>R,rr:()=>L,uY:()=>l});let i=1024,o=0;class s{constructor(e,t){this.from=e,this.to=t}}class l{constructor(e={}){this.id=o++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=h.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}l.closedBy=new l({deserialize:e=>e.split(" ")}),l.openedBy=new l({deserialize:e=>e.split(" ")}),l.group=new l({deserialize:e=>e.split(" ")}),l.isolate=new l({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw RangeError("Invalid value for isolate: "+e);return e||"auto"}}),l.contextHash=new l({perNode:!0}),l.lookAhead=new l({perNode:!0}),l.mounted=new l({perNode:!0});class a{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[l.mounted.id]}}let c=Object.create(null);class h{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):c,n=!!e.top|2*!!e.skipped|4*!!e.error|8*(null==e.name),r=new h(e.name||"",t,e.id,n);if(e.props){for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(l.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(l.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}}h.none=new h("",Object.create(null),0,8);class u{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);if(e){r||(r=Object.assign({},n.props));let t=e[1],i=e[0];i.combine&&i.id in r&&(t=i.combine(r[i.id],t)),r[i.id]=t}}t.push(r?new h(n.name,r,n.id,n.flags):n)}return new u(t)}}let d=new WeakMap,p=new WeakMap;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(r||(r={}));class f{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length)for(let[e,t]of(this.props=Object.create(null),i))this.props["number"==typeof e?e:e.id]=t}toString(){let e=a.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new T(this.topNode,e)}cursorAt(e,t=0,n=0){let r=new T(d.get(this)||this.topNode);return r.moveTo(e,t),d.set(this,r._tree),r}get topNode(){return new b(this,0,0,null)}resolve(e,t=0){let n=v(d.get(this)||this.topNode,e,t,!1);return d.set(this,n),n}resolveInner(e,t=0){let n=v(p.get(this)||this.topNode,e,t,!0);return p.set(this,n),n}resolveStack(e,t=0){return function(e,t,n){let r=e.resolveInner(t,n),i=null;for(let e=r instanceof b?r:r.context.parent;e;e=e.parent)if(e.index<0){let o=e.parent;(i||(i=[r])).push(o.resolve(t,n)),e=o}else{let o=a.get(e.tree);if(o&&o.overlay&&o.overlay[0].from<=t&&o.overlay[o.overlay.length-1].to>=t){let s=new b(o.tree,o.overlay[0].from+e.from,-1,e);(i||(i=[r])).push(v(s,t,n,!1))}}return i?M(i):r}(this,e,t)}iterate(e){let{enter:t,leave:n,from:i=0,to:o=this.length}=e,s=e.mode||0,l=(s&r.IncludeAnonymous)>0;for(let e=this.cursor(s|r.IncludeAnonymous);;){let r=!1;if(e.from<=o&&e.to>=i&&(!l&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;r=!0}for(;r&&n&&(l||!e.type.isAnonymous)&&n(e),!e.nextSibling();){if(!e.parent())return;r=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:E(h.none,this.children,this.positions,0,this.children.length,0,this.length,(e,t,n)=>new f(this.type,e,t,n,this.propValues),e.makeTree||((e,t,n)=>new f(h.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:o=i,reused:s=[],minRepeatType:a=r.types.length}=e,c=Array.isArray(n)?new m(n,n.length):n,h=r.types,u=0,d=0;function p(e,t,n,i,o,s,l,a,c){let h=[],u=[];for(;e.length>i;)h.push(e.pop()),u.push(t.pop()+n-o);e.push(y(r.types[l],h,u,s-o,a-s,c)),t.push(o-n)}function y(e,t,n,r,i,o,s){if(o){let e=[l.contextHash,o];s=s?[e].concat(s):[e]}if(i>25){let e=[l.lookAhead,i];s=s?[e].concat(s):[e]}return new f(e,t,n,r,s)}let v=[],w=[];for(;c.pos>0;)!function e(t,n,i,m,v,w){let{id:b,start:k,end:x,size:C}=c,S=d,M=u;if(C<0){if(c.next(),-1==C){let e=s[b];i.push(e),m.push(k-t);return}if(-3==C){u=b;return}if(-4==C){d=b;return}else throw RangeError(`Unrecognized record size: ${C}`)}let A=h[b],T,O,N=k-t;if(x-k<=o&&(O=function(e,t){let n=c.fork(),r=0,i=0,s=0,l=n.end-o,h={size:0,start:0,skip:0};r:for(let o=n.pos-e;n.pos>o;){let e=n.size;if(n.id==t&&e>=0){h.size=r,h.start=i,h.skip=s,s+=4,r+=4,n.next();continue}let c=n.pos-e;if(e<0||c<o||n.start<l)break;let u=4*(n.id>=a),d=n.start;for(n.next();n.pos>c;){if(n.size<0)if(-3==n.size||-4==n.size)u+=4;else break r;else n.id>=a&&(u+=4);n.next()}i=d,r+=e,s+=u}return(t<0||r==e)&&(h.size=r,h.start=i,h.skip=s),h.size>4?h:void 0}(c.pos-n,v))){let e=new Uint16Array(O.size-O.skip),n=c.pos-O.size,i=e.length;for(;c.pos>n;)i=function e(t,n,r){let{id:i,start:o,end:s,size:l}=c;if(c.next(),l>=0&&i<a){let a=r;if(l>4){let i=c.pos-(l-4);for(;c.pos>i;)r=e(t,n,r)}n[--r]=a,n[--r]=s-t,n[--r]=o-t,n[--r]=i}else -3==l?u=i:-4==l&&(d=i);return r}(O.start,e,i);T=new g(e,x-O.start,r),N=O.start-t}else{let t=c.pos-C;c.next();let n=[],i=[],s=b>=a?b:-1,h=0,u=x;for(;c.pos>t;)s>=0&&c.id==s&&c.size>=0?(c.end<=u-o&&(p(n,i,k,h,c.end,u,s,S,M),h=n.length,u=c.end),c.next()):w>2500?function(e,t,n,i){let s=[],l=0,a=-1;for(;c.pos>t;){let{id:e,start:t,end:n,size:r}=c;if(r>4)c.next();else if(a>-1&&t<a)break;else a<0&&(a=n-o),s.push(e,t,n),l++,c.next()}if(l){let t=new Uint16Array(4*l),o=s[s.length-2];for(let e=s.length-3,n=0;e>=0;e-=3)t[n++]=s[e],t[n++]=s[e+1]-o,t[n++]=s[e+2]-o,t[n++]=n;n.push(new g(t,s[2]-o,r)),i.push(o-e)}}(k,t,n,i):e(k,t,n,i,s,w+1);if(s>=0&&h>0&&h<n.length&&p(n,i,k,h,k,u,s,S,M),n.reverse(),i.reverse(),s>-1&&h>0){let e=function(e,t){return(n,r,i)=>{let o=0,s=n.length-1,a,c;if(s>=0&&(a=n[s])instanceof f){if(!s&&a.type==e&&a.length==i)return a;(c=a.prop(l.lookAhead))&&(o=r[s]+a.length+c)}return y(e,n,r,i,o,t)}}(A,M);T=E(A,n,i,0,n.length,0,x-k,e,e)}else T=y(A,n,i,x-k,S-x,M)}i.push(T),m.push(N)}(e.start||0,e.bufferStart||0,v,w,-1,0);let b=null!=(t=e.length)?t:v.length?w[0]+v[0].length:0;return new f(h[e.topID],v.reverse(),w.reverse(),b)}(e)}}f.empty=new f(h.none,[],[],0);class m{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new m(this.buffer,this.index)}}class g{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return h.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,s=-1;for(let l=e;l!=t&&(!y(i,r,o[l+1],o[l+2])||(s=l,!(n>0)));l=o[l+3]);return s}slice(e,t,n){let r=this.buffer,i=new Uint16Array(t-e),o=0;for(let s=e,l=0;s<t;){i[l++]=r[s++],i[l++]=r[s++]-n;let t=i[l++]=r[s++]-n;i[l++]=r[s++]-e,o=Math.max(o,t)}return new g(i,o,this.set)}}function y(e,t,n,r){switch(e){case -2:return n<t;case -1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function v(e,t,n,i){for(var o;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof b&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:r.IgnoreOverlays;if(i)for(let r=e,i=r.parent;i;i=(r=i).parent)r instanceof b&&r.index<0&&(null==(o=i.enter(t,n,s))?void 0:o.from)!=r.from&&(e=i);for(;;){let r=e.enter(t,n,s);if(!r)return e;e=r}}class w{cursor(e=0){return new T(this,e)}getChild(e,t=null,n=null){let r=k(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return k(this,e,t,n)}resolve(e,t=0){return v(this,e,t,!1)}resolveInner(e,t=0){return v(this,e,t,!0)}matchContext(e){return x(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class b extends w{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i,o=0){for(let s=this;;){for(let{children:l,positions:c}=s._tree,h=t>0?l.length:-1;e!=h;e+=t){let h=l[e],u=c[e]+s.from;if(y(i,n,u,u+h.length)){if(h instanceof g){if(o&r.ExcludeBuffers)continue;let l=h.findChild(0,h.buffer.length,t,n-u,i);if(l>-1)return new S(new C(s,h,e,u),null,l)}else if(o&r.IncludeAnonymous||!h.type.isAnonymous||O(h)){let l;if(!(o&r.IgnoreMounts)&&(l=a.get(h))&&!l.overlay)return new b(l.tree,u,e,s);let c=new b(h,u,e,s);return o&r.IncludeAnonymous||!c.type.isAnonymous?c:c.nextChild(t<0?h.children.length-1:0,t,n,i)}}}if(o&r.IncludeAnonymous||!s.type.isAnonymous||(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,!(s=s._parent)))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,n=0){let i;if(!(n&r.IgnoreOverlays)&&(i=a.get(this._tree))&&i.overlay){let n=e-this.from;for(let{from:e,to:r}of i.overlay)if((t>0?e<=n:e<n)&&(t<0?r>=n:r>n))return new b(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function k(e,t,n,r){let i=e.cursor(),o=[];if(!i.firstChild())return o;if(null!=n){for(let e=!1;!e;)if(e=i.type.is(n),!i.nextSibling())return o}for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function x(e,t,n=t.length-1){for(let r=e;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class C{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class S extends w{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new S(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,n=0){if(n&r.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new S(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new S(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new S(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1];e.push(n.slice(r,i,o)),t.push(0)}return new f(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function M(e){if(!e.length)return null;let t=0,n=e[0];for(let r=1;r<e.length;r++){let i=e[r];(i.from>n.from||i.to<n.to)&&(n=i,t=r)}let r=n instanceof b&&n.index<0?null:n.parent,i=e.slice();return r?i[t]=r:i.splice(t,1),new A(i,n)}class A{constructor(e,t){this.heads=e,this.node=t}get next(){return M(this.heads)}}class T{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof b)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof b?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&r.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&r.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&r.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let i=t+e,o=e<0?-1:n._tree.children.length;i!=o;i+=e){let e=n._tree.children[i];if(this.mode&r.IncludeAnonymous||e instanceof g||!e.type.isAnonymous||O(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)r:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break r}r=this.stack[--i]}for(let e=n;e<this.stack.length;e++)t=new S(this.buffer,t,this.stack[e]);return this.bufferNode=new S(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return x(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return x(this._tree,e,r);let o=n[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function O(e){return e.children.some(e=>e instanceof g||!e.type.isAnonymous||O(e))}let N=new WeakMap;function I(e,t){if(!e.isAnonymous||t instanceof g||t.type!=e)return 1;let n=N.get(t);if(null==n){for(let r of(n=1,t.children)){if(r.type!=e||!(r instanceof f)){n=1;break}n+=I(e,r)}N.set(t,n)}return n}function E(e,t,n,r,i,o,s,l,a){let c=0;for(let n=r;n<i;n++)c+=I(e,t[n]);let h=Math.ceil(1.5*c/8),u=[],d=[];return!function t(n,r,i,s,l){for(let c=i;c<s;){let i=c,p=r[c],f=I(e,n[c]);for(c++;c<s;c++){let t=I(e,n[c]);if(f+t>=h)break;f+=t}if(c==i+1){if(f>h){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+l);continue}u.push(n[i])}else{let t=r[c-1]+n[c-1].length-p;u.push(E(e,n,r,i,c,p,t,null,a))}d.push(p+l-o)}}(t,n,r,i,0),(l||a)(u,d,s)}class _{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof S?this.setBuffer(e.context.buffer,e.index,t):e instanceof b&&this.map.set(e.tree,t)}get(e){return e instanceof S?this.getBuffer(e.context.buffer,e.index):e instanceof b?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class L{constructor(e,t,n,r,i=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=!!i|2*!!o}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new L(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],i=1,o=e.length?e[0]:null;for(let s=0,l=0,a=0;;s++){let c=s<t.length?t[s]:null,h=c?c.fromA:1e9;if(h-l>=n)for(;o&&o.from<h;){let t=o;if(l>=t.from||h<=t.to||a){let e=Math.max(t.from,l)-a,n=Math.min(t.to,h)-a;t=e>=n?null:new L(e,n,t.tree,t.offset+a,s>0,!!c)}if(t&&r.push(t),o.to>h)break;o=i<e.length?e[i++]:null}if(!c)break;l=c.toA,a=c.toA-c.toB}return r}}class R{startParse(e,t,n){return"string"==typeof e&&(e=new P(e)),n=n?n.length?n.map(e=>new s(e.from,e.to)):[new s(0,0)]:[new s(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class P{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function D(e){return(t,n,r,i)=>new z(t,e,n,r,i)}class F{constructor(e,t,n,r,i){this.parser=e,this.parse=t,this.overlay=n,this.target=r,this.from=i}}function B(e){if(!e.length||e.some(e=>e.from>=e.to))throw RangeError("Invalid inner parse ranges given: "+JSON.stringify(e))}class ${constructor(e,t,n,r,i,o,s){this.parser=e,this.predicate=t,this.mounts=n,this.index=r,this.start=i,this.target=o,this.prev=s,this.depth=0,this.ranges=[]}}let j=new l({perNode:!0});class z{constructor(e,t,n,r,i){this.nest=t,this.input=n,this.fragments=r,this.ranges=i,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let e=this.baseParse.advance();if(!e)return null;if(this.baseParse=null,this.baseTree=e,this.startInner(),null!=this.stoppedAt)for(let e of this.inner)e.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let e=this.baseTree;return null!=this.stoppedAt&&(e=new f(e.type,e.children,e.positions,e.length,e.propValues.concat([[j,this.stoppedAt]]))),e}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let n=Object.assign(Object.create(null),e.target.props);n[l.mounted.id]=new a(t,e.overlay,e.parser),e.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new W(this.fragments),t=null,n=null,i=new T(new b(this.baseTree,this.ranges[0].from,0,null),r.IncludeAnonymous|r.IgnoreMounts);r:for(let r,o;;){let l=!0,a;if(null!=this.stoppedAt&&i.from>=this.stoppedAt)l=!1;else if(e.hasNode(i)){if(t){let e=t.mounts.find(e=>e.frag.from<=i.from&&e.frag.to>=i.to&&e.mount.overlay);if(e)for(let n of e.mount.overlay){let r=n.from+e.pos,o=n.to+e.pos;r>=i.from&&o<=i.to&&!t.ranges.some(e=>e.from<o&&e.to>r)&&t.ranges.push({from:r,to:o})}}l=!1}else if(n&&(o=function(e,t,n){for(let r of e){if(r.from>=n)break;if(r.to>t)return r.from<=t&&r.to>=n?2:1}return 0}(n.ranges,i.from,i.to)))l=2!=o;else if(!i.type.isAnonymous&&(r=this.nest(i,this.input))&&(i.from<i.to||!r.overlay)){!i.tree&&(function(e){let{node:t}=e,n=[],r=t.context.buffer;do n.push(e.index),e.parent();while(!e.tree);let i=e.tree,o=i.children.indexOf(r),s=i.children[o],l=s.buffer,a=[o];for(let r of(i.children[o]=function e(r,i,o,c,h,u){let d=n[u],p=[],m=[];H(s,r,d,p,m,c);let g=l[d+1],y=l[d+2];a.push(p.length);let v=u?e(d+4,l[d+3],s.set.types[l[d]],g,y-g,u-1):t.toTree();return p.push(v),m.push(g-c),H(s,l[d+3],i,p,m,c),new f(o,p,m,h)}(0,l.length,h.none,0,s.length,n.length-1),a)){let t=e.tree.children[r],n=e.tree.positions[r];e.yield(new b(t,n+e.from,r,e._tree))}}(i),t&&t.depth++,n&&n.depth++);let o=e.findMounts(i.from,r.parser);if("function"==typeof r.overlay)t=new $(r.parser,r.overlay,o,this.inner.length,i.from,i.tree,t);else{let e=U(this.ranges,r.overlay||(i.from<i.to?[new s(i.from,i.to)]:[]));e.length&&B(e),(e.length||!r.overlay)&&this.inner.push(new F(r.parser,e.length?r.parser.startParse(this.input,V(o,e),e):r.parser.startParse(""),r.overlay?r.overlay.map(e=>new s(e.from-i.from,e.to-i.from)):null,i.tree,e.length?e[0].from:i.from)),r.overlay?e.length&&(n={ranges:e,depth:0,prev:n}):l=!1}}else if(t&&(a=t.predicate(i))&&(!0===a&&(a=new s(i.from,i.to)),a.from<a.to)){let e=t.ranges.length-1;e>=0&&t.ranges[e].to==a.from?t.ranges[e]={from:t.ranges[e].from,to:a.to}:t.ranges.push(a)}if(l&&i.firstChild())t&&t.depth++,n&&n.depth++;else for(;!i.nextSibling();){if(!i.parent())break r;if(t&&!--t.depth){let e=U(this.ranges,t.ranges);e.length&&(B(e),this.inner.splice(t.index,0,new F(t.parser,t.parser.startParse(this.input,V(t.mounts,e),e),t.ranges.map(e=>new s(e.from-t.start,e.to-t.start)),t.target,e[0].from))),t=t.prev}!n||--n.depth||(n=n.prev)}}}}function H(e,t,n,r,i,o){if(t<n){let s=e.buffer[t+1];r.push(e.slice(t,n,s)),i.push(s-o)}}class q{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(r.IncludeAnonymous|r.IgnoreMounts)}moveTo(e){let{cursor:t}=this,n=e-this.offset;for(;!this.done&&t.from<n;)t.to>=e&&t.enter(n,1,r.IgnoreOverlays|r.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&0==t.positions[0]&&t.children[0]instanceof f)t=t.children[0];else break}return!1}}class W{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let n=this.curFrag=e[0];this.curTo=null!=(t=n.tree.prop(j))?t:n.to,this.inner=new q(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=null!=(e=t.tree.prop(j))?e:t.to,this.inner=new q(t.tree,-t.offset)}}findMounts(e,t){var n;let r=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let e=this.inner.cursor.node;e;e=e.parent){let i=null==(n=e.tree)?void 0:n.prop(l.mounted);if(i&&i.parser==t)for(let t=this.fragI;t<this.fragments.length;t++){let n=this.fragments[t];if(n.from>=e.to)break;n.tree==this.curFrag.tree&&r.push({frag:n,pos:e.from-n.offset,mount:i})}}}return r}}function U(e,t){let n=null,r=t;for(let i=1,o=0;i<e.length;i++){let l=e[i-1].to,a=e[i].from;for(;o<r.length;o++){let e=r[o];if(e.from>=a)break;!(e.to<=l)&&(n||(r=n=t.slice()),e.from<l?(n[o]=new s(e.from,l),e.to>a&&n.splice(o+1,0,new s(a,e.to))):e.to>a?n[o--]=new s(a,e.to):n.splice(o--,1))}}return r}function V(e,t){let n=[];for(let{pos:r,mount:i,frag:o}of e){let e=r+(i.overlay?i.overlay[0].from:0),l=e+i.tree.length,a=Math.max(o.from,e),c=Math.min(o.to,l);if(i.overlay){let l=function(e,t,n,r){let i=0,o=0,l=!1,a=!1,c=-1e9,h=[];for(;;){let u=i==e.length?1e9:l?e[i].to:e[i].from,d=o==t.length?1e9:a?t[o].to:t[o].from;if(l!=a){let e=Math.max(c,n),t=Math.min(u,d,r);e<t&&h.push(new s(e,t))}if(1e9==(c=Math.min(u,d)))break;u==c&&(l?(l=!1,i++):l=!0),d==c&&(a?(a=!1,o++):a=!0)}return h}(t,i.overlay.map(e=>new s(e.from+r,e.to+r)),a,c);for(let t=0,r=a;;t++){let s=t==l.length,a=s?c:l[t].from;if(a>r&&n.push(new L(r,a,i.tree,-e,o.from>=r||o.openStart,o.to<=a||o.openEnd)),s)break;r=l[t].to}}else n.push(new L(a,c,i.tree,-e,o.from>=e||o.openStart,o.to<=l||o.openEnd))}return n}},40373:(e,t,n)=>{"use strict";let r;function i(e){let t=Object.create(null);for(let n of e.split(","))t[n]=1;return e=>e in t}n.d(t,{$3:()=>f,$H:()=>B,BH:()=>W,BX:()=>G,Bm:()=>x,C4:()=>function e(t){let n="";if(k(t))n=t;else if(m(t))for(let r=0;r<t.length;r++){let i=e(t[r]);i&&(n+=i+" ")}else if(C(t))for(let e in t)t[e]&&(n+=e+" ");return n.trim()},CE:()=>g,CP:()=>h,DY:()=>$,Gv:()=>C,J$:()=>J,Kg:()=>k,MZ:()=>o,Mp:()=>c,NO:()=>a,Oj:()=>s,PT:()=>L,Qd:()=>O,Ro:()=>H,SU:()=>I,TF:()=>d,Tg:()=>P,Tn:()=>b,Tr:()=>function e(t){if(m(t)){let n={};for(let r=0;r<t.length;r++){let i=t[r],o=k(i)?function(e){let t={};return e.replace(K,"").split(U).forEach(e=>{if(e){let n=e.split(V);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}(i):e(i);if(o)for(let e in o)n[e]=o[e]}return n}if(k(t)||C(t))return t},We:()=>q,X$:()=>u,Y2:()=>Z,ZH:()=>D,Zf:()=>T,bB:()=>z,cy:()=>m,gd:()=>w,pD:()=>i,rU:()=>F,tE:()=>l,u3:()=>Y,vM:()=>y,yI:()=>N,yL:()=>S,yQ:()=>j});let o={},s=[],l=()=>{},a=()=>!1,c=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||97>e.charCodeAt(2)),h=e=>e.startsWith("onUpdate:"),u=Object.assign,d=(e,t)=>{let n=e.indexOf(t);n>-1&&e.splice(n,1)},p=Object.prototype.hasOwnProperty,f=(e,t)=>p.call(e,t),m=Array.isArray,g=e=>"[object Map]"===A(e),y=e=>"[object Set]"===A(e),v=e=>"[object Date]"===A(e),w=e=>"[object RegExp]"===A(e),b=e=>"function"==typeof e,k=e=>"string"==typeof e,x=e=>"symbol"==typeof e,C=e=>null!==e&&"object"==typeof e,S=e=>(C(e)||b(e))&&b(e.then)&&b(e.catch),M=Object.prototype.toString,A=e=>M.call(e),T=e=>A(e).slice(8,-1),O=e=>"[object Object]"===A(e),N=e=>k(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,I=i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),E=e=>{let t=Object.create(null);return n=>t[n]||(t[n]=e(n))},_=/-\w/g,L=E(e=>e.replace(_,e=>e.slice(1).toUpperCase())),R=/\B([A-Z])/g,P=E(e=>e.replace(R,"-$1").toLowerCase()),D=E(e=>e.charAt(0).toUpperCase()+e.slice(1)),F=E(e=>e?`on${D(e)}`:""),B=(e,t)=>!Object.is(e,t),$=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},j=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},z=e=>{let t=parseFloat(e);return isNaN(t)?e:t},H=e=>{let t=k(e)?Number(e):NaN;return isNaN(t)?e:t},q=()=>r||(r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{}),W=i("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol"),U=/;(?![^(]*\))/g,V=/:([^]+)/,K=/\/\*[^]*?\*\//g,J=i("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Z(e){return!!e||""===e}function G(e,t){if(e===t)return!0;let n=v(e),r=v(t);if(n||r)return!!n&&!!r&&e.getTime()===t.getTime();if(n=x(e),r=x(t),n||r)return e===t;if(n=m(e),r=m(t),n||r)return!!n&&!!r&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=G(e[r],t[r]);return n}(e,t);if(n=C(e),r=C(t),n||r){if(!n||!r||Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e){let r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!G(e[n],t[n]))return!1}}return String(e)===String(t)}function Y(e,t){return e.findIndex(e=>G(e,t))}},45395:(e,t,n)=>{"use strict";let r;n.d(t,{YH:()=>ea,Gu:()=>T,VR:()=>O,Je:()=>ey,xx:()=>G,OF:()=>D,$t:()=>ew,sj:()=>$,iR:()=>A,Nb:()=>J,om:()=>eM,vB:()=>eA,FB:()=>ek,Pe:()=>eu,sU:()=>U,EY:()=>d,ZX:()=>ed,vS:()=>x,Fh:()=>S,QR:()=>eb,y$:()=>eF,zK:()=>k,kn:()=>eB,MK:()=>C});let i=[],o=[];function s(e){return e>=127462&&e<=127487}function l(e,t,n){if(t==e.length)return t;t&&c(e.charCodeAt(t))&&h(e.charCodeAt(t-1))&&t--;let r=a(e,t);for(t+=u(r);t<e.length;){let l=a(e,t);if(8205==r||8205==l||n&&function(e){if(e<768)return!1;for(let t=0,n=i.length;;){let r=t+n>>1;if(e<i[r])n=r;else{if(!(e>=o[r]))return!0;t=r+1}if(t==n)return!1}}(l))t+=u(l),r=l;else if(s(l)){let n=0,r=t-2;for(;r>=0&&s(a(e,r));)n++,r-=2;if(n%2==0)break;t+=2}else break}return t}function a(e,t){let n=e.charCodeAt(t);if(!h(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return c(r)?(n-55296<<10)+(r-56320)+65536:n}function c(e){return e>=56320&&e<57344}function h(e){return e>=55296&&e<56320}function u(e){return e<65536?1:2}(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let t=0,n=0;t<e.length;t++)(t%2?o:i).push(n+=e[t])})();class d{lineAt(e){if(e<0||e>this.length)throw RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=b(this,e,t);let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),f.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=b(this,e,t);let n=[];return this.decompose(e,t,n,0),f.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new g(this),i=new g(e);for(let e=t,o=t;;){if(r.next(e),i.next(e),e=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(o+=r.value.length,r.done||o>=n)return!0}}iter(e=1){return new g(this,e)}iterRange(e,t=this.length){return new y(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new v(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new p(e):f.from(p.split(e,[])):d.empty}}class p extends d{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((t?n:s)>=e)return new w(r,s,n,o);r=s+1,n++}}decompose(e,t,n,r){var i;let o=e<=0&&t>=this.length?this:new p((i=this.text,m(i,[""],e,t)),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=m(o.text,e.text.slice(),0,o.length);if(t.length<=32)n.push(new p(t,e.length+o.length));else{let e=t.length>>1;n.push(new p(t.slice(0,e)),new p(t.slice(e)))}}else n.push(o)}replace(e,t,n){var r;if(!(n instanceof p))return super.replace(e,t,n);[e,t]=b(this,e,t);let i=m(this.text,m(n.text,(r=this.text,m(r,[""],0,e))),t),o=this.length+n.length-(t-e);return i.length<=32?new p(i,o):f.from(p.split(i,[]),o)}sliceString(e,t=this.length,n="\n"){[e,t]=b(this,e,t);let r="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let s=this.text[o],l=i+s.length;i>e&&o&&(r+=n),e<l&&t>i&&(r+=s.slice(Math.max(0,e-i),t-i)),i=l+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new p(n,r)),n=[],r=-1);return r>-1&&t.push(new p(n,r)),t}}class f extends d{constructor(e,t){for(let n of(super(),this.children=e,this.length=t,this.lines=0,e))this.lines+=n.lines}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,l=n+o.lines-1;if((t?l:s)>=e)return o.lineInner(e,t,n,r);r=s+1,n=l+1}}decompose(e,t,n,r){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let s=this.children[i],l=o+s.length;if(e<=l&&t>=o){let i=r&(o<=e|2*(l>=t));o>=e&&l<=t&&!i?n.push(s):s.decompose(e-o,t-o,n,i)}o=l+1}}replace(e,t,n){if([e,t]=b(this,e,t),n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.length;if(e>=i&&t<=s){let l=o.replace(e-i,t-i,n),a=this.lines-o.lines+l.lines;if(l.lines<a>>4&&l.lines>a>>6){let i=this.children.slice();return i[r]=l,new f(i,this.length-(t-e)+n.length)}return super.replace(i,s,l)}i=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){[e,t]=b(this,e,t);let r="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let s=this.children[i],l=o+s.length;o>e&&i&&(r+=n),e<l&&t>o&&(r+=s.sliceString(e-o,t-o,n)),o=l+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof f))return 0;let n=0,[r,i,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,i+=t){if(r==o||i==s)return n;let l=this.children[r],a=e.children[i];if(l!=a)return n+l.scanIdentical(a,t);n+=l.length+1}}static from(e,t=e.reduce((e,t)=>e+t.length+1,-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new p(n,t)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,s=[],l=0,a=-1,c=[];function h(){0!=l&&(s.push(1==c.length?c[0]:f.from(c,a)),a=-1,l=c.length=0)}for(let t of e)!function e(t){let n;if(t.lines>i&&t instanceof f)for(let n of t.children)e(n);else t.lines>o&&(l>o||!l)?(h(),s.push(t)):t instanceof p&&l&&(n=c[c.length-1])instanceof p&&t.lines+n.lines<=32?(l+=t.lines,a+=t.length+1,c[c.length-1]=new p(n.text.concat(t.text),n.length+1+t.length)):(l+t.lines>r&&h(),l+=t.lines,a+=t.length+1,c.push(t))}(t);return h(),1==s.length?s[0]:new f(s,t)}}function m(e,t,n=0,r=1e9){for(let i=0,o=0,s=!0;o<e.length&&i<=r;o++){let l=e[o],a=i+l.length;a>=n&&(a>r&&(l=l.slice(0,r-i)),i<n&&(l=l.slice(n-i)),s?(t[t.length-1]+=l,s=!1):t.push(l)),i=a+1}return t}d.empty=new p([""],0);class g{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof p?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof p?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof p){let i=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof p?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class y{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new g(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class v{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(d.prototype[Symbol.iterator]=function(){return this.iter()},g.prototype[Symbol.iterator]=y.prototype[Symbol.iterator]=v.prototype[Symbol.iterator]=function(){return this});class w{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}function b(e,t,n){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,n))]}function k(e,t,n=!0,r=!0){return function(e,t,n=!0,r=!0){return(n?l:function(e,t,n){for(;t>0;){let r=l(e,t-2,n);if(r<t)return r;t--}return 0})(e,t,r)}(e,t,n,r)}function x(e,t){let n=e.charCodeAt(t);if(!(n>=55296&&n<56320)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return r>=56320&&r<57344?(n-55296<<10)+(r-56320)+65536:n}function C(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10)+55296,(1023&e)+56320)}function S(e){return e<65536?1:2}let M=/\r\n?|\n/;var A=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(A||(A={}));class T{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(e,t=!1){E(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new T(e)}composeDesc(e){return this.empty?e:e.empty?this:L(this,e)}mapDesc(e,t=!1){return e.empty?this:_(this,e,t)}mapPos(e,t=-1,n=A.Simple){let r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],l=this.sections[o++],a=r+s;if(l<0){if(a>e)return i+(e-r);i+=s}else{if(n!=A.Simple&&a>=e&&(n==A.TrackDel&&r<e&&a>e||n==A.TrackBefore&&r<e||n==A.TrackAfter&&a>e))return null;if(a>e||a==e&&t<0&&!s)return e==r||t<0?i:i+l;i+=l}r=a}if(e>r)throw RangeError(`Position ${e} is out of range for changeset of length ${r}`);return i}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=this.sections[n++],o=this.sections[n++],s=r+i;if(o>=0&&r<=t&&s>=e)return!(r<e)||!(s>t)||"cover";r=s}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(e=>"number"!=typeof e))throw RangeError("Invalid JSON representation of ChangeDesc");return new T(e)}static create(e){return new T(e)}}class O extends T{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw RangeError("Applying change set to a document with the wrong length");return E(this,(t,n,r,i,o)=>e=e.replace(r,r+(n-t),o),!1),e}mapDesc(e,t=!1){return _(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let l=r>>1;for(;n.length<l;)n.push(d.empty);n.push(o?e.slice(i,i+o):d.empty)}i+=o}return new O(t,n)}compose(e){return this.empty?e:e.empty?this:L(this,e,!0)}map(e,t=!1){return e.empty?this:_(this,e,t,!0)}iterChanges(e,t=!1){E(this,e,t)}get desc(){return T.create(this.sections)}filter(e){let t=[],n=[],r=[],i=new R(this);i:for(let o=0,s=0;;){let l=o==e.length?1e9:e[o++];for(;s<l||s==l&&0==i.len;){if(i.done)break i;let e=Math.min(i.len,l-s);N(r,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;N(t,e,o),o>0&&I(n,t,i.text),i.forward(e),s+=e}let a=e[o++];for(;s<a;){if(i.done)break i;let e=Math.min(i.len,a-s);N(t,e,-1),N(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),s+=e}}return{changes:new O(t,n),filtered:T.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],o=0,s=null;function l(e=!1){if(!e&&!r.length)return;o<t&&N(r,t-o,-1);let n=new O(r,i);s=s?s.compose(n.map(s)):n,r=[],i=[],o=0}return!function e(a){if(Array.isArray(a))for(let t of a)e(t);else if(a instanceof O){if(a.length!=t)throw RangeError(`Mismatched change set length (got ${a.length}, expected ${t})`);l(),s=s?s.compose(a.map(s)):a}else{let{from:e,to:s=e,insert:c}=a;if(e>s||e<0||s>t)throw RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let h=c?"string"==typeof c?d.of(c.split(n||M)):c:d.empty,u=h.length;if(e==s&&0==u)return;e<o&&l(),e>o&&N(r,e-o,-1),N(r,s-e,u),I(i,r,h),o=s}}(e),l(!s),s}static empty(e){return new O(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else if(!Array.isArray(i)||"number"!=typeof i[0]||i.some((e,t)=>t&&"string"!=typeof e))throw RangeError("Invalid JSON representation of ChangeSet");else if(1==i.length)t.push(i[0],0);else{for(;n.length<r;)n.push(d.empty);n[r]=d.of(i.slice(1)),t.push(i[0],n[r].length)}}return new O(t,n)}static createSet(e,t){return new O(e,t)}}function N(e,t,n,r=!1){if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:i>=0&&0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function I(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(d.empty);e.push(n)}}function E(e,t,n){let r=e.inserted;for(let i=0,o=0,s=0;s<e.sections.length;){let l=e.sections[s++],a=e.sections[s++];if(a<0)i+=l,o+=l;else{let c=i,h=o,u=d.empty;for(;c+=l,h+=a,a&&r&&(u=u.append(r[s-2>>1])),!n&&s!=e.sections.length&&!(e.sections[s+1]<0);)l=e.sections[s++],a=e.sections[s++];t(i,c,o,h,u),i=c,o=h}}}function _(e,t,n,r=!1){let i=[],o=r?[]:null,s=new R(e),l=new R(t);for(let e=-1;;)if(s.done&&l.len||l.done&&s.len)throw Error("Mismatched change set lengths");else if(-1==s.ins&&-1==l.ins){let e=Math.min(s.len,l.len);N(i,e,-1),s.forward(e),l.forward(e)}else if(l.ins>=0&&(s.ins<0||e==s.i||0==s.off&&(l.len<s.len||l.len==s.len&&!n))){let t=l.len;for(N(i,l.ins,-1);t;){let n=Math.min(s.len,t);s.ins>=0&&e<s.i&&s.len<=n&&(N(i,0,s.ins),o&&I(o,i,s.text),e=s.i),s.forward(n),t-=n}l.next()}else if(s.ins>=0){let t=0,n=s.len;for(;n;)if(-1==l.ins){let e=Math.min(n,l.len);t+=e,n-=e,l.forward(e)}else if(0==l.ins&&l.len<n)n-=l.len,l.next();else break;N(i,t,e<s.i?s.ins:0),o&&e<s.i&&I(o,i,s.text),e=s.i,s.forward(s.len-n)}else if(s.done&&l.done)return o?O.createSet(i,o):T.create(i);else throw Error("Mismatched change set lengths")}function L(e,t,n=!1){let r=[],i=n?[]:null,o=new R(e),s=new R(t);for(let e=!1;;)if(o.done&&s.done)return i?O.createSet(r,i):T.create(r);else if(0==o.ins)N(r,o.len,0,e),o.next();else if(0!=s.len||s.done)if(o.done||s.done)throw Error("Mismatched change set lengths");else{let t=Math.min(o.len2,s.len),n=r.length;if(-1==o.ins){let n=-1==s.ins?-1:s.off?0:s.ins;N(r,t,n,e),i&&n&&I(i,r,s.text)}else -1==s.ins?(N(r,o.off?0:o.len,t,e),i&&I(i,r,o.textBit(t))):(N(r,o.off?0:o.len,s.off?0:s.ins,e),i&&!s.off&&I(i,r,s.text));e=(o.ins>t||s.ins>=0&&s.len>t)&&(e||r.length>n),o.forward2(t),s.forward(t)}else N(r,0,s.ins,e),i&&I(i,r,s.text),s.next()}class R{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return -2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?d.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?d.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class P{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 0xffffff==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new P(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return D.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return D.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw RangeError("Invalid JSON representation for SelectionRange");return D.range(e.anchor,e.head)}static create(e,t,n){return new P(e,t,n)}}class D{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:D.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new D([this.main],0)}addRange(e,t=!0){return D.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,D.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw RangeError("Invalid JSON representation for EditorSelection");return new D(e.ranges.map(e=>P.fromJSON(e)),e.main)}static single(e,t=e){return new D([D.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return D.normalized(e.slice(),t);n=i.to}return new D(e,t)}static cursor(e,t=0,n,r){return P.create(e,e,(0==t?0:t<0?8:16)|(null==n?7:Math.min(6,n))|(null!=r?r:0xffffff)<<6)}static range(e,t,n,r){let i=(null!=n?n:0xffffff)<<6|(null==r?7:Math.min(6,r));return t<e?P.create(t,e,48|i):P.create(e,t,8*(t>e)|i)}static normalized(e,t=0){let n=e[t];e.sort((e,t)=>e.from-t.from),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],i=e[n-1];if(r.empty?r.from<=i.to:r.from<i.to){let o=i.from,s=Math.max(r.to,i.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?D.range(s,o):D.range(o,s))}}return new D(e,t)}}function F(e,t){for(let n of e.ranges)if(n.to>t)throw RangeError("Selection points outside of document")}let B=0;class ${constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=B++,this.default=e([]),this.extensions="function"==typeof i?i(this):i}get reader(){return this}static define(e={}){return new $(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(!e.combine?j:(e,t)=>e===t),!!e.static,e.enables)}of(e){return new z([],this,0,e)}compute(e,t){if(this.isStatic)throw Error("Can't compute a static facet");return new z(e,this,1,t)}computeN(e,t){if(this.isStatic)throw Error("Can't compute a static facet");return new z(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],n=>t(n.field(e)))}}function j(e,t){return e==t||e.length==t.length&&e.every((e,n)=>e===t[n])}class z{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=B++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,o=e[i]>>1,s=2==this.type,l=!1,a=!1,c=[];for(let n of this.dependencies)"doc"==n?l=!0:"selection"==n?a=!0:((null!=(t=e[n.id])?t:1)&1)==0&&c.push(e[n.id]);return{create:e=>(e.values[o]=n(e),1),update(e,t){if(l&&t.docChanged||a&&(t.docChanged||t.selection)||q(e,c)){let t=n(e);if(s?!H(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let l,a=t.config.address[i];if(null!=a){let i=ee(t,a);if(this.dependencies.every(n=>n instanceof $?t.facet(n)===e.facet(n):!(n instanceof U)||t.field(n,!1)==e.field(n,!1))||(s?H(l=n(e),i,r):r(l=n(e),i)))return e.values[o]=i,0}else l=n(e);return e.values[o]=l,1}}}}function H(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function q(e,t){let n=!1;for(let r of t)1&Q(e,r)&&(n=!0);return n}let W=$.define({static:!0});class U{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new U(B++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(W).find(e=>e.field==this);return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>{let r=e.facet(W),i=n.facet(W),o;return(o=r.find(e=>e.field==this))&&o!=i.find(e=>e.field==this)?(e.values[t]=o.create(e),1):null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}}init(e){return[this,W.of({field:this,create:e})]}get extension(){return this}}let V={lowest:4,low:3,default:2,high:1,highest:0};function K(e){return t=>new Z(t,e)}let J={highest:K(V.highest),high:K(V.high),default:K(V.default),low:K(V.low),lowest:K(V.lowest)};class Z{constructor(e,t){this.inner=e,this.prec=t}}class G{of(e){return new Y(this,e)}reconfigure(e){return G.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Y{constructor(e,t){this.compartment=e,this.inner=t}}class X{constructor(e,t,n,r,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){var r,i,o;let s,l,a=[],c=Object.create(null),h=new Map;for(let n of(r=e,i=t,o=h,s=[[],[],[],[],[]],l=new Map,!function e(t,n){let r=l.get(t);if(null!=r){if(r<=n)return;let e=s[r].indexOf(t);e>-1&&s[r].splice(e,1),t instanceof Y&&o.delete(t.compartment)}if(l.set(t,n),Array.isArray(t))for(let r of t)e(r,n);else if(t instanceof Y){if(o.has(t.compartment))throw RangeError("Duplicate use of compartment in extensions");let r=i.get(t.compartment)||t.inner;o.set(t.compartment,r),e(r,n)}else if(t instanceof Z)e(t.inner,t.prec);else if(t instanceof U)s[n].push(t),t.provides&&e(t.provides,n);else if(t instanceof z)s[n].push(t),t.facet.extensions&&e(t.facet.extensions,V.default);else{let r=t.extension;if(!r)throw Error(`Unrecognized extension value in extension set (${t}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(r,n)}}(r,V.default),s.reduce((e,t)=>e.concat(t))))n instanceof U?a.push(n):(c[n.facet.id]||(c[n.facet.id]=[])).push(n);let u=Object.create(null),d=[],p=[];for(let e of a)u[e.id]=p.length<<1,p.push(t=>e.slot(t));let f=null==n?void 0:n.config.facets;for(let e in c){let t=c[e],r=t[0].facet,i=f&&f[e]||[];if(t.every(e=>0==e.type))if(u[r.id]=d.length<<1|1,j(i,t))d.push(n.facet(r));else{let e=r.combine(t.map(e=>e.value));d.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}else{for(let e of t)0==e.type?(u[e.id]=d.length<<1|1,d.push(e.value)):(u[e.id]=p.length<<1,p.push(t=>e.dynamicSlot(t)));u[r.id]=p.length<<1,p.push(e=>(function(e,t,n){let r=n.map(t=>e[t.id]),i=n.map(e=>e.type),o=r.filter(e=>!(1&e)),s=e[t.id]>>1;function l(e){let n=[];for(let t=0;t<r.length;t++){let o=ee(e,r[t]);if(2==i[t])for(let e of o)n.push(e);else n.push(o)}return t.combine(n)}return{create(e){for(let t of r)Q(e,t);return e.values[s]=l(e),1},update(e,n){if(!q(e,o))return 0;let r=l(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,i){let o=q(e,r),a=i.config.facets[t.id],c=i.facet(t);if(a&&!o&&j(n,a))return e.values[s]=c,0;let h=l(e);return t.compare(h,c)?(e.values[s]=c,0):(e.values[s]=h,1)}}})(e,r,t))}}return new X(e,h,p.map(e=>e(u)),u,d,c)}}function Q(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function ee(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}let et=$.define(),en=$.define({combine:e=>e.some(e=>e),static:!0}),er=$.define({combine:e=>e.length?e[0]:void 0,static:!0}),ei=$.define(),eo=$.define(),es=$.define(),el=$.define({combine:e=>!!e.length&&e[0]});class ea{constructor(e,t){this.type=e,this.value=t}static define(){return new ec}}class ec{of(e){return new ea(this,e)}}class eh{constructor(e){this.map=e}of(e){return new eu(this,e)}}class eu{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new eu(this.type,t)}is(e){return this.type==e}static define(e={}){return new eh(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}eu.reconfigure=eu.define(),eu.appendConfig=eu.define();class ed{constructor(e,t,n,r,i,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&F(n,t.newLength),i.some(e=>e.type==ed.time)||(this.annotations=i.concat(ed.time.of(Date.now())))}static create(e,t,n,r,i,o){return new ed(e,t,n,r,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(ed.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function ep(e,t,n){var r;let i,o,s;return n?(i=t.changes,o=O.empty(t.changes.length),s=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(i)),{changes:s,selection:t.selection?t.selection.map(o):null==(r=e.selection)?void 0:r.map(i),effects:eu.mapEffects(e.effects,i).concat(eu.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function ef(e,t,n){let r=t.selection,i=eg(t.annotations);return t.userEvent&&(i=i.concat(ed.userEvent.of(t.userEvent))),{changes:t.changes instanceof O?t.changes:O.of(t.changes||[],n,e.facet(er)),selection:r&&(r instanceof D?r:D.single(r.anchor,r.head)),effects:eg(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}ed.time=ea.define(),ed.userEvent=ea.define(),ed.addToHistory=ea.define(),ed.remote=ea.define();let em=[];function eg(e){return null==e?em:Array.isArray(e)?e:[e]}var ey=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(ey||(ey={}));let ev=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{r=RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}class ew{constructor(e,t,n,r,i,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)Q(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null==n){if(t)throw RangeError("Field is not present in this state");return}return Q(this,n),ee(this,n)}update(...e){return function e(t,n,r){let i=ef(t,n.length?n[0]:{},t.doc.length);n.length&&!1===n[0].filter&&(r=!1);for(let e=1;e<n.length;e++){!1===n[e].filter&&(r=!1);let o=!!n[e].sequential;i=ep(i,ef(t,n[e],o?i.changes.newLength:t.doc.length),o)}let o=ed.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function(e){let t=e.startState,n=t.facet(es),r=e;for(let i=n.length-1;i>=0;i--){let o=n[i](e);o&&Object.keys(o).length&&(r=ep(r,ef(t,o,e.changes.newLength),!0))}return r==e?e:ed.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(r?function(t){let n=t.startState,r=!0;for(let e of n.facet(ei)){let n=e(t);if(!1===n){r=!1;break}Array.isArray(n)&&(r=!0===r?n:function(e,t){let n=[];for(let r=0,i=0;;){let o,s;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],s=e[r++];else{if(!(i<t.length))return n;o=t[i++],s=t[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}(r,n))}if(!0!==r){let e,i;if(!1===r)i=t.changes.invertedDesc,e=O.empty(n.doc.length);else{let n=t.changes.filter(r);e=n.changes,i=n.filtered.mapDesc(n.changes).invertedDesc}t=ed.create(n,e,t.selection&&t.selection.map(i),eu.mapEffects(t.effects,i),t.annotations,t.scrollIntoView)}let i=n.facet(eo);for(let r=i.length-1;r>=0;r--){let o=i[r](t);t=o instanceof ed?o:Array.isArray(o)&&1==o.length&&o[0]instanceof ed?o[0]:e(n,eg(o),!1)}return t}(o):o)}(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:i}=n;for(let t of e.effects)t.is(G.reconfigure)?(n&&(i=new Map,n.compartments.forEach((e,t)=>i.set(t,e)),n=null),i.set(t.value.compartment,t.value.extension)):t.is(eu.reconfigure)?(n=null,r=t.value):t.is(eu.appendConfig)&&(n=null,r=eg(r).concat(t.value));t=n?e.startState.values.slice():new ew(n=X.resolve(r,i,this),this.doc,this.selection,n.dynamicSlots.map(()=>null),(e,t)=>t.reconfigure(e,this),null).values;let o=e.startState.facet(en)?e.newSelection:e.newSelection.asSingle();new ew(n,e.newDoc,o,t,(t,n)=>n.update(t,e),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:D.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=eg(n.effects);for(let n=1;n<t.ranges.length;n++){let s=e(t.ranges[n]),l=this.changes(s.changes),a=l.map(r);for(let e=0;e<n;e++)i[e]=i[e].map(a);let c=r.mapDesc(l,!0);i.push(s.range.map(c)),r=r.compose(a),o=eu.mapEffects(o,a).concat(eu.mapEffects(eg(s.effects),c))}return{changes:r,selection:D.create(i,t.mainIndex),effects:o}}changes(e=[]){return e instanceof O?e:O.of(e,this.doc.length,this.facet(ew.lineSeparator))}toText(e){return d.of(e.split(this.facet(ew.lineSeparator)||M))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(Q(this,t),ee(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof U&&null!=this.config.address[r.id]&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw RangeError("Invalid JSON representation for EditorState");let r=[];if(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(e,t)){let i=n[t],o=e[t];r.push(i.init(e=>i.spec.fromJSON(o,e)))}}return ew.create({doc:e.doc,selection:D.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=X.resolve(e.extensions||[],new Map),n=e.doc instanceof d?e.doc:d.of((e.doc||"").split(t.staticFacet(ew.lineSeparator)||M)),r=e.selection?e.selection instanceof D?e.selection:D.single(e.selection.anchor,e.selection.head):D.single(0);return F(r,n.length),t.staticFacet(en)||(r=r.asSingle()),new ew(t,n,r,t.dynamicSlots.map(()=>null),(e,t)=>t.create(e),null)}get tabSize(){return this.facet(ew.tabSize)}get lineBreak(){return this.facet(ew.lineSeparator)||"\n"}get readOnly(){return this.facet(el)}phrase(e,...t){for(let t of this.facet(ew.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(e,n)=>{if("$"==n)return"$";let r=+(n||1);return!r||r>t.length?e:t[r-1]})),e}languageDataAt(e,t,n=-1){let r=[];for(let i of this.facet(et))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){var t;return t=this.languageDataAt("wordChars",e).join(""),e=>{if(!/\S/.test(e))return ey.Space;if(function(e){if(r)return r.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||ev.test(n)))return!0}return!1}(e))return ey.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ey.Word;return ey.Other}}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let e=k(t,o,!1);if(i(t.slice(e,o))!=ey.Word)break;o=e}for(;s<r;){let e=k(t,s);if(i(t.slice(s,e))!=ey.Word)break;s=e}return o==s?null:D.range(o+n,s+n)}}function eb(e,t,n={}){let r={};for(let t of e)for(let e of Object.keys(t)){let i=t[e],o=r[e];if(void 0===o)r[e]=i;else if(o===i||void 0===i);else if(Object.hasOwnProperty.call(n,e))r[e]=n[e](o,i);else throw Error("Config merge conflict for field "+e)}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}ew.allowMultipleSelections=en,ew.tabSize=$.define({combine:e=>e.length?e[0]:4}),ew.lineSeparator=er,ew.readOnly=el,ew.phrases=$.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every(n=>e[n]==t[n])}}),ew.languageData=et,ew.changeFilter=ei,ew.transactionFilter=eo,ew.transactionExtender=es,G.reconfigure=eu.define();class ek{eq(e){return this==e}range(e,t=e){return ex.create(e,t,this)}}ek.prototype.startSide=ek.prototype.endSide=0,ek.prototype.point=!1,ek.prototype.mapMode=A.TrackDel;class ex{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new ex(e,t,n)}}function eC(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class eS{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,l=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return l>=0?o:s;l>=0?s=r:o=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],o=-1,s=-1;for(let l=0;l<this.value.length;l++){let a=this.value[l],c=this.from[l]+e,h=this.to[l]+e,u,d;if(c==h){let e=t.mapPos(c,a.startSide,a.mapMode);if(null==e||(u=d=e,a.startSide!=a.endSide&&(d=t.mapPos(c,a.endSide))<u))continue}else if((u=t.mapPos(c,a.startSide))>(d=t.mapPos(h,a.endSide))||u==d&&a.startSide>0&&a.endSide<=0)continue;0>(d-u||a.endSide-a.startSide)||(o<0&&(o=u),a.point&&(s=Math.max(s,d-u)),n.push(a),r.push(u-o),i.push(d-o))}return{mapped:n.length?new eS(r,i,n,s):null,pos:o}}}class eM{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new eM(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(n&&(t=t.slice().sort(eC)),this.isEmpty)return t.length?eM.of(t):this;let s=new eO(this,null,-1).goto(0),l=0,a=[],c=new eA;for(;s.value||l<t.length;)if(l<t.length&&(s.from-t[l].from||s.startSide-t[l].value.startSide)>=0){let e=t[l++];c.addInner(e.from,e.to,e.value)||a.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(s.chunkIndex)<t[l].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&!c.addInner(s.from,s.to,s.value)&&a.push(ex.create(s.from,s.to,s.value)),s.next());return c.finishInner(this.nextLayer.isEmpty&&!a.length?eM.empty:this.nextLayer.update({add:a,filter:o,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i],l=e.touchesRange(o,o+s.length);if(!1===l)r=Math.max(r,s.maxPoint),t.push(s),n.push(e.mapPos(o));else if(!0===l){let{mapped:i,pos:l}=s.map(o,e);i&&(r=Math.max(r,i.maxPoint),t.push(i),n.push(l))}}let i=this.nextLayer.map(e);return 0==t.length?i:new eM(n,t,i||eM.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return eN.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return eN.from(e).goto(t)}static compare(e,t,n,r,i=-1){let o=e.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i),s=t.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i),l=eT(o,s,n),a=new eE(o,l,i),c=new eE(s,l,i);n.iterGaps((e,t,n)=>e_(a,e,c,t,n,r)),n.empty&&0==n.length&&e_(a,0,c,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=0x3b9ac9ff);let i=e.filter(e=>!e.isEmpty&&0>t.indexOf(e)),o=t.filter(t=>!t.isEmpty&&0>e.indexOf(t));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=eT(i,o),l=new eE(i,s,0).goto(n),a=new eE(o,s,0).goto(n);for(;;){if(l.to!=a.to||!eL(l.active,a.active)||l.point&&(!a.point||!l.point.eq(a.point)))return!1;if(l.to>r)return!0;l.next(),a.next()}}static spans(e,t,n,r,i=-1){let o=new eE(e,null,i).goto(t),s=t,l=o.openStart;for(;;){let e=Math.min(o.to,n);if(o.point){let n=o.activeForPoint(o.to),i=o.pointFrom<t?n.length+1:o.point.startSide<0?n.length:Math.min(n.length,l);r.point(s,e,o.point,n,i,o.pointRank),l=Math.min(o.openEnd(e),n.length)}else e>s&&(r.span(s,e,o.active,l),l=o.openEnd(e));if(o.to>n)return l+(o.point&&o.to>n?1:0);s=o.to,o.next()}}static of(e,t=!1){let n=new eA;for(let r of e instanceof ex?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(eC(t,r)>0)return e.slice().sort(eC);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}static join(e){if(!e.length)return eM.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let r=e[n];r!=eM.empty;r=r.nextLayer)t=new eM(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}eM.empty=new eM([],[],null,-1),eM.empty.nextLayer=eM.empty;class eA{finishChunk(e){this.chunks.push(new eS(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new eA)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&0>(e-this.lastFrom||n.startSide-this.last.startSide))throw Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if(0>(e-this.lastTo||t.value[0].startSide-this.last.endSide))return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(eM.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=eM.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function eT(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let i=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let o=r.get(e.chunk[t]);null==o||(n?n.mapPos(o):o)!=e.chunkPos[t]||(null==n?void 0:n.touchesRange(o,o+e.chunk[t].length))||i.add(e.chunk[t])}return i}class eO{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){0>(this.to-e||this.endSide-t)&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class eN{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new eO(o,t,n,i));return 1==r.length?r[0]:new eN(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)eI(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)eI(this.heap,e);0>(this.to-e||this.value.endSide-t)&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),eI(this.heap,0)}}}function eI(e,t){for(let n=e[t];;){let r=(t<<1)+1;if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),0>n.compare(i))break;e[r]=n,e[t]=i,t=r}}class eE{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=eN.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&0>(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t);)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){eR(this.active,e),eR(this.activeTo,e),eR(this.activeRank,e),this.minActive=eD(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;for(;t<this.activeRank.length&&(i-this.activeRank[t]||r-this.activeTo[t])>0;)t++;eP(this.active,t,n),eP(this.activeTo,t,r),eP(this.activeRank,t,i),e&&eP(e,t,this.cursor.from),this.minActive=eD(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&0>(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&eR(n,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let e=this.cursor.value;if(e.point)if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}else this.addActive(n),this.cursor.next()}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function e_(e,t,n,r,i,o){e.goto(t),n.goto(r);let s=r+i,l=r,a=r-t;for(;;){let t=e.to+a-n.to,r=t||e.endSide-n.endSide,i=r<0?e.to+a:n.to,c=Math.min(i,s);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&eL(e.activeForPoint(e.to),n.activeForPoint(n.to))||o.comparePoint(l,c,e.point,n.point):c>l&&!eL(e.active,n.active)&&o.compareRange(l,c,e.active,n.active),i>s)break;(t||e.openEnd!=n.openEnd)&&o.boundChange&&o.boundChange(i),l=i,r<=0&&e.next(),r>=0&&n.next()}}function eL(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function eR(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function eP(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function eD(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)0>(t[i]-r||e[i].endSide-e[n].endSide)&&(n=i,r=t[i]);return n}function eF(e,t,n=e.length){let r=0;for(let i=0;i<n&&i<e.length;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=k(e,i));return r}function eB(e,t,n,r){for(let r=0,i=0;;){if(i>=t)return r;if(r==e.length)break;i+=9==e.charCodeAt(r)?n-i%n:1,r=k(e,r)}return!0===r?-1:e.length}},51876:(e,t,n)=>{"use strict";n.d(t,{$t:()=>C,LN:()=>s,U3:()=>h,hs:()=>T,i5:()=>f,k_:()=>S,nh:()=>d,yn:()=>l});var r=n(92322),i=n(62463);let o=Object.create(null);class s{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new l(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=r.Ji.empty){let n=t.content.lastChild,i=null;for(let e=0;e<t.openEnd;e++)i=n,n=n.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],h=e.mapping.slice(o);e.replaceRange(h.map(a.pos),h.map(c.pos),l?r.Ji.empty:t),0==l&&y(e,o,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],l=e.mapping.slice(n),a=l.map(o.pos),c=l.map(s.pos);i?e.deleteRange(a,c):(e.replaceRangeWith(a,c,t),y(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new h(e):g(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let r=e.depth-1;r>=0;r--){let i=t<0?g(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):g(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new f(e.node(0))}static atStart(e){return g(e,e,0,0,1)||new f(e)}static atEnd(e){return g(e,e,e.content.size,e.childCount,-1)||new f(e)}static fromJSON(e,t){if(!t||!t.type)throw RangeError("Invalid input for Selection.fromJSON");let n=o[t.type];if(!n)throw RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in o)throw RangeError("Duplicate use of selection JSON ID "+e);return o[e]=t,t.prototype.jsonID=e,t}getBookmark(){return h.between(this.$anchor,this.$head).getBookmark()}}s.prototype.visible=!0;class l{constructor(e,t){this.$from=e,this.$to=t}}let a=!1;function c(e){a||e.parent.inlineContent||(a=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class h extends s{constructor(e,t=e){c(e),c(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return s.near(n);let r=e.resolve(t.map(this.anchor));return new h(r.parent.inlineContent?r:n,n)}replace(e,t=r.Ji.empty){if(super.replace(e,t),t==r.Ji.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof h&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new u(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new h(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if((!n||r)&&(n=r>=0?1:-1),!t.parent.inlineContent){let e=s.findFrom(t,n,!0)||s.findFrom(t,-n,!0);if(!e)return s.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r?e=t:(e=(s.findFrom(e,-n,!0)||s.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0&&(e=t)),new h(e,t)}}s.jsonID("text",h);class u{constructor(e,t){this.anchor=e,this.head=t}map(e){return new u(e.map(this.anchor),e.map(this.head))}resolve(e){return h.between(e.resolve(this.anchor),e.resolve(this.head))}}class d extends s{constructor(e){let t=e.nodeAfter;super(e,e.node(0).resolve(e.pos+t.nodeSize)),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),i=e.resolve(r);return n?s.near(i):new d(i)}content(){return new r.Ji(r.FK.from(this.node),0,0)}eq(e){return e instanceof d&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new p(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new d(e.resolve(t.anchor))}static create(e,t){return new d(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}d.prototype.visible=!1,s.jsonID("node",d);class p{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new u(n,n):new p(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&d.isSelectable(n)?new d(t):s.near(t)}}class f extends s{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=r.Ji.empty){if(t==r.Ji.empty){e.delete(0,e.doc.content.size);let t=s.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new f(e)}map(e){return new f(e)}eq(e){return e instanceof f}getBookmark(){return m}}s.jsonID("all",f);let m={map(){return this},resolve:e=>new f(e)};function g(e,t,n,r,i,o=!1){if(t.inlineContent)return h.create(e,n);for(let s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let r=t.child(s);if(r.isAtom){if(!o&&d.isSelectable(r))return d.create(e,n-(i<0?r.nodeSize:0))}else{let t=g(e,r,n+i,i<0?r.childCount:0,i,o);if(t)return t}n+=r.nodeSize*i}return null}function y(e,t,n){let r,o=e.steps.length-1;if(o<t)return;let l=e.steps[o];(l instanceof i.Ln||l instanceof i.Wg)&&(e.mapping.maps[o].forEach((e,t,n,i)=>{null==r&&(r=i)}),e.setSelection(s.near(e.doc.resolve(r),n)))}class v extends i.dL{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(1|this.updated)&-3,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return r.CU.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.CU.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.selection.to!=t+e.length||this.setSelection(s.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function w(e,t){return t&&e?e.bind(t):e}class b{constructor(e,t,n){this.name=e,this.init=w(t.init,n),this.apply=w(t.apply,n)}}let k=[new b("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new b("selection",{init:(e,t)=>e.selection||s.atStart(t.doc),apply:e=>e.selection}),new b("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new b("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class x{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=k.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new b(e.key,e.spec.state,e))})}}class C{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let l=r?r[o].n:0,a=r?r[o].state:this,c=l<t.length&&s.spec.appendTransaction.call(s,l?t.slice(l):t,a,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<o?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let t=new C(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new v(this)}static create(e){let t=new x(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new C(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new x(this.schema,e.plugins),n=t.fields,r=new C(t);for(let t=0;t<n.length;t++){let i=n[t].name;r[i]=this.hasOwnProperty(i)?this[i]:n[t].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw RangeError("Required config field 'schema' missing");let i=new x(e.schema,e.plugins),o=new C(i);return i.fields.forEach(i=>{if("doc"==i.name)o.doc=r.bP.fromJSON(e.schema,t.doc);else if("selection"==i.name)o.selection=s.fromJSON(o.doc,t.selection);else if("storedMarks"==i.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let r in n){let s=n[r],l=s.spec.state;if(s.key==i.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,r)){o[i.name]=l.fromJSON.call(s,e,t[r],o);return}}o[i.name]=i.init(e,o)}}),o}}class S{constructor(e){this.spec=e,this.props={},e.props&&function e(t,n,r){for(let i in t){let o=t[i];o instanceof Function?o=o.bind(n):"handleDOMEvents"==i&&(o=e(o,n,{})),r[i]=o}return r}(e.props,this,this.props),this.key=e.key?e.key.key:A("plugin")}getState(e){return e[this.key]}}let M=Object.create(null);function A(e){return e in M?e+"$"+ ++M[e]:(M[e]=0,e+"$")}class T{constructor(e="key"){this.key=A(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}},62463:(e,t,n)=>{"use strict";n.d(t,{$L:()=>T,Ln:()=>m,Um:()=>A,Wg:()=>g,X9:()=>s,XE:()=>u,dL:()=>B,jP:()=>w,n9:()=>M,oM:()=>b,zy:()=>S});var r=n(92322);class i{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class o{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&o.empty)return o.empty}recover(e){let t=0,n=65535&e;if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+(e-(65535&e))/65536}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+o],h=this.ranges[l+s],u=a+c;if(e<=u){let o=c?e==a?-1:e==u?1:t:t,s=a+r+(o<0?0:h);if(n)return s;let d=e==(t<0?a:u)?null:l/3+(e-a)*65536,p=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(p|=8),new i(s,p,d)}r+=h-c}return n?e+r:new i(e+r,0,null)}touches(e,t){let n=0,r=65535&t,i=this.inverted?2:1,o=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let s=this.ranges[t]-(this.inverted?n:0);if(s>e)break;let l=this.ranges[t+i];if(e<=s+l&&t==3*r)return!0;n+=this.ranges[t+o]-l}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?i:0),l=o+(this.inverted?0:i),a=this.ranges[r+t],c=this.ranges[r+n];e(s,s+a,l,l+c),i+=c-a}}invert(){return new o(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?o.empty:new o(e<0?[0,-e,0]:[0,0,e])}}o.empty=new o([]);class s{constructor(e,t,n=0,r=e?e.length:0){this.mirror=t,this.from=n,this.to=r,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new s(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let r=e.getMirror(t);this.appendMap(e._maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new s;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let n=this.from;n<this.to;n++){let i=this._maps[n].mapResult(e,t);if(null!=i.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this._maps[t].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new i(e,r,null)}}let l=Object.create(null);class a{getMap(){return o.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let n=l[t.stepType];if(!n)throw RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in l)throw RangeError("Duplicate use of step JSON ID "+e);return l[e]=t,t.prototype.jsonID=e,t}}class c{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new c(e,null)}static fail(e){return new c(null,e)}static fromReplace(e,t,n,i){try{return c.ok(e.replace(t,n,i))}catch(e){if(e instanceof r.vI)return c.fail(e.message);throw e}}}function h(e,t,n){let i=[];for(let r=0;r<e.childCount;r++){let o=e.child(r);o.content.size&&(o=o.copy(h(o.content,t,o))),o.isInline&&(o=t(o,n,r)),i.push(o)}return r.FK.fromArray(i)}class u extends a{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),o=new r.Ji(h(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,i),t.openStart,t.openEnd);return c.fromReplace(e,this.from,this.to,o)}invert(){return new d(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new u(t.pos,n.pos,this.mark)}merge(e){return e instanceof u&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new u(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new u(t.from,t.to,e.markFromJSON(t.mark))}}a.jsonID("addMark",u);class d extends a{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new r.Ji(h(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return c.fromReplace(e,this.from,this.to,n)}invert(){return new u(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new d(t.pos,n.pos,this.mark)}merge(e){return e instanceof d&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new d(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new d(t.from,t.to,e.markFromJSON(t.mark))}}a.jsonID("removeMark",d);class p extends a{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return c.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return c.fromReplace(e,this.pos,this.pos+1,new r.Ji(r.FK.from(n),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new p(this.pos,t.marks[n]);return new p(this.pos,this.mark)}}return new f(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new p(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new p(t.pos,e.markFromJSON(t.mark))}}a.jsonID("addNodeMark",p);class f extends a{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return c.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return c.fromReplace(e,this.pos,this.pos+1,new r.Ji(r.FK.from(n),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new p(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new f(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new f(t.pos,e.markFromJSON(t.mark))}}a.jsonID("removeNodeMark",f);class m extends a{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&y(e,this.from,this.to)?c.fail("Structure replace would overwrite content"):c.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new o([this.from,this.to-this.from,this.slice.size])}invert(e){return new m(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new m(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof m)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart)if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;else{let t=this.slice.size+e.slice.size==0?r.Ji.empty:new r.Ji(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new m(e.from,this.to,t,this.structure)}{let t=this.slice.size+e.slice.size==0?r.Ji.empty:new r.Ji(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new m(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new m(t.from,t.to,r.Ji.fromJSON(e,t.slice),!!t.structure)}}a.jsonID("replace",m);class g extends a{constructor(e,t,n,r,i,o,s=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=s}apply(e){if(this.structure&&(y(e,this.from,this.gapFrom)||y(e,this.gapTo,this.to)))return c.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return c.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?c.fromReplace(e,this.from,this.to,n):c.fail("Content does not fit in gap")}getMap(){return new o([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new g(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||i>n.pos?null:new g(t.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new g(t.from,t.to,t.gapFrom,t.gapTo,r.Ji.fromJSON(e,t.slice),t.insert,!!t.structure)}}function y(e,t,n){let r=e.resolve(t),i=n-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let e=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function v(e,t,n,i=n.contentMatch,o=!0){let s=e.doc.nodeAt(t),l=[],a=t+1;for(let t=0;t<s.childCount;t++){let c=s.child(t),h=a+c.nodeSize,u=i.matchType(c.type);if(u){i=u;for(let t=0;t<c.marks.length;t++)n.allowsMarkType(c.marks[t].type)||e.step(new d(a,h,c.marks[t]));if(o&&c.isText&&"pre"!=n.whitespace){let e,t=/\r?\n|\r/g,i;for(;e=t.exec(c.text);)i||(i=new r.Ji(r.FK.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),l.push(new m(a+e.index,a+e.index+e[0].length,i))}}else l.push(new m(a,h,r.Ji.empty));a=h}if(!i.validEnd){let t=i.fillBefore(r.FK.empty,!0);e.replace(a,a,new r.Ji(t,0,0))}for(let t=l.length-1;t>=0;t--)e.step(l[t])}function w(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth,r=0,i=0;;--n){let o=e.$from.node(n),s=e.$from.index(n)+r,l=e.$to.indexAfter(n)-i;if(n<e.depth&&o.canReplace(s,l,t))return n;if(0==n||o.type.spec.isolating||!((0==s||o.canReplace(s,o.childCount))&&(l==o.childCount||o.canReplace(0,l))))break;s&&(r=1),l<o.childCount&&(i=1)}return null}function b(e,t,n=null,r=e){let i=function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}(e,t),o=i&&function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let e=r;l&&e<i;e++)l=l.matchType(n.child(e).type);return l&&l.validEnd?s:null}(r,t);return o?i.map(k).concat({type:t,attrs:n}).concat(o.map(k)):null}function k(e){return{type:e,attrs:null}}function x(e,t,n,r){t.forEach((i,o)=>{if(i.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(i.text);){let i=e.mapping.slice(r).map(n+1+o+s.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}function C(e,t,n,r){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+o);e.replaceWith(i,i+1,t.type.schema.text("\n"))}})}function S(e,t,n=1,r){let i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let e=i.depth-1,t=n-2;e>o;e--,t--){let n=i.node(e),o=i.index(e);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(o,n.childCount),l=r&&r[t+1];l&&(s=s.replaceChild(0,l.type.create(l.attrs)));let a=r&&r[t]||n;if(!n.canReplace(o+1,n.childCount)||!a.type.validContent(s))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function M(e,t){var n,r;let i=e.resolve(t),o=i.index();return n=i.nodeBefore,r=i.nodeAfter,!!(n&&r&&!n.isLeaf&&function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let o=t.child(i),s=o.type==r?e.type.schema.nodes.text:o.type;if(!(n=n.matchType(s))||!e.type.allowsMarks(o.marks))return!1}return n.validEnd}(n,r))&&i.parent.canReplace(o,o+1)}function A(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let e=0;e<n.openStart;e++)i=i.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=r.depth;t>=0;t--){let n=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,o=r.index(t)+ +(n>0),s=r.node(t),l=!1;if(1==e)l=s.canReplace(o,o,i);else{let e=s.contentMatchAt(o).findWrapping(i.firstChild.type);l=e&&s.canReplaceWith(o,o,e[0])}if(l)return 0==n?r.pos:n<0?r.before(t+1):r.after(t+1)}return null}function T(e,t,n=t,i=r.Ji.empty){if(t==n&&!i.size)return null;let o=e.resolve(t),s=e.resolve(n);return O(o,s,i)?new m(t,n,i):new N(o,s,i).fit()}function O(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}a.jsonID("replaceAround",g);class N{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=r.FK.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=r.FK.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let o=this.placed,s=n.depth,l=i.depth;for(;s&&l&&1==o.childCount;)o=o.firstChild.content,s--,l--;let a=new r.Ji(o,s,l);return e>-1?new g(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new m(n.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e=null,i=(n?(e=_(this.unplaced.content,n-1).firstChild).content:this.unplaced.content).firstChild;for(let o=this.depth;o>=0;o--){let{type:s,match:l}=this.frontier[o],a,c=null;if(1==t&&(i?l.matchType(i.type)||(c=l.fillBefore(r.FK.from(i),!1)):e&&s.compatibleContent(e.type)))return{sliceDepth:n,frontierDepth:o,parent:e,inject:c};if(2==t&&i&&(a=l.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:o,parent:e,wrap:a};if(e&&l.matchType(e.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,i=_(e,t);return!!i.childCount&&!i.firstChild.isLeaf&&(this.unplaced=new r.Ji(e,t+1,Math.max(n,i.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,i=_(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new r.Ji(I(e,t-1,1),t-1,o?t-1:n)}else this.unplaced=new r.Ji(I(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let e=0;e<o.length;e++)this.openFrontierNode(o[e]);let s=this.unplaced,l=n?n.content:s.content,a=s.openStart-e,c=0,h=[],{match:u,type:d}=this.frontier[t];if(i){for(let e=0;e<i.childCount;e++)h.push(i.child(e));u=u.matchFragment(i)}let p=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let e=l.child(c),t=u.matchType(e.type);if(!t)break;(++c>1||0==a||e.content.size)&&(u=t,h.push(function e(t,n,i){if(n<=0)return t;let o=t.content;return n>1&&(o=o.replaceChild(0,e(o.firstChild,n-1,1==o.childCount?i-1:0))),n>0&&(o=t.type.contentMatch.fillBefore(o).append(o),i<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(r.FK.empty,!0)))),t.copy(o)}(e.mark(d.allowedMarks(e.marks)),1==c?a:0,c==l.childCount?p:-1)))}let f=c==l.childCount;f||(p=-1),this.placed=E(this.placed,t,r.FK.from(h)),this.frontier[t].match=u,f&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=l;e<p;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=f?0==e?r.Ji.empty:new r.Ji(I(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new r.Ji(I(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!L(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){r:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=L(e,t,r,n,i);if(o){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=L(e,n,r,t,!0);if(!i||i.childCount)continue r}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=E(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=E(this.placed,this.depth,r.FK.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(r.FK.empty,!0);e.childCount&&(this.placed=E(this.placed,this.frontier.length,e))}}function I(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(I(e.firstChild.content,t-1,n)))}function E(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(E(e.lastChild.content,t-1,n)))}function _(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function L(e,t,n,r,i){let o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,o.content,s)?l:null}function R(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let r=e.start(i);if(r<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(r==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==r-1)&&n.push(i)}return n}class P extends a{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return c.fail("No node at attribute step's position");let n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;let i=t.type.create(n,null,t.marks);return c.fromReplace(e,this.pos,this.pos+1,new r.Ji(r.FK.from(i),0,+!t.isLeaf))}getMap(){return o.empty}invert(e){return new P(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new P(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new P(t.pos,t.attr,t.value)}}a.jsonID("attr",P);class D extends a{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return c.ok(n)}getMap(){return o.empty}invert(e){return new D(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new D(t.attr,t.value)}}a.jsonID("docAttr",D);let F=class extends Error{};(F=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype),F.prototype.constructor=F,F.prototype.name="TransformError";class B{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new s}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new F(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=r.Ji.empty){let i=T(this.doc,e,t,n);return i&&this.step(i),this}replaceWith(e,t,n){return this.replace(e,t,new r.Ji(r.FK.from(n),0,0))}delete(e,t){return this.replace(e,t,r.Ji.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return!function(e,t,n,i){if(!i.size)return e.deleteRange(t,n);let o=e.doc.resolve(t),s=e.doc.resolve(n);if(O(o,s,i))return e.step(new m(t,n,i));let l=R(o,s);0==l[l.length-1]&&l.pop();let a=-(o.depth+1);l.unshift(a);for(let e=o.depth,t=o.pos-1;e>0;e--,t--){let n=o.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;l.indexOf(e)>-1?a=e:o.before(e)==t&&l.splice(1,0,-e)}let c=l.indexOf(a),h=[],u=i.openStart;for(let e=i.content,t=0;;t++){let n=e.firstChild;if(h.push(n),t==i.openStart)break;e=n.content}for(let e=u-1;e>=0;e--){var d;let t=h[e],n=(d=t.type).spec.defining||d.spec.definingForContent;if(n&&!t.sameMarkup(o.node(Math.abs(a)-1)))u=e;else if(n||!t.type.isTextblock)break}for(let t=i.openStart;t>=0;t--){let a=(t+u+1)%(i.openStart+1),d=h[a];if(d)for(let t=0;t<l.length;t++){let h=l[(t+c)%l.length],u=!0;h<0&&(u=!1,h=-h);let p=o.node(h-1),f=o.index(h-1);if(p.canReplaceWith(f,f,d.type,d.marks))return e.replace(o.before(h),u?s.after(h):n,new r.Ji(function e(t,n,i,o,s){if(n<i){let r=t.firstChild;t=t.replaceChild(0,r.copy(e(r.content,n+1,i,o,r)))}if(n>o){let e=s.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(r.FK.empty,!0))}return t}(i.content,0,i.openStart,a),a,i.openEnd))}}let p=e.steps.length;for(let r=l.length-1;r>=0&&(e.replace(t,n,i),!(e.steps.length>p));r--){let e=l[r];e<0||(t=o.before(e),n=s.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){var i=e,o=t;if(!n.isInline&&i==o&&this.doc.resolve(i).parent.content.size){let e=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let e=r.depth-1;e>=0;e--){let t=r.index(e);if(r.node(e).canReplaceWith(t,t,n))return r.before(e+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let e=r.depth-1;e>=0;e--){let t=r.indexAfter(e);if(r.node(e).canReplaceWith(t,t,n))return r.after(e+1);if(t<r.node(e).childCount)break}return null}(this.doc,i,n.type);null!=e&&(i=o=e)}return this.replaceRange(i,o,new r.Ji(r.FK.from(n),0,0)),this}deleteRange(e,t){return!function(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),o=R(r,i);for(let t=0;t<o.length;t++){let n=o[t],s=t==o.length-1;if(s&&0==n||r.node(n).type.contentMatch.validEnd)return e.delete(r.start(n),i.end(n));if(n>0&&(s||r.node(n-1).canReplace(r.index(n-1),i.indexAfter(n-1))))return e.delete(r.before(n),i.after(n))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return!function(e,t,n){let{$from:i,$to:o,depth:s}=t,l=i.before(s+1),a=o.after(s+1),c=l,h=a,u=r.FK.empty,d=0;for(let e=s,t=!1;e>n;e--)t||i.index(e)>0?(t=!0,u=r.FK.from(i.node(e).copy(u)),d++):c--;let p=r.FK.empty,f=0;for(let e=s,t=!1;e>n;e--)t||o.after(e+1)<o.end(e)?(t=!0,p=r.FK.from(o.node(e).copy(p)),f++):h++;e.step(new g(c,h,l,a,new r.Ji(u.append(p),d,f),u.size-d,!0))}(this,e,t),this}join(e,t=1){return!function(e,t,n){let i=null,{linebreakReplacement:o}=e.doc.type.schema,s=e.doc.resolve(t-n),l=s.node().type;if(o&&l.inlineContent){let e="pre"==l.whitespace,t=!!l.contentMatch.matchType(o);e&&!t?i=!1:!e&&t&&(i=!0)}let a=e.steps.length;if(!1===i){let r=e.doc.resolve(t+n);C(e,r.node(),r.before(),a)}l.inlineContent&&v(e,t+n-1,l,s.node().contentMatchAt(s.index()),null==i);let c=e.mapping.slice(a),h=c.map(t-n);if(e.step(new m(h,c.map(t+n,-1),r.Ji.empty,!0)),!0===i){let t=e.doc.resolve(h);x(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return!function(e,t,n){let i=r.FK.empty;for(let e=n.length-1;e>=0;e--){if(i.size){let t=n[e].type.contentMatch.matchFragment(i);if(!t||!t.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=r.FK.from(n[e].type.create(n[e].attrs,i))}let o=t.start,s=t.end;e.step(new g(o,s,o,s,new r.Ji(i,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,i=null){var o=this;if(!n.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let s=o.steps.length;return o.doc.nodesBetween(e,t,(e,t)=>{var l,a,c;let h,u,d="function"==typeof i?i(e):i;if(e.isTextblock&&!e.hasMarkup(n,d)&&(l=o.doc,a=o.mapping.slice(s).map(t),c=n,u=(h=l.resolve(a)).index(),h.parent.canReplaceWith(u,u+1,c))){let i=null;if(n.schema.linebreakReplacement){let e="pre"==n.whitespace,t=!!n.contentMatch.matchType(n.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&C(o,e,t,s),v(o,o.mapping.slice(s).map(t,1),n,void 0,null===i);let l=o.mapping.slice(s),a=l.map(t,1),c=l.map(t+e.nodeSize,1);return o.step(new g(a,c,a+1,c-1,new r.Ji(r.FK.from(n.create(d,null,e.marks)),0,0),1,!0)),!0===i&&x(o,e,t,s),!1}}),this}setNodeMarkup(e,t,n=null,i){return!function(e,t,n,i,o){let s=e.doc.nodeAt(t);if(!s)throw RangeError("No node at given position");n||(n=s.type);let l=n.create(i,null,o||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,l);if(!n.validContent(s.content))throw RangeError("Invalid content for node type "+n.name);e.step(new g(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new r.Ji(r.FK.from(l),0,0),1,!0))}(this,e,t,n,i),this}setNodeAttribute(e,t,n){return this.step(new P(e,t,n)),this}setDocAttribute(e,t){return this.step(new D(e,t)),this}addNodeMark(e,t){return this.step(new p(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw RangeError("No node at position "+e);if(t instanceof r.CU)t.isInSet(n.marks)&&this.step(new f(e,t));else{let r=n.marks,i,o=[];for(;i=t.isInSet(r);)o.push(new f(e,i)),r=i.removeFromSet(r);for(let e=o.length-1;e>=0;e--)this.step(o[e])}return this}split(e,t=1,n){return!function(e,t,n=1,i){let o=e.doc.resolve(t),s=r.FK.empty,l=r.FK.empty;for(let e=o.depth,t=o.depth-n,a=n-1;e>t;e--,a--){s=r.FK.from(o.node(e).copy(s));let t=i&&i[a];l=r.FK.from(t?t.type.create(t.attrs,l):o.node(e).copy(l))}e.step(new m(t,t,new r.Ji(s.append(l),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){var r;let i,o,s,l;return r=this,s=[],l=[],r.doc.nodesBetween(e,t,(r,a,c)=>{if(!r.isInline)return;let h=r.marks;if(!n.isInSet(h)&&c.type.allowsMarkType(n.type)){let c=Math.max(a,e),p=Math.min(a+r.nodeSize,t),f=n.addToSet(h);for(let e=0;e<h.length;e++)h[e].isInSet(f)||(i&&i.to==c&&i.mark.eq(h[e])?i.to=p:s.push(i=new d(c,p,h[e])));o&&o.to==c?o.to=p:l.push(o=new u(c,p,n))}}),s.forEach(e=>r.step(e)),l.forEach(e=>r.step(e)),this}removeMark(e,t,n){var i;let o,s;return i=this,o=[],s=0,i.doc.nodesBetween(e,t,(i,l)=>{if(!i.isInline)return;s++;let a=null;if(n instanceof r.sX){let e=i.marks,t;for(;t=n.isInSet(e);)(a||(a=[])).push(t),e=t.removeFromSet(e)}else n?n.isInSet(i.marks)&&(a=[n]):a=i.marks;if(a&&a.length){let n=Math.min(l+i.nodeSize,t);for(let t=0;t<a.length;t++){let r=a[t],i;for(let e=0;e<o.length;e++){let t=o[e];t.step==s-1&&r.eq(o[e].style)&&(i=t)}i?(i.to=n,i.step=s):o.push({style:r,from:Math.max(l,e),to:n,step:s})}}}),o.forEach(e=>i.step(new d(e.from,e.to,e.style))),this}clearIncompatible(e,t,n){return v(this,e,t,n),this}}},78928:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});let r="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),i="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class s{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}for(let t in e)!function e(t,i,o,s){let l=[],a=/^@(\w+)\b/.exec(t[0]),c=a&&"keyframes"==a[1];if(a&&null==i)return o.push(t[0]+";");for(let n in i){let s=i[n];if(/&/.test(n))e(n.split(/,\s*/).map(e=>t.map(t=>e.replace(/&/,t))).reduce((e,t)=>e.concat(t)),s,o);else if(s&&"object"==typeof s){if(!a)throw RangeError("The value of a property ("+n+") should be a primitive value.");e(r(n),s,l,c)}else null!=s&&l.push(n.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+s+";")}(l.length||c)&&o.push((n&&!a&&!s?t.map(n):t).join(", ")+" {"+l.join(" ")+"}")}(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=o[r]||1;return o[r]=e+1,"ͼ"+e.toString(36)}static mount(e,t,n){let r=e[i],o=n&&n.nonce;r?o&&r.setNonce(o):r=new a(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let l=new Map;class a{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let t=l.get(n);if(t)return e[i]=t;this.sheet=new r.CSSStyleSheet,l.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[i]=this}mount(e,t){let n=this.sheet,r=0,i=0;for(let t=0;t<e.length;t++){let o=e[t],s=this.modules.indexOf(o);if(s<i&&s>-1&&(this.modules.splice(s,1),i--,s=-1),-1==s){if(this.modules.splice(i++,0,o),n)for(let e=0;e<o.rules.length;e++)n.insertRule(o.rules[e],r++)}else{for(;i<s;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(n)0>t.adoptedStyleSheets.indexOf(this.sheet)&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let n=t.head||t;this.styleTag.parentNode!=n&&n.insertBefore(this.styleTag,n.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}},92322:(e,t,n)=>{"use strict";function r(e){this.content=e}n.d(t,{S4:()=>j,ZF:()=>Z,FK:()=>i,CU:()=>a,sX:()=>F,bP:()=>C,u$:()=>k,Z6:()=>P,vI:()=>c,Sj:()=>B,Ji:()=>h}),r.prototype={constructor:r,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return -1},get:function(e){var t=this.find(e);return -1==t?void 0:this.content[t+1]},update:function(e,t,n){var i=n&&n!=e?this.remove(n):this,o=i.find(e),s=i.content.slice();return -1==o?s.push(n||e,t):(s[o+1]=t,n&&(s[o]=n)),new r(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new r(n)},addToStart:function(e,t){return new r([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new r(n)},addBefore:function(e,t,n){var i=this.remove(t),o=i.content.slice(),s=i.find(e);return o.splice(-1==s?o.length:s,0,t,n),new r(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=r.from(e)).size?new r(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=r.from(e)).size?new r(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=r.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},r.from=function(e){if(e instanceof r)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new r(t)};class i{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,n,r=0,i){for(let o=0,s=0;s<t;o++){let l=this.content[o],a=s+l.nodeSize;if(a>e&&!1!==n(l,r+s,i||null,o)&&l.content.size){let i=s+1;l.nodesBetween(Math.max(0,e-i),Math.min(l.content.size,t-i),n,r+i)}s=a}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",o=!0;return this.nodesBetween(e,t,(s,l)=>{let a=s.isText?s.text.slice(Math.max(e,l)-l,t-l):s.isLeaf?r?"function"==typeof r?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&a||s.isTextblock)&&n&&(o?o=!1:i+=n),i+=a},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new i(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let i=0,o=0;o<t;i++){let s=this.content[i],l=o+s.nodeSize;l>e&&((o<e||l>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),r+=s.nodeSize),o=l}return new i(n,r)}cutByIndex(e,t){return e==t?i.empty:0==e&&t==this.content.length?this:new i(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new i(r,o)}addToStart(e){return new i([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new i(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return function e(t,n,r){for(let i=0;;i++){if(i==t.childCount||i==n.childCount)return t.childCount==n.childCount?null:r;let o=t.child(i),s=n.child(i);if(o==s){r+=o.nodeSize;continue}if(!o.sameMarkup(s))return r;if(o.isText&&o.text!=s.text){for(let e=0;o.text[e]==s.text[e];e++)r++;return r}if(o.content.size||s.content.size){let t=e(o.content,s.content,r+1);if(null!=t)return t}r+=o.nodeSize}}(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return function e(t,n,r,i){for(let o=t.childCount,s=n.childCount;;){if(0==o||0==s)return o==s?null:{a:r,b:i};let l=t.child(--o),a=n.child(--s),c=l.nodeSize;if(l==a){r-=c,i-=c;continue}if(!l.sameMarkup(a))return{a:r,b:i};if(l.isText&&l.text!=a.text){let e=0,t=Math.min(l.text.length,a.text.length);for(;e<t&&l.text[l.text.length-e-1]==a.text[a.text.length-e-1];)e++,r--,i--;return{a:r,b:i}}if(l.content.size||a.content.size){let t=e(l.content,a.content,r-1,i-1);if(t)return t}r-=c,i-=c}}(this,e,t,n)}findIndex(e){if(0==e)return s(0,e);if(e==this.size)return s(this.content.length,e);if(e>this.size||e<0)throw RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,n=0;;t++){let r=n+this.child(t).nodeSize;if(r>=e){if(r==e)return s(t+1,r);return s(t,n)}n=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return i.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new i(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return i.empty;let t,n=0;for(let r=0;r<e.length;r++){let i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new i(t||e,n)}static from(e){if(!e)return i.empty;if(e instanceof i)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new i([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}i.empty=new i([],0);let o={index:0,offset:0};function s(e,t){return o.index=e,o.offset=t,o}function l(e,t){if(e===t)return!0;if(!(e&&"object"==typeof e)||!(t&&"object"==typeof t))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!l(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!l(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class a{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&l(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return a.none;if(e instanceof a)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}}a.none=[];class c extends Error{}class h{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=function e(t,n,r,i){let{index:o,offset:s}=t.findIndex(n),l=t.maybeChild(o);if(s==n||l.isText)return i&&!i.canReplace(o,o,r)?null:t.cut(0,n).append(r).append(t.cut(n));let a=e(l.content,n-s-1,r,l);return a&&t.replaceChild(o,l.copy(a))}(this.content,e+this.openStart,t);return n&&new h(n,this.openStart,this.openEnd)}removeBetween(e,t){return new h(function e(t,n,r){let{index:i,offset:o}=t.findIndex(n),s=t.maybeChild(i),{index:l,offset:a}=t.findIndex(r);if(o==n||s.isText){if(a!=r&&!t.child(l).isText)throw RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(i!=l)throw RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(e(s.content,n-o-1,r-o-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return h.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw RangeError("Invalid input for Slice.fromJSON");return new h(i.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)r++;return new h(e,n,r)}}function u(e,t){if(!t.type.compatibleContent(e.type))throw new c("Cannot join "+t.type.name+" onto "+e.type.name)}function d(e,t,n){let r=e.node(n);return u(r,t.node(n)),r}function p(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function f(e,t,n,r){let i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(p(e.nodeAfter,r),o++));for(let e=o;e<s;e++)p(i.child(e),r);t&&t.depth==n&&t.textOffset&&p(t.nodeBefore,r)}function m(e,t){return e.type.checkContent(t),e.copy(t)}function g(e,t,n){let r=[];return f(null,e,n,r),e.depth>n&&p(m(d(e,t,n+1),g(e,t,n+1)),r),f(t,null,n,r),new i(r)}h.empty=new h(i.empty,0,0);class y{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)r+=n.child(t).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return a.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new k(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let t=e;;){let{index:e,offset:o}=t.content.findIndex(i),s=i-o;if(n.push(t,e,r+o),!s||(t=t.child(e)).isText)break;i=s-1,r+=o+1}return new y(t,n,i)}static resolveCached(e,t){let n=b.get(e);if(n)for(let e=0;e<n.elts.length;e++){let r=n.elts[e];if(r.pos==t)return r}else b.set(e,n=new v);let r=n.elts[n.i]=y.resolve(e,t);return n.i=(n.i+1)%w,r}}class v{constructor(){this.elts=[],this.i=0}}let w=12,b=new WeakMap;class k{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}let x=Object.create(null);class C{constructor(e,t,n,r=a.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||i.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&l(this.attrs,t||e.defaultAttrs||x)&&a.sameSet(this.marks,n||a.none)}copy(e=null){return e==this.content?this:new C(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new C(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return h.empty;let r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),s=r.start(o);return new h(r.node(o).content.cut(r.pos-s,i.pos-s),r.depth-o,i.depth-o)}replace(e,t,n){var r=this.resolve(e),o=this.resolve(t);if(n.openStart>r.depth)throw new c("Inserted content deeper than insertion position");if(r.depth-n.openStart!=o.depth-n.openEnd)throw new c("Inconsistent open depths");return function e(t,n,r,o){let s=t.index(o),l=t.node(o);if(s==n.index(o)&&o<t.depth-r.openStart){let i=e(t,n,r,o+1);return l.copy(l.content.replaceChild(s,i))}if(!r.content.size)return m(l,g(t,n,o));if(r.openStart||r.openEnd||t.depth!=o||n.depth!=o){let{start:e,end:s}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)r=t.node(e).copy(i.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t);return m(l,function e(t,n,r,o,s){let l=t.depth>s&&d(t,n,s+1),a=o.depth>s&&d(r,o,s+1),c=[];return f(null,t,s,c),l&&a&&n.index(s)==r.index(s)?(u(l,a),p(m(l,e(t,n,r,o,s+1)),c)):(l&&p(m(l,g(t,n,s+1)),c),f(n,r,s,c),a&&p(m(a,g(r,o,s+1)),c)),f(o,null,s,c),new i(c)}(t,e,s,n,o))}{let e=t.parent,i=e.content;return m(e,i.cut(0,t.parentOffset).append(r.content).append(i.cut(n.parentOffset)))}}(r,o,n,0)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(!(t=t.maybeChild(n)))return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return y.resolveCached(this,e)}resolveNoCache(e){return y.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),M(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=i.empty,r=0,o=n.childCount){let s=this.contentMatchAt(e).matchFragment(n,r,o),l=s&&s.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let e=r;e<o;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=a.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!a.sameSet(e,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){let n;if(!t)throw RangeError("Invalid input for Node.fromJSON");if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=i.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,r,n);return o.type.checkAttrs(o.attrs),o}}C.prototype.text=void 0;class S extends C{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):M(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new S(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new S(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function M(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class A{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){var n;let r,i=new T(e,t);if(null==i.next)return A.empty;let o=function e(t){let n=[];do n.push(function(t){let n=[];do n.push(function(t){let n=function(t){if(t.eat("(")){let n=e(t);return t.eat(")")||t.err("Missing closing paren"),n}if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=(function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let e in n){let r=n[e];r.isInGroup(t)&&i.push(r)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i})(t,t.next).map(e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}}(t);for(;;)if(t.eat("+"))n={type:"plus",expr:n};else if(t.eat("*"))n={type:"star",expr:n};else if(t.eat("?"))n={type:"opt",expr:n};else if(t.eat("{"))n=function(e,t){let n=O(e),r=n;return e.eat(",")&&(r="}"!=e.next?O(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}(t,n);else break;return n}(t));while(t.next&&")"!=t.next&&"|"!=t.next);return 1==n.length?n[0]:{type:"seq",exprs:n}}(t));while(t.eat("|"));return 1==n.length?n[0]:{type:"choice",exprs:n}}(i);i.next&&i.err("Unexpected trailing text");let s=(n=function(e){let t=[[]];return i(function e(t,o){if("choice"==t.type)return t.exprs.reduce((t,n)=>t.concat(e(n,o)),[]);if("seq"==t.type)for(let r=0;;r++){let s=e(t.exprs[r],o);if(r==t.exprs.length-1)return s;i(s,o=n())}else if("star"==t.type){let s=n();return r(o,s),i(e(t.expr,s),s),[r(s)]}else if("plus"==t.type){let s=n();return i(e(t.expr,o),s),i(e(t.expr,s),s),[r(s)]}else if("opt"==t.type)return[r(o)].concat(e(t.expr,o));else if("range"==t.type){let s=o;for(let r=0;r<t.min;r++){let r=n();i(e(t.expr,s),r),s=r}if(-1==t.max)i(e(t.expr,s),s);else for(let o=t.min;o<t.max;o++){let o=n();r(s,o),i(e(t.expr,s),o),s=o}return[r(s)]}else if("name"==t.type)return[r(o,void 0,t.value)];else throw Error("Unknown expr type")}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}}(o),r=Object.create(null),function e(t){let i=[];t.forEach(e=>{n[e].forEach(({term:e,to:t})=>{let r;if(e){for(let t=0;t<i.length;t++)i[t][0]==e&&(r=i[t][1]);I(n,t).forEach(t=>{r||i.push([e,r=[]]),-1==r.indexOf(t)&&r.push(t)})}})});let o=r[t.join(",")]=new A(t.indexOf(n.length-1)>-1);for(let t=0;t<i.length;t++){let n=i[t][1].sort(N);o.next.push({type:i[t][0],next:r[n.join(",")]||e(n)})}return o}(I(n,0)));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,o=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];o.push(n.name),i&&!(n.isText||n.hasRequiredAttrs())&&(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(s,i),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function o(s,l){let a=s.matchFragment(e,n);if(a&&(!t||a.validEnd))return i.from(l.map(e=>e.createAndFill()));for(let e=0;e<s.next.length;e++){let{type:t,next:n}=s.next[e];if(!(t.isText||t.hasRequiredAttrs())&&-1==r.indexOf(n)){r.push(n);let e=o(n,l.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:o,next:s}=i.next[e];o.isLeaf||o.hasRequiredAttrs()||o.name in t||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return!function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)r+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return r}).join("\n")}}A.empty=new A(!0);class T{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}}function O(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function N(e,t){return t-e}function I(e,t){let n=[];return function t(r){let i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(let e=0;e<i.length;e++){let{term:r,to:o}=i[e];r||-1!=n.indexOf(o)||t(o)}}(t),n.sort(N)}function E(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function _(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(t.hasDefault)i=t.default;else throw RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function L(e,t,n,r){for(let r in t)if(!(r in e))throw RangeError(`Unsupported attribute ${r} for ${n} of type ${r}`);for(let n in e){let r=e[n];r.validate&&r.validate(t[n])}}function R(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new D(e,r,t[r]);return n}class P{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=R(e,n.attrs),this.defaultAttrs=E(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==A.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:_(this.attrs,e)}create(e=null,t,n){if(this.isText)throw Error("NodeType.create can't construct text nodes");return new C(this,this.computeAttrs(e),i.from(t),a.setFrom(n))}createChecked(e=null,t,n){return t=i.from(t),this.checkContent(t),new C(this,this.computeAttrs(e),t,a.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=i.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),o=r&&r.fillBefore(i.empty,!0);return o?new C(this,e,t.append(o),a.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){L(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){let t;if(null==this.markSet)return e;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:a.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,r)=>n[e]=new P(e,t,r));let r=t.spec.topNode||"doc";if(!n[r])throw RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw RangeError("The text node type should not have attributes");return n}}class D{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let r=n.split("|");return n=>{let i=null===n?"null":typeof n;if(0>r.indexOf(i))throw RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${i}`)}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class F{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=R(e,r.attrs),this.excluded=null;let i=E(this.attrs);this.instance=i?new a(this,i):null}create(e=null){return!e&&this.instance?this.instance:new a(this,_(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,i)=>n[e]=new F(e,r++,t,i)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){L(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class B{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=r.from(e.nodes),t.marks=r.from(e.marks||{}),this.nodes=P.compile(this.spec.nodes,this),this.marks=F.compile(this.spec.marks,this);let n=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],r=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=n[r]||(n[r]=A.parse(r,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?$(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:$(this,n.split(" "))}this.nodeFromJSON=e=>C.fromJSON(this,e),this.markFromJSON=e=>a.fromJSON(this,e),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else if(e instanceof P){if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}else throw RangeError("Invalid node type: "+e);return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new S(n,n.defaultAttrs,e,a.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}}function $(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],s=o;if(o)n.push(o);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class j{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(null!=e.tag)this.tags.push(e);else if(null!=e.style){let t=/[^=]*/.exec(e.style)[0];0>n.indexOf(t)&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e,t={}){let n=new V(this,t,!1);return n.addAll(e,a.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new V(this,t,!0);return n.addAll(e,a.none,t.from,t.to),h.maxOpen(n.finish())}matchTag(e,t,n){for(let o=n?this.tags.indexOf(n)+1:0;o<this.tags.length;o++){var r,i;let n=this.tags[o];if(r=e,i=n.tag,(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,i)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(0==o.indexOf(e)&&(!r.context||n.matchesContext(r.context))&&(!(o.length>e.length)||61==o.charCodeAt(e.length)&&o.slice(e.length+1)==t)){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let t in e.marks){let r=e.marks[t].spec.parseDOM;r&&r.forEach(e=>{n(e=K(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let r=e.nodes[t].spec.parseDOM;r&&r.forEach(e=>{n(e=K(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new j(e,j.schemaRules(e)))}}let z={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},H={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},q={ol:!0,ul:!0};function W(e,t,n){return null!=t?!!t|2*("full"===t):e&&"pre"==e.whitespace?3:-5&n}class U{constructor(e,t,n,r,i,o){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=o,this.content=[],this.activeMarks=a.none,this.match=i||(4&o?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(i.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let t=this.type.contentMatch,n;return(n=t.findWrapping(e.type))?(this.match=t,n):null}}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e=this.content[this.content.length-1],t;e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))&&(e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=e.withText(e.text.slice(0,e.text.length-t[0].length)))}let t=i.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(i.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!z.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class V{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r=t.topNode,i,o=W(null,t.preserveWhitespace,0)|4*!!n;i=r?new U(r.type,r.attrs,a.none,!0,t.topMatch||r.type.contentMatch,o):n?new U(null,null,a.none,!0,null,o):new U(e.schema.topNodeType,null,a.none,!0,null,o),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,i=2&r.options?"full":this.localPreserveWS||(1&r.options)>0,{schema:o}=this.parser;if("full"===i||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)if("full"===i)n=n.replace(/\r\n?/g,"\n");else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let e=n.split(/\r?\n|\r/);for(let n=0;n<e.length;n++)n&&this.insertNode(o.linebreakReplacement.create(),t,!0),e[n]&&this.insertNode(o.text(e[n]),t,!/\S/.test(e[n]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],i=e.previousSibling;(!t||i&&"BR"==i.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,i=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),s;q.hasOwnProperty(o)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&q.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,n));o:if(l?l.ignore:H.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let n,r=this.needsBlock;if(z.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),n=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break o}let s=l&&l.skip?t:this.readStyles(e,t);s&&this.addAll(e,s),n&&this.sync(i),this.needsBlock=r}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,l,n,!1===l.consuming?s:void 0)}this.localPreserveWS=r}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let r=this.parser.matchedStyles[e],i=n.getPropertyValue(r);if(i)for(let e;;){let n=this.parser.matchStyle(r,i,this,e);if(!n)break;if(n.ignore)return null;if(t=n.clearMark?t.filter(e=>!n.clearMark(e)):t.concat(this.parser.schema.marks[n.mark].create(n.attrs)),!1===n.consuming)e=n;else break}}return t}addElementByRule(e,t,n,r){let i,o;if(t.node)if((o=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(o.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{let e=this.enter(o,t.attrs||null,n,t.preserveWhitespace);e&&(i=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n,!1));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n),this.findAround(e,r,!1)}i&&this.sync(s)&&this.open--}addAll(e,t,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,t);this.findAtPoint(e,i)}findPlace(e,t,n){let r,i;for(let t=this.open,o=0;t>=0;t--){let s=this.nodes[t],l=s.findWrapping(e);if(l&&(!r||r.length>l.length+o)&&(r=l,i=s,!l.length))break;if(s.solid){if(n)break;o+=2}}if(!r)return null;this.sync(i);for(let e=0;e<r.length;e++)t=this.enterInner(r[e],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let r=this.findPlace(e,t,n);if(r){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let n=a.none;for(let i of r.concat(e.marks))(t.type?t.type.allowsMarkType(i.type):J(i.type,e.type))&&(n=i.addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n,r){let i=this.findPlace(e.create(t),n,!1);return i&&(i=this.enterInner(e,t,n,!0,r)),i}enterInner(e,t,n,r=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let s=W(e,i,o.options);4&o.options&&0==o.content.length&&(s|=4);let l=a.none;return n=n.filter(t=>(o.type?!o.type.allowsMarkType(t.type):!J(t.type,e))||(l=t.addToSet(l),!1)),this.nodes.push(new U(e,t,l,r,null,s)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;else this.localPreserveWS&&(this.nodes[t].options|=1);return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+ +!r,o=(e,s)=>{for(;e>=0;e--){let l=t[e];if(""==l){if(e==t.length-1||0==e)continue;for(;s>=i;s--)if(o(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!e||e.name!=l&&!e.isInGroup(l))return!1;s--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}}function K(e){let t={};for(let n in e)t[n]=e[n];return t}function J(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],s=e=>{o.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t||0>o.indexOf(i)&&s(i))return!0}};if(s(i.contentMatch))return!0}}class Z{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=Y(t).createDocumentFragment());let r=n,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let n=0,o=0;for(;n<i.length&&o<e.marks.length;){let t=e.marks[o];if(!this.marks[t.type.name]){o++;continue}if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,o++}for(;n<i.length;)r=i.pop()[1];for(;o<e.marks.length;){let n=e.marks[o++],s=this.serializeMark(n,e.isInline,t);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=Q(Y(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&Q(Y(n),r(e,t),null,e.attrs)}static renderSpec(e,t,n=null,r){return Q(e,t,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Z(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=G(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return G(e.marks)}}function G(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Y(e){return e.document||window.document}let X=new WeakMap;function Q(e,t,n,r){let i,o,s;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let l=t[0],a;if("string"!=typeof l)throw RangeError("Invalid array passed to renderSpec");if(r&&(void 0===(o=X.get(r))&&X.set(r,(s=null,!function e(t){if(t&&"object"==typeof t)if(Array.isArray(t))if("string"==typeof t[0])s||(s=[]),s.push(t);else for(let n=0;n<t.length;n++)e(t[n]);else for(let n in t)e(t[n])}(r),o=s)),a=o)&&a.indexOf(t)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=l.indexOf(" ");c>0&&(n=l.slice(0,c),l=l.slice(c+1));let h=n?e.createElementNS(n,l):e.createElement(l),u=t[1],d=1;if(u&&"object"==typeof u&&null==u.nodeType&&!Array.isArray(u)){for(let e in d=2,u)if(null!=u[e]){let t=e.indexOf(" ");t>0?h.setAttributeNS(e.slice(0,t),e.slice(t+1),u[e]):"style"==e&&h.style?h.style.cssText=u[e]:h.setAttribute(e,u[e])}}for(let o=d;o<t.length;o++){let s=t[o];if(0===s){if(o<t.length-1||o>d)throw RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}{let{dom:t,contentDOM:o}=Q(e,s,n,r);if(h.appendChild(t),o){if(i)throw RangeError("Multiple content holes");i=o}}}return{dom:h,contentDOM:i}}},96758:(e,t,n)=>{var r,i=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,function(n){return i(t,e.charAt(n))})},compressToUTF16:function(t){return null==t?"":o._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var s=t.charCodeAt(r);n[2*r]=s>>>8,n[2*r+1]=s%256}return n},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var n=Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=256*t[2*r]+t[2*r+1];var s=[];return n.forEach(function(t){s.push(e(t))}),o.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,function(t){return i(n,e.charAt(t))}))},compress:function(t){return o._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(null==e)return"";var r,i,o,s={},l={},a="",c="",h="",u=2,d=3,p=2,f=[],m=0,g=0;for(o=0;o<e.length;o+=1)if(a=e.charAt(o),Object.prototype.hasOwnProperty.call(s,a)||(s[a]=d++,l[a]=!0),c=h+a,Object.prototype.hasOwnProperty.call(s,c))h=c;else{if(Object.prototype.hasOwnProperty.call(l,h)){if(256>h.charCodeAt(0)){for(r=0;r<p;r++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(r=0,i=h.charCodeAt(0);r<8;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}else{for(r=0,i=1;r<p;r++)m=m<<1|i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i=0;for(r=0,i=h.charCodeAt(0);r<16;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}0==--u&&(u=Math.pow(2,p),p++),delete l[h]}else for(r=0,i=s[h];r<p;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;0==--u&&(u=Math.pow(2,p),p++),s[c]=d++,h=String(a)}if(""!==h){if(Object.prototype.hasOwnProperty.call(l,h)){if(256>h.charCodeAt(0)){for(r=0;r<p;r++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(r=0,i=h.charCodeAt(0);r<8;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}else{for(r=0,i=1;r<p;r++)m=m<<1|i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i=0;for(r=0,i=h.charCodeAt(0);r<16;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}0==--u&&(u=Math.pow(2,p),p++),delete l[h]}else for(r=0,i=s[h];r<p;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;0==--u&&(u=Math.pow(2,p),p++)}for(r=0,i=2;r<p;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;for(;;){if(m<<=1,g==t-1){f.push(n(m));break}g++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,r){var i,o,s,l,a,c,h,u=[],d=4,p=4,f=3,m="",g=[],y={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)u[i]=i;for(s=0,a=4,c=1;c!=a;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),s|=(l>0)*c,c<<=1;switch(s){case 0:for(s=0,a=256,c=1;c!=a;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),s|=(l>0)*c,c<<=1;h=e(s);break;case 1:for(s=0,a=65536,c=1;c!=a;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),s|=(l>0)*c,c<<=1;h=e(s);break;case 2:return""}for(u[3]=h,o=h,g.push(h);;){if(y.index>t)return"";for(s=0,a=Math.pow(2,f),c=1;c!=a;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),s|=(l>0)*c,c<<=1;switch(h=s){case 0:for(s=0,a=256,c=1;c!=a;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),s|=(l>0)*c,c<<=1;u[p++]=e(s),h=p-1,d--;break;case 1:for(s=0,a=65536,c=1;c!=a;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),s|=(l>0)*c,c<<=1;u[p++]=e(s),h=p-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,f),f++),u[h])m=u[h];else{if(h!==p)return null;m=o+o.charAt(0)}g.push(m),u[p++]=o+m.charAt(0),d--,o=m,0==d&&(d=Math.pow(2,f),f++)}}};return o}();void 0===(r=(function(){return i}).call(t,n,t,e))||(e.exports=r)},97229:(e,t,n)=>{"use strict";let r,i,o,s,l;n.d(t,{C4:()=>x,EW:()=>eE,Gc:()=>eu,IG:()=>ew,IJ:()=>eS,KR:()=>eC,Kh:()=>eh,Pr:()=>eN,R1:()=>eT,X2:()=>u,bl:()=>C,hZ:()=>L,i9:()=>ex,ju:()=>ey,u4:()=>_,ux:()=>ev,wB:()=>eR,yC:()=>c});var a=n(40373);class c{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=r,!e&&r&&(this.index=(r.scopes||(r.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){let t=r;try{return r=this,e()}finally{r=t}}}on(){1==++this._on&&(this.prevScope=r,r=this)}off(){this._on>0&&0==--this._on&&(r=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,n;for(t=0,this._active=!1,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,this.effects.length=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){let e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}let h=new WeakSet;class u{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,r&&r.active&&r.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,h.has(this)&&(h.delete(this),this.trigger()))}notify(){(!(2&this.flags)||32&this.flags)&&(8&this.flags||p(this))}run(){if(!(1&this.flags))return this.fn();this.flags|=2,S(this),m(this);let e=i,t=b;i=this,b=!0;try{return this.fn()}finally{g(this),i=e,b=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)w(e);this.deps=this.depsTail=void 0,S(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?h.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){y(this)&&this.run()}get dirty(){return y(this)}}let d=0;function p(e,t=!1){if(e.flags|=8,t){e.next=s,s=e;return}e.next=o,o=e}function f(){let e;if(!(--d>0)){if(s){let e=s;for(s=void 0;e;){let t=e.next;e.next=void 0,e.flags&=-9,e=t}}for(;o;){let t=o;for(o=void 0;t;){let n=t.next;if(t.next=void 0,t.flags&=-9,1&t.flags)try{t.trigger()}catch(t){e||(e=t)}t=n}}if(e)throw e}}function m(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function g(e){let t,n=e.depsTail,r=n;for(;r;){let e=r.prevDep;-1===r.version?(r===n&&(n=e),w(r),function(e){let{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=e}e.deps=t,e.depsTail=n}function y(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(v(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function v(e){if(4&e.flags&&!(16&e.flags)||(e.flags&=-17,e.globalVersion===M)||(e.globalVersion=M,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!y(e))))return;e.flags|=2;let t=e.dep,n=i,r=b;i=e,b=!0;try{m(e);let n=e.fn(e._value);(0===t.version||(0,a.$H)(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(e){throw t.version++,e}finally{i=n,b=r,g(e),e.flags&=-3}}function w(e,t=!1){let{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)w(e,!0)}t||--n.sc||!n.map||n.map.delete(n.key)}let b=!0,k=[];function x(){k.push(b),b=!1}function C(){let e=k.pop();b=void 0===e||e}function S(e){let{cleanup:t}=e;if(e.cleanup=void 0,t){let e=i;i=void 0;try{t()}finally{i=e}}}let M=0;class A{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class T{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!i||!b||i===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==i)t=this.activeLink=new A(i,this),i.deps?(t.prevDep=i.depsTail,i.depsTail.nextDep=t,i.depsTail=t):i.deps=i.depsTail=t,function e(t){if(t.dep.sc++,4&t.sub.flags){let n=t.dep.computed;if(n&&!t.dep.subs){n.flags|=20;for(let t=n.deps;t;t=t.nextDep)e(t)}let r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){let e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=i.depsTail,t.nextDep=void 0,i.depsTail.nextDep=t,i.depsTail=t,i.deps===t&&(i.deps=e)}return t}trigger(e){this.version++,M++,this.notify(e)}notify(e){d++;try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{f()}}}let O=new WeakMap,N=Symbol(""),I=Symbol(""),E=Symbol("");function _(e,t,n){if(b&&i){let t=O.get(e);t||O.set(e,t=new Map);let r=t.get(n);r||(t.set(n,r=new T),r.map=t,r.key=n),r.track()}}function L(e,t,n,r,i,o){let s=O.get(e);if(!s)return void M++;let l=e=>{e&&e.trigger()};if(d++,"clear"===t)s.forEach(l);else{let i=(0,a.cy)(e),o=i&&(0,a.yI)(n);if(i&&"length"===n){let e=Number(r);s.forEach((t,n)=>{("length"===n||n===E||!(0,a.Bm)(n)&&n>=e)&&l(t)})}else switch((void 0!==n||s.has(void 0))&&l(s.get(n)),o&&l(s.get(E)),t){case"add":i?o&&l(s.get("length")):(l(s.get(N)),(0,a.CE)(e)&&l(s.get(I)));break;case"delete":!i&&(l(s.get(N)),(0,a.CE)(e)&&l(s.get(I)));break;case"set":(0,a.CE)(e)&&l(s.get(N))}}f()}function R(e){let t=ev(e);return t===e?t:(_(t,"iterate",E),eg(e)?t:t.map(eb))}function P(e){return _(e=ev(e),"iterate",E),e}function D(e,t){return em(e)?ef(e)?ek(eb(t)):ek(t):eb(t)}let F={__proto__:null,[Symbol.iterator](){return B(this,Symbol.iterator,e=>D(this,e))},concat(...e){return R(this).concat(...e.map(e=>(0,a.cy)(e)?R(e):e))},entries(){return B(this,"entries",e=>(e[1]=D(this,e[1]),e))},every(e,t){return j(this,"every",e,t,void 0,arguments)},filter(e,t){return j(this,"filter",e,t,e=>e.map(e=>D(this,e)),arguments)},find(e,t){return j(this,"find",e,t,e=>D(this,e),arguments)},findIndex(e,t){return j(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return j(this,"findLast",e,t,e=>D(this,e),arguments)},findLastIndex(e,t){return j(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return j(this,"forEach",e,t,void 0,arguments)},includes(...e){return H(this,"includes",e)},indexOf(...e){return H(this,"indexOf",e)},join(e){return R(this).join(e)},lastIndexOf(...e){return H(this,"lastIndexOf",e)},map(e,t){return j(this,"map",e,t,void 0,arguments)},pop(){return q(this,"pop")},push(...e){return q(this,"push",e)},reduce(e,...t){return z(this,"reduce",e,t)},reduceRight(e,...t){return z(this,"reduceRight",e,t)},shift(){return q(this,"shift")},some(e,t){return j(this,"some",e,t,void 0,arguments)},splice(...e){return q(this,"splice",e)},toReversed(){return R(this).toReversed()},toSorted(e){return R(this).toSorted(e)},toSpliced(...e){return R(this).toSpliced(...e)},unshift(...e){return q(this,"unshift",e)},values(){return B(this,"values",e=>D(this,e))}};function B(e,t,n){let r=P(e),i=r[t]();return r===e||eg(e)||(i._next=i.next,i.next=()=>{let e=i._next();return e.done||(e.value=n(e.value)),e}),i}let $=Array.prototype;function j(e,t,n,r,i,o){let s=P(e),l=s!==e&&!eg(e),a=s[t];if(a!==$[t]){let t=a.apply(e,o);return l?eb(t):t}let c=n;s!==e&&(l?c=function(t,r){return n.call(this,D(e,t),r,e)}:n.length>2&&(c=function(t,r){return n.call(this,t,r,e)}));let h=a.call(s,c,r);return l&&i?i(h):h}function z(e,t,n,r){let i=P(e),o=n;return i!==e&&(eg(e)?n.length>3&&(o=function(t,r,i){return n.call(this,t,r,i,e)}):o=function(t,r,i){return n.call(this,t,D(e,r),i,e)}),i[t](o,...r)}function H(e,t,n){let r=ev(e);_(r,"iterate",E);let i=r[t](...n);return(-1===i||!1===i)&&ey(n[0])?(n[0]=ev(n[0]),r[t](...n)):i}function q(e,t,n=[]){x(),d++;let r=ev(e)[t].apply(e,n);return f(),C(),r}let W=(0,a.pD)("__proto__,__v_isRef,__isVue"),U=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>"arguments"!==e&&"caller"!==e).map(e=>Symbol[e]).filter(a.Bm));function V(e){(0,a.Bm)(e)||(e=String(e));let t=ev(this);return _(t,"has",e),t.hasOwnProperty(e)}class K{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if("__v_skip"===t)return e.__v_skip;let r=this._isReadonly,i=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return i;if("__v_raw"===t)return n===(r?i?ec:ea:i?el:es).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;let o=(0,a.cy)(e);if(!r){let e;if(o&&(e=F[t]))return e;if("hasOwnProperty"===t)return V}let s=Reflect.get(e,t,ex(e)?e:n);if(((0,a.Bm)(t)?U.has(t):W(t))||(r||_(e,"get",t),i))return s;if(ex(s)){let e=o&&(0,a.yI)(t)?s:s.value;return r&&(0,a.Gv)(e)?ed(e):e}return(0,a.Gv)(s)?r?ed(s):eh(s):s}}class J extends K{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t],o=(0,a.cy)(e)&&(0,a.yI)(t);if(!this._isShallow){let e=em(i);if(eg(n)||em(n)||(i=ev(i),n=ev(n)),!o&&ex(i)&&!ex(n))if(e)return!0;else return i.value=n,!0}let s=o?Number(t)<e.length:(0,a.$3)(e,t),l=Reflect.set(e,t,n,ex(e)?e:r);return e===ev(r)&&(s?(0,a.$H)(n,i)&&L(e,"set",t,n,i):L(e,"add",t,n)),l}deleteProperty(e,t){let n=(0,a.$3)(e,t),r=e[t],i=Reflect.deleteProperty(e,t);return i&&n&&L(e,"delete",t,void 0,r),i}has(e,t){let n=Reflect.has(e,t);return(0,a.Bm)(t)&&U.has(t)||_(e,"has",t),n}ownKeys(e){return _(e,"iterate",(0,a.cy)(e)?"length":N),Reflect.ownKeys(e)}}class Z extends K{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}let G=new J,Y=new Z,X=new J(!0),Q=e=>e,ee=e=>Reflect.getPrototypeOf(e);function et(e){return function(){return"delete"!==e&&("clear"===e?void 0:this)}}function en(e,t){let n=function(e,t){let n={get(n){let r=this.__v_raw,i=ev(r),o=ev(n);e||((0,a.$H)(n,o)&&_(i,"get",n),_(i,"get",o));let{has:s}=ee(i),l=t?Q:e?ek:eb;return s.call(i,n)?l(r.get(n)):s.call(i,o)?l(r.get(o)):void(r!==i&&r.get(n))},get size(){let t=this.__v_raw;return e||_(ev(t),"iterate",N),t.size},has(t){let n=this.__v_raw,r=ev(n),i=ev(t);return e||((0,a.$H)(t,i)&&_(r,"has",t),_(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)},forEach(n,r){let i=this,o=i.__v_raw,s=ev(o),l=t?Q:e?ek:eb;return e||_(s,"iterate",N),o.forEach((e,t)=>n.call(r,l(e),l(t),i))}};return(0,a.X$)(n,e?{add:et("add"),set:et("set"),delete:et("delete"),clear:et("clear")}:{add(e){t||eg(e)||em(e)||(e=ev(e));let n=ev(this);return ee(n).has.call(n,e)||(n.add(e),L(n,"add",e,e)),this},set(e,n){t||eg(n)||em(n)||(n=ev(n));let r=ev(this),{has:i,get:o}=ee(r),s=i.call(r,e);s||(e=ev(e),s=i.call(r,e));let l=o.call(r,e);return r.set(e,n),s?(0,a.$H)(n,l)&&L(r,"set",e,n,l):L(r,"add",e,n),this},delete(e){let t=ev(this),{has:n,get:r}=ee(t),i=n.call(t,e);i||(e=ev(e),i=n.call(t,e));let o=r?r.call(t,e):void 0,s=t.delete(e);return i&&L(t,"delete",e,void 0,o),s},clear(){let e=ev(this),t=0!==e.size,n=e.clear();return t&&L(e,"clear",void 0,void 0,void 0),n}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=function(...n){let i=this.__v_raw,o=ev(i),s=(0,a.CE)(o),l="entries"===r||r===Symbol.iterator&&s,c=i[r](...n),h=t?Q:e?ek:eb;return e||_(o,"iterate","keys"===r&&s?I:N),{next(){let{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:l?[h(e[0]),h(e[1])]:h(e),done:t}},[Symbol.iterator](){return this}}}}),n}(e,t);return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get((0,a.$3)(n,r)&&r in t?n:t,r,i)}let er={get:en(!1,!1)},ei={get:en(!1,!0)},eo={get:en(!0,!1)},es=new WeakMap,el=new WeakMap,ea=new WeakMap,ec=new WeakMap;function eh(e){return em(e)?e:ep(e,!1,G,er,es)}function eu(e){return ep(e,!1,X,ei,el)}function ed(e){return ep(e,!0,Y,eo,ea)}function ep(e,t,n,r,i){if(!(0,a.Gv)(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;let o=e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((0,a.Zf)(e));if(0===o)return e;let s=i.get(e);if(s)return s;let l=new Proxy(e,2===o?r:n);return i.set(e,l),l}function ef(e){return em(e)?ef(e.__v_raw):!!(e&&e.__v_isReactive)}function em(e){return!!(e&&e.__v_isReadonly)}function eg(e){return!!(e&&e.__v_isShallow)}function ey(e){return!!e&&!!e.__v_raw}function ev(e){let t=e&&e.__v_raw;return t?ev(t):e}function ew(e){return!(0,a.$3)(e,"__v_skip")&&Object.isExtensible(e)&&(0,a.yQ)(e,"__v_skip",!0),e}let eb=e=>(0,a.Gv)(e)?eh(e):e,ek=e=>(0,a.Gv)(e)?ed(e):e;function ex(e){return!!e&&!0===e.__v_isRef}function eC(e){return eM(e,!1)}function eS(e){return eM(e,!0)}function eM(e,t){return ex(e)?e:new eA(e,t)}class eA{constructor(e,t){this.dep=new T,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ev(e),this._value=t?e:eb(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){let t=this._rawValue,n=this.__v_isShallow||eg(e)||em(e);e=n?e:ev(e),(0,a.$H)(e,t)&&(this._rawValue=e,this._value=n?e:eb(e),this.dep.trigger())}}function eT(e){return ex(e)?e.value:e}let eO={get:(e,t,n)=>"__v_raw"===t?e:eT(Reflect.get(e,t,n)),set:(e,t,n,r)=>{let i=e[t];return ex(i)&&!ex(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function eN(e){return ef(e)?e:new Proxy(e,eO)}class eI{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new T(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=M-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags)&&i!==this)return p(this,!0),!0}get value(){let e=this.dep.track();return v(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function eE(e,t,n=!1){let r,i;return(0,a.Tn)(e)?r=e:(r=e.get,i=e.set),new eI(r,i,n)}let e_={},eL=new WeakMap;function eR(e,t,n=a.MZ){let i,o,s,c,{immediate:h,deep:d,once:p,scheduler:f,augmentJob:m,call:g}=n,y=e=>d?e:eg(e)||!1===d||0===d?eP(e,1):eP(e),v=!1,w=!1;if(ex(e)?(o=()=>e.value,v=eg(e)):ef(e)?(o=()=>y(e),v=!0):(0,a.cy)(e)?(w=!0,v=e.some(e=>ef(e)||eg(e)),o=()=>e.map(e=>ex(e)?e.value:ef(e)?y(e):(0,a.Tn)(e)?g?g(e,2):e():void 0)):o=(0,a.Tn)(e)?t?g?()=>g(e,2):e:()=>{if(s){x();try{s()}finally{C()}}let t=l;l=i;try{return g?g(e,3,[c]):e(c)}finally{l=t}}:a.tE,t&&d){let e=o,t=!0===d?1/0:d;o=()=>eP(e(),t)}let b=r,k=()=>{i.stop(),b&&b.active&&(0,a.TF)(b.effects,i)};if(p&&t){let e=t;t=(...t)=>{e(...t),k()}}let S=w?Array(e.length).fill(e_):e_,M=e=>{if(1&i.flags&&(i.dirty||e))if(t){let e=i.run();if(d||v||(w?e.some((e,t)=>(0,a.$H)(e,S[t])):(0,a.$H)(e,S))){s&&s();let n=l;l=i;try{let n=[e,S===e_?void 0:w&&S[0]===e_?[]:S,c];S=e,g?g(t,3,n):t(...n)}finally{l=n}}}else i.run()};return m&&m(M),(i=new u(o)).scheduler=f?()=>f(M,!1):M,c=e=>(function(e,t=!1,n=l){if(n){let t=eL.get(n);t||eL.set(n,t=[]),t.push(e)}})(e,!1,i),s=i.onStop=()=>{let e=eL.get(i);if(e){if(g)g(e,4);else for(let t of e)t();eL.delete(i)}},t?h?M(!0):S=i.run():f?f(M.bind(null,!0),!0):i.run(),k.pause=i.pause.bind(i),k.resume=i.resume.bind(i),k.stop=k,k}function eP(e,t=1/0,n){if(t<=0||!(0,a.Gv)(e)||e.__v_skip||((n=n||new Map).get(e)||0)>=t)return e;if(n.set(e,t),t--,ex(e))eP(e.value,t,n);else if((0,a.cy)(e))for(let r=0;r<e.length;r++)eP(e[r],t,n);else if((0,a.vM)(e)||(0,a.CE)(e))e.forEach(e=>{eP(e,t,n)});else if((0,a.Qd)(e)){for(let r in e)eP(e[r],t,n);for(let r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&eP(e[r],t,n)}return e}},99439:(e,t,n)=>{"use strict";n.d(t,{BN:()=>i,E3:()=>r,xT:()=>c});for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},o="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),s="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),l=0;l<10;l++)r[48+l]=r[96+l]=String(l);for(var l=1;l<=24;l++)r[l+111]="F"+l;for(var l=65;l<=90;l++)r[l]=String.fromCharCode(l+32),i[l]=String.fromCharCode(l);for(var a in r)i.hasOwnProperty(a)||(i[a]=r[a]);function c(e){var t=!(o&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||s&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?i:r)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}}}]);